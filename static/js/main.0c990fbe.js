/*! For license information please see main.0c990fbe.js.LICENSE.txt */
(()=>{var t={207:function(t){t.exports=function(){"use strict";function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function n(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&s(t,e)}function r(t){return r=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},r(t)}function s(t,e){return s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},s(t,e)}function o(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function a(t,e,n){return a=o()?Reflect.construct:function(t,e,n){var i=[null];i.push.apply(i,e);var r=new(Function.bind.apply(t,i));return n&&s(r,n.prototype),r},a.apply(null,arguments)}function l(t){var e="function"==typeof Map?new Map:void 0;return l=function(t){if(null===t||(n=t,-1===Function.toString.call(n).indexOf("[native code]")))return t;var n;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,i)}function i(){return a(t,arguments,r(this).constructor)}return i.prototype=Object.create(t.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),s(i,t)},l(t)}function u(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function h(t,e){if(e&&("object"==typeof e||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return u(t)}function c(t){var e=o();return function(){var n,i=r(t);if(e){var s=r(this).constructor;n=Reflect.construct(i,arguments,s)}else n=i.apply(this,arguments);return h(this,n)}}function d(t,e,n){return d="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var i=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=r(t)););return t}(t,e);if(i){var s=Object.getOwnPropertyDescriptor(i,e);return s.get?s.get.call(n):s.value}},d(t,e,n||t)}function f(t){return function(t){if(Array.isArray(t))return p(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||g(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(t,e){if(t){if("string"==typeof t)return p(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?p(t,e):void 0}}function p(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function m(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=g(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,o=!0,a=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){a=!0,s=t},f:function(){try{o||null==n.return||n.return()}finally{if(a)throw s}}}}var y=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:"getEndCapStyle",value:function(){return this._endCapStyle}},{key:"isSingleSided",value:function(){return this._isSingleSided}},{key:"setQuadrantSegments",value:function(t){this._quadrantSegments=t,0===this._quadrantSegments&&(this._joinStyle=e.JOIN_BEVEL),this._quadrantSegments<0&&(this._joinStyle=e.JOIN_MITRE,this._mitreLimit=Math.abs(this._quadrantSegments)),t<=0&&(this._quadrantSegments=1),this._joinStyle!==e.JOIN_ROUND&&(this._quadrantSegments=e.DEFAULT_QUADRANT_SEGMENTS)}},{key:"getJoinStyle",value:function(){return this._joinStyle}},{key:"setJoinStyle",value:function(t){this._joinStyle=t}},{key:"setSimplifyFactor",value:function(t){this._simplifyFactor=t<0?0:t}},{key:"getSimplifyFactor",value:function(){return this._simplifyFactor}},{key:"getQuadrantSegments",value:function(){return this._quadrantSegments}},{key:"setEndCapStyle",value:function(t){this._endCapStyle=t}},{key:"getMitreLimit",value:function(){return this._mitreLimit}},{key:"setMitreLimit",value:function(t){this._mitreLimit=t}},{key:"setSingleSided",value:function(t){this._isSingleSided=t}}],[{key:"constructor_",value:function(){if(this._quadrantSegments=e.DEFAULT_QUADRANT_SEGMENTS,this._endCapStyle=e.CAP_ROUND,this._joinStyle=e.JOIN_ROUND,this._mitreLimit=e.DEFAULT_MITRE_LIMIT,this._isSingleSided=!1,this._simplifyFactor=e.DEFAULT_SIMPLIFY_FACTOR,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this.setQuadrantSegments(t)}else if(2===arguments.length){var n=arguments[0],i=arguments[1];this.setQuadrantSegments(n),this.setEndCapStyle(i)}else if(4===arguments.length){var r=arguments[0],s=arguments[1],o=arguments[2],a=arguments[3];this.setQuadrantSegments(r),this.setEndCapStyle(s),this.setJoinStyle(o),this.setMitreLimit(a)}}},{key:"bufferDistanceError",value:function(t){var e=Math.PI/2/t;return 1-Math.cos(e/2)}}]),e}();y.CAP_ROUND=1,y.CAP_FLAT=2,y.CAP_SQUARE=3,y.JOIN_ROUND=1,y.JOIN_MITRE=2,y.JOIN_BEVEL=3,y.DEFAULT_QUADRANT_SEGMENTS=8,y.DEFAULT_MITRE_LIMIT=5,y.DEFAULT_SIMPLIFY_FACTOR=.01;var _=function(e){i(s,e);var r=c(s);function s(e){var n;return t(this,s),(n=r.call(this,e)).name=Object.keys({Exception:s})[0],n}return n(s,[{key:"toString",value:function(){return this.message}}]),s}(l(Error)),v=function(e){i(r,e);var n=c(r);function r(e){var i;return t(this,r),(i=n.call(this,e)).name=Object.keys({IllegalArgumentException:r})[0],i}return r}(_),x=function(){function e(){t(this,e)}return n(e,[{key:"filter",value:function(t){}}]),e}();function w(){}function k(){}function E(){}var S,b,C,I,T,R,N,L,M=function(){function e(){t(this,e)}return n(e,null,[{key:"equalsWithTolerance",value:function(t,e,n){return Math.abs(t-e)<=n}}]),e}(),P=function(){function e(n,i){t(this,e),this.low=i||0,this.high=n||0}return n(e,null,[{key:"toBinaryString",value:function(t){var e,n="";for(e=2147483648;e>0;e>>>=1)n+=(t.high&e)===e?"1":"0";for(e=2147483648;e>0;e>>>=1)n+=(t.low&e)===e?"1":"0";return n}}]),e}();function O(){}function A(){}O.NaN=NaN,O.isNaN=function(t){return Number.isNaN(t)},O.isInfinite=function(t){return!Number.isFinite(t)},O.MAX_VALUE=Number.MAX_VALUE,O.POSITIVE_INFINITY=Number.POSITIVE_INFINITY,O.NEGATIVE_INFINITY=Number.NEGATIVE_INFINITY,"function"==typeof Float64Array&&"function"==typeof Int32Array?(R=2146435072,N=new Float64Array(1),L=new Int32Array(N.buffer),O.doubleToLongBits=function(t){N[0]=t;var e=0|L[0],n=0|L[1];return(n&R)===R&&0!=(1048575&n)&&0!==e&&(e=0,n=2146959360),new P(n,e)},O.longBitsToDouble=function(t){return L[0]=t.low,L[1]=t.high,N[0]}):(S=1023,b=Math.log2,C=Math.floor,I=Math.pow,T=function(){for(var t=53;t>0;t--){var e=I(2,t)-1;if(C(b(e))+1===t)return e}return 0}(),O.doubleToLongBits=function(t){var e,n,i,r,s,o,a,l,u;if(t<0||1/t===Number.NEGATIVE_INFINITY?(o=1<<31,t=-t):o=0,0===t)return new P(l=o,u=0);if(t===1/0)return new P(l=2146435072|o,u=0);if(t!=t)return new P(l=2146959360,u=0);if(r=0,u=0,(e=C(t))>1)if(e<=T)(r=C(b(e)))<=20?(u=0,l=e<<20-r&1048575):(u=e%(n=I(2,i=r-20))<<32-i,l=e/n&1048575);else for(i=e,u=0;0!==(i=C(n=i/2));)r++,u>>>=1,u|=(1&l)<<31,l>>>=1,n!==i&&(l|=524288);if(a=r+S,s=0===e,e=t-e,r<52&&0!==e)for(i=0;;){if((n=2*e)>=1?(e=n-1,s?(a--,s=!1):(i<<=1,i|=1,r++)):(e=n,s?0==--a&&(r++,s=!1):(i<<=1,r++)),20===r)l|=i,i=0;else if(52===r){u|=i;break}if(1===n){r<20?l|=i<<20-r:r<52&&(u|=i<<52-r);break}}return l|=a<<20,new P(l|=o,u)},O.longBitsToDouble=function(t){var e,n,i,r,s=t.high,o=t.low,a=s&1<<31?-1:1;for(i=((2146435072&s)>>20)-S,r=0,n=1<<19,e=1;e<=20;e++)s&n&&(r+=I(2,-e)),n>>>=1;for(n=1<<31,e=21;e<=52;e++)o&n&&(r+=I(2,-e)),n>>>=1;if(-1023===i){if(0===r)return 0*a;i=-1022}else{if(1024===i)return 0===r?a/0:NaN;r+=1}return a*r*I(2,i)});var F=function(e){i(r,e);var n=c(r);function r(e){var i;return t(this,r),(i=n.call(this,e)).name=Object.keys({RuntimeException:r})[0],i}return r}(_),D=function(e){i(s,e);var r=c(s);function s(){var e;return t(this,s),e=r.call(this),s.constructor_.apply(u(e),arguments),e}return n(s,null,[{key:"constructor_",value:function(){if(0===arguments.length)F.constructor_.call(this);else if(1===arguments.length){var t=arguments[0];F.constructor_.call(this,t)}}}]),s}(F),z=function(){function e(){t(this,e)}return n(e,null,[{key:"shouldNeverReachHere",value:function(){if(0===arguments.length)e.shouldNeverReachHere(null);else if(1===arguments.length){var t=arguments[0];throw new D("Should never reach here"+(null!==t?": "+t:""))}}},{key:"isTrue",value:function(){if(1===arguments.length){var t=arguments[0];e.isTrue(t,null)}else if(2===arguments.length){var n=arguments[1];if(!arguments[0])throw null===n?new D:new D(n)}}},{key:"equals",value:function(){if(2===arguments.length){var t=arguments[0],n=arguments[1];e.equals(t,n,null)}else if(3===arguments.length){var i=arguments[0],r=arguments[1],s=arguments[2];if(!r.equals(i))throw new D("Expected "+i+" but encountered "+r+(null!==s?": "+s:""))}}}]),e}(),G=new ArrayBuffer(8),j=new Float64Array(G),Y=new Int32Array(G),B=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:"getM",value:function(){return O.NaN}},{key:"setOrdinate",value:function(t,n){switch(t){case e.X:this.x=n;break;case e.Y:this.y=n;break;case e.Z:this.setZ(n);break;default:throw new v("Invalid ordinate index: "+t)}}},{key:"equals2D",value:function(){if(1===arguments.length){var t=arguments[0];return this.x===t.x&&this.y===t.y}if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!M.equalsWithTolerance(this.x,e.x,n)&&!!M.equalsWithTolerance(this.y,e.y,n)}}},{key:"setM",value:function(t){throw new v("Invalid ordinate index: "+e.M)}},{key:"getZ",value:function(){return this.z}},{key:"getOrdinate",value:function(t){switch(t){case e.X:return this.x;case e.Y:return this.y;case e.Z:return this.getZ()}throw new v("Invalid ordinate index: "+t)}},{key:"equals3D",value:function(t){return this.x===t.x&&this.y===t.y&&(this.getZ()===t.getZ()||O.isNaN(this.getZ())&&O.isNaN(t.getZ()))}},{key:"equals",value:function(t){return t instanceof e&&this.equals2D(t)}},{key:"equalInZ",value:function(t,e){return M.equalsWithTolerance(this.getZ(),t.getZ(),e)}},{key:"setX",value:function(t){this.x=t}},{key:"compareTo",value:function(t){var e=t;return this.x<e.x?-1:this.x>e.x?1:this.y<e.y?-1:this.y>e.y?1:0}},{key:"getX",value:function(){return this.x}},{key:"setZ",value:function(t){this.z=t}},{key:"clone",value:function(){try{return null}catch(t){if(t instanceof CloneNotSupportedException)return z.shouldNeverReachHere("this shouldn't happen because this class is Cloneable"),null;throw t}}},{key:"copy",value:function(){return new e(this)}},{key:"toString",value:function(){return"("+this.x+", "+this.y+", "+this.getZ()+")"}},{key:"distance3D",value:function(t){var e=this.x-t.x,n=this.y-t.y,i=this.getZ()-t.getZ();return Math.sqrt(e*e+n*n+i*i)}},{key:"getY",value:function(){return this.y}},{key:"setY",value:function(t){this.y=t}},{key:"distance",value:function(t){var e=this.x-t.x,n=this.y-t.y;return Math.sqrt(e*e+n*n)}},{key:"hashCode",value:function(){var t=17;return 37*(t=37*t+e.hashCode(this.x))+e.hashCode(this.y)}},{key:"setCoordinate",value:function(t){this.x=t.x,this.y=t.y,this.z=t.getZ()}},{key:"interfaces_",get:function(){return[w,k,E]}}],[{key:"constructor_",value:function(){if(this.x=null,this.y=null,this.z=null,0===arguments.length)e.constructor_.call(this,0,0);else if(1===arguments.length){var t=arguments[0];e.constructor_.call(this,t.x,t.y,t.getZ())}else if(2===arguments.length){var n=arguments[0],i=arguments[1];e.constructor_.call(this,n,i,e.NULL_ORDINATE)}else if(3===arguments.length){var r=arguments[0],s=arguments[1],o=arguments[2];this.x=r,this.y=s,this.z=o}}},{key:"hashCode",value:function(t){return j[0]=t,Y[0]^Y[1]}}]),e}(),U=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:"compare",value:function(t,n){var i=e.compare(t.x,n.x);if(0!==i)return i;var r=e.compare(t.y,n.y);return 0!==r?r:this._dimensionsToTest<=2?0:e.compare(t.getZ(),n.getZ())}},{key:"interfaces_",get:function(){return[A]}}],[{key:"constructor_",value:function(){if(this._dimensionsToTest=2,0===arguments.length)e.constructor_.call(this,2);else if(1===arguments.length){var t=arguments[0];if(2!==t&&3!==t)throw new v("only 2 or 3 dimensions may be specified");this._dimensionsToTest=t}}},{key:"compare",value:function(t,e){return t<e?-1:t>e?1:O.isNaN(t)?O.isNaN(e)?0:-1:O.isNaN(e)?1:0}}]),e}();B.DimensionalComparator=U,B.NULL_ORDINATE=O.NaN,B.X=0,B.Y=1,B.Z=2,B.M=3;var X=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:"getArea",value:function(){return this.getWidth()*this.getHeight()}},{key:"equals",value:function(t){if(!(t instanceof e))return!1;var n=t;return this.isNull()?n.isNull():this._maxx===n.getMaxX()&&this._maxy===n.getMaxY()&&this._minx===n.getMinX()&&this._miny===n.getMinY()}},{key:"intersection",value:function(t){if(this.isNull()||t.isNull()||!this.intersects(t))return new e;var n=this._minx>t._minx?this._minx:t._minx,i=this._miny>t._miny?this._miny:t._miny;return new e(n,this._maxx<t._maxx?this._maxx:t._maxx,i,this._maxy<t._maxy?this._maxy:t._maxy)}},{key:"isNull",value:function(){return this._maxx<this._minx}},{key:"getMaxX",value:function(){return this._maxx}},{key:"covers",value:function(){if(1===arguments.length){if(arguments[0]instanceof B){var t=arguments[0];return this.covers(t.x,t.y)}if(arguments[0]instanceof e){var n=arguments[0];return!this.isNull()&&!n.isNull()&&n.getMinX()>=this._minx&&n.getMaxX()<=this._maxx&&n.getMinY()>=this._miny&&n.getMaxY()<=this._maxy}}else if(2===arguments.length){var i=arguments[0],r=arguments[1];return!this.isNull()&&i>=this._minx&&i<=this._maxx&&r>=this._miny&&r<=this._maxy}}},{key:"intersects",value:function(){if(1===arguments.length){if(arguments[0]instanceof e){var t=arguments[0];return!this.isNull()&&!t.isNull()&&!(t._minx>this._maxx||t._maxx<this._minx||t._miny>this._maxy||t._maxy<this._miny)}if(arguments[0]instanceof B){var n=arguments[0];return this.intersects(n.x,n.y)}}else if(2===arguments.length){if(arguments[0]instanceof B&&arguments[1]instanceof B){var i=arguments[0],r=arguments[1];return!this.isNull()&&!((i.x<r.x?i.x:r.x)>this._maxx)&&!((i.x>r.x?i.x:r.x)<this._minx)&&!((i.y<r.y?i.y:r.y)>this._maxy)&&!((i.y>r.y?i.y:r.y)<this._miny)}if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var s=arguments[0],o=arguments[1];return!this.isNull()&&!(s>this._maxx||s<this._minx||o>this._maxy||o<this._miny)}}}},{key:"getMinY",value:function(){return this._miny}},{key:"getDiameter",value:function(){if(this.isNull())return 0;var t=this.getWidth(),e=this.getHeight();return Math.sqrt(t*t+e*e)}},{key:"getMinX",value:function(){return this._minx}},{key:"expandToInclude",value:function(){if(1===arguments.length){if(arguments[0]instanceof B){var t=arguments[0];this.expandToInclude(t.x,t.y)}else if(arguments[0]instanceof e){var n=arguments[0];if(n.isNull())return null;this.isNull()?(this._minx=n.getMinX(),this._maxx=n.getMaxX(),this._miny=n.getMinY(),this._maxy=n.getMaxY()):(n._minx<this._minx&&(this._minx=n._minx),n._maxx>this._maxx&&(this._maxx=n._maxx),n._miny<this._miny&&(this._miny=n._miny),n._maxy>this._maxy&&(this._maxy=n._maxy))}}else if(2===arguments.length){var i=arguments[0],r=arguments[1];this.isNull()?(this._minx=i,this._maxx=i,this._miny=r,this._maxy=r):(i<this._minx&&(this._minx=i),i>this._maxx&&(this._maxx=i),r<this._miny&&(this._miny=r),r>this._maxy&&(this._maxy=r))}}},{key:"minExtent",value:function(){if(this.isNull())return 0;var t=this.getWidth(),e=this.getHeight();return t<e?t:e}},{key:"getWidth",value:function(){return this.isNull()?0:this._maxx-this._minx}},{key:"compareTo",value:function(t){var e=t;return this.isNull()?e.isNull()?0:-1:e.isNull()?1:this._minx<e._minx?-1:this._minx>e._minx?1:this._miny<e._miny?-1:this._miny>e._miny?1:this._maxx<e._maxx?-1:this._maxx>e._maxx?1:this._maxy<e._maxy?-1:this._maxy>e._maxy?1:0}},{key:"translate",value:function(t,e){if(this.isNull())return null;this.init(this.getMinX()+t,this.getMaxX()+t,this.getMinY()+e,this.getMaxY()+e)}},{key:"copy",value:function(){return new e(this)}},{key:"toString",value:function(){return"Env["+this._minx+" : "+this._maxx+", "+this._miny+" : "+this._maxy+"]"}},{key:"setToNull",value:function(){this._minx=0,this._maxx=-1,this._miny=0,this._maxy=-1}},{key:"disjoint",value:function(t){return!(!this.isNull()&&!t.isNull())||t._minx>this._maxx||t._maxx<this._minx||t._miny>this._maxy||t._maxy<this._miny}},{key:"getHeight",value:function(){return this.isNull()?0:this._maxy-this._miny}},{key:"maxExtent",value:function(){if(this.isNull())return 0;var t=this.getWidth(),e=this.getHeight();return t>e?t:e}},{key:"expandBy",value:function(){if(1===arguments.length){var t=arguments[0];this.expandBy(t,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this.isNull())return null;this._minx-=e,this._maxx+=e,this._miny-=n,this._maxy+=n,(this._minx>this._maxx||this._miny>this._maxy)&&this.setToNull()}}},{key:"contains",value:function(){if(1===arguments.length){if(arguments[0]instanceof e){var t=arguments[0];return this.covers(t)}if(arguments[0]instanceof B){var n=arguments[0];return this.covers(n)}}else if(2===arguments.length){var i=arguments[0],r=arguments[1];return this.covers(i,r)}}},{key:"centre",value:function(){return this.isNull()?null:new B((this.getMinX()+this.getMaxX())/2,(this.getMinY()+this.getMaxY())/2)}},{key:"init",value:function(){if(0===arguments.length)this.setToNull();else if(1===arguments.length){if(arguments[0]instanceof B){var t=arguments[0];this.init(t.x,t.x,t.y,t.y)}else if(arguments[0]instanceof e){var n=arguments[0];this._minx=n._minx,this._maxx=n._maxx,this._miny=n._miny,this._maxy=n._maxy}}else if(2===arguments.length){var i=arguments[0],r=arguments[1];this.init(i.x,r.x,i.y,r.y)}else if(4===arguments.length){var s=arguments[0],o=arguments[1],a=arguments[2],l=arguments[3];s<o?(this._minx=s,this._maxx=o):(this._minx=o,this._maxx=s),a<l?(this._miny=a,this._maxy=l):(this._miny=l,this._maxy=a)}}},{key:"getMaxY",value:function(){return this._maxy}},{key:"distance",value:function(t){if(this.intersects(t))return 0;var e=0;this._maxx<t._minx?e=t._minx-this._maxx:this._minx>t._maxx&&(e=this._minx-t._maxx);var n=0;return this._maxy<t._miny?n=t._miny-this._maxy:this._miny>t._maxy&&(n=this._miny-t._maxy),0===e?n:0===n?e:Math.sqrt(e*e+n*n)}},{key:"hashCode",value:function(){var t=17;return 37*(t=37*(t=37*(t=37*t+B.hashCode(this._minx))+B.hashCode(this._maxx))+B.hashCode(this._miny))+B.hashCode(this._maxy)}},{key:"interfaces_",get:function(){return[w,E]}}],[{key:"constructor_",value:function(){if(this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,0===arguments.length)this.init();else if(1===arguments.length){if(arguments[0]instanceof B){var t=arguments[0];this.init(t.x,t.x,t.y,t.y)}else if(arguments[0]instanceof e){var n=arguments[0];this.init(n)}}else if(2===arguments.length){var i=arguments[0],r=arguments[1];this.init(i.x,r.x,i.y,r.y)}else if(4===arguments.length){var s=arguments[0],o=arguments[1],a=arguments[2],l=arguments[3];this.init(s,o,a,l)}}},{key:"intersects",value:function(){if(3===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2];return n.x>=(t.x<e.x?t.x:e.x)&&n.x<=(t.x>e.x?t.x:e.x)&&n.y>=(t.y<e.y?t.y:e.y)&&n.y<=(t.y>e.y?t.y:e.y)}if(4===arguments.length){var i=arguments[0],r=arguments[1],s=arguments[2],o=arguments[3],a=Math.min(s.x,o.x),l=Math.max(s.x,o.x),u=Math.min(i.x,r.x),h=Math.max(i.x,r.x);return!(u>l)&&!(h<a)&&(a=Math.min(s.y,o.y),l=Math.max(s.y,o.y),u=Math.min(i.y,r.y),h=Math.max(i.y,r.y),!(u>l)&&!(h<a))}}}]),e}(),q=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:"isGeometryCollection",value:function(){return this.getTypeCode()===e.TYPECODE_GEOMETRYCOLLECTION}},{key:"getFactory",value:function(){return this._factory}},{key:"getGeometryN",value:function(t){return this}},{key:"getArea",value:function(){return 0}},{key:"isRectangle",value:function(){return!1}},{key:"equalsExact",value:function(t){return this===t||this.equalsExact(t,0)}},{key:"geometryChanged",value:function(){this.apply(e.geometryChangedFilter)}},{key:"geometryChangedAction",value:function(){this._envelope=null}},{key:"equalsNorm",value:function(t){return null!==t&&this.norm().equalsExact(t.norm())}},{key:"getLength",value:function(){return 0}},{key:"getNumGeometries",value:function(){return 1}},{key:"compareTo",value:function(){var t;if(1===arguments.length){var e=arguments[0];return t=e,this.getTypeCode()!==t.getTypeCode()?this.getTypeCode()-t.getTypeCode():this.isEmpty()&&t.isEmpty()?0:this.isEmpty()?-1:t.isEmpty()?1:this.compareToSameClass(e)}if(2===arguments.length){var n=arguments[0],i=arguments[1];return t=n,this.getTypeCode()!==t.getTypeCode()?this.getTypeCode()-t.getTypeCode():this.isEmpty()&&t.isEmpty()?0:this.isEmpty()?-1:t.isEmpty()?1:this.compareToSameClass(n,i)}}},{key:"getUserData",value:function(){return this._userData}},{key:"getSRID",value:function(){return this._SRID}},{key:"getEnvelope",value:function(){return this.getFactory().toGeometry(this.getEnvelopeInternal())}},{key:"checkNotGeometryCollection",value:function(t){if(t.getTypeCode()===e.TYPECODE_GEOMETRYCOLLECTION)throw new v("This method does not support GeometryCollection arguments")}},{key:"equal",value:function(t,e,n){return 0===n?t.equals(e):t.distance(e)<=n}},{key:"norm",value:function(){var t=this.copy();return t.normalize(),t}},{key:"reverse",value:function(){var t=this.reverseInternal();return null!=this.envelope&&(t.envelope=this.envelope.copy()),t.setSRID(this.getSRID()),t}},{key:"copy",value:function(){var t=this.copyInternal();return t.envelope=null==this._envelope?null:this._envelope.copy(),t._SRID=this._SRID,t._userData=this._userData,t}},{key:"getPrecisionModel",value:function(){return this._factory.getPrecisionModel()}},{key:"getEnvelopeInternal",value:function(){return null===this._envelope&&(this._envelope=this.computeEnvelopeInternal()),new X(this._envelope)}},{key:"setSRID",value:function(t){this._SRID=t}},{key:"setUserData",value:function(t){this._userData=t}},{key:"compare",value:function(t,e){for(var n=t.iterator(),i=e.iterator();n.hasNext()&&i.hasNext();){var r=n.next(),s=i.next(),o=r.compareTo(s);if(0!==o)return o}return n.hasNext()?1:i.hasNext()?-1:0}},{key:"hashCode",value:function(){return this.getEnvelopeInternal().hashCode()}},{key:"isEquivalentClass",value:function(t){return this.getClass()===t.getClass()}},{key:"isGeometryCollectionOrDerived",value:function(){return this.getTypeCode()===e.TYPECODE_GEOMETRYCOLLECTION||this.getTypeCode()===e.TYPECODE_MULTIPOINT||this.getTypeCode()===e.TYPECODE_MULTILINESTRING||this.getTypeCode()===e.TYPECODE_MULTIPOLYGON}},{key:"interfaces_",get:function(){return[k,w,E]}},{key:"getClass",value:function(){return e}}],[{key:"hasNonEmptyElements",value:function(t){for(var e=0;e<t.length;e++)if(!t[e].isEmpty())return!0;return!1}},{key:"hasNullElements",value:function(t){for(var e=0;e<t.length;e++)if(null===t[e])return!0;return!1}}]),e}();q.constructor_=function(t){t&&(this._envelope=null,this._userData=null,this._factory=t,this._SRID=t.getSRID())},q.TYPECODE_POINT=0,q.TYPECODE_MULTIPOINT=1,q.TYPECODE_LINESTRING=2,q.TYPECODE_LINEARRING=3,q.TYPECODE_MULTILINESTRING=4,q.TYPECODE_POLYGON=5,q.TYPECODE_MULTIPOLYGON=6,q.TYPECODE_GEOMETRYCOLLECTION=7,q.TYPENAME_POINT="Point",q.TYPENAME_MULTIPOINT="MultiPoint",q.TYPENAME_LINESTRING="LineString",q.TYPENAME_LINEARRING="LinearRing",q.TYPENAME_MULTILINESTRING="MultiLineString",q.TYPENAME_POLYGON="Polygon",q.TYPENAME_MULTIPOLYGON="MultiPolygon",q.TYPENAME_GEOMETRYCOLLECTION="GeometryCollection",q.geometryChangedFilter={get interfaces_(){return[x]},filter:function(t){t.geometryChangedAction()}};var W=function(){function e(){t(this,e)}return n(e,null,[{key:"toLocationSymbol",value:function(t){switch(t){case e.EXTERIOR:return"e";case e.BOUNDARY:return"b";case e.INTERIOR:return"i";case e.NONE:return"-"}throw new v("Unknown location value: "+t)}}]),e}();W.INTERIOR=0,W.BOUNDARY=1,W.EXTERIOR=2,W.NONE=-1;var V=function(){function e(){t(this,e)}return n(e,[{key:"add",value:function(){}},{key:"addAll",value:function(){}},{key:"isEmpty",value:function(){}},{key:"iterator",value:function(){}},{key:"size",value:function(){}},{key:"toArray",value:function(){}},{key:"remove",value:function(){}}]),e}(),H=function(e){i(r,e);var n=c(r);function r(e){var i;return t(this,r),(i=n.call(this,e)).name=Object.keys({NoSuchElementException:r})[0],i}return r}(_),K=function(e){i(r,e);var n=c(r);function r(e){var i;return t(this,r),(i=n.call(this,e)).name=Object.keys({UnsupportedOperationException:r})[0],i}return r}(_),Z=function(e){i(s,e);var r=c(s);function s(){return t(this,s),r.apply(this,arguments)}return n(s,[{key:"contains",value:function(){}}]),s}(V),$=function(e,r){i(o,e);var s=c(o);function o(e){var n;return t(this,o),(n=s.call(this)).map=new Map,e instanceof V&&n.addAll(e),n}return n(o,[{key:"contains",value:function(t){var e=t.hashCode?t.hashCode():t;return!!this.map.has(e)}},{key:"add",value:function(t){var e=t.hashCode?t.hashCode():t;return!this.map.has(e)&&!!this.map.set(e,t)}},{key:"addAll",value:function(t){var e,n=m(t);try{for(n.s();!(e=n.n()).done;){var i=e.value;this.add(i)}}catch(t){n.e(t)}finally{n.f()}return!0}},{key:"remove",value:function(){throw new K}},{key:"size",value:function(){return this.map.size}},{key:"isEmpty",value:function(){return 0===this.map.size}},{key:"toArray",value:function(){return Array.from(this.map.values())}},{key:"iterator",value:function(){return new J(this.map)}},{key:r,value:function(){return this.map}}]),o}(Z,Symbol.iterator),J=function(){function e(n){t(this,e),this.iterator=n.values();var i=this.iterator.next(),r=i.done,s=i.value;this.done=r,this.value=s}return n(e,[{key:"next",value:function(){if(this.done)throw new H;var t=this.value,e=this.iterator.next(),n=e.done,i=e.value;return this.done=n,this.value=i,t}},{key:"hasNext",value:function(){return!this.done}},{key:"remove",value:function(){throw new K}}]),e}(),Q=function(){function e(){t(this,e)}return n(e,null,[{key:"opposite",value:function(t){return t===e.LEFT?e.RIGHT:t===e.RIGHT?e.LEFT:t}}]),e}();Q.ON=0,Q.LEFT=1,Q.RIGHT=2;var tt=function(e){i(r,e);var n=c(r);function r(e){var i;return t(this,r),(i=n.call(this,e)).name=Object.keys({EmptyStackException:r})[0],i}return r}(_),et=function(e){i(r,e);var n=c(r);function r(e){var i;return t(this,r),(i=n.call(this,e)).name=Object.keys({IndexOutOfBoundsException:r})[0],i}return r}(_),nt=function(e){i(s,e);var r=c(s);function s(){return t(this,s),r.apply(this,arguments)}return n(s,[{key:"get",value:function(){}},{key:"set",value:function(){}},{key:"isEmpty",value:function(){}}]),s}(V),it=function(e){i(s,e);var r=c(s);function s(){var e;return t(this,s),(e=r.call(this)).array=[],e}return n(s,[{key:"add",value:function(t){return this.array.push(t),!0}},{key:"get",value:function(t){if(t<0||t>=this.size())throw new et;return this.array[t]}},{key:"push",value:function(t){return this.array.push(t),t}},{key:"pop",value:function(){if(0===this.array.length)throw new tt;return this.array.pop()}},{key:"peek",value:function(){if(0===this.array.length)throw new tt;return this.array[this.array.length-1]}},{key:"empty",value:function(){return 0===this.array.length}},{key:"isEmpty",value:function(){return this.empty()}},{key:"search",value:function(t){return this.array.indexOf(t)}},{key:"size",value:function(){return this.array.length}},{key:"toArray",value:function(){return this.array.slice()}}]),s}(nt);function rt(t,e){return t.interfaces_&&t.interfaces_.indexOf(e)>-1}var st=function(){function e(n){t(this,e),this.str=n}return n(e,[{key:"append",value:function(t){this.str+=t}},{key:"setCharAt",value:function(t,e){this.str=this.str.substr(0,t)+e+this.str.substr(t+1)}},{key:"toString",value:function(){return this.str}}]),e}(),ot=function(){function e(n){t(this,e),this.value=n}return n(e,[{key:"intValue",value:function(){return this.value}},{key:"compareTo",value:function(t){return this.value<t?-1:this.value>t?1:0}}],[{key:"compare",value:function(t,e){return t<e?-1:t>e?1:0}},{key:"isNan",value:function(t){return Number.isNaN(t)}},{key:"valueOf",value:function(t){return new e(t)}}]),e}(),at=function(){function e(){t(this,e)}return n(e,null,[{key:"isWhitespace",value:function(t){return t<=32&&t>=0||127===t}},{key:"toUpperCase",value:function(t){return t.toUpperCase()}}]),e}(),lt=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:"le",value:function(t){return this._hi<t._hi||this._hi===t._hi&&this._lo<=t._lo}},{key:"extractSignificantDigits",value:function(t,n){var i=this.abs(),r=e.magnitude(i._hi),s=e.TEN.pow(r);(i=i.divide(s)).gt(e.TEN)?(i=i.divide(e.TEN),r+=1):i.lt(e.ONE)&&(i=i.multiply(e.TEN),r-=1);for(var o=r+1,a=new st,l=e.MAX_PRINT_DIGITS-1,u=0;u<=l;u++){t&&u===o&&a.append(".");var h=Math.trunc(i._hi);if(h<0)break;var c=!1,d=0;h>9?(c=!0,d="9"):d="0"+h,a.append(d),i=i.subtract(e.valueOf(h)).multiply(e.TEN),c&&i.selfAdd(e.TEN);var f=!0,g=e.magnitude(i._hi);if(g<0&&Math.abs(g)>=l-u&&(f=!1),!f)break}return n[0]=r,a.toString()}},{key:"sqr",value:function(){return this.multiply(this)}},{key:"doubleValue",value:function(){return this._hi+this._lo}},{key:"subtract",value:function(){if(arguments[0]instanceof e){var t=arguments[0];return this.add(t.negate())}if("number"==typeof arguments[0]){var n=arguments[0];return this.add(-n)}}},{key:"equals",value:function(){if(1===arguments.length&&arguments[0]instanceof e){var t=arguments[0];return this._hi===t._hi&&this._lo===t._lo}}},{key:"isZero",value:function(){return 0===this._hi&&0===this._lo}},{key:"selfSubtract",value:function(){if(arguments[0]instanceof e){var t=arguments[0];return this.isNaN()?this:this.selfAdd(-t._hi,-t._lo)}if("number"==typeof arguments[0]){var n=arguments[0];return this.isNaN()?this:this.selfAdd(-n,0)}}},{key:"getSpecialNumberString",value:function(){return this.isZero()?"0.0":this.isNaN()?"NaN ":null}},{key:"min",value:function(t){return this.le(t)?this:t}},{key:"selfDivide",value:function(){if(1===arguments.length){if(arguments[0]instanceof e){var t=arguments[0];return this.selfDivide(t._hi,t._lo)}if("number"==typeof arguments[0]){var n=arguments[0];return this.selfDivide(n,0)}}else if(2===arguments.length){var i=arguments[0],r=arguments[1],s=null,o=null,a=null,l=null,u=null,h=null,c=null,d=null;return u=this._hi/i,d=(s=(h=e.SPLIT*u)-(s=h-u))*(a=(d=e.SPLIT*i)-(a=d-i))-(c=u*i)+s*(l=i-a)+(o=u-s)*a+o*l,d=u+(h=(this._hi-c-d+this._lo-u*r)/i),this._hi=d,this._lo=u-d+h,this}}},{key:"dump",value:function(){return"DD<"+this._hi+", "+this._lo+">"}},{key:"divide",value:function(){if(arguments[0]instanceof e){var t=arguments[0],n=null,i=null,r=null,s=null,o=null,a=null,l=null,u=null;return i=(o=this._hi/t._hi)-(n=(a=e.SPLIT*o)-(n=a-o)),u=n*(r=(u=e.SPLIT*t._hi)-(r=u-t._hi))-(l=o*t._hi)+n*(s=t._hi-r)+i*r+i*s,new e(u=o+(a=(this._hi-l-u+this._lo-o*t._lo)/t._hi),o-u+a)}if("number"==typeof arguments[0]){var h=arguments[0];return O.isNaN(h)?e.createNaN():e.copy(this).selfDivide(h,0)}}},{key:"ge",value:function(t){return this._hi>t._hi||this._hi===t._hi&&this._lo>=t._lo}},{key:"pow",value:function(t){if(0===t)return e.valueOf(1);var n=new e(this),i=e.valueOf(1),r=Math.abs(t);if(r>1)for(;r>0;)r%2==1&&i.selfMultiply(n),(r/=2)>0&&(n=n.sqr());else i=n;return t<0?i.reciprocal():i}},{key:"ceil",value:function(){if(this.isNaN())return e.NaN;var t=Math.ceil(this._hi),n=0;return t===this._hi&&(n=Math.ceil(this._lo)),new e(t,n)}},{key:"compareTo",value:function(t){var e=t;return this._hi<e._hi?-1:this._hi>e._hi?1:this._lo<e._lo?-1:this._lo>e._lo?1:0}},{key:"rint",value:function(){return this.isNaN()?this:this.add(.5).floor()}},{key:"setValue",value:function(){if(arguments[0]instanceof e){var t=arguments[0];return this.init(t),this}if("number"==typeof arguments[0]){var n=arguments[0];return this.init(n),this}}},{key:"max",value:function(t){return this.ge(t)?this:t}},{key:"sqrt",value:function(){if(this.isZero())return e.valueOf(0);if(this.isNegative())return e.NaN;var t=1/Math.sqrt(this._hi),n=this._hi*t,i=e.valueOf(n),r=this.subtract(i.sqr())._hi*(.5*t);return i.add(r)}},{key:"selfAdd",value:function(){if(1===arguments.length){if(arguments[0]instanceof e){var t=arguments[0];return this.selfAdd(t._hi,t._lo)}if("number"==typeof arguments[0]){var n=arguments[0],i=null,r=null,s=null,o=null,a=null,l=null;return o=(s=this._hi+n)-(a=s-this._hi),r=(l=(o=n-a+(this._hi-o))+this._lo)+(s-(i=s+l)),this._hi=i+r,this._lo=r+(i-this._hi),this}}else if(2===arguments.length){var u=arguments[0],h=arguments[1],c=null,d=null,f=null,g=null,p=null,m=null,y=null;g=this._hi+u,d=this._lo+h,p=g-(m=g-this._hi),f=d-(y=d-this._lo);var _=(c=g+(m=(p=u-m+(this._hi-p))+d))+(m=(f=h-y+(this._lo-f))+(m+(g-c))),v=m+(c-_);return this._hi=_,this._lo=v,this}}},{key:"selfMultiply",value:function(){if(1===arguments.length){if(arguments[0]instanceof e){var t=arguments[0];return this.selfMultiply(t._hi,t._lo)}if("number"==typeof arguments[0]){var n=arguments[0];return this.selfMultiply(n,0)}}else if(2===arguments.length){var i=arguments[0],r=arguments[1],s=null,o=null,a=null,l=null,u=null,h=null;s=(u=e.SPLIT*this._hi)-this._hi,h=e.SPLIT*i,s=u-s,o=this._hi-s,a=h-i;var c=(u=this._hi*i)+(h=s*(a=h-a)-u+s*(l=i-a)+o*a+o*l+(this._hi*r+this._lo*i)),d=h+(s=u-c);return this._hi=c,this._lo=d,this}}},{key:"selfSqr",value:function(){return this.selfMultiply(this)}},{key:"floor",value:function(){if(this.isNaN())return e.NaN;var t=Math.floor(this._hi),n=0;return t===this._hi&&(n=Math.floor(this._lo)),new e(t,n)}},{key:"negate",value:function(){return this.isNaN()?this:new e(-this._hi,-this._lo)}},{key:"clone",value:function(){try{return null}catch(t){if(t instanceof CloneNotSupportedException)return null;throw t}}},{key:"multiply",value:function(){if(arguments[0]instanceof e){var t=arguments[0];return t.isNaN()?e.createNaN():e.copy(this).selfMultiply(t)}if("number"==typeof arguments[0]){var n=arguments[0];return O.isNaN(n)?e.createNaN():e.copy(this).selfMultiply(n,0)}}},{key:"isNaN",value:function(){return O.isNaN(this._hi)}},{key:"intValue",value:function(){return Math.trunc(this._hi)}},{key:"toString",value:function(){var t=e.magnitude(this._hi);return t>=-3&&t<=20?this.toStandardNotation():this.toSciNotation()}},{key:"toStandardNotation",value:function(){var t=this.getSpecialNumberString();if(null!==t)return t;var n=new Array(1).fill(null),i=this.extractSignificantDigits(!0,n),r=n[0]+1,s=i;if("."===i.charAt(0))s="0"+i;else if(r<0)s="0."+e.stringOfChar("0",-r)+i;else if(-1===i.indexOf(".")){var o=r-i.length;s=i+e.stringOfChar("0",o)+".0"}return this.isNegative()?"-"+s:s}},{key:"reciprocal",value:function(){var t,n,i,r,s=null,o=null,a=null,l=null;t=(i=1/this._hi)-(s=(a=e.SPLIT*i)-(s=a-i)),o=(l=e.SPLIT*this._hi)-this._hi;var u=i+(a=(1-(r=i*this._hi)-(l=s*(o=l-o)-r+s*(n=this._hi-o)+t*o+t*n)-i*this._lo)/this._hi);return new e(u,i-u+a)}},{key:"toSciNotation",value:function(){if(this.isZero())return e.SCI_NOT_ZERO;var t=this.getSpecialNumberString();if(null!==t)return t;var n=new Array(1).fill(null),i=this.extractSignificantDigits(!1,n),r=e.SCI_NOT_EXPONENT_CHAR+n[0];if("0"===i.charAt(0))throw new IllegalStateException("Found leading zero: "+i);var s="";i.length>1&&(s=i.substring(1));var o=i.charAt(0)+"."+s;return this.isNegative()?"-"+o+r:o+r}},{key:"abs",value:function(){return this.isNaN()?e.NaN:this.isNegative()?this.negate():new e(this)}},{key:"isPositive",value:function(){return this._hi>0||0===this._hi&&this._lo>0}},{key:"lt",value:function(t){return this._hi<t._hi||this._hi===t._hi&&this._lo<t._lo}},{key:"add",value:function(){if(arguments[0]instanceof e){var t=arguments[0];return e.copy(this).selfAdd(t)}if("number"==typeof arguments[0]){var n=arguments[0];return e.copy(this).selfAdd(n)}}},{key:"init",value:function(){if(1===arguments.length){if("number"==typeof arguments[0]){var t=arguments[0];this._hi=t,this._lo=0}else if(arguments[0]instanceof e){var n=arguments[0];this._hi=n._hi,this._lo=n._lo}}else if(2===arguments.length){var i=arguments[0],r=arguments[1];this._hi=i,this._lo=r}}},{key:"gt",value:function(t){return this._hi>t._hi||this._hi===t._hi&&this._lo>t._lo}},{key:"isNegative",value:function(){return this._hi<0||0===this._hi&&this._lo<0}},{key:"trunc",value:function(){return this.isNaN()?e.NaN:this.isPositive()?this.floor():this.ceil()}},{key:"signum",value:function(){return this._hi>0?1:this._hi<0?-1:this._lo>0?1:this._lo<0?-1:0}},{key:"interfaces_",get:function(){return[E,w,k]}}],[{key:"constructor_",value:function(){if(this._hi=0,this._lo=0,0===arguments.length)this.init(0);else if(1===arguments.length){if("number"==typeof arguments[0]){var t=arguments[0];this.init(t)}else if(arguments[0]instanceof e){var n=arguments[0];this.init(n)}else if("string"==typeof arguments[0]){var i=arguments[0];e.constructor_.call(this,e.parse(i))}}else if(2===arguments.length){var r=arguments[0],s=arguments[1];this.init(r,s)}}},{key:"determinant",value:function(){if("number"==typeof arguments[3]&&"number"==typeof arguments[2]&&"number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],n=arguments[1],i=arguments[2],r=arguments[3];return e.determinant(e.valueOf(t),e.valueOf(n),e.valueOf(i),e.valueOf(r))}if(arguments[3]instanceof e&&arguments[2]instanceof e&&arguments[0]instanceof e&&arguments[1]instanceof e){var s=arguments[1],o=arguments[2],a=arguments[3];return arguments[0].multiply(a).selfSubtract(s.multiply(o))}}},{key:"sqr",value:function(t){return e.valueOf(t).selfMultiply(t)}},{key:"valueOf",value:function(){if("string"==typeof arguments[0]){var t=arguments[0];return e.parse(t)}if("number"==typeof arguments[0])return new e(arguments[0])}},{key:"sqrt",value:function(t){return e.valueOf(t).sqrt()}},{key:"parse",value:function(t){for(var n=0,i=t.length;at.isWhitespace(t.charAt(n));)n++;var r=!1;if(n<i){var s=t.charAt(n);"-"!==s&&"+"!==s||(n++,"-"===s&&(r=!0))}for(var o=new e,a=0,l=0,u=0,h=!1;!(n>=i);){var c=t.charAt(n);if(n++,at.isDigit(c)){var d=c-"0";o.selfMultiply(e.TEN),o.selfAdd(d),a++}else{if("."!==c){if("e"===c||"E"===c){var f=t.substring(n);try{u=ot.parseInt(f)}catch(e){throw e instanceof NumberFormatException?new NumberFormatException("Invalid exponent "+f+" in string "+t):e}break}throw new NumberFormatException("Unexpected character '"+c+"' at position "+n+" in string "+t)}l=a,h=!0}}var g=o;h||(l=a);var p=a-l-u;if(0===p)g=o;else if(p>0){var m=e.TEN.pow(p);g=o.divide(m)}else if(p<0){var y=e.TEN.pow(-p);g=o.multiply(y)}return r?g.negate():g}},{key:"createNaN",value:function(){return new e(O.NaN,O.NaN)}},{key:"copy",value:function(t){return new e(t)}},{key:"magnitude",value:function(t){var e=Math.abs(t),n=Math.log(e)/Math.log(10),i=Math.trunc(Math.floor(n));return 10*Math.pow(10,i)<=e&&(i+=1),i}},{key:"stringOfChar",value:function(t,e){for(var n=new st,i=0;i<e;i++)n.append(t);return n.toString()}}]),e}();lt.PI=new lt(3.141592653589793,12246467991473532e-32),lt.TWO_PI=new lt(6.283185307179586,24492935982947064e-32),lt.PI_2=new lt(1.5707963267948966,6123233995736766e-32),lt.E=new lt(2.718281828459045,14456468917292502e-32),lt.NaN=new lt(O.NaN,O.NaN),lt.EPS=123259516440783e-46,lt.SPLIT=134217729,lt.MAX_PRINT_DIGITS=32,lt.TEN=lt.valueOf(10),lt.ONE=lt.valueOf(1),lt.SCI_NOT_EXPONENT_CHAR="E",lt.SCI_NOT_ZERO="0.0E0";var ut=function(){function e(){t(this,e)}return n(e,null,[{key:"orientationIndex",value:function(t,n,i){var r=e.orientationIndexFilter(t,n,i);if(r<=1)return r;var s=lt.valueOf(n.x).selfAdd(-t.x),o=lt.valueOf(n.y).selfAdd(-t.y),a=lt.valueOf(i.x).selfAdd(-n.x),l=lt.valueOf(i.y).selfAdd(-n.y);return s.selfMultiply(l).selfSubtract(o.selfMultiply(a)).signum()}},{key:"signOfDet2x2",value:function(){if(arguments[3]instanceof lt&&arguments[2]instanceof lt&&arguments[0]instanceof lt&&arguments[1]instanceof lt){var t=arguments[1],e=arguments[2],n=arguments[3];return arguments[0].multiply(n).selfSubtract(t.multiply(e)).signum()}if("number"==typeof arguments[3]&&"number"==typeof arguments[2]&&"number"==typeof arguments[0]&&"number"==typeof arguments[1]){var i=arguments[0],r=arguments[1],s=arguments[2],o=arguments[3],a=lt.valueOf(i),l=lt.valueOf(r),u=lt.valueOf(s),h=lt.valueOf(o);return a.multiply(h).selfSubtract(l.multiply(u)).signum()}}},{key:"intersection",value:function(t,e,n,i){var r=new lt(t.y).selfSubtract(e.y),s=new lt(e.x).selfSubtract(t.x),o=new lt(t.x).selfMultiply(e.y).selfSubtract(new lt(e.x).selfMultiply(t.y)),a=new lt(n.y).selfSubtract(i.y),l=new lt(i.x).selfSubtract(n.x),u=new lt(n.x).selfMultiply(i.y).selfSubtract(new lt(i.x).selfMultiply(n.y)),h=s.multiply(u).selfSubtract(l.multiply(o)),c=a.multiply(o).selfSubtract(r.multiply(u)),d=r.multiply(l).selfSubtract(a.multiply(s)),f=h.selfDivide(d).doubleValue(),g=c.selfDivide(d).doubleValue();return O.isNaN(f)||O.isInfinite(f)||O.isNaN(g)||O.isInfinite(g)?null:new B(f,g)}},{key:"orientationIndexFilter",value:function(t,n,i){var r=null,s=(t.x-i.x)*(n.y-i.y),o=(t.y-i.y)*(n.x-i.x),a=s-o;if(s>0){if(o<=0)return e.signum(a);r=s+o}else{if(!(s<0))return e.signum(a);if(o>=0)return e.signum(a);r=-s-o}var l=e.DP_SAFE_EPSILON*r;return a>=l||-a>=l?e.signum(a):2}},{key:"signum",value:function(t){return t>0?1:t<0?-1:0}}]),e}();ut.DP_SAFE_EPSILON=1e-15;var ht=function(){function e(){t(this,e)}return n(e,[{key:"getM",value:function(t){if(this.hasM()){var e=this.getDimension()-this.getMeasures();return this.getOrdinate(t,e)}return O.NaN}},{key:"setOrdinate",value:function(t,e,n){}},{key:"getZ",value:function(t){return this.hasZ()?this.getOrdinate(t,2):O.NaN}},{key:"size",value:function(){}},{key:"getOrdinate",value:function(t,e){}},{key:"getCoordinate",value:function(){}},{key:"getCoordinateCopy",value:function(t){}},{key:"createCoordinate",value:function(){}},{key:"getDimension",value:function(){}},{key:"hasM",value:function(){return this.getMeasures()>0}},{key:"getX",value:function(t){}},{key:"hasZ",value:function(){return this.getDimension()-this.getMeasures()>2}},{key:"getMeasures",value:function(){return 0}},{key:"expandEnvelope",value:function(t){}},{key:"copy",value:function(){}},{key:"getY",value:function(t){}},{key:"toCoordinateArray",value:function(){}},{key:"interfaces_",get:function(){return[k]}}]),e}();ht.X=0,ht.Y=1,ht.Z=2,ht.M=3;var ct=function(){function e(){t(this,e)}return n(e,null,[{key:"index",value:function(t,e,n){return ut.orientationIndex(t,e,n)}},{key:"isCCW",value:function(){if(arguments[0]instanceof Array){var t=arguments[0],n=t.length-1;if(n<3)throw new v("Ring has fewer than 4 points, so orientation cannot be determined");for(var i=t[0],r=0,s=1;s<=n;s++){var o=t[s];o.y>i.y&&(i=o,r=s)}var a=r;do{(a-=1)<0&&(a=n)}while(t[a].equals2D(i)&&a!==r);var l=r;do{l=(l+1)%n}while(t[l].equals2D(i)&&l!==r);var u=t[a],h=t[l];if(u.equals2D(i)||h.equals2D(i)||u.equals2D(h))return!1;var c=e.index(u,i,h);return 0===c?u.x>h.x:c>0}if(rt(arguments[0],ht)){var d=arguments[0],f=d.size()-1;if(f<3)throw new v("Ring has fewer than 4 points, so orientation cannot be determined");for(var g=d.getCoordinate(0),p=0,m=1;m<=f;m++){var y=d.getCoordinate(m);y.y>g.y&&(g=y,p=m)}var _=null,x=p;do{(x-=1)<0&&(x=f),_=d.getCoordinate(x)}while(_.equals2D(g)&&x!==p);var w=null,k=p;do{k=(k+1)%f,w=d.getCoordinate(k)}while(w.equals2D(g)&&k!==p);if(_.equals2D(g)||w.equals2D(g)||_.equals2D(w))return!1;var E=e.index(_,g,w);return 0===E?_.x>w.x:E>0}}}]),e}();ct.CLOCKWISE=-1,ct.RIGHT=ct.CLOCKWISE,ct.COUNTERCLOCKWISE=1,ct.LEFT=ct.COUNTERCLOCKWISE,ct.COLLINEAR=0,ct.STRAIGHT=ct.COLLINEAR;var dt=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:"getCoordinate",value:function(){return this._minCoord}},{key:"getRightmostSide",value:function(t,e){var n=this.getRightmostSideOfSegment(t,e);return n<0&&(n=this.getRightmostSideOfSegment(t,e-1)),n<0&&(this._minCoord=null,this.checkForRightmostCoordinate(t)),n}},{key:"findRightmostEdgeAtVertex",value:function(){var t=this._minDe.getEdge().getCoordinates();z.isTrue(this._minIndex>0&&this._minIndex<t.length,"rightmost point expected to be interior vertex of edge");var e=t[this._minIndex-1],n=t[this._minIndex+1],i=ct.index(this._minCoord,n,e),r=!1;(e.y<this._minCoord.y&&n.y<this._minCoord.y&&i===ct.COUNTERCLOCKWISE||e.y>this._minCoord.y&&n.y>this._minCoord.y&&i===ct.CLOCKWISE)&&(r=!0),r&&(this._minIndex=this._minIndex-1)}},{key:"getRightmostSideOfSegment",value:function(t,e){var n=t.getEdge().getCoordinates();if(e<0||e+1>=n.length)return-1;if(n[e].y===n[e+1].y)return-1;var i=Q.LEFT;return n[e].y<n[e+1].y&&(i=Q.RIGHT),i}},{key:"getEdge",value:function(){return this._orientedDe}},{key:"checkForRightmostCoordinate",value:function(t){for(var e=t.getEdge().getCoordinates(),n=0;n<e.length-1;n++)(null===this._minCoord||e[n].x>this._minCoord.x)&&(this._minDe=t,this._minIndex=n,this._minCoord=e[n])}},{key:"findRightmostEdgeAtNode",value:function(){var t=this._minDe.getNode().getEdges();this._minDe=t.getRightmostEdge(),this._minDe.isForward()||(this._minDe=this._minDe.getSym(),this._minIndex=this._minDe.getEdge().getCoordinates().length-1)}},{key:"findEdge",value:function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();n.isForward()&&this.checkForRightmostCoordinate(n)}z.isTrue(0!==this._minIndex||this._minCoord.equals(this._minDe.getCoordinate()),"inconsistency in rightmost processing"),0===this._minIndex?this.findRightmostEdgeAtNode():this.findRightmostEdgeAtVertex(),this._orientedDe=this._minDe,this.getRightmostSide(this._minDe,this._minIndex)===Q.LEFT&&(this._orientedDe=this._minDe.getSym())}}],[{key:"constructor_",value:function(){this._minIndex=-1,this._minCoord=null,this._minDe=null,this._orientedDe=null}}]),e}(),ft=function(e){i(s,e);var r=c(s);function s(e,n){var i;return t(this,s),(i=r.call(this,n?e+" [ "+n+" ]":e)).pt=n?new B(n):void 0,i.name=Object.keys({TopologyException:s})[0],i}return n(s,[{key:"getCoordinate",value:function(){return this.pt}}]),s}(F),gt=function(){function e(){t(this,e),this.array=[]}return n(e,[{key:"addLast",value:function(t){this.array.push(t)}},{key:"removeFirst",value:function(){return this.array.shift()}},{key:"isEmpty",value:function(){return 0===this.array.length}}]),e}(),pt=function(e,r){i(o,e);var s=c(o);function o(e){var n;return t(this,o),(n=s.call(this)).array=[],e instanceof V&&n.addAll(e),n}return n(o,[{key:"interfaces_",get:function(){return[nt,V]}},{key:"ensureCapacity",value:function(){}},{key:"add",value:function(t){return 1===arguments.length?this.array.push(t):this.array.splice(arguments[0],0,arguments[1]),!0}},{key:"clear",value:function(){this.array=[]}},{key:"addAll",value:function(t){var e,n=m(t);try{for(n.s();!(e=n.n()).done;){var i=e.value;this.array.push(i)}}catch(t){n.e(t)}finally{n.f()}}},{key:"set",value:function(t,e){var n=this.array[t];return this.array[t]=e,n}},{key:"iterator",value:function(){return new mt(this)}},{key:"get",value:function(t){if(t<0||t>=this.size())throw new et;return this.array[t]}},{key:"isEmpty",value:function(){return 0===this.array.length}},{key:"sort",value:function(t){t?this.array.sort((function(e,n){return t.compare(e,n)})):this.array.sort()}},{key:"size",value:function(){return this.array.length}},{key:"toArray",value:function(){return this.array.slice()}},{key:"remove",value:function(t){for(var e=0,n=this.array.length;e<n;e++)if(this.array[e]===t)return!!this.array.splice(e,1);return!1}},{key:r,value:function(){return this.array.values()}}]),o}(nt,Symbol.iterator),mt=function(){function e(n){t(this,e),this.arrayList=n,this.position=0}return n(e,[{key:"next",value:function(){if(this.position===this.arrayList.size())throw new H;return this.arrayList.get(this.position++)}},{key:"hasNext",value:function(){return this.position<this.arrayList.size()}},{key:"set",value:function(t){return this.arrayList.set(this.position-1,t)}},{key:"remove",value:function(){this.arrayList.remove(this.arrayList.get(this.position))}}]),e}(),yt=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:"clearVisitedEdges",value:function(){for(var t=this._dirEdgeList.iterator();t.hasNext();)t.next().setVisited(!1)}},{key:"getRightmostCoordinate",value:function(){return this._rightMostCoord}},{key:"computeNodeDepth",value:function(t){for(var e=null,n=t.getEdges().iterator();n.hasNext();){var i=n.next();if(i.isVisited()||i.getSym().isVisited()){e=i;break}}if(null===e)throw new ft("unable to find edge to compute depths at "+t.getCoordinate());t.getEdges().computeDepths(e);for(var r=t.getEdges().iterator();r.hasNext();){var s=r.next();s.setVisited(!0),this.copySymDepths(s)}}},{key:"computeDepth",value:function(t){this.clearVisitedEdges();var e=this._finder.getEdge();e.getNode(),e.getLabel(),e.setEdgeDepths(Q.RIGHT,t),this.copySymDepths(e),this.computeDepths(e)}},{key:"create",value:function(t){this.addReachable(t),this._finder.findEdge(this._dirEdgeList),this._rightMostCoord=this._finder.getCoordinate()}},{key:"findResultEdges",value:function(){for(var t=this._dirEdgeList.iterator();t.hasNext();){var e=t.next();e.getDepth(Q.RIGHT)>=1&&e.getDepth(Q.LEFT)<=0&&!e.isInteriorAreaEdge()&&e.setInResult(!0)}}},{key:"computeDepths",value:function(t){var e=new $,n=new gt,i=t.getNode();for(n.addLast(i),e.add(i),t.setVisited(!0);!n.isEmpty();){var r=n.removeFirst();e.add(r),this.computeNodeDepth(r);for(var s=r.getEdges().iterator();s.hasNext();){var o=s.next().getSym();if(!o.isVisited()){var a=o.getNode();e.contains(a)||(n.addLast(a),e.add(a))}}}}},{key:"compareTo",value:function(t){var e=t;return this._rightMostCoord.x<e._rightMostCoord.x?-1:this._rightMostCoord.x>e._rightMostCoord.x?1:0}},{key:"getEnvelope",value:function(){if(null===this._env){for(var t=new X,e=this._dirEdgeList.iterator();e.hasNext();)for(var n=e.next().getEdge().getCoordinates(),i=0;i<n.length-1;i++)t.expandToInclude(n[i]);this._env=t}return this._env}},{key:"addReachable",value:function(t){var e=new it;for(e.add(t);!e.empty();){var n=e.pop();this.add(n,e)}}},{key:"copySymDepths",value:function(t){var e=t.getSym();e.setDepth(Q.LEFT,t.getDepth(Q.RIGHT)),e.setDepth(Q.RIGHT,t.getDepth(Q.LEFT))}},{key:"add",value:function(t,e){t.setVisited(!0),this._nodes.add(t);for(var n=t.getEdges().iterator();n.hasNext();){var i=n.next();this._dirEdgeList.add(i);var r=i.getSym().getNode();r.isVisited()||e.push(r)}}},{key:"getNodes",value:function(){return this._nodes}},{key:"getDirectedEdges",value:function(){return this._dirEdgeList}},{key:"interfaces_",get:function(){return[w]}}],[{key:"constructor_",value:function(){this._finder=null,this._dirEdgeList=new pt,this._nodes=new pt,this._rightMostCoord=null,this._env=null,this._finder=new dt}}]),e}(),_t=function(){function e(){t(this,e)}return n(e,null,[{key:"intersection",value:function(t,e,n,i){var r=t.x<e.x?t.x:e.x,s=t.y<e.y?t.y:e.y,o=t.x>e.x?t.x:e.x,a=t.y>e.y?t.y:e.y,l=n.x<i.x?n.x:i.x,u=n.y<i.y?n.y:i.y,h=n.x>i.x?n.x:i.x,c=n.y>i.y?n.y:i.y,d=((r>l?r:l)+(o<h?o:h))/2,f=((s>u?s:u)+(a<c?a:c))/2,g=t.x-d,p=t.y-f,m=e.x-d,y=e.y-f,_=n.x-d,v=n.y-f,x=i.x-d,w=i.y-f,k=p-y,E=m-g,S=g*y-m*p,b=v-w,C=x-_,I=_*w-x*v,T=k*C-b*E,R=(E*I-C*S)/T,N=(b*S-k*I)/T;return O.isNaN(R)||O.isInfinite(R)||O.isNaN(N)||O.isInfinite(N)?null:new B(R+d,N+f)}}]),e}(),vt=function(){function e(){t(this,e)}return n(e,null,[{key:"arraycopy",value:function(t,e,n,i,r){for(var s=0,o=e;o<e+r;o++)n[i+s]=t[o],s++}},{key:"getProperty",value:function(t){return{"line.separator":"\n"}[t]}}]),e}(),xt=function(){function e(){t(this,e)}return n(e,null,[{key:"log10",value:function(t){var n=Math.log(t);return O.isInfinite(n)||O.isNaN(n)?n:n/e.LOG_10}},{key:"min",value:function(t,e,n,i){var r=t;return e<r&&(r=e),n<r&&(r=n),i<r&&(r=i),r}},{key:"clamp",value:function(){if("number"==typeof arguments[2]&&"number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1],n=arguments[2];return t<e?e:t>n?n:t}if(Number.isInteger(arguments[2])&&Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var i=arguments[0],r=arguments[1],s=arguments[2];return i<r?r:i>s?s:i}}},{key:"wrap",value:function(t,e){return t<0?e- -t%e:t%e}},{key:"max",value:function(){if(3===arguments.length){var t=arguments[1],e=arguments[2],n=arguments[0];return t>n&&(n=t),e>n&&(n=e),n}if(4===arguments.length){var i=arguments[1],r=arguments[2],s=arguments[3],o=arguments[0];return i>o&&(o=i),r>o&&(o=r),s>o&&(o=s),o}}},{key:"average",value:function(t,e){return(t+e)/2}}]),e}();xt.LOG_10=Math.log(10);var wt=function(){function e(){t(this,e)}return n(e,null,[{key:"segmentToSegment",value:function(t,n,i,r){if(t.equals(n))return e.pointToSegment(t,i,r);if(i.equals(r))return e.pointToSegment(r,t,n);var s=!1;if(X.intersects(t,n,i,r)){var o=(n.x-t.x)*(r.y-i.y)-(n.y-t.y)*(r.x-i.x);if(0===o)s=!0;else{var a=(t.y-i.y)*(r.x-i.x)-(t.x-i.x)*(r.y-i.y),l=((t.y-i.y)*(n.x-t.x)-(t.x-i.x)*(n.y-t.y))/o,u=a/o;(u<0||u>1||l<0||l>1)&&(s=!0)}}else s=!0;return s?xt.min(e.pointToSegment(t,i,r),e.pointToSegment(n,i,r),e.pointToSegment(i,t,n),e.pointToSegment(r,t,n)):0}},{key:"pointToSegment",value:function(t,e,n){if(e.x===n.x&&e.y===n.y)return t.distance(e);var i=(n.x-e.x)*(n.x-e.x)+(n.y-e.y)*(n.y-e.y),r=((t.x-e.x)*(n.x-e.x)+(t.y-e.y)*(n.y-e.y))/i;if(r<=0)return t.distance(e);if(r>=1)return t.distance(n);var s=((e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y))/i;return Math.abs(s)*Math.sqrt(i)}},{key:"pointToLinePerpendicular",value:function(t,e,n){var i=(n.x-e.x)*(n.x-e.x)+(n.y-e.y)*(n.y-e.y),r=((e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y))/i;return Math.abs(r)*Math.sqrt(i)}},{key:"pointToSegmentString",value:function(t,n){if(0===n.length)throw new v("Line array must contain at least one vertex");for(var i=t.distance(n[0]),r=0;r<n.length-1;r++){var s=e.pointToSegment(t,n[r],n[r+1]);s<i&&(i=s)}return i}}]),e}(),kt=function(){function e(){t(this,e)}return n(e,[{key:"create",value:function(){if(1===arguments.length)arguments[0]instanceof Array||rt(arguments[0],ht);else if(2===arguments.length);else if(3===arguments.length){var t=arguments[0],e=arguments[1];return this.create(t,e)}}}]),e}(),Et=function(){function e(){t(this,e)}return n(e,[{key:"filter",value:function(t){}}]),e}(),St=function(){function e(){t(this,e)}return n(e,null,[{key:"ofLine",value:function(t){var e=t.size();if(e<=1)return 0;var n=0,i=new B;t.getCoordinate(0,i);for(var r=i.x,s=i.y,o=1;o<e;o++){t.getCoordinate(o,i);var a=i.x,l=i.y,u=a-r,h=l-s;n+=Math.sqrt(u*u+h*h),r=a,s=l}return n}}]),e}(),bt=function e(){t(this,e)},Ct=function(){function e(){t(this,e)}return n(e,null,[{key:"copyCoord",value:function(t,e,n,i){for(var r=Math.min(t.getDimension(),n.getDimension()),s=0;s<r;s++)n.setOrdinate(i,s,t.getOrdinate(e,s))}},{key:"isRing",value:function(t){var e=t.size();return 0===e||!(e<=3)&&t.getOrdinate(0,ht.X)===t.getOrdinate(e-1,ht.X)&&t.getOrdinate(0,ht.Y)===t.getOrdinate(e-1,ht.Y)}},{key:"scroll",value:function(){if(2===arguments.length){if(rt(arguments[0],ht)&&Number.isInteger(arguments[1])){var t=arguments[0],n=arguments[1];e.scroll(t,n,e.isRing(t))}else if(rt(arguments[0],ht)&&arguments[1]instanceof B){var i=arguments[0],r=arguments[1],s=e.indexOf(r,i);if(s<=0)return null;e.scroll(i,s)}}else if(3===arguments.length){var o=arguments[0],a=arguments[1],l=arguments[2];if(a<=0)return null;for(var u=o.copy(),h=l?o.size()-1:o.size(),c=0;c<h;c++)for(var d=0;d<o.getDimension();d++)o.setOrdinate(c,d,u.getOrdinate((a+c)%h,d));if(l)for(var f=0;f<o.getDimension();f++)o.setOrdinate(h,f,o.getOrdinate(0,f))}}},{key:"isEqual",value:function(t,e){var n=t.size();if(n!==e.size())return!1;for(var i=Math.min(t.getDimension(),e.getDimension()),r=0;r<n;r++)for(var s=0;s<i;s++){var o=t.getOrdinate(r,s),a=e.getOrdinate(r,s);if(t.getOrdinate(r,s)!==e.getOrdinate(r,s)&&(!O.isNaN(o)||!O.isNaN(a)))return!1}return!0}},{key:"minCoordinateIndex",value:function(){if(1===arguments.length){var t=arguments[0];return e.minCoordinateIndex(t,0,t.size()-1)}if(3===arguments.length){for(var n=arguments[0],i=arguments[2],r=-1,s=null,o=arguments[1];o<=i;o++){var a=n.getCoordinate(o);(null===s||s.compareTo(a)>0)&&(s=a,r=o)}return r}}},{key:"extend",value:function(t,n,i){var r=t.create(i,n.getDimension()),s=n.size();if(e.copy(n,0,r,0,s),s>0)for(var o=s;o<i;o++)e.copy(n,s-1,r,o,1);return r}},{key:"reverse",value:function(t){for(var n=t.size()-1,i=Math.trunc(n/2),r=0;r<=i;r++)e.swap(t,r,n-r)}},{key:"swap",value:function(t,e,n){if(e===n)return null;for(var i=0;i<t.getDimension();i++){var r=t.getOrdinate(e,i);t.setOrdinate(e,i,t.getOrdinate(n,i)),t.setOrdinate(n,i,r)}}},{key:"copy",value:function(t,n,i,r,s){for(var o=0;o<s;o++)e.copyCoord(t,n+o,i,r+o)}},{key:"ensureValidRing",value:function(t,n){var i=n.size();return 0===i?n:i<=3?e.createClosedRing(t,n,4):n.getOrdinate(0,ht.X)===n.getOrdinate(i-1,ht.X)&&n.getOrdinate(0,ht.Y)===n.getOrdinate(i-1,ht.Y)?n:e.createClosedRing(t,n,i+1)}},{key:"indexOf",value:function(t,e){for(var n=0;n<e.size();n++)if(t.x===e.getOrdinate(n,ht.X)&&t.y===e.getOrdinate(n,ht.Y))return n;return-1}},{key:"createClosedRing",value:function(t,n,i){var r=t.create(i,n.getDimension()),s=n.size();e.copy(n,0,r,0,s);for(var o=s;o<i;o++)e.copy(n,0,r,o,1);return r}},{key:"minCoordinate",value:function(t){for(var e=null,n=0;n<t.size();n++){var i=t.getCoordinate(n);(null===e||e.compareTo(i)>0)&&(e=i)}return e}}]),e}(),It=function(){function e(){t(this,e)}return n(e,null,[{key:"toDimensionSymbol",value:function(t){switch(t){case e.FALSE:return e.SYM_FALSE;case e.TRUE:return e.SYM_TRUE;case e.DONTCARE:return e.SYM_DONTCARE;case e.P:return e.SYM_P;case e.L:return e.SYM_L;case e.A:return e.SYM_A}throw new v("Unknown dimension value: "+t)}},{key:"toDimensionValue",value:function(t){switch(at.toUpperCase(t)){case e.SYM_FALSE:return e.FALSE;case e.SYM_TRUE:return e.TRUE;case e.SYM_DONTCARE:return e.DONTCARE;case e.SYM_P:return e.P;case e.SYM_L:return e.L;case e.SYM_A:return e.A}throw new v("Unknown dimension symbol: "+t)}}]),e}();It.P=0,It.L=1,It.A=2,It.FALSE=-1,It.TRUE=-2,It.DONTCARE=-3,It.SYM_FALSE="F",It.SYM_TRUE="T",It.SYM_DONTCARE="*",It.SYM_P="0",It.SYM_L="1",It.SYM_A="2";var Tt=function(){function e(){t(this,e)}return n(e,[{key:"filter",value:function(t){}}]),e}(),Rt=function(){function e(){t(this,e)}return n(e,[{key:"filter",value:function(t,e){}},{key:"isDone",value:function(){}},{key:"isGeometryChanged",value:function(){}}]),e}(),Nt=function(e){i(o,e);var s=c(o);function o(){var e;return t(this,o),e=s.call(this),o.constructor_.apply(u(e),arguments),e}return n(o,[{key:"computeEnvelopeInternal",value:function(){return this.isEmpty()?new X:this._points.expandEnvelope(new X)}},{key:"isRing",value:function(){return this.isClosed()&&this.isSimple()}},{key:"getCoordinates",value:function(){return this._points.toCoordinateArray()}},{key:"copyInternal",value:function(){return new o(this._points.copy(),this._factory)}},{key:"equalsExact",value:function(){if(2===arguments.length&&"number"==typeof arguments[1]&&arguments[0]instanceof q){var t=arguments[0],e=arguments[1];if(!this.isEquivalentClass(t))return!1;var n=t;if(this._points.size()!==n._points.size())return!1;for(var i=0;i<this._points.size();i++)if(!this.equal(this._points.getCoordinate(i),n._points.getCoordinate(i),e))return!1;return!0}return d(r(o.prototype),"equalsExact",this).apply(this,arguments)}},{key:"normalize",value:function(){for(var t=0;t<Math.trunc(this._points.size()/2);t++){var e=this._points.size()-1-t;if(!this._points.getCoordinate(t).equals(this._points.getCoordinate(e))){if(this._points.getCoordinate(t).compareTo(this._points.getCoordinate(e))>0){var n=this._points.copy();Ct.reverse(n),this._points=n}return null}}}},{key:"getCoordinate",value:function(){return this.isEmpty()?null:this._points.getCoordinate(0)}},{key:"getBoundaryDimension",value:function(){return this.isClosed()?It.FALSE:0}},{key:"isClosed",value:function(){return!this.isEmpty()&&this.getCoordinateN(0).equals2D(this.getCoordinateN(this.getNumPoints()-1))}},{key:"reverseInternal",value:function(){var t=this._points.copy();return Ct.reverse(t),this.getFactory().createLineString(t)}},{key:"getEndPoint",value:function(){return this.isEmpty()?null:this.getPointN(this.getNumPoints()-1)}},{key:"getTypeCode",value:function(){return q.TYPECODE_LINESTRING}},{key:"getDimension",value:function(){return 1}},{key:"getLength",value:function(){return St.ofLine(this._points)}},{key:"getNumPoints",value:function(){return this._points.size()}},{key:"compareToSameClass",value:function(){if(1===arguments.length){for(var t=arguments[0],e=0,n=0;e<this._points.size()&&n<t._points.size();){var i=this._points.getCoordinate(e).compareTo(t._points.getCoordinate(n));if(0!==i)return i;e++,n++}return e<this._points.size()?1:n<t._points.size()?-1:0}if(2===arguments.length){var r=arguments[0];return arguments[1].compare(this._points,r._points)}}},{key:"apply",value:function(){if(rt(arguments[0],Et))for(var t=arguments[0],e=0;e<this._points.size();e++)t.filter(this._points.getCoordinate(e));else if(rt(arguments[0],Rt)){var n=arguments[0];if(0===this._points.size())return null;for(var i=0;i<this._points.size()&&(n.filter(this._points,i),!n.isDone());i++);n.isGeometryChanged()&&this.geometryChanged()}else(rt(arguments[0],Tt)||rt(arguments[0],x))&&arguments[0].filter(this)}},{key:"getBoundary",value:function(){throw new K}},{key:"isEquivalentClass",value:function(t){return t instanceof o}},{key:"getCoordinateN",value:function(t){return this._points.getCoordinate(t)}},{key:"getGeometryType",value:function(){return q.TYPENAME_LINESTRING}},{key:"getCoordinateSequence",value:function(){return this._points}},{key:"isEmpty",value:function(){return 0===this._points.size()}},{key:"init",value:function(t){if(null===t&&(t=this.getFactory().getCoordinateSequenceFactory().create([])),1===t.size())throw new v("Invalid number of points in LineString (found "+t.size()+" - must be 0 or >= 2)");this._points=t}},{key:"isCoordinate",value:function(t){for(var e=0;e<this._points.size();e++)if(this._points.getCoordinate(e).equals(t))return!0;return!1}},{key:"getStartPoint",value:function(){return this.isEmpty()?null:this.getPointN(0)}},{key:"getPointN",value:function(t){return this.getFactory().createPoint(this._points.getCoordinate(t))}},{key:"interfaces_",get:function(){return[bt]}}],[{key:"constructor_",value:function(){if(this._points=null,0===arguments.length);else if(2===arguments.length){var t=arguments[0],e=arguments[1];q.constructor_.call(this,e),this.init(t)}}}]),o}(q),Lt=function e(){t(this,e)},Mt=function(e){i(o,e);var s=c(o);function o(){var e;return t(this,o),e=s.call(this),o.constructor_.apply(u(e),arguments),e}return n(o,[{key:"computeEnvelopeInternal",value:function(){if(this.isEmpty())return new X;var t=new X;return t.expandToInclude(this._coordinates.getX(0),this._coordinates.getY(0)),t}},{key:"getCoordinates",value:function(){return this.isEmpty()?[]:[this.getCoordinate()]}},{key:"copyInternal",value:function(){return new o(this._coordinates.copy(),this._factory)}},{key:"equalsExact",value:function(){if(2===arguments.length&&"number"==typeof arguments[1]&&arguments[0]instanceof q){var t=arguments[0],e=arguments[1];return!!this.isEquivalentClass(t)&&(!(!this.isEmpty()||!t.isEmpty())||this.isEmpty()===t.isEmpty()&&this.equal(t.getCoordinate(),this.getCoordinate(),e))}return d(r(o.prototype),"equalsExact",this).apply(this,arguments)}},{key:"normalize",value:function(){}},{key:"getCoordinate",value:function(){return 0!==this._coordinates.size()?this._coordinates.getCoordinate(0):null}},{key:"getBoundaryDimension",value:function(){return It.FALSE}},{key:"reverseInternal",value:function(){return this.getFactory().createPoint(this._coordinates.copy())}},{key:"getTypeCode",value:function(){return q.TYPECODE_POINT}},{key:"getDimension",value:function(){return 0}},{key:"getNumPoints",value:function(){return this.isEmpty()?0:1}},{key:"getX",value:function(){if(null===this.getCoordinate())throw new IllegalStateException("getX called on empty Point");return this.getCoordinate().x}},{key:"compareToSameClass",value:function(){if(1===arguments.length){var t=arguments[0];return this.getCoordinate().compareTo(t.getCoordinate())}if(2===arguments.length){var e=arguments[0];return arguments[1].compare(this._coordinates,e._coordinates)}}},{key:"apply",value:function(){if(rt(arguments[0],Et)){var t=arguments[0];if(this.isEmpty())return null;t.filter(this.getCoordinate())}else if(rt(arguments[0],Rt)){var e=arguments[0];if(this.isEmpty())return null;e.filter(this._coordinates,0),e.isGeometryChanged()&&this.geometryChanged()}else(rt(arguments[0],Tt)||rt(arguments[0],x))&&arguments[0].filter(this)}},{key:"getBoundary",value:function(){return this.getFactory().createGeometryCollection()}},{key:"getGeometryType",value:function(){return q.TYPENAME_POINT}},{key:"getCoordinateSequence",value:function(){return this._coordinates}},{key:"getY",value:function(){if(null===this.getCoordinate())throw new IllegalStateException("getY called on empty Point");return this.getCoordinate().y}},{key:"isEmpty",value:function(){return 0===this._coordinates.size()}},{key:"init",value:function(t){null===t&&(t=this.getFactory().getCoordinateSequenceFactory().create([])),z.isTrue(t.size()<=1),this._coordinates=t}},{key:"isSimple",value:function(){return!0}},{key:"interfaces_",get:function(){return[Lt]}}],[{key:"constructor_",value:function(){this._coordinates=null;var t=arguments[0],e=arguments[1];q.constructor_.call(this,e),this.init(t)}}]),o}(q),Pt=function(){function e(){t(this,e)}return n(e,null,[{key:"ofRing",value:function(){if(arguments[0]instanceof Array){var t=arguments[0];return Math.abs(e.ofRingSigned(t))}if(rt(arguments[0],ht)){var n=arguments[0];return Math.abs(e.ofRingSigned(n))}}},{key:"ofRingSigned",value:function(){if(arguments[0]instanceof Array){var t=arguments[0];if(t.length<3)return 0;for(var e=0,n=t[0].x,i=1;i<t.length-1;i++){var r=t[i].x-n,s=t[i+1].y;e+=r*(t[i-1].y-s)}return e/2}if(rt(arguments[0],ht)){var o=arguments[0],a=o.size();if(a<3)return 0;var l=new B,u=new B,h=new B;o.getCoordinate(0,u),o.getCoordinate(1,h);var c=u.x;h.x-=c;for(var d=0,f=1;f<a-1;f++)l.y=u.y,u.x=h.x,u.y=h.y,o.getCoordinate(f+1,h),h.x-=c,d+=u.x*(l.y-h.y);return d/2}}}]),e}(),Ot=function(){function e(){t(this,e)}return n(e,null,[{key:"sort",value:function(){var t=arguments,e=arguments[0];if(1===arguments.length)e.sort((function(t,e){return t.compareTo(e)}));else if(2===arguments.length)e.sort((function(e,n){return t[1].compare(e,n)}));else if(3===arguments.length){var n=e.slice(arguments[1],arguments[2]);n.sort();var i=e.slice(0,arguments[1]).concat(n,e.slice(arguments[2],e.length));e.splice(0,e.length);var r,s=m(i);try{for(s.s();!(r=s.n()).done;){var o=r.value;e.push(o)}}catch(t){s.e(t)}finally{s.f()}}else if(4===arguments.length){var a=e.slice(arguments[1],arguments[2]);a.sort((function(e,n){return t[3].compare(e,n)}));var l=e.slice(0,arguments[1]).concat(a,e.slice(arguments[2],e.length));e.splice(0,e.length);var u,h=m(l);try{for(h.s();!(u=h.n()).done;){var c=u.value;e.push(c)}}catch(t){h.e(t)}finally{h.f()}}}},{key:"asList",value:function(t){var e,n=new pt,i=m(t);try{for(i.s();!(e=i.n()).done;){var r=e.value;n.add(r)}}catch(t){i.e(t)}finally{i.f()}return n}},{key:"copyOf",value:function(t,e){return t.slice(0,e)}}]),e}(),At=function e(){t(this,e)},Ft=function(e){i(o,e);var s=c(o);function o(){var e;return t(this,o),e=s.call(this),o.constructor_.apply(u(e),arguments),e}return n(o,[{key:"computeEnvelopeInternal",value:function(){return this._shell.getEnvelopeInternal()}},{key:"getCoordinates",value:function(){if(this.isEmpty())return[];for(var t=new Array(this.getNumPoints()).fill(null),e=-1,n=this._shell.getCoordinates(),i=0;i<n.length;i++)t[++e]=n[i];for(var r=0;r<this._holes.length;r++)for(var s=this._holes[r].getCoordinates(),o=0;o<s.length;o++)t[++e]=s[o];return t}},{key:"getArea",value:function(){var t=0;t+=Pt.ofRing(this._shell.getCoordinateSequence());for(var e=0;e<this._holes.length;e++)t-=Pt.ofRing(this._holes[e].getCoordinateSequence());return t}},{key:"copyInternal",value:function(){for(var t=this._shell.copy(),e=new Array(this._holes.length).fill(null),n=0;n<this._holes.length;n++)e[n]=this._holes[n].copy();return new o(t,e,this._factory)}},{key:"isRectangle",value:function(){if(0!==this.getNumInteriorRing())return!1;if(null===this._shell)return!1;if(5!==this._shell.getNumPoints())return!1;for(var t=this._shell.getCoordinateSequence(),e=this.getEnvelopeInternal(),n=0;n<5;n++){var i=t.getX(n);if(i!==e.getMinX()&&i!==e.getMaxX())return!1;var r=t.getY(n);if(r!==e.getMinY()&&r!==e.getMaxY())return!1}for(var s=t.getX(0),o=t.getY(0),a=1;a<=4;a++){var l=t.getX(a),u=t.getY(a);if(l!==s===(u!==o))return!1;s=l,o=u}return!0}},{key:"equalsExact",value:function(){if(2===arguments.length&&"number"==typeof arguments[1]&&arguments[0]instanceof q){var t=arguments[0],e=arguments[1];if(!this.isEquivalentClass(t))return!1;var n=t,i=this._shell,s=n._shell;if(!i.equalsExact(s,e))return!1;if(this._holes.length!==n._holes.length)return!1;for(var a=0;a<this._holes.length;a++)if(!this._holes[a].equalsExact(n._holes[a],e))return!1;return!0}return d(r(o.prototype),"equalsExact",this).apply(this,arguments)}},{key:"normalize",value:function(){if(0===arguments.length){this._shell=this.normalized(this._shell,!0);for(var t=0;t<this._holes.length;t++)this._holes[t]=this.normalized(this._holes[t],!1);Ot.sort(this._holes)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(e.isEmpty())return null;var i=e.getCoordinateSequence(),r=Ct.minCoordinateIndex(i,0,i.size()-2);Ct.scroll(i,r,!0),ct.isCCW(i)===n&&Ct.reverse(i)}}},{key:"getCoordinate",value:function(){return this._shell.getCoordinate()}},{key:"getNumInteriorRing",value:function(){return this._holes.length}},{key:"getBoundaryDimension",value:function(){return 1}},{key:"reverseInternal",value:function(){for(var t=this.getExteriorRing().reverse(),e=new Array(this.getNumInteriorRing()).fill(null),n=0;n<e.length;n++)e[n]=this.getInteriorRingN(n).reverse();return this.getFactory().createPolygon(t,e)}},{key:"getTypeCode",value:function(){return q.TYPECODE_POLYGON}},{key:"getDimension",value:function(){return 2}},{key:"getLength",value:function(){var t=0;t+=this._shell.getLength();for(var e=0;e<this._holes.length;e++)t+=this._holes[e].getLength();return t}},{key:"getNumPoints",value:function(){for(var t=this._shell.getNumPoints(),e=0;e<this._holes.length;e++)t+=this._holes[e].getNumPoints();return t}},{key:"convexHull",value:function(){return this.getExteriorRing().convexHull()}},{key:"normalized",value:function(t,e){var n=t.copy();return this.normalize(n,e),n}},{key:"compareToSameClass",value:function(){if(1===arguments.length){var t=arguments[0],e=this._shell,n=t._shell;return e.compareToSameClass(n)}if(2===arguments.length){var i=arguments[1],r=arguments[0],s=this._shell,o=r._shell,a=s.compareToSameClass(o,i);if(0!==a)return a;for(var l=this.getNumInteriorRing(),u=r.getNumInteriorRing(),h=0;h<l&&h<u;){var c=this.getInteriorRingN(h),d=r.getInteriorRingN(h),f=c.compareToSameClass(d,i);if(0!==f)return f;h++}return h<l?1:h<u?-1:0}}},{key:"apply",value:function(){if(rt(arguments[0],Et)){var t=arguments[0];this._shell.apply(t);for(var e=0;e<this._holes.length;e++)this._holes[e].apply(t)}else if(rt(arguments[0],Rt)){var n=arguments[0];if(this._shell.apply(n),!n.isDone())for(var i=0;i<this._holes.length&&(this._holes[i].apply(n),!n.isDone());i++);n.isGeometryChanged()&&this.geometryChanged()}else if(rt(arguments[0],Tt))arguments[0].filter(this);else if(rt(arguments[0],x)){var r=arguments[0];r.filter(this),this._shell.apply(r);for(var s=0;s<this._holes.length;s++)this._holes[s].apply(r)}}},{key:"getBoundary",value:function(){if(this.isEmpty())return this.getFactory().createMultiLineString();var t=new Array(this._holes.length+1).fill(null);t[0]=this._shell;for(var e=0;e<this._holes.length;e++)t[e+1]=this._holes[e];return t.length<=1?this.getFactory().createLinearRing(t[0].getCoordinateSequence()):this.getFactory().createMultiLineString(t)}},{key:"getGeometryType",value:function(){return q.TYPENAME_POLYGON}},{key:"getExteriorRing",value:function(){return this._shell}},{key:"isEmpty",value:function(){return this._shell.isEmpty()}},{key:"getInteriorRingN",value:function(t){return this._holes[t]}},{key:"interfaces_",get:function(){return[At]}}],[{key:"constructor_",value:function(){this._shell=null,this._holes=null;var t=arguments[0],e=arguments[1],n=arguments[2];if(q.constructor_.call(this,n),null===t&&(t=this.getFactory().createLinearRing()),null===e&&(e=[]),q.hasNullElements(e))throw new v("holes must not contain null elements");if(t.isEmpty()&&q.hasNonEmptyElements(e))throw new v("shell is empty but holes are not");this._shell=t,this._holes=e}}]),o}(q),Dt=function(e){i(r,e);var n=c(r);function r(){return t(this,r),n.apply(this,arguments)}return r}(Z),zt=function(e){i(s,e);var r=c(s);function s(e){var n;return t(this,s),(n=r.call(this)).array=[],e instanceof V&&n.addAll(e),n}return n(s,[{key:"contains",value:function(t){var e,n=m(this.array);try{for(n.s();!(e=n.n()).done;)if(0===e.value.compareTo(t))return!0}catch(t){n.e(t)}finally{n.f()}return!1}},{key:"add",value:function(t){if(this.contains(t))return!1;for(var e=0,n=this.array.length;e<n;e++)if(1===this.array[e].compareTo(t))return!!this.array.splice(e,0,t);return this.array.push(t),!0}},{key:"addAll",value:function(t){var e,n=m(t);try{for(n.s();!(e=n.n()).done;){var i=e.value;this.add(i)}}catch(t){n.e(t)}finally{n.f()}return!0}},{key:"remove",value:function(){throw new K}},{key:"size",value:function(){return this.array.length}},{key:"isEmpty",value:function(){return 0===this.array.length}},{key:"toArray",value:function(){return this.array.slice()}},{key:"iterator",value:function(){return new Gt(this.array)}}]),s}(Dt),Gt=function(){function e(n){t(this,e),this.array=n,this.position=0}return n(e,[{key:"next",value:function(){if(this.position===this.array.length)throw new H;return this.array[this.position++]}},{key:"hasNext",value:function(){return this.position<this.array.length}},{key:"remove",value:function(){throw new K}}]),e}(),jt=function(e){i(o,e);var s=c(o);function o(){var e;return t(this,o),e=s.call(this),o.constructor_.apply(u(e),arguments),e}return n(o,[{key:"computeEnvelopeInternal",value:function(){for(var t=new X,e=0;e<this._geometries.length;e++)t.expandToInclude(this._geometries[e].getEnvelopeInternal());return t}},{key:"getGeometryN",value:function(t){return this._geometries[t]}},{key:"getCoordinates",value:function(){for(var t=new Array(this.getNumPoints()).fill(null),e=-1,n=0;n<this._geometries.length;n++)for(var i=this._geometries[n].getCoordinates(),r=0;r<i.length;r++)t[++e]=i[r];return t}},{key:"getArea",value:function(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getArea();return t}},{key:"copyInternal",value:function(){for(var t=new Array(this._geometries.length).fill(null),e=0;e<t.length;e++)t[e]=this._geometries[e].copy();return new o(t,this._factory)}},{key:"equalsExact",value:function(){if(2===arguments.length&&"number"==typeof arguments[1]&&arguments[0]instanceof q){var t=arguments[0],e=arguments[1];if(!this.isEquivalentClass(t))return!1;var n=t;if(this._geometries.length!==n._geometries.length)return!1;for(var i=0;i<this._geometries.length;i++)if(!this._geometries[i].equalsExact(n._geometries[i],e))return!1;return!0}return d(r(o.prototype),"equalsExact",this).apply(this,arguments)}},{key:"normalize",value:function(){for(var t=0;t<this._geometries.length;t++)this._geometries[t].normalize();Ot.sort(this._geometries)}},{key:"getCoordinate",value:function(){return this.isEmpty()?null:this._geometries[0].getCoordinate()}},{key:"getBoundaryDimension",value:function(){for(var t=It.FALSE,e=0;e<this._geometries.length;e++)t=Math.max(t,this._geometries[e].getBoundaryDimension());return t}},{key:"reverseInternal",value:function(){for(var t=this._geometries.length,e=new pt(t),n=0;n<t;n++)e.add(this._geometries[n].reverse());return this.getFactory().buildGeometry(e)}},{key:"getTypeCode",value:function(){return q.TYPECODE_GEOMETRYCOLLECTION}},{key:"getDimension",value:function(){for(var t=It.FALSE,e=0;e<this._geometries.length;e++)t=Math.max(t,this._geometries[e].getDimension());return t}},{key:"getLength",value:function(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getLength();return t}},{key:"getNumPoints",value:function(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getNumPoints();return t}},{key:"getNumGeometries",value:function(){return this._geometries.length}},{key:"compareToSameClass",value:function(){if(1===arguments.length){var t=arguments[0],e=new zt(Ot.asList(this._geometries)),n=new zt(Ot.asList(t._geometries));return this.compare(e,n)}if(2===arguments.length){for(var i=arguments[1],r=arguments[0],s=this.getNumGeometries(),o=r.getNumGeometries(),a=0;a<s&&a<o;){var l=this.getGeometryN(a),u=r.getGeometryN(a),h=l.compareToSameClass(u,i);if(0!==h)return h;a++}return a<s?1:a<o?-1:0}}},{key:"apply",value:function(){if(rt(arguments[0],Et))for(var t=arguments[0],e=0;e<this._geometries.length;e++)this._geometries[e].apply(t);else if(rt(arguments[0],Rt)){var n=arguments[0];if(0===this._geometries.length)return null;for(var i=0;i<this._geometries.length&&(this._geometries[i].apply(n),!n.isDone());i++);n.isGeometryChanged()&&this.geometryChanged()}else if(rt(arguments[0],Tt)){var r=arguments[0];r.filter(this);for(var s=0;s<this._geometries.length;s++)this._geometries[s].apply(r)}else if(rt(arguments[0],x)){var o=arguments[0];o.filter(this);for(var a=0;a<this._geometries.length;a++)this._geometries[a].apply(o)}}},{key:"getBoundary",value:function(){return q.checkNotGeometryCollection(this),z.shouldNeverReachHere(),null}},{key:"getGeometryType",value:function(){return q.TYPENAME_GEOMETRYCOLLECTION}},{key:"isEmpty",value:function(){for(var t=0;t<this._geometries.length;t++)if(!this._geometries[t].isEmpty())return!1;return!0}}],[{key:"constructor_",value:function(){if(this._geometries=null,0===arguments.length);else if(2===arguments.length){var t=arguments[0],e=arguments[1];if(q.constructor_.call(this,e),null===t&&(t=[]),q.hasNullElements(t))throw new v("geometries must not contain null elements");this._geometries=t}}}]),o}(q),Yt=function(e){i(o,e);var s=c(o);function o(){var e;return t(this,o),e=s.call(this),o.constructor_.apply(u(e),arguments),e}return n(o,[{key:"copyInternal",value:function(){for(var t=new Array(this._geometries.length).fill(null),e=0;e<t.length;e++)t[e]=this._geometries[e].copy();return new o(t,this._factory)}},{key:"isValid",value:function(){return!0}},{key:"equalsExact",value:function(){if(2===arguments.length&&"number"==typeof arguments[1]&&arguments[0]instanceof q){var t=arguments[0],e=arguments[1];return!!this.isEquivalentClass(t)&&d(r(o.prototype),"equalsExact",this).call(this,t,e)}return d(r(o.prototype),"equalsExact",this).apply(this,arguments)}},{key:"getCoordinate",value:function(){if(1===arguments.length&&Number.isInteger(arguments[0])){var t=arguments[0];return this._geometries[t].getCoordinate()}return d(r(o.prototype),"getCoordinate",this).apply(this,arguments)}},{key:"getBoundaryDimension",value:function(){return It.FALSE}},{key:"getTypeCode",value:function(){return q.TYPECODE_MULTIPOINT}},{key:"getDimension",value:function(){return 0}},{key:"getBoundary",value:function(){return this.getFactory().createGeometryCollection()}},{key:"getGeometryType",value:function(){return q.TYPENAME_MULTIPOINT}},{key:"interfaces_",get:function(){return[Lt]}}],[{key:"constructor_",value:function(){var t=arguments[0],e=arguments[1];jt.constructor_.call(this,t,e)}}]),o}(jt),Bt=function(e){i(o,e);var s=c(o);function o(){var e;return t(this,o),e=s.call(this),o.constructor_.apply(u(e),arguments),e}return n(o,[{key:"copyInternal",value:function(){return new o(this._points.copy(),this._factory)}},{key:"getBoundaryDimension",value:function(){return It.FALSE}},{key:"isClosed",value:function(){return!!this.isEmpty()||d(r(o.prototype),"isClosed",this).call(this)}},{key:"reverseInternal",value:function(){var t=this._points.copy();return Ct.reverse(t),this.getFactory().createLinearRing(t)}},{key:"getTypeCode",value:function(){return q.TYPECODE_LINEARRING}},{key:"validateConstruction",value:function(){if(!this.isEmpty()&&!d(r(o.prototype),"isClosed",this).call(this))throw new v("Points of LinearRing do not form a closed linestring");if(this.getCoordinateSequence().size()>=1&&this.getCoordinateSequence().size()<o.MINIMUM_VALID_SIZE)throw new v("Invalid number of points in LinearRing (found "+this.getCoordinateSequence().size()+" - must be 0 or >= 4)")}},{key:"getGeometryType",value:function(){return q.TYPENAME_LINEARRING}}],[{key:"constructor_",value:function(){var t=arguments[0],e=arguments[1];Nt.constructor_.call(this,t,e),this.validateConstruction()}}]),o}(Nt);Bt.MINIMUM_VALID_SIZE=4;var Ut=function(e){i(s,e);var r=c(s);function s(){var e;return t(this,s),e=r.call(this),s.constructor_.apply(u(e),arguments),e}return n(s,[{key:"setOrdinate",value:function(t,e){switch(t){case s.X:this.x=e;break;case s.Y:this.y=e;break;default:throw new v("Invalid ordinate index: "+t)}}},{key:"getZ",value:function(){return B.NULL_ORDINATE}},{key:"getOrdinate",value:function(t){switch(t){case s.X:return this.x;case s.Y:return this.y}throw new v("Invalid ordinate index: "+t)}},{key:"setZ",value:function(t){throw new v("CoordinateXY dimension 2 does not support z-ordinate")}},{key:"copy",value:function(){return new s(this)}},{key:"toString",value:function(){return"("+this.x+", "+this.y+")"}},{key:"setCoordinate",value:function(t){this.x=t.x,this.y=t.y,this.z=t.getZ()}}],[{key:"constructor_",value:function(){if(0===arguments.length)B.constructor_.call(this);else if(1===arguments.length){if(arguments[0]instanceof s){var t=arguments[0];B.constructor_.call(this,t.x,t.y)}else if(arguments[0]instanceof B){var e=arguments[0];B.constructor_.call(this,e.x,e.y)}}else if(2===arguments.length){var n=arguments[0],i=arguments[1];B.constructor_.call(this,n,i,B.NULL_ORDINATE)}}}]),s}(B);Ut.X=0,Ut.Y=1,Ut.Z=-1,Ut.M=-1;var Xt=function(e){i(s,e);var r=c(s);function s(){var e;return t(this,s),e=r.call(this),s.constructor_.apply(u(e),arguments),e}return n(s,[{key:"getM",value:function(){return this._m}},{key:"setOrdinate",value:function(t,e){switch(t){case s.X:this.x=e;break;case s.Y:this.y=e;break;case s.M:this._m=e;break;default:throw new v("Invalid ordinate index: "+t)}}},{key:"setM",value:function(t){this._m=t}},{key:"getZ",value:function(){return B.NULL_ORDINATE}},{key:"getOrdinate",value:function(t){switch(t){case s.X:return this.x;case s.Y:return this.y;case s.M:return this._m}throw new v("Invalid ordinate index: "+t)}},{key:"setZ",value:function(t){throw new v("CoordinateXY dimension 2 does not support z-ordinate")}},{key:"copy",value:function(){return new s(this)}},{key:"toString",value:function(){return"("+this.x+", "+this.y+" m="+this.getM()+")"}},{key:"setCoordinate",value:function(t){this.x=t.x,this.y=t.y,this.z=t.getZ(),this._m=t.getM()}}],[{key:"constructor_",value:function(){if(this._m=null,0===arguments.length)B.constructor_.call(this),this._m=0;else if(1===arguments.length){if(arguments[0]instanceof s){var t=arguments[0];B.constructor_.call(this,t.x,t.y),this._m=t._m}else if(arguments[0]instanceof B){var e=arguments[0];B.constructor_.call(this,e.x,e.y),this._m=this.getM()}}else if(3===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2];B.constructor_.call(this,n,i,B.NULL_ORDINATE),this._m=r}}}]),s}(B);Xt.X=0,Xt.Y=1,Xt.Z=-1,Xt.M=2;var qt=function(e){i(s,e);var r=c(s);function s(){var e;return t(this,s),e=r.call(this),s.constructor_.apply(u(e),arguments),e}return n(s,[{key:"getM",value:function(){return this._m}},{key:"setOrdinate",value:function(t,e){switch(t){case B.X:this.x=e;break;case B.Y:this.y=e;break;case B.Z:this.z=e;break;case B.M:this._m=e;break;default:throw new v("Invalid ordinate index: "+t)}}},{key:"setM",value:function(t){this._m=t}},{key:"getOrdinate",value:function(t){switch(t){case B.X:return this.x;case B.Y:return this.y;case B.Z:return this.getZ();case B.M:return this.getM()}throw new v("Invalid ordinate index: "+t)}},{key:"copy",value:function(){return new s(this)}},{key:"toString",value:function(){return"("+this.x+", "+this.y+", "+this.getZ()+" m="+this.getM()+")"}},{key:"setCoordinate",value:function(t){this.x=t.x,this.y=t.y,this.z=t.getZ(),this._m=t.getM()}}],[{key:"constructor_",value:function(){if(this._m=null,0===arguments.length)B.constructor_.call(this),this._m=0;else if(1===arguments.length){if(arguments[0]instanceof s){var t=arguments[0];B.constructor_.call(this,t),this._m=t._m}else if(arguments[0]instanceof B){var e=arguments[0];B.constructor_.call(this,e),this._m=this.getM()}}else if(4===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2],o=arguments[3];B.constructor_.call(this,n,i,r),this._m=o}}}]),s}(B),Wt=function(){function e(){t(this,e)}return n(e,null,[{key:"measures",value:function(t){return t instanceof Ut?0:t instanceof Xt||t instanceof qt?1:0}},{key:"dimension",value:function(t){return t instanceof Ut?2:t instanceof Xt?3:t instanceof qt?4:3}},{key:"create",value:function(){if(1===arguments.length){var t=arguments[0];return e.create(t,0)}if(2===arguments.length){var n=arguments[0],i=arguments[1];return 2===n?new Ut:3===n&&0===i?new B:3===n&&1===i?new Xt:4===n&&1===i?new qt:new B}}}]),e}(),Vt=function(e){i(o,e);var s=c(o);function o(){var e;return t(this,o),e=s.call(this),o.constructor_.apply(u(e),arguments),e}return n(o,[{key:"getCoordinate",value:function(t){return this.get(t)}},{key:"addAll",value:function(){if(2===arguments.length&&"boolean"==typeof arguments[1]&&rt(arguments[0],V)){for(var t=arguments[1],e=!1,n=arguments[0].iterator();n.hasNext();)this.add(n.next(),t),e=!0;return e}return d(r(o.prototype),"addAll",this).apply(this,arguments)}},{key:"clone",value:function(){for(var t=d(r(o.prototype),"clone",this).call(this),e=0;e<this.size();e++)t.add(e,this.get(e).clone());return t}},{key:"toCoordinateArray",value:function(){if(0===arguments.length)return this.toArray(o.coordArrayType);if(1===arguments.length){if(arguments[0])return this.toArray(o.coordArrayType);for(var t=this.size(),e=new Array(t).fill(null),n=0;n<t;n++)e[n]=this.get(t-n-1);return e}}},{key:"add",value:function(){if(1===arguments.length){var t=arguments[0];return d(r(o.prototype),"add",this).call(this,t)}if(2===arguments.length){if(arguments[0]instanceof Array&&"boolean"==typeof arguments[1]){var e=arguments[0],n=arguments[1];return this.add(e,n,!0),!0}if(arguments[0]instanceof B&&"boolean"==typeof arguments[1]){var i=arguments[0];if(!arguments[1]&&this.size()>=1&&this.get(this.size()-1).equals2D(i))return null;d(r(o.prototype),"add",this).call(this,i)}else if(arguments[0]instanceof Object&&"boolean"==typeof arguments[1]){var s=arguments[0],a=arguments[1];return this.add(s,a),!0}}else if(3===arguments.length){if("boolean"==typeof arguments[2]&&arguments[0]instanceof Array&&"boolean"==typeof arguments[1]){var l=arguments[0],u=arguments[1];if(arguments[2])for(var h=0;h<l.length;h++)this.add(l[h],u);else for(var c=l.length-1;c>=0;c--)this.add(l[c],u);return!0}if("boolean"==typeof arguments[2]&&Number.isInteger(arguments[0])&&arguments[1]instanceof B){var f=arguments[0],g=arguments[1];if(!arguments[2]){var p=this.size();if(p>0){if(f>0&&this.get(f-1).equals2D(g))return null;if(f<p&&this.get(f).equals2D(g))return null}}d(r(o.prototype),"add",this).call(this,f,g)}}else if(4===arguments.length){var m=arguments[0],y=arguments[1],_=arguments[2],v=arguments[3],x=1;_>v&&(x=-1);for(var w=_;w!==v;w+=x)this.add(m[w],y);return!0}}},{key:"closeRing",value:function(){if(this.size()>0){var t=this.get(0).copy();this.add(t,!1)}}}],[{key:"constructor_",value:function(){if(0===arguments.length);else if(1===arguments.length){var t=arguments[0];this.ensureCapacity(t.length),this.add(t,!0)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.ensureCapacity(e.length),this.add(e,n)}}}]),o}(pt);Vt.coordArrayType=new Array(0).fill(null);var Ht=function(){function e(){t(this,e)}return n(e,null,[{key:"isRing",value:function(t){return!(t.length<4)&&!!t[0].equals2D(t[t.length-1])}},{key:"ptNotInList",value:function(t,n){for(var i=0;i<t.length;i++){var r=t[i];if(e.indexOf(r,n)<0)return r}return null}},{key:"scroll",value:function(t,n){var i=e.indexOf(n,t);if(i<0)return null;var r=new Array(t.length).fill(null);vt.arraycopy(t,i,r,0,t.length-i),vt.arraycopy(t,0,r,t.length-i,i),vt.arraycopy(r,0,t,0,t.length)}},{key:"equals",value:function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];if(t===e)return!0;if(null===t||null===e)return!1;if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(!t[n].equals(e[n]))return!1;return!0}if(3===arguments.length){var i=arguments[0],r=arguments[1],s=arguments[2];if(i===r)return!0;if(null===i||null===r)return!1;if(i.length!==r.length)return!1;for(var o=0;o<i.length;o++)if(0!==s.compare(i[o],r[o]))return!1;return!0}}},{key:"intersection",value:function(t,e){for(var n=new Vt,i=0;i<t.length;i++)e.intersects(t[i])&&n.add(t[i],!0);return n.toCoordinateArray()}},{key:"measures",value:function(t){if(null===t||0===t.length)return 0;var e,n=0,i=m(t);try{for(i.s();!(e=i.n()).done;){var r=e.value;n=Math.max(n,Wt.measures(r))}}catch(t){i.e(t)}finally{i.f()}return n}},{key:"hasRepeatedPoints",value:function(t){for(var e=1;e<t.length;e++)if(t[e-1].equals(t[e]))return!0;return!1}},{key:"removeRepeatedPoints",value:function(t){return e.hasRepeatedPoints(t)?new Vt(t,!1).toCoordinateArray():t}},{key:"reverse",value:function(t){for(var e=t.length-1,n=Math.trunc(e/2),i=0;i<=n;i++){var r=t[i];t[i]=t[e-i],t[e-i]=r}}},{key:"removeNull",value:function(t){for(var e=0,n=0;n<t.length;n++)null!==t[n]&&e++;var i=new Array(e).fill(null);if(0===e)return i;for(var r=0,s=0;s<t.length;s++)null!==t[s]&&(i[r++]=t[s]);return i}},{key:"copyDeep",value:function(){if(1===arguments.length){for(var t=arguments[0],e=new Array(t.length).fill(null),n=0;n<t.length;n++)e[n]=t[n].copy();return e}if(5===arguments.length)for(var i=arguments[0],r=arguments[1],s=arguments[2],o=arguments[3],a=arguments[4],l=0;l<a;l++)s[o+l]=i[r+l].copy()}},{key:"isEqualReversed",value:function(t,e){for(var n=0;n<t.length;n++){var i=t[n],r=e[t.length-n-1];if(0!==i.compareTo(r))return!1}return!0}},{key:"envelope",value:function(t){for(var e=new X,n=0;n<t.length;n++)e.expandToInclude(t[n]);return e}},{key:"toCoordinateArray",value:function(t){return t.toArray(e.coordArrayType)}},{key:"dimension",value:function(t){if(null===t||0===t.length)return 3;var e,n=0,i=m(t);try{for(i.s();!(e=i.n()).done;){var r=e.value;n=Math.max(n,Wt.dimension(r))}}catch(t){i.e(t)}finally{i.f()}return n}},{key:"atLeastNCoordinatesOrNothing",value:function(t,e){return e.length>=t?e:[]}},{key:"indexOf",value:function(t,e){for(var n=0;n<e.length;n++)if(t.equals(e[n]))return n;return-1}},{key:"increasingDirection",value:function(t){for(var e=0;e<Math.trunc(t.length/2);e++){var n=t.length-1-e,i=t[e].compareTo(t[n]);if(0!==i)return i}return 1}},{key:"compare",value:function(t,e){for(var n=0;n<t.length&&n<e.length;){var i=t[n].compareTo(e[n]);if(0!==i)return i;n++}return n<e.length?-1:n<t.length?1:0}},{key:"minCoordinate",value:function(t){for(var e=null,n=0;n<t.length;n++)(null===e||e.compareTo(t[n])>0)&&(e=t[n]);return e}},{key:"extract",value:function(t,e,n){e=xt.clamp(e,0,t.length);var i=(n=xt.clamp(n,-1,t.length))-e+1;n<0&&(i=0),e>=t.length&&(i=0),n<e&&(i=0);var r=new Array(i).fill(null);if(0===i)return r;for(var s=0,o=e;o<=n;o++)r[s++]=t[o];return r}}]),e}(),Kt=function(){function e(){t(this,e)}return n(e,[{key:"compare",value:function(t,e){var n=t,i=e;return Ht.compare(n,i)}},{key:"interfaces_",get:function(){return[A]}}]),e}(),Zt=function(){function e(){t(this,e)}return n(e,[{key:"compare",value:function(t,e){var n=t,i=e;if(n.length<i.length)return-1;if(n.length>i.length)return 1;if(0===n.length)return 0;var r=Ht.compare(n,i);return Ht.isEqualReversed(n,i)?0:r}},{key:"OLDcompare",value:function(t,e){var n=t,i=e;if(n.length<i.length)return-1;if(n.length>i.length)return 1;if(0===n.length)return 0;for(var r=Ht.increasingDirection(n),s=Ht.increasingDirection(i),o=r>0?0:n.length-1,a=s>0?0:n.length-1,l=0;l<n.length;l++){var u=n[o].compareTo(i[a]);if(0!==u)return u;o+=r,a+=s}return 0}},{key:"interfaces_",get:function(){return[A]}}]),e}();Ht.ForwardComparator=Kt,Ht.BidirectionalComparator=Zt,Ht.coordArrayType=new Array(0).fill(null);var $t=function(){function e(n){t(this,e),this.str=n}return n(e,[{key:"append",value:function(t){this.str+=t}},{key:"setCharAt",value:function(t,e){this.str=this.str.substr(0,t)+e+this.str.substr(t+1)}},{key:"toString",value:function(){return this.str}}]),e}(),Jt=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:"getM",value:function(t){return this.hasM()?this._coordinates[t].getM():O.NaN}},{key:"setOrdinate",value:function(t,e,n){switch(e){case ht.X:this._coordinates[t].x=n;break;case ht.Y:this._coordinates[t].y=n;break;default:this._coordinates[t].setOrdinate(e,n)}}},{key:"getZ",value:function(t){return this.hasZ()?this._coordinates[t].getZ():O.NaN}},{key:"size",value:function(){return this._coordinates.length}},{key:"getOrdinate",value:function(t,e){switch(e){case ht.X:return this._coordinates[t].x;case ht.Y:return this._coordinates[t].y;default:return this._coordinates[t].getOrdinate(e)}}},{key:"getCoordinate",value:function(){if(1===arguments.length){var t=arguments[0];return this._coordinates[t]}if(2===arguments.length){var e=arguments[0];arguments[1].setCoordinate(this._coordinates[e])}}},{key:"getCoordinateCopy",value:function(t){var e=this.createCoordinate();return e.setCoordinate(this._coordinates[t]),e}},{key:"createCoordinate",value:function(){return Wt.create(this.getDimension(),this.getMeasures())}},{key:"getDimension",value:function(){return this._dimension}},{key:"getX",value:function(t){return this._coordinates[t].x}},{key:"getMeasures",value:function(){return this._measures}},{key:"expandEnvelope",value:function(t){for(var e=0;e<this._coordinates.length;e++)t.expandToInclude(this._coordinates[e]);return t}},{key:"copy",value:function(){for(var t=new Array(this.size()).fill(null),n=0;n<this._coordinates.length;n++){var i=this.createCoordinate();i.setCoordinate(this._coordinates[n]),t[n]=i}return new e(t,this._dimension,this._measures)}},{key:"toString",value:function(){if(this._coordinates.length>0){var t=new $t(17*this._coordinates.length);t.append("("),t.append(this._coordinates[0]);for(var e=1;e<this._coordinates.length;e++)t.append(", "),t.append(this._coordinates[e]);return t.append(")"),t.toString()}return"()"}},{key:"getY",value:function(t){return this._coordinates[t].y}},{key:"toCoordinateArray",value:function(){return this._coordinates}},{key:"interfaces_",get:function(){return[ht,E]}}],[{key:"constructor_",value:function(){if(this._dimension=3,this._measures=0,this._coordinates=null,1===arguments.length){if(arguments[0]instanceof Array){var t=arguments[0];e.constructor_.call(this,t,Ht.dimension(t),Ht.measures(t))}else if(Number.isInteger(arguments[0])){var n=arguments[0];this._coordinates=new Array(n).fill(null);for(var i=0;i<n;i++)this._coordinates[i]=new B}else if(rt(arguments[0],ht)){var r=arguments[0];if(null===r)return this._coordinates=new Array(0).fill(null),null;this._dimension=r.getDimension(),this._measures=r.getMeasures(),this._coordinates=new Array(r.size()).fill(null);for(var s=0;s<this._coordinates.length;s++)this._coordinates[s]=r.getCoordinateCopy(s)}}else if(2===arguments.length){if(arguments[0]instanceof Array&&Number.isInteger(arguments[1])){var o=arguments[0],a=arguments[1];e.constructor_.call(this,o,a,Ht.measures(o))}else if(Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var l=arguments[0],u=arguments[1];this._coordinates=new Array(l).fill(null),this._dimension=u;for(var h=0;h<l;h++)this._coordinates[h]=Wt.create(u)}}else if(3===arguments.length)if(Number.isInteger(arguments[2])&&arguments[0]instanceof Array&&Number.isInteger(arguments[1])){var c=arguments[0],d=arguments[1],f=arguments[2];this._dimension=d,this._measures=f,this._coordinates=null===c?new Array(0).fill(null):c}else if(Number.isInteger(arguments[2])&&Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var g=arguments[0],p=arguments[1],m=arguments[2];this._coordinates=new Array(g).fill(null),this._dimension=p,this._measures=m;for(var y=0;y<g;y++)this._coordinates[y]=this.createCoordinate()}}}]),e}(),Qt=function(){function e(){t(this,e)}return n(e,[{key:"readResolve",value:function(){return e.instance()}},{key:"create",value:function(){if(1===arguments.length){if(arguments[0]instanceof Array)return new Jt(arguments[0]);if(rt(arguments[0],ht))return new Jt(arguments[0])}else{if(2===arguments.length){var t=arguments[1];return t>3&&(t=3),t<2&&(t=2),new Jt(arguments[0],t)}if(3===arguments.length){var e=arguments[2],n=arguments[1]-e;return e>1&&(e=1),n>3&&(n=3),n<2&&(n=2),new Jt(arguments[0],n+e,e)}}}},{key:"interfaces_",get:function(){return[kt,E]}}],[{key:"instance",value:function(){return e.instanceObject}}]),e}();Qt.instanceObject=new Qt;var te=function(e){i(o,e);var s=c(o);function o(){var e;return t(this,o),e=s.call(this),o.constructor_.apply(u(e),arguments),e}return n(o,[{key:"copyInternal",value:function(){for(var t=new Array(this._geometries.length).fill(null),e=0;e<t.length;e++)t[e]=this._geometries[e].copy();return new o(t,this._factory)}},{key:"equalsExact",value:function(){if(2===arguments.length&&"number"==typeof arguments[1]&&arguments[0]instanceof q){var t=arguments[0],e=arguments[1];return!!this.isEquivalentClass(t)&&d(r(o.prototype),"equalsExact",this).call(this,t,e)}return d(r(o.prototype),"equalsExact",this).apply(this,arguments)}},{key:"getBoundaryDimension",value:function(){return 1}},{key:"getTypeCode",value:function(){return q.TYPECODE_MULTIPOLYGON}},{key:"getDimension",value:function(){return 2}},{key:"getBoundary",value:function(){if(this.isEmpty())return this.getFactory().createMultiLineString();for(var t=new pt,e=0;e<this._geometries.length;e++)for(var n=this._geometries[e].getBoundary(),i=0;i<n.getNumGeometries();i++)t.add(n.getGeometryN(i));var r=new Array(t.size()).fill(null);return this.getFactory().createMultiLineString(t.toArray(r))}},{key:"getGeometryType",value:function(){return q.TYPENAME_MULTIPOLYGON}},{key:"interfaces_",get:function(){return[At]}}],[{key:"constructor_",value:function(){var t=arguments[0],e=arguments[1];jt.constructor_.call(this,t,e)}}]),o}(jt),ee=function(){function e(){t(this,e)}return n(e,[{key:"get",value:function(){}},{key:"put",value:function(){}},{key:"size",value:function(){}},{key:"values",value:function(){}},{key:"entrySet",value:function(){}}]),e}(),ne=function(e){i(s,e);var r=c(s);function s(){var e;return t(this,s),(e=r.call(this)).map=new Map,e}return n(s,[{key:"get",value:function(t){return this.map.get(t)||null}},{key:"put",value:function(t,e){return this.map.set(t,e),e}},{key:"values",value:function(){for(var t=new pt,e=this.map.values(),n=e.next();!n.done;)t.add(n.value),n=e.next();return t}},{key:"entrySet",value:function(){var t=new $;return this.map.entries().forEach((function(e){return t.add(e)})),t}},{key:"size",value:function(){return this.map.size()}}]),s}(ee),ie=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:"equals",value:function(t){if(!(t instanceof e))return!1;var n=t;return this._modelType===n._modelType&&this._scale===n._scale}},{key:"compareTo",value:function(t){var e=t,n=this.getMaximumSignificantDigits(),i=e.getMaximumSignificantDigits();return ot.compare(n,i)}},{key:"getScale",value:function(){return this._scale}},{key:"isFloating",value:function(){return this._modelType===e.FLOATING||this._modelType===e.FLOATING_SINGLE}},{key:"getType",value:function(){return this._modelType}},{key:"toString",value:function(){var t="UNKNOWN";return this._modelType===e.FLOATING?t="Floating":this._modelType===e.FLOATING_SINGLE?t="Floating-Single":this._modelType===e.FIXED&&(t="Fixed (Scale="+this.getScale()+")"),t}},{key:"makePrecise",value:function(){if("number"==typeof arguments[0]){var t=arguments[0];return O.isNaN(t)||this._modelType===e.FLOATING_SINGLE?t:this._modelType===e.FIXED?Math.round(t*this._scale)/this._scale:t}if(arguments[0]instanceof B){var n=arguments[0];if(this._modelType===e.FLOATING)return null;n.x=this.makePrecise(n.x),n.y=this.makePrecise(n.y)}}},{key:"getMaximumSignificantDigits",value:function(){var t=16;return this._modelType===e.FLOATING?t=16:this._modelType===e.FLOATING_SINGLE?t=6:this._modelType===e.FIXED&&(t=1+Math.trunc(Math.ceil(Math.log(this.getScale())/Math.log(10)))),t}},{key:"setScale",value:function(t){this._scale=Math.abs(t)}},{key:"interfaces_",get:function(){return[E,w]}}],[{key:"constructor_",value:function(){if(this._modelType=null,this._scale=null,0===arguments.length)this._modelType=e.FLOATING;else if(1===arguments.length)if(arguments[0]instanceof re){var t=arguments[0];this._modelType=t,t===e.FIXED&&this.setScale(1)}else if("number"==typeof arguments[0]){var n=arguments[0];this._modelType=e.FIXED,this.setScale(n)}else if(arguments[0]instanceof e){var i=arguments[0];this._modelType=i._modelType,this._scale=i._scale}}},{key:"mostPrecise",value:function(t,e){return t.compareTo(e)>=0?t:e}}]),e}(),re=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:"readResolve",value:function(){return e.nameToTypeMap.get(this._name)}},{key:"toString",value:function(){return this._name}},{key:"interfaces_",get:function(){return[E]}}],[{key:"constructor_",value:function(){this._name=null;var t=arguments[0];this._name=t,e.nameToTypeMap.put(t,this)}}]),e}();re.nameToTypeMap=new ne,ie.Type=re,ie.FIXED=new re("FIXED"),ie.FLOATING=new re("FLOATING"),ie.FLOATING_SINGLE=new re("FLOATING SINGLE"),ie.maximumPreciseValue=9007199254740992;var se=function(e){i(o,e);var s=c(o);function o(){var e;return t(this,o),e=s.call(this),o.constructor_.apply(u(e),arguments),e}return n(o,[{key:"copyInternal",value:function(){for(var t=new Array(this._geometries.length).fill(null),e=0;e<t.length;e++)t[e]=this._geometries[e].copy();return new o(t,this._factory)}},{key:"equalsExact",value:function(){if(2===arguments.length&&"number"==typeof arguments[1]&&arguments[0]instanceof q){var t=arguments[0],e=arguments[1];return!!this.isEquivalentClass(t)&&d(r(o.prototype),"equalsExact",this).call(this,t,e)}return d(r(o.prototype),"equalsExact",this).apply(this,arguments)}},{key:"getBoundaryDimension",value:function(){return this.isClosed()?It.FALSE:0}},{key:"isClosed",value:function(){if(this.isEmpty())return!1;for(var t=0;t<this._geometries.length;t++)if(!this._geometries[t].isClosed())return!1;return!0}},{key:"getTypeCode",value:function(){return q.TYPECODE_MULTILINESTRING}},{key:"getDimension",value:function(){return 1}},{key:"getBoundary",value:function(){throw new K}},{key:"getGeometryType",value:function(){return q.TYPENAME_MULTILINESTRING}},{key:"interfaces_",get:function(){return[bt]}}],[{key:"constructor_",value:function(){var t=arguments[0],e=arguments[1];jt.constructor_.call(this,t,e)}}]),o}(jt),oe=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:"createEmpty",value:function(t){switch(t){case-1:return this.createGeometryCollection();case 0:return this.createPoint();case 1:return this.createLineString();case 2:return this.createPolygon();default:throw new v("Invalid dimension: "+t)}}},{key:"toGeometry",value:function(t){return t.isNull()?this.createPoint():t.getMinX()===t.getMaxX()&&t.getMinY()===t.getMaxY()?this.createPoint(new B(t.getMinX(),t.getMinY())):t.getMinX()===t.getMaxX()||t.getMinY()===t.getMaxY()?this.createLineString([new B(t.getMinX(),t.getMinY()),new B(t.getMaxX(),t.getMaxY())]):this.createPolygon(this.createLinearRing([new B(t.getMinX(),t.getMinY()),new B(t.getMinX(),t.getMaxY()),new B(t.getMaxX(),t.getMaxY()),new B(t.getMaxX(),t.getMinY()),new B(t.getMinX(),t.getMinY())]),null)}},{key:"createLineString",value:function(){if(0===arguments.length)return this.createLineString(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof Array){var t=arguments[0];return this.createLineString(null!==t?this.getCoordinateSequenceFactory().create(t):null)}if(rt(arguments[0],ht))return new Nt(arguments[0],this)}}},{key:"createMultiLineString",value:function(){return 0===arguments.length?new se(null,this):1===arguments.length?new se(arguments[0],this):void 0}},{key:"buildGeometry",value:function(t){for(var n=null,i=!1,r=!1,s=t.iterator();s.hasNext();){var o=s.next(),a=o.getTypeCode();null===n&&(n=a),a!==n&&(i=!0),o instanceof jt&&(r=!0)}if(null===n)return this.createGeometryCollection();if(i||r)return this.createGeometryCollection(e.toGeometryArray(t));var l=t.iterator().next();if(t.size()>1){if(l instanceof Ft)return this.createMultiPolygon(e.toPolygonArray(t));if(l instanceof Nt)return this.createMultiLineString(e.toLineStringArray(t));if(l instanceof Mt)return this.createMultiPoint(e.toPointArray(t));z.shouldNeverReachHere("Unhandled geometry type: "+l.getGeometryType())}return l}},{key:"createMultiPointFromCoords",value:function(t){return this.createMultiPoint(null!==t?this.getCoordinateSequenceFactory().create(t):null)}},{key:"createPoint",value:function(){if(0===arguments.length)return this.createPoint(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof B){var t=arguments[0];return this.createPoint(null!==t?this.getCoordinateSequenceFactory().create([t]):null)}if(rt(arguments[0],ht))return new Mt(arguments[0],this)}}},{key:"getCoordinateSequenceFactory",value:function(){return this._coordinateSequenceFactory}},{key:"createPolygon",value:function(){if(0===arguments.length)return this.createPolygon(null,null);if(1===arguments.length){if(rt(arguments[0],ht)){var t=arguments[0];return this.createPolygon(this.createLinearRing(t))}if(arguments[0]instanceof Array){var e=arguments[0];return this.createPolygon(this.createLinearRing(e))}if(arguments[0]instanceof Bt){var n=arguments[0];return this.createPolygon(n,null)}}else if(2===arguments.length)return new Ft(arguments[0],arguments[1],this)}},{key:"getSRID",value:function(){return this._SRID}},{key:"createGeometryCollection",value:function(){return 0===arguments.length?new jt(null,this):1===arguments.length?new jt(arguments[0],this):void 0}},{key:"getPrecisionModel",value:function(){return this._precisionModel}},{key:"createLinearRing",value:function(){if(0===arguments.length)return this.createLinearRing(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof Array){var t=arguments[0];return this.createLinearRing(null!==t?this.getCoordinateSequenceFactory().create(t):null)}if(rt(arguments[0],ht))return new Bt(arguments[0],this)}}},{key:"createMultiPolygon",value:function(){return 0===arguments.length?new te(null,this):1===arguments.length?new te(arguments[0],this):void 0}},{key:"createMultiPoint",value:function(){if(0===arguments.length)return new Yt(null,this);if(1===arguments.length){if(arguments[0]instanceof Array)return new Yt(arguments[0],this);if(rt(arguments[0],ht)){var t=arguments[0];if(null===t)return this.createMultiPoint(new Array(0).fill(null));for(var e=new Array(t.size()).fill(null),n=0;n<t.size();n++){var i=this.getCoordinateSequenceFactory().create(1,t.getDimension(),t.getMeasures());Ct.copy(t,n,i,0,1),e[n]=this.createPoint(i)}return this.createMultiPoint(e)}}}},{key:"interfaces_",get:function(){return[E]}}],[{key:"constructor_",value:function(){if(this._precisionModel=null,this._coordinateSequenceFactory=null,this._SRID=null,0===arguments.length)e.constructor_.call(this,new ie,0);else if(1===arguments.length){if(rt(arguments[0],kt)){var t=arguments[0];e.constructor_.call(this,new ie,0,t)}else if(arguments[0]instanceof ie){var n=arguments[0];e.constructor_.call(this,n,0,e.getDefaultCoordinateSequenceFactory())}}else if(2===arguments.length){var i=arguments[0],r=arguments[1];e.constructor_.call(this,i,r,e.getDefaultCoordinateSequenceFactory())}else if(3===arguments.length){var s=arguments[0],o=arguments[1],a=arguments[2];this._precisionModel=s,this._coordinateSequenceFactory=a,this._SRID=o}}},{key:"toMultiPolygonArray",value:function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)}},{key:"toGeometryArray",value:function(t){if(null===t)return null;var e=new Array(t.size()).fill(null);return t.toArray(e)}},{key:"getDefaultCoordinateSequenceFactory",value:function(){return Qt.instance()}},{key:"toMultiLineStringArray",value:function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)}},{key:"toLineStringArray",value:function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)}},{key:"toMultiPointArray",value:function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)}},{key:"toLinearRingArray",value:function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)}},{key:"toPointArray",value:function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)}},{key:"toPolygonArray",value:function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)}},{key:"createPointFromInternalCoord",value:function(t,e){return e.getPrecisionModel().makePrecise(t),e.getFactory().createPoint(t)}}]),e}(),ae="XY",le="XYZ",ue="XYM",he="XYZM",ce={POINT:"Point",LINE_STRING:"LineString",LINEAR_RING:"LinearRing",POLYGON:"Polygon",MULTI_POINT:"MultiPoint",MULTI_LINE_STRING:"MultiLineString",MULTI_POLYGON:"MultiPolygon",GEOMETRY_COLLECTION:"GeometryCollection",CIRCLE:"Circle"},de="EMPTY",fe=1,ge=2,pe=3,me=4,ye=5,_e=6,ve={};for(var xe in ce)ve[xe]=ce[xe].toUpperCase();var we=function(){function e(n){t(this,e),this.wkt=n,this.index_=-1}return n(e,[{key:"isAlpha_",value:function(t){return t>="a"&&t<="z"||t>="A"&&t<="Z"}},{key:"isNumeric_",value:function(t,e){return t>="0"&&t<="9"||"."==t&&!(void 0!==e&&e)}},{key:"isWhiteSpace_",value:function(t){return" "==t||"\t"==t||"\r"==t||"\n"==t}},{key:"nextChar_",value:function(){return this.wkt.charAt(++this.index_)}},{key:"nextToken",value:function(){var t,e=this.nextChar_(),n=this.index_,i=e;if("("==e)t=ge;else if(","==e)t=ye;else if(")"==e)t=pe;else if(this.isNumeric_(e)||"-"==e)t=me,i=this.readNumber_();else if(this.isAlpha_(e))t=fe,i=this.readText_();else{if(this.isWhiteSpace_(e))return this.nextToken();if(""!==e)throw new Error("Unexpected character: "+e);t=_e}return{position:n,value:i,type:t}}},{key:"readNumber_",value:function(){var t,e=this.index_,n=!1,i=!1;do{"."==t?n=!0:"e"!=t&&"E"!=t||(i=!0),t=this.nextChar_()}while(this.isNumeric_(t,n)||!i&&("e"==t||"E"==t)||i&&("-"==t||"+"==t));return parseFloat(this.wkt.substring(e,this.index_--))}},{key:"readText_",value:function(){var t,e=this.index_;do{t=this.nextChar_()}while(this.isAlpha_(t));return this.wkt.substring(e,this.index_--).toUpperCase()}}]),e}(),ke=function(){function e(n,i){t(this,e),this.lexer_=n,this.token_,this.layout_=ae,this.factory=i}return n(e,[{key:"consume_",value:function(){this.token_=this.lexer_.nextToken()}},{key:"isTokenType",value:function(t){return this.token_.type==t}},{key:"match",value:function(t){var e=this.isTokenType(t);return e&&this.consume_(),e}},{key:"parse",value:function(){return this.consume_(),this.parseGeometry_()}},{key:"parseGeometryLayout_",value:function(){var t=ae,e=this.token_;if(this.isTokenType(fe)){var n=e.value;"Z"===n?t=le:"M"===n?t=ue:"ZM"===n&&(t=he),t!==ae&&this.consume_()}return t}},{key:"parseGeometryCollectionText_",value:function(){if(this.match(ge)){var t=[];do{t.push(this.parseGeometry_())}while(this.match(ye));if(this.match(pe))return t}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}},{key:"parsePointText_",value:function(){if(this.match(ge)){var t=this.parsePoint_();if(this.match(pe))return t}else if(this.isEmptyGeometry_())return null;throw new Error(this.formatErrorMessage_())}},{key:"parseLineStringText_",value:function(){if(this.match(ge)){var t=this.parsePointList_();if(this.match(pe))return t}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}},{key:"parsePolygonText_",value:function(){if(this.match(ge)){var t=this.parseLineStringTextList_();if(this.match(pe))return t}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}},{key:"parseMultiPointText_",value:function(){var t;if(this.match(ge)){if(t=this.token_.type==ge?this.parsePointTextList_():this.parsePointList_(),this.match(pe))return t}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}},{key:"parseMultiLineStringText_",value:function(){if(this.match(ge)){var t=this.parseLineStringTextList_();if(this.match(pe))return t}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}},{key:"parseMultiPolygonText_",value:function(){if(this.match(ge)){var t=this.parsePolygonTextList_();if(this.match(pe))return t}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}},{key:"parsePoint_",value:function(){for(var t=[],e=this.layout_.length,n=0;n<e;++n){var i=this.token_;if(!this.match(me))break;t.push(i.value)}if(t.length==e)return t;throw new Error(this.formatErrorMessage_())}},{key:"parsePointList_",value:function(){for(var t=[this.parsePoint_()];this.match(ye);)t.push(this.parsePoint_());return t}},{key:"parsePointTextList_",value:function(){for(var t=[this.parsePointText_()];this.match(ye);)t.push(this.parsePointText_());return t}},{key:"parseLineStringTextList_",value:function(){for(var t=[this.parseLineStringText_()];this.match(ye);)t.push(this.parseLineStringText_());return t}},{key:"parsePolygonTextList_",value:function(){for(var t=[this.parsePolygonText_()];this.match(ye);)t.push(this.parsePolygonText_());return t}},{key:"isEmptyGeometry_",value:function(){var t=this.isTokenType(fe)&&this.token_.value==de;return t&&this.consume_(),t}},{key:"formatErrorMessage_",value:function(){return"Unexpected `"+this.token_.value+"` at position "+this.token_.position+" in `"+this.lexer_.wkt+"`"}},{key:"parseGeometry_",value:function(){var t=this.factory,e=function(t){return a(B,f(t))},n=function(n){var i=n.map((function(n){return t.createLinearRing(n.map(e))}));return i.length>1?t.createPolygon(i[0],i.slice(1)):t.createPolygon(i[0])},i=this.token_;if(this.match(fe)){var r=i.value;if(this.layout_=this.parseGeometryLayout_(),"GEOMETRYCOLLECTION"==r){var s=this.parseGeometryCollectionText_();return t.createGeometryCollection(s)}switch(r){case"POINT":var o=this.parsePointText_();return o?t.createPoint(a(B,f(o))):t.createPoint();case"LINESTRING":var l=this.parseLineStringText_().map(e);return t.createLineString(l);case"LINEARRING":var u=this.parseLineStringText_().map(e);return t.createLinearRing(u);case"POLYGON":var h=this.parsePolygonText_();return h&&0!==h.length?n(h):t.createPolygon();case"MULTIPOINT":var c=this.parseMultiPointText_();if(!c||0===c.length)return t.createMultiPoint();var d=c.map(e).map((function(e){return t.createPoint(e)}));return t.createMultiPoint(d);case"MULTILINESTRING":var g=this.parseMultiLineStringText_().map((function(n){return t.createLineString(n.map(e))}));return t.createMultiLineString(g);case"MULTIPOLYGON":var p=this.parseMultiPolygonText_();if(!p||0===p.length)return t.createMultiPolygon();var m=p.map(n);return t.createMultiPolygon(m);default:throw new Error("Invalid geometry type: "+r)}}throw new Error(this.formatErrorMessage_())}}]),e}();function Ee(t){if(t.isEmpty())return"";var e=t.getCoordinate(),n=[e.x,e.y];return void 0===e.z||Number.isNaN(e.z)||n.push(e.z),void 0===e.m||Number.isNaN(e.m)||n.push(e.m),n.join(" ")}function Se(t){for(var e=t.getCoordinates().map((function(t){var e=[t.x,t.y];return void 0===t.z||Number.isNaN(t.z)||e.push(t.z),void 0===t.m||Number.isNaN(t.m)||e.push(t.m),e})),n=[],i=0,r=e.length;i<r;++i)n.push(e[i].join(" "));return n.join(", ")}function be(t){var e=[];e.push("("+Se(t.getExteriorRing())+")");for(var n=0,i=t.getNumInteriorRing();n<i;++n)e.push("("+Se(t.getInteriorRingN(n))+")");return e.join(", ")}var Ce={Point:Ee,LineString:Se,LinearRing:Se,Polygon:be,MultiPoint:function(t){for(var e=[],n=0,i=t.getNumGeometries();n<i;++n)e.push("("+Ee(t.getGeometryN(n))+")");return e.join(", ")},MultiLineString:function(t){for(var e=[],n=0,i=t.getNumGeometries();n<i;++n)e.push("("+Se(t.getGeometryN(n))+")");return e.join(", ")},MultiPolygon:function(t){for(var e=[],n=0,i=t.getNumGeometries();n<i;++n)e.push("("+be(t.getGeometryN(n))+")");return e.join(", ")},GeometryCollection:function(t){for(var e=[],n=0,i=t.getNumGeometries();n<i;++n)e.push(Ie(t.getGeometryN(n)));return e.join(", ")}};function Ie(t){var e=t.getGeometryType(),n=Ce[e];e=e.toUpperCase();var i=function(t){var e="";if(t.isEmpty())return e;var n=t.getCoordinate();return void 0===n.z||Number.isNaN(n.z)||(e+="Z"),void 0===n.m||Number.isNaN(n.m)||(e+="M"),e}(t);return i.length>0&&(e+=" "+i),t.isEmpty()?e+" "+de:e+" ("+n(t)+")"}var Te=function(){function e(n){t(this,e),this.geometryFactory=n||new oe,this.precisionModel=this.geometryFactory.getPrecisionModel()}return n(e,[{key:"read",value:function(t){var e=new we(t);return new ke(e,this.geometryFactory).parse()}},{key:"write",value:function(t){return Ie(t)}}]),e}(),Re=function(){function e(n){t(this,e),this.parser=new Te(n)}return n(e,[{key:"write",value:function(t){return this.parser.write(t)}}],[{key:"toLineString",value:function(t,e){if(2!==arguments.length)throw new Error("Not implemented");return"LINESTRING ( "+t.x+" "+t.y+", "+e.x+" "+e.y+" )"}}]),e}(),Ne=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:"getIndexAlongSegment",value:function(t,e){return this.computeIntLineIndex(),this._intLineIndex[t][e]}},{key:"getTopologySummary",value:function(){var t=new $t;return this.isEndPoint()&&t.append(" endpoint"),this._isProper&&t.append(" proper"),this.isCollinear()&&t.append(" collinear"),t.toString()}},{key:"computeIntersection",value:function(t,e,n,i){this._inputLines[0][0]=t,this._inputLines[0][1]=e,this._inputLines[1][0]=n,this._inputLines[1][1]=i,this._result=this.computeIntersect(t,e,n,i)}},{key:"getIntersectionNum",value:function(){return this._result}},{key:"computeIntLineIndex",value:function(){if(0===arguments.length)null===this._intLineIndex&&(this._intLineIndex=Array(2).fill().map((function(){return Array(2)})),this.computeIntLineIndex(0),this.computeIntLineIndex(1));else if(1===arguments.length){var t=arguments[0];this.getEdgeDistance(t,0)>this.getEdgeDistance(t,1)?(this._intLineIndex[t][0]=0,this._intLineIndex[t][1]=1):(this._intLineIndex[t][0]=1,this._intLineIndex[t][1]=0)}}},{key:"isProper",value:function(){return this.hasIntersection()&&this._isProper}},{key:"setPrecisionModel",value:function(t){this._precisionModel=t}},{key:"isInteriorIntersection",value:function(){if(0===arguments.length)return!!this.isInteriorIntersection(0)||!!this.isInteriorIntersection(1);if(1===arguments.length){for(var t=arguments[0],e=0;e<this._result;e++)if(!this._intPt[e].equals2D(this._inputLines[t][0])&&!this._intPt[e].equals2D(this._inputLines[t][1]))return!0;return!1}}},{key:"getIntersection",value:function(t){return this._intPt[t]}},{key:"isEndPoint",value:function(){return this.hasIntersection()&&!this._isProper}},{key:"hasIntersection",value:function(){return this._result!==e.NO_INTERSECTION}},{key:"getEdgeDistance",value:function(t,n){return e.computeEdgeDistance(this._intPt[n],this._inputLines[t][0],this._inputLines[t][1])}},{key:"isCollinear",value:function(){return this._result===e.COLLINEAR_INTERSECTION}},{key:"toString",value:function(){return Re.toLineString(this._inputLines[0][0],this._inputLines[0][1])+" - "+Re.toLineString(this._inputLines[1][0],this._inputLines[1][1])+this.getTopologySummary()}},{key:"getEndpoint",value:function(t,e){return this._inputLines[t][e]}},{key:"isIntersection",value:function(t){for(var e=0;e<this._result;e++)if(this._intPt[e].equals2D(t))return!0;return!1}},{key:"getIntersectionAlongSegment",value:function(t,e){return this.computeIntLineIndex(),this._intPt[this._intLineIndex[t][e]]}}],[{key:"constructor_",value:function(){this._result=null,this._inputLines=Array(2).fill().map((function(){return Array(2)})),this._intPt=new Array(2).fill(null),this._intLineIndex=null,this._isProper=null,this._pa=null,this._pb=null,this._precisionModel=null,this._intPt[0]=new B,this._intPt[1]=new B,this._pa=this._intPt[0],this._pb=this._intPt[1],this._result=0}},{key:"computeEdgeDistance",value:function(t,e,n){var i=Math.abs(n.x-e.x),r=Math.abs(n.y-e.y),s=-1;if(t.equals(e))s=0;else if(t.equals(n))s=i>r?i:r;else{var o=Math.abs(t.x-e.x),a=Math.abs(t.y-e.y);0!==(s=i>r?o:a)||t.equals(e)||(s=Math.max(o,a))}return z.isTrue(!(0===s&&!t.equals(e)),"Bad distance calculation"),s}},{key:"nonRobustComputeEdgeDistance",value:function(t,e,n){var i=t.x-e.x,r=t.y-e.y,s=Math.sqrt(i*i+r*r);return z.isTrue(!(0===s&&!t.equals(e)),"Invalid distance calculation"),s}}]),e}();Ne.DONT_INTERSECT=0,Ne.DO_INTERSECT=1,Ne.COLLINEAR=2,Ne.NO_INTERSECTION=0,Ne.POINT_INTERSECTION=1,Ne.COLLINEAR_INTERSECTION=2;var Le=function(e){i(o,e);var s=c(o);function o(){return t(this,o),s.call(this)}return n(o,[{key:"isInSegmentEnvelopes",value:function(t){var e=new X(this._inputLines[0][0],this._inputLines[0][1]),n=new X(this._inputLines[1][0],this._inputLines[1][1]);return e.contains(t)&&n.contains(t)}},{key:"computeIntersection",value:function(){if(3!==arguments.length)return d(r(o.prototype),"computeIntersection",this).apply(this,arguments);var t=arguments[0],e=arguments[1],n=arguments[2];if(this._isProper=!1,X.intersects(e,n,t)&&0===ct.index(e,n,t)&&0===ct.index(n,e,t))return this._isProper=!0,(t.equals(e)||t.equals(n))&&(this._isProper=!1),this._result=Ne.POINT_INTERSECTION,null;this._result=Ne.NO_INTERSECTION}},{key:"intersection",value:function(t,e,n,i){var r=this.intersectionSafe(t,e,n,i);return this.isInSegmentEnvelopes(r)||(r=new B(o.nearestEndpoint(t,e,n,i))),null!==this._precisionModel&&this._precisionModel.makePrecise(r),r}},{key:"checkDD",value:function(t,e,n,i,r){var s=ut.intersection(t,e,n,i),o=this.isInSegmentEnvelopes(s);vt.out.println("DD in env = "+o+"  --------------------- "+s),r.distance(s)>1e-4&&vt.out.println("Distance = "+r.distance(s))}},{key:"intersectionSafe",value:function(t,e,n,i){var r=_t.intersection(t,e,n,i);return null===r&&(r=o.nearestEndpoint(t,e,n,i)),r}},{key:"computeCollinearIntersection",value:function(t,e,n,i){var r=X.intersects(t,e,n),s=X.intersects(t,e,i),o=X.intersects(n,i,t),a=X.intersects(n,i,e);return r&&s?(this._intPt[0]=n,this._intPt[1]=i,Ne.COLLINEAR_INTERSECTION):o&&a?(this._intPt[0]=t,this._intPt[1]=e,Ne.COLLINEAR_INTERSECTION):r&&o?(this._intPt[0]=n,this._intPt[1]=t,!n.equals(t)||s||a?Ne.COLLINEAR_INTERSECTION:Ne.POINT_INTERSECTION):r&&a?(this._intPt[0]=n,this._intPt[1]=e,!n.equals(e)||s||o?Ne.COLLINEAR_INTERSECTION:Ne.POINT_INTERSECTION):s&&o?(this._intPt[0]=i,this._intPt[1]=t,!i.equals(t)||r||a?Ne.COLLINEAR_INTERSECTION:Ne.POINT_INTERSECTION):s&&a?(this._intPt[0]=i,this._intPt[1]=e,!i.equals(e)||r||o?Ne.COLLINEAR_INTERSECTION:Ne.POINT_INTERSECTION):Ne.NO_INTERSECTION}},{key:"computeIntersect",value:function(t,e,n,i){if(this._isProper=!1,!X.intersects(t,e,n,i))return Ne.NO_INTERSECTION;var r=ct.index(t,e,n),s=ct.index(t,e,i);if(r>0&&s>0||r<0&&s<0)return Ne.NO_INTERSECTION;var o=ct.index(n,i,t),a=ct.index(n,i,e);return o>0&&a>0||o<0&&a<0?Ne.NO_INTERSECTION:0===r&&0===s&&0===o&&0===a?this.computeCollinearIntersection(t,e,n,i):(0===r||0===s||0===o||0===a?(this._isProper=!1,t.equals2D(n)||t.equals2D(i)?this._intPt[0]=t:e.equals2D(n)||e.equals2D(i)?this._intPt[0]=e:0===r?this._intPt[0]=new B(n):0===s?this._intPt[0]=new B(i):0===o?this._intPt[0]=new B(t):0===a&&(this._intPt[0]=new B(e))):(this._isProper=!0,this._intPt[0]=this.intersection(t,e,n,i)),Ne.POINT_INTERSECTION)}}],[{key:"nearestEndpoint",value:function(t,e,n,i){var r=t,s=wt.pointToSegment(t,n,i),o=wt.pointToSegment(e,n,i);return o<s&&(s=o,r=e),(o=wt.pointToSegment(n,t,e))<s&&(s=o,r=n),(o=wt.pointToSegment(i,t,e))<s&&(s=o,r=i),r}}]),o}(Ne),Me=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:"countSegment",value:function(t,e){if(t.x<this._p.x&&e.x<this._p.x)return null;if(this._p.x===e.x&&this._p.y===e.y)return this._isPointOnSegment=!0,null;if(t.y===this._p.y&&e.y===this._p.y){var n=t.x,i=e.x;return n>i&&(n=e.x,i=t.x),this._p.x>=n&&this._p.x<=i&&(this._isPointOnSegment=!0),null}if(t.y>this._p.y&&e.y<=this._p.y||e.y>this._p.y&&t.y<=this._p.y){var r=ct.index(t,e,this._p);if(r===ct.COLLINEAR)return this._isPointOnSegment=!0,null;e.y<t.y&&(r=-r),r===ct.LEFT&&this._crossingCount++}}},{key:"isPointInPolygon",value:function(){return this.getLocation()!==W.EXTERIOR}},{key:"getLocation",value:function(){return this._isPointOnSegment?W.BOUNDARY:this._crossingCount%2==1?W.INTERIOR:W.EXTERIOR}},{key:"isOnSegment",value:function(){return this._isPointOnSegment}}],[{key:"constructor_",value:function(){this._p=null,this._crossingCount=0,this._isPointOnSegment=!1;var t=arguments[0];this._p=t}},{key:"locatePointInRing",value:function(){if(arguments[0]instanceof B&&rt(arguments[1],ht)){for(var t=arguments[1],n=new e(arguments[0]),i=new B,r=new B,s=1;s<t.size();s++)if(t.getCoordinate(s,i),t.getCoordinate(s-1,r),n.countSegment(i,r),n.isOnSegment())return n.getLocation();return n.getLocation()}if(arguments[0]instanceof B&&arguments[1]instanceof Array){for(var o=arguments[1],a=new e(arguments[0]),l=1;l<o.length;l++){var u=o[l],h=o[l-1];if(a.countSegment(u,h),a.isOnSegment())return a.getLocation()}return a.getLocation()}}}]),e}(),Pe=function(){function e(){t(this,e)}return n(e,null,[{key:"isOnLine",value:function(){if(arguments[0]instanceof B&&rt(arguments[1],ht)){for(var t=arguments[0],e=arguments[1],n=new Le,i=new B,r=new B,s=e.size(),o=1;o<s;o++)if(e.getCoordinate(o-1,i),e.getCoordinate(o,r),n.computeIntersection(t,i,r),n.hasIntersection())return!0;return!1}if(arguments[0]instanceof B&&arguments[1]instanceof Array){for(var a=arguments[0],l=arguments[1],u=new Le,h=1;h<l.length;h++){var c=l[h-1],d=l[h];if(u.computeIntersection(a,c,d),u.hasIntersection())return!0}return!1}}},{key:"locateInRing",value:function(t,e){return Me.locatePointInRing(t,e)}},{key:"isInRing",value:function(t,n){return e.locateInRing(t,n)!==W.EXTERIOR}}]),e}(),Oe=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:"setAllLocations",value:function(t){for(var e=0;e<this.location.length;e++)this.location[e]=t}},{key:"isNull",value:function(){for(var t=0;t<this.location.length;t++)if(this.location[t]!==W.NONE)return!1;return!0}},{key:"setAllLocationsIfNull",value:function(t){for(var e=0;e<this.location.length;e++)this.location[e]===W.NONE&&(this.location[e]=t)}},{key:"isLine",value:function(){return 1===this.location.length}},{key:"merge",value:function(t){if(t.location.length>this.location.length){var e=new Array(3).fill(null);e[Q.ON]=this.location[Q.ON],e[Q.LEFT]=W.NONE,e[Q.RIGHT]=W.NONE,this.location=e}for(var n=0;n<this.location.length;n++)this.location[n]===W.NONE&&n<t.location.length&&(this.location[n]=t.location[n])}},{key:"getLocations",value:function(){return this.location}},{key:"flip",value:function(){if(this.location.length<=1)return null;var t=this.location[Q.LEFT];this.location[Q.LEFT]=this.location[Q.RIGHT],this.location[Q.RIGHT]=t}},{key:"toString",value:function(){var t=new st;return this.location.length>1&&t.append(W.toLocationSymbol(this.location[Q.LEFT])),t.append(W.toLocationSymbol(this.location[Q.ON])),this.location.length>1&&t.append(W.toLocationSymbol(this.location[Q.RIGHT])),t.toString()}},{key:"setLocations",value:function(t,e,n){this.location[Q.ON]=t,this.location[Q.LEFT]=e,this.location[Q.RIGHT]=n}},{key:"get",value:function(t){return t<this.location.length?this.location[t]:W.NONE}},{key:"isArea",value:function(){return this.location.length>1}},{key:"isAnyNull",value:function(){for(var t=0;t<this.location.length;t++)if(this.location[t]===W.NONE)return!0;return!1}},{key:"setLocation",value:function(){if(1===arguments.length){var t=arguments[0];this.setLocation(Q.ON,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.location[e]=n}}},{key:"init",value:function(t){this.location=new Array(t).fill(null),this.setAllLocations(W.NONE)}},{key:"isEqualOnSide",value:function(t,e){return this.location[e]===t.location[e]}},{key:"allPositionsEqual",value:function(t){for(var e=0;e<this.location.length;e++)if(this.location[e]!==t)return!1;return!0}}],[{key:"constructor_",value:function(){if(this.location=null,1===arguments.length){if(arguments[0]instanceof Array){var t=arguments[0];this.init(t.length)}else if(Number.isInteger(arguments[0])){var n=arguments[0];this.init(1),this.location[Q.ON]=n}else if(arguments[0]instanceof e){var i=arguments[0];if(this.init(i.location.length),null!==i)for(var r=0;r<this.location.length;r++)this.location[r]=i.location[r]}}else if(3===arguments.length){var s=arguments[0],o=arguments[1],a=arguments[2];this.init(3),this.location[Q.ON]=s,this.location[Q.LEFT]=o,this.location[Q.RIGHT]=a}}}]),e}(),Ae=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:"getGeometryCount",value:function(){var t=0;return this.elt[0].isNull()||t++,this.elt[1].isNull()||t++,t}},{key:"setAllLocations",value:function(t,e){this.elt[t].setAllLocations(e)}},{key:"isNull",value:function(t){return this.elt[t].isNull()}},{key:"setAllLocationsIfNull",value:function(){if(1===arguments.length){var t=arguments[0];this.setAllLocationsIfNull(0,t),this.setAllLocationsIfNull(1,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.elt[e].setAllLocationsIfNull(n)}}},{key:"isLine",value:function(t){return this.elt[t].isLine()}},{key:"merge",value:function(t){for(var e=0;e<2;e++)null===this.elt[e]&&null!==t.elt[e]?this.elt[e]=new Oe(t.elt[e]):this.elt[e].merge(t.elt[e])}},{key:"flip",value:function(){this.elt[0].flip(),this.elt[1].flip()}},{key:"getLocation",value:function(){if(1===arguments.length){var t=arguments[0];return this.elt[t].get(Q.ON)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return this.elt[e].get(n)}}},{key:"toString",value:function(){var t=new st;return null!==this.elt[0]&&(t.append("A:"),t.append(this.elt[0].toString())),null!==this.elt[1]&&(t.append(" B:"),t.append(this.elt[1].toString())),t.toString()}},{key:"isArea",value:function(){if(0===arguments.length)return this.elt[0].isArea()||this.elt[1].isArea();if(1===arguments.length){var t=arguments[0];return this.elt[t].isArea()}}},{key:"isAnyNull",value:function(t){return this.elt[t].isAnyNull()}},{key:"setLocation",value:function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];this.elt[t].setLocation(Q.ON,e)}else if(3===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2];this.elt[n].setLocation(i,r)}}},{key:"isEqualOnSide",value:function(t,e){return this.elt[0].isEqualOnSide(t.elt[0],e)&&this.elt[1].isEqualOnSide(t.elt[1],e)}},{key:"allPositionsEqual",value:function(t,e){return this.elt[t].allPositionsEqual(e)}},{key:"toLine",value:function(t){this.elt[t].isArea()&&(this.elt[t]=new Oe(this.elt[t].location[0]))}}],[{key:"constructor_",value:function(){if(this.elt=new Array(2).fill(null),1===arguments.length){if(Number.isInteger(arguments[0])){var t=arguments[0];this.elt[0]=new Oe(t),this.elt[1]=new Oe(t)}else if(arguments[0]instanceof e){var n=arguments[0];this.elt[0]=new Oe(n.elt[0]),this.elt[1]=new Oe(n.elt[1])}}else if(2===arguments.length){var i=arguments[0],r=arguments[1];this.elt[0]=new Oe(W.NONE),this.elt[1]=new Oe(W.NONE),this.elt[i].setLocation(r)}else if(3===arguments.length){var s=arguments[0],o=arguments[1],a=arguments[2];this.elt[0]=new Oe(s,o,a),this.elt[1]=new Oe(s,o,a)}else if(4===arguments.length){var l=arguments[0],u=arguments[1],h=arguments[2],c=arguments[3];this.elt[0]=new Oe(W.NONE,W.NONE,W.NONE),this.elt[1]=new Oe(W.NONE,W.NONE,W.NONE),this.elt[l].setLocations(u,h,c)}}},{key:"toLineLabel",value:function(t){for(var n=new e(W.NONE),i=0;i<2;i++)n.setLocation(i,t.getLocation(i));return n}}]),e}(),Fe=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:"computeRing",value:function(){if(null!==this._ring)return null;for(var t=new Array(this._pts.size()).fill(null),e=0;e<this._pts.size();e++)t[e]=this._pts.get(e);this._ring=this._geometryFactory.createLinearRing(t),this._isHole=ct.isCCW(this._ring.getCoordinates())}},{key:"isIsolated",value:function(){return 1===this._label.getGeometryCount()}},{key:"computePoints",value:function(t){this._startDe=t;var e=t,n=!0;do{if(null===e)throw new ft("Found null DirectedEdge");if(e.getEdgeRing()===this)throw new ft("Directed Edge visited twice during ring-building at "+e.getCoordinate());this._edges.add(e);var i=e.getLabel();z.isTrue(i.isArea()),this.mergeLabel(i),this.addPoints(e.getEdge(),e.isForward(),n),n=!1,this.setEdgeRing(e,this),e=this.getNext(e)}while(e!==this._startDe)}},{key:"getLinearRing",value:function(){return this._ring}},{key:"getCoordinate",value:function(t){return this._pts.get(t)}},{key:"computeMaxNodeDegree",value:function(){this._maxNodeDegree=0;var t=this._startDe;do{var e=t.getNode().getEdges().getOutgoingDegree(this);e>this._maxNodeDegree&&(this._maxNodeDegree=e),t=this.getNext(t)}while(t!==this._startDe);this._maxNodeDegree*=2}},{key:"addPoints",value:function(t,e,n){var i=t.getCoordinates();if(e){var r=1;n&&(r=0);for(var s=r;s<i.length;s++)this._pts.add(i[s])}else{var o=i.length-2;n&&(o=i.length-1);for(var a=o;a>=0;a--)this._pts.add(i[a])}}},{key:"isHole",value:function(){return this._isHole}},{key:"setInResult",value:function(){var t=this._startDe;do{t.getEdge().setInResult(!0),t=t.getNext()}while(t!==this._startDe)}},{key:"containsPoint",value:function(t){var e=this.getLinearRing();if(!e.getEnvelopeInternal().contains(t))return!1;if(!Pe.isInRing(t,e.getCoordinates()))return!1;for(var n=this._holes.iterator();n.hasNext();)if(n.next().containsPoint(t))return!1;return!0}},{key:"addHole",value:function(t){this._holes.add(t)}},{key:"isShell",value:function(){return null===this._shell}},{key:"getLabel",value:function(){return this._label}},{key:"getEdges",value:function(){return this._edges}},{key:"getMaxNodeDegree",value:function(){return this._maxNodeDegree<0&&this.computeMaxNodeDegree(),this._maxNodeDegree}},{key:"getShell",value:function(){return this._shell}},{key:"mergeLabel",value:function(){if(1===arguments.length){var t=arguments[0];this.mergeLabel(t,0),this.mergeLabel(t,1)}else if(2===arguments.length){var e=arguments[1],n=arguments[0].getLocation(e,Q.RIGHT);if(n===W.NONE)return null;if(this._label.getLocation(e)===W.NONE)return this._label.setLocation(e,n),null}}},{key:"setShell",value:function(t){this._shell=t,null!==t&&t.addHole(this)}},{key:"toPolygon",value:function(t){for(var e=new Array(this._holes.size()).fill(null),n=0;n<this._holes.size();n++)e[n]=this._holes.get(n).getLinearRing();return t.createPolygon(this.getLinearRing(),e)}}],[{key:"constructor_",value:function(){if(this._startDe=null,this._maxNodeDegree=-1,this._edges=new pt,this._pts=new pt,this._label=new Ae(W.NONE),this._ring=null,this._isHole=null,this._shell=null,this._holes=new pt,this._geometryFactory=null,0===arguments.length);else if(2===arguments.length){var t=arguments[0],e=arguments[1];this._geometryFactory=e,this.computePoints(t),this.computeRing()}}}]),e}(),De=function(e){i(s,e);var r=c(s);function s(){var e;return t(this,s),e=r.call(this),s.constructor_.apply(u(e),arguments),e}return n(s,[{key:"setEdgeRing",value:function(t,e){t.setMinEdgeRing(e)}},{key:"getNext",value:function(t){return t.getNextMin()}}],[{key:"constructor_",value:function(){var t=arguments[0],e=arguments[1];Fe.constructor_.call(this,t,e)}}]),s}(Fe),ze=function(e){i(s,e);var r=c(s);function s(){var e;return t(this,s),e=r.call(this),s.constructor_.apply(u(e),arguments),e}return n(s,[{key:"buildMinimalRings",value:function(){var t=new pt,e=this._startDe;do{if(null===e.getMinEdgeRing()){var n=new De(e,this._geometryFactory);t.add(n)}e=e.getNext()}while(e!==this._startDe);return t}},{key:"setEdgeRing",value:function(t,e){t.setEdgeRing(e)}},{key:"linkDirectedEdgesForMinimalEdgeRings",value:function(){var t=this._startDe;do{t.getNode().getEdges().linkMinimalDirectedEdges(this),t=t.getNext()}while(t!==this._startDe)}},{key:"getNext",value:function(t){return t.getNext()}}],[{key:"constructor_",value:function(){var t=arguments[0],e=arguments[1];Fe.constructor_.call(this,t,e)}}]),s}(Fe),Ge=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:"setVisited",value:function(t){this._isVisited=t}},{key:"setInResult",value:function(t){this._isInResult=t}},{key:"isCovered",value:function(){return this._isCovered}},{key:"isCoveredSet",value:function(){return this._isCoveredSet}},{key:"setLabel",value:function(t){this._label=t}},{key:"getLabel",value:function(){return this._label}},{key:"setCovered",value:function(t){this._isCovered=t,this._isCoveredSet=!0}},{key:"updateIM",value:function(t){z.isTrue(this._label.getGeometryCount()>=2,"found partial label"),this.computeIM(t)}},{key:"isInResult",value:function(){return this._isInResult}},{key:"isVisited",value:function(){return this._isVisited}}],[{key:"constructor_",value:function(){if(this._label=null,this._isInResult=!1,this._isCovered=!1,this._isCoveredSet=!1,this._isVisited=!1,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this._label=t}}}]),e}(),je=function(e){i(o,e);var s=c(o);function o(){var e;return t(this,o),e=s.call(this),o.constructor_.apply(u(e),arguments),e}return n(o,[{key:"isIncidentEdgeInResult",value:function(){for(var t=this.getEdges().getEdges().iterator();t.hasNext();)if(t.next().getEdge().isInResult())return!0;return!1}},{key:"isIsolated",value:function(){return 1===this._label.getGeometryCount()}},{key:"getCoordinate",value:function(){return this._coord}},{key:"print",value:function(t){t.println("node "+this._coord+" lbl: "+this._label)}},{key:"computeIM",value:function(t){}},{key:"computeMergedLocation",value:function(t,e){var n=W.NONE;if(n=this._label.getLocation(e),!t.isNull(e)){var i=t.getLocation(e);n!==W.BOUNDARY&&(n=i)}return n}},{key:"setLabel",value:function(){if(2!==arguments.length||!Number.isInteger(arguments[1])||!Number.isInteger(arguments[0]))return d(r(o.prototype),"setLabel",this).apply(this,arguments);var t=arguments[0],e=arguments[1];null===this._label?this._label=new Ae(t,e):this._label.setLocation(t,e)}},{key:"getEdges",value:function(){return this._edges}},{key:"mergeLabel",value:function(){if(arguments[0]instanceof o){var t=arguments[0];this.mergeLabel(t._label)}else if(arguments[0]instanceof Ae)for(var e=arguments[0],n=0;n<2;n++){var i=this.computeMergedLocation(e,n);this._label.getLocation(n)===W.NONE&&this._label.setLocation(n,i)}}},{key:"add",value:function(t){this._edges.insert(t),t.setNode(this)}},{key:"setLabelBoundary",value:function(t){if(null===this._label)return null;var e=W.NONE;null!==this._label&&(e=this._label.getLocation(t));var n=null;switch(e){case W.BOUNDARY:n=W.INTERIOR;break;case W.INTERIOR:default:n=W.BOUNDARY}this._label.setLocation(t,n)}}],[{key:"constructor_",value:function(){this._coord=null,this._edges=null;var t=arguments[0],e=arguments[1];this._coord=t,this._edges=e,this._label=new Ae(0,W.NONE)}}]),o}(Ge),Ye=function(e){i(r,e);var n=c(r);function r(){return t(this,r),n.apply(this,arguments)}return r}(ee);function Be(t){return null==t?0:t.color}function Ue(t){return null==t?null:t.parent}function Xe(t,e){null!==t&&(t.color=e)}function qe(t){return null==t?null:t.left}function We(t){return null==t?null:t.right}var Ve=function(e){i(s,e);var r=c(s);function s(){var e;return t(this,s),(e=r.call(this)).root_=null,e.size_=0,e}return n(s,[{key:"get",value:function(t){for(var e=this.root_;null!==e;){var n=t.compareTo(e.key);if(n<0)e=e.left;else{if(!(n>0))return e.value;e=e.right}}return null}},{key:"put",value:function(t,e){if(null===this.root_)return this.root_={key:t,value:e,left:null,right:null,parent:null,color:0,getValue:function(){return this.value},getKey:function(){return this.key}},this.size_=1,null;var n,i,r=this.root_;do{if(n=r,(i=t.compareTo(r.key))<0)r=r.left;else{if(!(i>0)){var s=r.value;return r.value=e,s}r=r.right}}while(null!==r);var o={key:t,left:null,right:null,value:e,parent:n,color:0,getValue:function(){return this.value},getKey:function(){return this.key}};return i<0?n.left=o:n.right=o,this.fixAfterInsertion(o),this.size_++,null}},{key:"fixAfterInsertion",value:function(t){var e;for(t.color=1;null!=t&&t!==this.root_&&1===t.parent.color;)Ue(t)===qe(Ue(Ue(t)))?1===Be(e=We(Ue(Ue(t))))?(Xe(Ue(t),0),Xe(e,0),Xe(Ue(Ue(t)),1),t=Ue(Ue(t))):(t===We(Ue(t))&&(t=Ue(t),this.rotateLeft(t)),Xe(Ue(t),0),Xe(Ue(Ue(t)),1),this.rotateRight(Ue(Ue(t)))):1===Be(e=qe(Ue(Ue(t))))?(Xe(Ue(t),0),Xe(e,0),Xe(Ue(Ue(t)),1),t=Ue(Ue(t))):(t===qe(Ue(t))&&(t=Ue(t),this.rotateRight(t)),Xe(Ue(t),0),Xe(Ue(Ue(t)),1),this.rotateLeft(Ue(Ue(t))));this.root_.color=0}},{key:"values",value:function(){var t=new pt,e=this.getFirstEntry();if(null!==e)for(t.add(e.value);null!==(e=s.successor(e));)t.add(e.value);return t}},{key:"entrySet",value:function(){var t=new $,e=this.getFirstEntry();if(null!==e)for(t.add(e);null!==(e=s.successor(e));)t.add(e);return t}},{key:"rotateLeft",value:function(t){if(null!=t){var e=t.right;t.right=e.left,null!=e.left&&(e.left.parent=t),e.parent=t.parent,null==t.parent?this.root_=e:t.parent.left===t?t.parent.left=e:t.parent.right=e,e.left=t,t.parent=e}}},{key:"rotateRight",value:function(t){if(null!=t){var e=t.left;t.left=e.right,null!=e.right&&(e.right.parent=t),e.parent=t.parent,null==t.parent?this.root_=e:t.parent.right===t?t.parent.right=e:t.parent.left=e,e.right=t,t.parent=e}}},{key:"getFirstEntry",value:function(){var t=this.root_;if(null!=t)for(;null!=t.left;)t=t.left;return t}},{key:"size",value:function(){return this.size_}},{key:"containsKey",value:function(t){for(var e=this.root_;null!==e;){var n=t.compareTo(e.key);if(n<0)e=e.left;else{if(!(n>0))return!0;e=e.right}}return!1}}],[{key:"successor",value:function(t){var e;if(null===t)return null;if(null!==t.right){for(e=t.right;null!==e.left;)e=e.left;return e}e=t.parent;for(var n=t;null!==e&&n===e.right;)n=e,e=e.parent;return e}}]),s}(Ye),He=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:"find",value:function(t){return this.nodeMap.get(t)}},{key:"addNode",value:function(){if(arguments[0]instanceof B){var t=arguments[0],e=this.nodeMap.get(t);return null===e&&(e=this.nodeFact.createNode(t),this.nodeMap.put(t,e)),e}if(arguments[0]instanceof je){var n=arguments[0],i=this.nodeMap.get(n.getCoordinate());return null===i?(this.nodeMap.put(n.getCoordinate(),n),n):(i.mergeLabel(n),i)}}},{key:"print",value:function(t){for(var e=this.iterator();e.hasNext();)e.next().print(t)}},{key:"iterator",value:function(){return this.nodeMap.values().iterator()}},{key:"values",value:function(){return this.nodeMap.values()}},{key:"getBoundaryNodes",value:function(t){for(var e=new pt,n=this.iterator();n.hasNext();){var i=n.next();i.getLabel().getLocation(t)===W.BOUNDARY&&e.add(i)}return e}},{key:"add",value:function(t){var e=t.getCoordinate();this.addNode(e).add(t)}}],[{key:"constructor_",value:function(){this.nodeMap=new Ve,this.nodeFact=null;var t=arguments[0];this.nodeFact=t}}]),e}(),Ke=function(){function e(){t(this,e)}return n(e,null,[{key:"isNorthern",value:function(t){return t===e.NE||t===e.NW}},{key:"isOpposite",value:function(t,e){return t!==e&&2===(t-e+4)%4}},{key:"commonHalfPlane",value:function(t,e){if(t===e)return t;if(2===(t-e+4)%4)return-1;var n=t<e?t:e;return 0===n&&3===(t>e?t:e)?3:n}},{key:"isInHalfPlane",value:function(t,n){return n===e.SE?t===e.SE||t===e.SW:t===n||t===n+1}},{key:"quadrant",value:function(){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],n=arguments[1];if(0===t&&0===n)throw new v("Cannot compute the quadrant for point ( "+t+", "+n+" )");return t>=0?n>=0?e.NE:e.SE:n>=0?e.NW:e.SW}if(arguments[0]instanceof B&&arguments[1]instanceof B){var i=arguments[0],r=arguments[1];if(r.x===i.x&&r.y===i.y)throw new v("Cannot compute the quadrant for two identical points "+i);return r.x>=i.x?r.y>=i.y?e.NE:e.SE:r.y>=i.y?e.NW:e.SW}}}]),e}();Ke.NE=0,Ke.NW=1,Ke.SW=2,Ke.SE=3;var Ze=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:"compareDirection",value:function(t){return this._dx===t._dx&&this._dy===t._dy?0:this._quadrant>t._quadrant?1:this._quadrant<t._quadrant?-1:ct.index(t._p0,t._p1,this._p1)}},{key:"getDy",value:function(){return this._dy}},{key:"getCoordinate",value:function(){return this._p0}},{key:"setNode",value:function(t){this._node=t}},{key:"print",value:function(t){var e=Math.atan2(this._dy,this._dx),n=this.getClass().getName(),i=n.lastIndexOf("."),r=n.substring(i+1);t.print("  "+r+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+e+"   "+this._label)}},{key:"compareTo",value:function(t){var e=t;return this.compareDirection(e)}},{key:"getDirectedCoordinate",value:function(){return this._p1}},{key:"getDx",value:function(){return this._dx}},{key:"getLabel",value:function(){return this._label}},{key:"getEdge",value:function(){return this._edge}},{key:"getQuadrant",value:function(){return this._quadrant}},{key:"getNode",value:function(){return this._node}},{key:"toString",value:function(){var t=Math.atan2(this._dy,this._dx),e=this.getClass().getName(),n=e.lastIndexOf(".");return"  "+e.substring(n+1)+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+t+"   "+this._label}},{key:"computeLabel",value:function(t){}},{key:"init",value:function(t,e){this._p0=t,this._p1=e,this._dx=e.x-t.x,this._dy=e.y-t.y,this._quadrant=Ke.quadrant(this._dx,this._dy),z.isTrue(!(0===this._dx&&0===this._dy),"EdgeEnd with identical endpoints found")}},{key:"interfaces_",get:function(){return[w]}}],[{key:"constructor_",value:function(){if(this._edge=null,this._label=null,this._node=null,this._p0=null,this._p1=null,this._dx=null,this._dy=null,this._quadrant=null,1===arguments.length){var t=arguments[0];this._edge=t}else if(3===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2];e.constructor_.call(this,n,i,r,null)}else if(4===arguments.length){var s=arguments[0],o=arguments[1],a=arguments[2],l=arguments[3];e.constructor_.call(this,s),this.init(o,a),this._label=l}}}]),e}(),$e=function(e){i(o,e);var s=c(o);function o(){var e;return t(this,o),e=s.call(this),o.constructor_.apply(u(e),arguments),e}return n(o,[{key:"getNextMin",value:function(){return this._nextMin}},{key:"getDepth",value:function(t){return this._depth[t]}},{key:"setVisited",value:function(t){this._isVisited=t}},{key:"computeDirectedLabel",value:function(){this._label=new Ae(this._edge.getLabel()),this._isForward||this._label.flip()}},{key:"getNext",value:function(){return this._next}},{key:"setDepth",value:function(t,e){if(-999!==this._depth[t]&&this._depth[t]!==e)throw new ft("assigned depths do not match",this.getCoordinate());this._depth[t]=e}},{key:"isInteriorAreaEdge",value:function(){for(var t=!0,e=0;e<2;e++)this._label.isArea(e)&&this._label.getLocation(e,Q.LEFT)===W.INTERIOR&&this._label.getLocation(e,Q.RIGHT)===W.INTERIOR||(t=!1);return t}},{key:"setNextMin",value:function(t){this._nextMin=t}},{key:"print",value:function(t){d(r(o.prototype),"print",this).call(this,t),t.print(" "+this._depth[Q.LEFT]+"/"+this._depth[Q.RIGHT]),t.print(" ("+this.getDepthDelta()+")"),this._isInResult&&t.print(" inResult")}},{key:"setMinEdgeRing",value:function(t){this._minEdgeRing=t}},{key:"isLineEdge",value:function(){var t=this._label.isLine(0)||this._label.isLine(1),e=!this._label.isArea(0)||this._label.allPositionsEqual(0,W.EXTERIOR),n=!this._label.isArea(1)||this._label.allPositionsEqual(1,W.EXTERIOR);return t&&e&&n}},{key:"setEdgeRing",value:function(t){this._edgeRing=t}},{key:"getMinEdgeRing",value:function(){return this._minEdgeRing}},{key:"getDepthDelta",value:function(){var t=this._edge.getDepthDelta();return this._isForward||(t=-t),t}},{key:"setInResult",value:function(t){this._isInResult=t}},{key:"getSym",value:function(){return this._sym}},{key:"isForward",value:function(){return this._isForward}},{key:"getEdge",value:function(){return this._edge}},{key:"printEdge",value:function(t){this.print(t),t.print(" "),this._isForward?this._edge.print(t):this._edge.printReverse(t)}},{key:"setSym",value:function(t){this._sym=t}},{key:"setVisitedEdge",value:function(t){this.setVisited(t),this._sym.setVisited(t)}},{key:"setEdgeDepths",value:function(t,e){var n=this.getEdge().getDepthDelta();this._isForward||(n=-n);var i=1;t===Q.LEFT&&(i=-1);var r=Q.opposite(t),s=e+n*i;this.setDepth(t,e),this.setDepth(r,s)}},{key:"getEdgeRing",value:function(){return this._edgeRing}},{key:"isInResult",value:function(){return this._isInResult}},{key:"setNext",value:function(t){this._next=t}},{key:"isVisited",value:function(){return this._isVisited}}],[{key:"constructor_",value:function(){this._isForward=null,this._isInResult=!1,this._isVisited=!1,this._sym=null,this._next=null,this._nextMin=null,this._edgeRing=null,this._minEdgeRing=null,this._depth=[0,-999,-999];var t=arguments[0],e=arguments[1];if(Ze.constructor_.call(this,t),this._isForward=e,e)this.init(t.getCoordinate(0),t.getCoordinate(1));else{var n=t.getNumPoints()-1;this.init(t.getCoordinate(n),t.getCoordinate(n-1))}this.computeDirectedLabel()}},{key:"depthFactor",value:function(t,e){return t===W.EXTERIOR&&e===W.INTERIOR?1:t===W.INTERIOR&&e===W.EXTERIOR?-1:0}}]),o}(Ze),Je=function(){function e(){t(this,e)}return n(e,[{key:"createNode",value:function(t){return new je(t,null)}}]),e}(),Qe=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:"printEdges",value:function(t){t.println("Edges:");for(var e=0;e<this._edges.size();e++){t.println("edge "+e+":");var n=this._edges.get(e);n.print(t),n.eiList.print(t)}}},{key:"find",value:function(t){return this._nodes.find(t)}},{key:"addNode",value:function(){if(arguments[0]instanceof je){var t=arguments[0];return this._nodes.addNode(t)}if(arguments[0]instanceof B){var e=arguments[0];return this._nodes.addNode(e)}}},{key:"getNodeIterator",value:function(){return this._nodes.iterator()}},{key:"linkResultDirectedEdges",value:function(){for(var t=this._nodes.iterator();t.hasNext();)t.next().getEdges().linkResultDirectedEdges()}},{key:"debugPrintln",value:function(t){vt.out.println(t)}},{key:"isBoundaryNode",value:function(t,e){var n=this._nodes.find(e);if(null===n)return!1;var i=n.getLabel();return null!==i&&i.getLocation(t)===W.BOUNDARY}},{key:"linkAllDirectedEdges",value:function(){for(var t=this._nodes.iterator();t.hasNext();)t.next().getEdges().linkAllDirectedEdges()}},{key:"matchInSameDirection",value:function(t,e,n,i){return!!t.equals(n)&&ct.index(t,e,i)===ct.COLLINEAR&&Ke.quadrant(t,e)===Ke.quadrant(n,i)}},{key:"getEdgeEnds",value:function(){return this._edgeEndList}},{key:"debugPrint",value:function(t){vt.out.print(t)}},{key:"getEdgeIterator",value:function(){return this._edges.iterator()}},{key:"findEdgeInSameDirection",value:function(t,e){for(var n=0;n<this._edges.size();n++){var i=this._edges.get(n),r=i.getCoordinates();if(this.matchInSameDirection(t,e,r[0],r[1]))return i;if(this.matchInSameDirection(t,e,r[r.length-1],r[r.length-2]))return i}return null}},{key:"insertEdge",value:function(t){this._edges.add(t)}},{key:"findEdgeEnd",value:function(t){for(var e=this.getEdgeEnds().iterator();e.hasNext();){var n=e.next();if(n.getEdge()===t)return n}return null}},{key:"addEdges",value:function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();this._edges.add(n);var i=new $e(n,!0),r=new $e(n,!1);i.setSym(r),r.setSym(i),this.add(i),this.add(r)}}},{key:"add",value:function(t){this._nodes.add(t),this._edgeEndList.add(t)}},{key:"getNodes",value:function(){return this._nodes.values()}},{key:"findEdge",value:function(t,e){for(var n=0;n<this._edges.size();n++){var i=this._edges.get(n),r=i.getCoordinates();if(t.equals(r[0])&&e.equals(r[1]))return i}return null}}],[{key:"constructor_",value:function(){if(this._edges=new pt,this._nodes=null,this._edgeEndList=new pt,0===arguments.length)this._nodes=new He(new Je);else if(1===arguments.length){var t=arguments[0];this._nodes=new He(t)}}},{key:"linkResultDirectedEdges",value:function(t){for(var e=t.iterator();e.hasNext();)e.next().getEdges().linkResultDirectedEdges()}}]),e}(),tn=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:"sortShellsAndHoles",value:function(t,e,n){for(var i=t.iterator();i.hasNext();){var r=i.next();r.isHole()?n.add(r):e.add(r)}}},{key:"computePolygons",value:function(t){for(var e=new pt,n=t.iterator();n.hasNext();){var i=n.next().toPolygon(this._geometryFactory);e.add(i)}return e}},{key:"placeFreeHoles",value:function(t,n){for(var i=n.iterator();i.hasNext();){var r=i.next();if(null===r.getShell()){var s=e.findEdgeRingContaining(r,t);if(null===s)throw new ft("unable to assign hole to a shell",r.getCoordinate(0));r.setShell(s)}}}},{key:"buildMinimalEdgeRings",value:function(t,e,n){for(var i=new pt,r=t.iterator();r.hasNext();){var s=r.next();if(s.getMaxNodeDegree()>2){s.linkDirectedEdgesForMinimalEdgeRings();var o=s.buildMinimalRings(),a=this.findShell(o);null!==a?(this.placePolygonHoles(a,o),e.add(a)):n.addAll(o)}else i.add(s)}return i}},{key:"buildMaximalEdgeRings",value:function(t){for(var e=new pt,n=t.iterator();n.hasNext();){var i=n.next();if(i.isInResult()&&i.getLabel().isArea()&&null===i.getEdgeRing()){var r=new ze(i,this._geometryFactory);e.add(r),r.setInResult()}}return e}},{key:"placePolygonHoles",value:function(t,e){for(var n=e.iterator();n.hasNext();){var i=n.next();i.isHole()&&i.setShell(t)}}},{key:"getPolygons",value:function(){return this.computePolygons(this._shellList)}},{key:"findShell",value:function(t){for(var e=0,n=null,i=t.iterator();i.hasNext();){var r=i.next();r.isHole()||(n=r,e++)}return z.isTrue(e<=1,"found two shells in MinimalEdgeRing list"),n}},{key:"add",value:function(){if(1===arguments.length){var t=arguments[0];this.add(t.getEdgeEnds(),t.getNodes())}else if(2===arguments.length){var e=arguments[0],n=arguments[1];Qe.linkResultDirectedEdges(n);var i=this.buildMaximalEdgeRings(e),r=new pt,s=this.buildMinimalEdgeRings(i,this._shellList,r);this.sortShellsAndHoles(s,this._shellList,r),this.placeFreeHoles(this._shellList,r)}}}],[{key:"constructor_",value:function(){this._geometryFactory=null,this._shellList=new pt;var t=arguments[0];this._geometryFactory=t}},{key:"findEdgeRingContaining",value:function(t,e){for(var n=t.getLinearRing(),i=n.getEnvelopeInternal(),r=n.getCoordinateN(0),s=null,o=null,a=e.iterator();a.hasNext();){var l=a.next(),u=l.getLinearRing(),h=u.getEnvelopeInternal();if(!h.equals(i)&&h.contains(i)){r=Ht.ptNotInList(n.getCoordinates(),u.getCoordinates());var c=!1;Pe.isInRing(r,u.getCoordinates())&&(c=!0),c&&(null===s||o.contains(h))&&(o=(s=l).getLinearRing().getEnvelopeInternal())}}return s}}]),e}(),en=function(){function e(){t(this,e)}return n(e,[{key:"getBounds",value:function(){}}]),e}(),nn=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:"getItem",value:function(){return this._item}},{key:"getBounds",value:function(){return this._bounds}},{key:"interfaces_",get:function(){return[en,E]}}],[{key:"constructor_",value:function(){this._bounds=null,this._item=null;var t=arguments[0],e=arguments[1];this._bounds=t,this._item=e}}]),e}(),rn=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:"poll",value:function(){if(this.isEmpty())return null;var t=this._items.get(1);return this._items.set(1,this._items.get(this._size)),this._size-=1,this.reorder(1),t}},{key:"size",value:function(){return this._size}},{key:"reorder",value:function(t){for(var e=null,n=this._items.get(t);2*t<=this._size&&((e=2*t)!==this._size&&this._items.get(e+1).compareTo(this._items.get(e))<0&&e++,this._items.get(e).compareTo(n)<0);t=e)this._items.set(t,this._items.get(e));this._items.set(t,n)}},{key:"clear",value:function(){this._size=0,this._items.clear()}},{key:"peek",value:function(){return this.isEmpty()?null:this._items.get(1)}},{key:"isEmpty",value:function(){return 0===this._size}},{key:"add",value:function(t){this._items.add(null),this._size+=1;var e=this._size;for(this._items.set(0,t);t.compareTo(this._items.get(Math.trunc(e/2)))<0;e/=2)this._items.set(e,this._items.get(Math.trunc(e/2)));this._items.set(e,t)}}],[{key:"constructor_",value:function(){this._size=null,this._items=null,this._size=0,this._items=new pt,this._items.add(null)}}]),e}(),sn=function(){function e(){t(this,e)}return n(e,[{key:"insert",value:function(t,e){}},{key:"remove",value:function(t,e){}},{key:"query",value:function(){}}]),e}(),on=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:"getLevel",value:function(){return this._level}},{key:"size",value:function(){return this._childBoundables.size()}},{key:"getChildBoundables",value:function(){return this._childBoundables}},{key:"addChildBoundable",value:function(t){z.isTrue(null===this._bounds),this._childBoundables.add(t)}},{key:"isEmpty",value:function(){return this._childBoundables.isEmpty()}},{key:"getBounds",value:function(){return null===this._bounds&&(this._bounds=this.computeBounds()),this._bounds}},{key:"interfaces_",get:function(){return[en,E]}}],[{key:"constructor_",value:function(){if(this._childBoundables=new pt,this._bounds=null,this._level=null,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this._level=t}}}]),e}(),an={reverseOrder:function(){return{compare:function(t,e){return e.compareTo(t)}}},min:function(t){return an.sort(t),t.get(0)},sort:function(t,e){var n=t.toArray();e?Ot.sort(n,e):Ot.sort(n);for(var i=t.iterator(),r=0,s=n.length;r<s;r++)i.next(),i.set(n[r])},singletonList:function(t){var e=new pt;return e.add(t),e}},ln=function(){function e(){t(this,e)}return n(e,null,[{key:"maxDistance",value:function(t,n,i,r,s,o,a,l){var u=e.distance(t,n,s,o);return u=Math.max(u,e.distance(t,n,a,l)),u=Math.max(u,e.distance(i,r,s,o)),Math.max(u,e.distance(i,r,a,l))}},{key:"distance",value:function(t,e,n,i){var r=n-t,s=i-e;return Math.sqrt(r*r+s*s)}},{key:"maximumDistance",value:function(t,n){var i=Math.min(t.getMinX(),n.getMinX()),r=Math.min(t.getMinY(),n.getMinY()),s=Math.max(t.getMaxX(),n.getMaxX()),o=Math.max(t.getMaxY(),n.getMaxY());return e.distance(i,r,s,o)}},{key:"minMaxDistance",value:function(t,n){var i=t.getMinX(),r=t.getMinY(),s=t.getMaxX(),o=t.getMaxY(),a=n.getMinX(),l=n.getMinY(),u=n.getMaxX(),h=n.getMaxY(),c=e.maxDistance(i,r,i,o,a,l,a,h);return c=Math.min(c,e.maxDistance(i,r,i,o,a,l,u,l)),c=Math.min(c,e.maxDistance(i,r,i,o,u,h,a,h)),c=Math.min(c,e.maxDistance(i,r,i,o,u,h,u,l)),c=Math.min(c,e.maxDistance(i,r,s,r,a,l,a,h)),c=Math.min(c,e.maxDistance(i,r,s,r,a,l,u,l)),c=Math.min(c,e.maxDistance(i,r,s,r,u,h,a,h)),c=Math.min(c,e.maxDistance(i,r,s,r,u,h,u,l)),c=Math.min(c,e.maxDistance(s,o,i,o,a,l,a,h)),c=Math.min(c,e.maxDistance(s,o,i,o,a,l,u,l)),c=Math.min(c,e.maxDistance(s,o,i,o,u,h,a,h)),c=Math.min(c,e.maxDistance(s,o,i,o,u,h,u,l)),c=Math.min(c,e.maxDistance(s,o,s,r,a,l,a,h)),c=Math.min(c,e.maxDistance(s,o,s,r,a,l,u,l)),c=Math.min(c,e.maxDistance(s,o,s,r,u,h,a,h)),Math.min(c,e.maxDistance(s,o,s,r,u,h,u,l))}}]),e}(),un=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:"maximumDistance",value:function(){return ln.maximumDistance(this._boundable1.getBounds(),this._boundable2.getBounds())}},{key:"expandToQueue",value:function(t,n){var i=e.isComposite(this._boundable1),r=e.isComposite(this._boundable2);if(i&&r)return e.area(this._boundable1)>e.area(this._boundable2)?(this.expand(this._boundable1,this._boundable2,!1,t,n),null):(this.expand(this._boundable2,this._boundable1,!0,t,n),null);if(i)return this.expand(this._boundable1,this._boundable2,!1,t,n),null;if(r)return this.expand(this._boundable2,this._boundable1,!0,t,n),null;throw new v("neither boundable is composite")}},{key:"isLeaves",value:function(){return!(e.isComposite(this._boundable1)||e.isComposite(this._boundable2))}},{key:"compareTo",value:function(t){var e=t;return this._distance<e._distance?-1:this._distance>e._distance?1:0}},{key:"expand",value:function(t,n,i,r,s){for(var o=t.getChildBoundables().iterator();o.hasNext();){var a=o.next(),l=null;(l=i?new e(n,a,this._itemDistance):new e(a,n,this._itemDistance)).getDistance()<s&&r.add(l)}}},{key:"getBoundable",value:function(t){return 0===t?this._boundable1:this._boundable2}},{key:"getDistance",value:function(){return this._distance}},{key:"distance",value:function(){return this.isLeaves()?this._itemDistance.distance(this._boundable1,this._boundable2):this._boundable1.getBounds().distance(this._boundable2.getBounds())}},{key:"interfaces_",get:function(){return[w]}}],[{key:"constructor_",value:function(){this._boundable1=null,this._boundable2=null,this._distance=null,this._itemDistance=null;var t=arguments[0],e=arguments[1],n=arguments[2];this._boundable1=t,this._boundable2=e,this._itemDistance=n,this._distance=this.distance()}},{key:"area",value:function(t){return t.getBounds().getArea()}},{key:"isComposite",value:function(t){return t instanceof on}}]),e}(),hn=function(){function e(){t(this,e)}return n(e,[{key:"visitItem",value:function(t){}}]),e}(),cn=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:"queryInternal",value:function(){if(rt(arguments[2],hn)&&arguments[0]instanceof Object&&arguments[1]instanceof on)for(var t=arguments[0],e=arguments[2],n=arguments[1].getChildBoundables(),i=0;i<n.size();i++){var r=n.get(i);this.getIntersectsOp().intersects(r.getBounds(),t)&&(r instanceof on?this.queryInternal(t,r,e):r instanceof nn?e.visitItem(r.getItem()):z.shouldNeverReachHere())}else if(rt(arguments[2],nt)&&arguments[0]instanceof Object&&arguments[1]instanceof on)for(var s=arguments[0],o=arguments[2],a=arguments[1].getChildBoundables(),l=0;l<a.size();l++){var u=a.get(l);this.getIntersectsOp().intersects(u.getBounds(),s)&&(u instanceof on?this.queryInternal(s,u,o):u instanceof nn?o.add(u.getItem()):z.shouldNeverReachHere())}}},{key:"getNodeCapacity",value:function(){return this._nodeCapacity}},{key:"lastNode",value:function(t){return t.get(t.size()-1)}},{key:"size",value:function(){if(0===arguments.length)return this.isEmpty()?0:(this.build(),this.size(this._root));if(1===arguments.length){for(var t=0,e=arguments[0].getChildBoundables().iterator();e.hasNext();){var n=e.next();n instanceof on?t+=this.size(n):n instanceof nn&&(t+=1)}return t}}},{key:"removeItem",value:function(t,e){for(var n=null,i=t.getChildBoundables().iterator();i.hasNext();){var r=i.next();r instanceof nn&&r.getItem()===e&&(n=r)}return null!==n&&(t.getChildBoundables().remove(n),!0)}},{key:"itemsTree",value:function(){if(0===arguments.length){this.build();var t=this.itemsTree(this._root);return null===t?new pt:t}if(1===arguments.length){for(var e=arguments[0],n=new pt,i=e.getChildBoundables().iterator();i.hasNext();){var r=i.next();if(r instanceof on){var s=this.itemsTree(r);null!==s&&n.add(s)}else r instanceof nn?n.add(r.getItem()):z.shouldNeverReachHere()}return n.size()<=0?null:n}}},{key:"insert",value:function(t,e){z.isTrue(!this._built,"Cannot insert items into an STR packed R-tree after it has been built."),this._itemBoundables.add(new nn(t,e))}},{key:"boundablesAtLevel",value:function(){if(1===arguments.length){var t=arguments[0],e=new pt;return this.boundablesAtLevel(t,this._root,e),e}if(3===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2];if(z.isTrue(n>-2),i.getLevel()===n)return r.add(i),null;for(var s=i.getChildBoundables().iterator();s.hasNext();){var o=s.next();o instanceof on?this.boundablesAtLevel(n,o,r):(z.isTrue(o instanceof nn),-1===n&&r.add(o))}return null}}},{key:"query",value:function(){if(1===arguments.length){var t=arguments[0];this.build();var e=new pt;return this.isEmpty()||this.getIntersectsOp().intersects(this._root.getBounds(),t)&&this.queryInternal(t,this._root,e),e}if(2===arguments.length){var n=arguments[0],i=arguments[1];if(this.build(),this.isEmpty())return null;this.getIntersectsOp().intersects(this._root.getBounds(),n)&&this.queryInternal(n,this._root,i)}}},{key:"build",value:function(){if(this._built)return null;this._root=this._itemBoundables.isEmpty()?this.createNode(0):this.createHigherLevels(this._itemBoundables,-1),this._itemBoundables=null,this._built=!0}},{key:"getRoot",value:function(){return this.build(),this._root}},{key:"remove",value:function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return this.build(),!!this.getIntersectsOp().intersects(this._root.getBounds(),t)&&this.remove(t,this._root,e)}if(3===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2],s=this.removeItem(i,r);if(s)return!0;for(var o=null,a=i.getChildBoundables().iterator();a.hasNext();){var l=a.next();if(this.getIntersectsOp().intersects(l.getBounds(),n)&&l instanceof on&&(s=this.remove(n,l,r))){o=l;break}}return null!==o&&o.getChildBoundables().isEmpty()&&i.getChildBoundables().remove(o),s}}},{key:"createHigherLevels",value:function(t,e){z.isTrue(!t.isEmpty());var n=this.createParentBoundables(t,e+1);return 1===n.size()?n.get(0):this.createHigherLevels(n,e+1)}},{key:"depth",value:function(){if(0===arguments.length)return this.isEmpty()?0:(this.build(),this.depth(this._root));if(1===arguments.length){for(var t=0,e=arguments[0].getChildBoundables().iterator();e.hasNext();){var n=e.next();if(n instanceof on){var i=this.depth(n);i>t&&(t=i)}}return t+1}}},{key:"createParentBoundables",value:function(t,e){z.isTrue(!t.isEmpty());var n=new pt;n.add(this.createNode(e));var i=new pt(t);an.sort(i,this.getComparator());for(var r=i.iterator();r.hasNext();){var s=r.next();this.lastNode(n).getChildBoundables().size()===this.getNodeCapacity()&&n.add(this.createNode(e)),this.lastNode(n).addChildBoundable(s)}return n}},{key:"isEmpty",value:function(){return this._built?this._root.isEmpty():this._itemBoundables.isEmpty()}},{key:"interfaces_",get:function(){return[E]}}],[{key:"constructor_",value:function(){if(this._root=null,this._built=!1,this._itemBoundables=new pt,this._nodeCapacity=null,0===arguments.length)e.constructor_.call(this,e.DEFAULT_NODE_CAPACITY);else if(1===arguments.length){var t=arguments[0];z.isTrue(t>1,"Node capacity must be greater than 1"),this._nodeCapacity=t}}},{key:"compareDoubles",value:function(t,e){return t>e?1:t<e?-1:0}}]),e}();cn.IntersectsOp=function(){},cn.DEFAULT_NODE_CAPACITY=10;var dn=function(){function e(){t(this,e)}return n(e,[{key:"distance",value:function(t,e){}}]),e}(),fn=function(e){i(o,e);var s=c(o);function o(){var e;return t(this,o),e=s.call(this),o.constructor_.apply(u(e),arguments),e}return n(o,[{key:"createParentBoundablesFromVerticalSlices",value:function(t,e){z.isTrue(t.length>0);for(var n=new pt,i=0;i<t.length;i++)n.addAll(this.createParentBoundablesFromVerticalSlice(t[i],e));return n}},{key:"nearestNeighbourK",value:function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return this.nearestNeighbourK(t,O.POSITIVE_INFINITY,e)}if(3===arguments.length){var n=arguments[0],i=arguments[2],r=arguments[1],s=new rn;s.add(n);for(var a=new rn;!s.isEmpty()&&r>=0;){var l=s.poll(),u=l.getDistance();if(u>=r)break;l.isLeaves()?a.size()<i?a.add(l):(a.peek().getDistance()>u&&(a.poll(),a.add(l)),r=a.peek().getDistance()):l.expandToQueue(s,r)}return o.getItems(a)}}},{key:"createNode",value:function(t){return new gn(t)}},{key:"size",value:function(){return 0===arguments.length?d(r(o.prototype),"size",this).call(this):d(r(o.prototype),"size",this).apply(this,arguments)}},{key:"insert",value:function(){if(!(2===arguments.length&&arguments[1]instanceof Object&&arguments[0]instanceof X))return d(r(o.prototype),"insert",this).apply(this,arguments);var t=arguments[0],e=arguments[1];if(t.isNull())return null;d(r(o.prototype),"insert",this).call(this,t,e)}},{key:"getIntersectsOp",value:function(){return o.intersectsOp}},{key:"verticalSlices",value:function(t,e){for(var n=Math.trunc(Math.ceil(t.size()/e)),i=new Array(e).fill(null),r=t.iterator(),s=0;s<e;s++){i[s]=new pt;for(var o=0;r.hasNext()&&o<n;){var a=r.next();i[s].add(a),o++}}return i}},{key:"query",value:function(){if(1===arguments.length){var t=arguments[0];return d(r(o.prototype),"query",this).call(this,t)}if(2===arguments.length){var e=arguments[0],n=arguments[1];d(r(o.prototype),"query",this).call(this,e,n)}}},{key:"getComparator",value:function(){return o.yComparator}},{key:"createParentBoundablesFromVerticalSlice",value:function(t,e){return d(r(o.prototype),"createParentBoundables",this).call(this,t,e)}},{key:"remove",value:function(){if(2===arguments.length&&arguments[1]instanceof Object&&arguments[0]instanceof X){var t=arguments[0],e=arguments[1];return d(r(o.prototype),"remove",this).call(this,t,e)}return d(r(o.prototype),"remove",this).apply(this,arguments)}},{key:"depth",value:function(){return 0===arguments.length?d(r(o.prototype),"depth",this).call(this):d(r(o.prototype),"depth",this).apply(this,arguments)}},{key:"createParentBoundables",value:function(t,e){z.isTrue(!t.isEmpty());var n=Math.trunc(Math.ceil(t.size()/this.getNodeCapacity())),i=new pt(t);an.sort(i,o.xComparator);var r=this.verticalSlices(i,Math.trunc(Math.ceil(Math.sqrt(n))));return this.createParentBoundablesFromVerticalSlices(r,e)}},{key:"nearestNeighbour",value:function(){if(1===arguments.length){if(rt(arguments[0],dn)){var t=arguments[0];if(this.isEmpty())return null;var e=new un(this.getRoot(),this.getRoot(),t);return this.nearestNeighbour(e)}if(arguments[0]instanceof un){var n=arguments[0],i=O.POSITIVE_INFINITY,r=null,s=new rn;for(s.add(n);!s.isEmpty()&&i>0;){var o=s.poll(),a=o.getDistance();if(a>=i)break;o.isLeaves()?(i=a,r=o):o.expandToQueue(s,i)}return null===r?null:[r.getBoundable(0).getItem(),r.getBoundable(1).getItem()]}}else{if(2===arguments.length){var l=arguments[0],u=arguments[1];if(this.isEmpty()||l.isEmpty())return null;var h=new un(this.getRoot(),l.getRoot(),u);return this.nearestNeighbour(h)}if(3===arguments.length){var c=arguments[2],d=new nn(arguments[0],arguments[1]),f=new un(this.getRoot(),d,c);return this.nearestNeighbour(f)[0]}if(4===arguments.length){var g=arguments[2],p=arguments[3],m=new nn(arguments[0],arguments[1]),y=new un(this.getRoot(),m,g);return this.nearestNeighbourK(y,p)}}}},{key:"isWithinDistance",value:function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=O.POSITIVE_INFINITY,i=new rn;for(i.add(t);!i.isEmpty();){var r=i.poll(),s=r.getDistance();if(s>e)return!1;if(r.maximumDistance()<=e)return!0;if(r.isLeaves()){if((n=s)<=e)return!0}else r.expandToQueue(i,n)}return!1}if(3===arguments.length){var o=arguments[0],a=arguments[1],l=arguments[2],u=new un(this.getRoot(),o.getRoot(),a);return this.isWithinDistance(u,l)}}},{key:"interfaces_",get:function(){return[sn,E]}}],[{key:"constructor_",value:function(){if(0===arguments.length)o.constructor_.call(this,o.DEFAULT_NODE_CAPACITY);else if(1===arguments.length){var t=arguments[0];cn.constructor_.call(this,t)}}},{key:"centreX",value:function(t){return o.avg(t.getMinX(),t.getMaxX())}},{key:"avg",value:function(t,e){return(t+e)/2}},{key:"getItems",value:function(t){for(var e=new Array(t.size()).fill(null),n=0;!t.isEmpty();){var i=t.poll();e[n]=i.getBoundable(0).getItem(),n++}return e}},{key:"centreY",value:function(t){return o.avg(t.getMinY(),t.getMaxY())}}]),o}(cn),gn=function(e){i(s,e);var r=c(s);function s(){var e;return t(this,s),e=r.call(this),s.constructor_.apply(u(e),arguments),e}return n(s,[{key:"computeBounds",value:function(){for(var t=null,e=this.getChildBoundables().iterator();e.hasNext();){var n=e.next();null===t?t=new X(n.getBounds()):t.expandToInclude(n.getBounds())}return t}}],[{key:"constructor_",value:function(){var t=arguments[0];on.constructor_.call(this,t)}}]),s}(on);fn.STRtreeNode=gn,fn.xComparator=new(function(){function e(){t(this,e)}return n(e,[{key:"interfaces_",get:function(){return[A]}},{key:"compare",value:function(t,e){return cn.compareDoubles(fn.centreX(t.getBounds()),fn.centreX(e.getBounds()))}}]),e}()),fn.yComparator=new(function(){function e(){t(this,e)}return n(e,[{key:"interfaces_",get:function(){return[A]}},{key:"compare",value:function(t,e){return cn.compareDoubles(fn.centreY(t.getBounds()),fn.centreY(e.getBounds()))}}]),e}()),fn.intersectsOp=new(function(){function e(){t(this,e)}return n(e,[{key:"interfaces_",get:function(){return[IntersectsOp]}},{key:"intersects",value:function(t,e){return t.intersects(e)}}]),e}()),fn.DEFAULT_NODE_CAPACITY=10;var pn=function(){function e(){t(this,e)}return n(e,null,[{key:"relativeSign",value:function(t,e){return t<e?-1:t>e?1:0}},{key:"compare",value:function(t,n,i){if(n.equals2D(i))return 0;var r=e.relativeSign(n.x,i.x),s=e.relativeSign(n.y,i.y);switch(t){case 0:return e.compareValue(r,s);case 1:return e.compareValue(s,r);case 2:return e.compareValue(s,-r);case 3:return e.compareValue(-r,s);case 4:return e.compareValue(-r,-s);case 5:return e.compareValue(-s,-r);case 6:return e.compareValue(-s,r);case 7:return e.compareValue(r,-s)}return z.shouldNeverReachHere("invalid octant value"),0}},{key:"compareValue",value:function(t,e){return t<0?-1:t>0?1:e<0?-1:e>0?1:0}}]),e}(),mn=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:"getCoordinate",value:function(){return this.coord}},{key:"print",value:function(t){t.print(this.coord),t.print(" seg # = "+this.segmentIndex)}},{key:"compareTo",value:function(t){var e=t;return this.segmentIndex<e.segmentIndex?-1:this.segmentIndex>e.segmentIndex?1:this.coord.equals2D(e.coord)?0:this._isInterior?e._isInterior?pn.compare(this._segmentOctant,this.coord,e.coord):1:-1}},{key:"isEndPoint",value:function(t){return 0===this.segmentIndex&&!this._isInterior||this.segmentIndex===t}},{key:"toString",value:function(){return this.segmentIndex+":"+this.coord.toString()}},{key:"isInterior",value:function(){return this._isInterior}},{key:"interfaces_",get:function(){return[w]}}],[{key:"constructor_",value:function(){this._segString=null,this.coord=null,this.segmentIndex=null,this._segmentOctant=null,this._isInterior=null;var t=arguments[0],e=arguments[1],n=arguments[2],i=arguments[3];this._segString=t,this.coord=new B(e),this.segmentIndex=n,this._segmentOctant=i,this._isInterior=!e.equals2D(t.getCoordinate(n))}}]),e}(),yn=function(){function e(){t(this,e)}return n(e,[{key:"hasNext",value:function(){}},{key:"next",value:function(){}},{key:"remove",value:function(){}}]),e}(),_n=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:"getSplitCoordinates",value:function(){var t=new Vt;this.addEndpoints();for(var e=this.iterator(),n=e.next();e.hasNext();){var i=e.next();this.addEdgeCoordinates(n,i,t),n=i}return t.toCoordinateArray()}},{key:"addCollapsedNodes",value:function(){var t=new pt;this.findCollapsesFromInsertedNodes(t),this.findCollapsesFromExistingVertices(t);for(var e=t.iterator();e.hasNext();){var n=e.next().intValue();this.add(this._edge.getCoordinate(n),n)}}},{key:"createSplitEdgePts",value:function(t,e){var n=e.segmentIndex-t.segmentIndex+2;if(2===n)return[new B(t.coord),new B(e.coord)];var i=this._edge.getCoordinate(e.segmentIndex),r=e.isInterior()||!e.coord.equals2D(i);r||n--;var s=new Array(n).fill(null),o=0;s[o++]=new B(t.coord);for(var a=t.segmentIndex+1;a<=e.segmentIndex;a++)s[o++]=this._edge.getCoordinate(a);return r&&(s[o]=new B(e.coord)),s}},{key:"print",value:function(t){t.println("Intersections:");for(var e=this.iterator();e.hasNext();)e.next().print(t)}},{key:"findCollapsesFromExistingVertices",value:function(t){for(var e=0;e<this._edge.size()-2;e++){var n=this._edge.getCoordinate(e);this._edge.getCoordinate(e+1);var i=this._edge.getCoordinate(e+2);n.equals2D(i)&&t.add(ot.valueOf(e+1))}}},{key:"addEdgeCoordinates",value:function(t,e,n){var i=this.createSplitEdgePts(t,e);n.add(i,!1)}},{key:"iterator",value:function(){return this._nodeMap.values().iterator()}},{key:"addSplitEdges",value:function(t){this.addEndpoints(),this.addCollapsedNodes();for(var e=this.iterator(),n=e.next();e.hasNext();){var i=e.next(),r=this.createSplitEdge(n,i);t.add(r),n=i}}},{key:"findCollapseIndex",value:function(t,e,n){if(!t.coord.equals2D(e.coord))return!1;var i=e.segmentIndex-t.segmentIndex;return e.isInterior()||i--,1===i&&(n[0]=t.segmentIndex+1,!0)}},{key:"findCollapsesFromInsertedNodes",value:function(t){for(var e=new Array(1).fill(null),n=this.iterator(),i=n.next();n.hasNext();){var r=n.next();this.findCollapseIndex(i,r,e)&&t.add(ot.valueOf(e[0])),i=r}}},{key:"getEdge",value:function(){return this._edge}},{key:"addEndpoints",value:function(){var t=this._edge.size()-1;this.add(this._edge.getCoordinate(0),0),this.add(this._edge.getCoordinate(t),t)}},{key:"createSplitEdge",value:function(t,e){var n=this.createSplitEdgePts(t,e);return new kn(n,this._edge.getData())}},{key:"add",value:function(t,e){var n=new mn(this._edge,t,e,this._edge.getSegmentOctant(e)),i=this._nodeMap.get(n);return null!==i?(z.isTrue(i.coord.equals2D(t),"Found equal nodes with different coordinates"),i):(this._nodeMap.put(n,n),n)}},{key:"checkSplitEdgesCorrectness",value:function(t){var e=this._edge.getCoordinates(),n=t.get(0).getCoordinate(0);if(!n.equals2D(e[0]))throw new F("bad split edge start point at "+n);var i=t.get(t.size()-1).getCoordinates(),r=i[i.length-1];if(!r.equals2D(e[e.length-1]))throw new F("bad split edge end point at "+r)}}],[{key:"constructor_",value:function(){this._nodeMap=new Ve,this._edge=null;var t=arguments[0];this._edge=t}}]),e}(),vn=function(){function e(){t(this,e)}return n(e,null,[{key:"octant",value:function(){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],n=arguments[1];if(0===t&&0===n)throw new v("Cannot compute the octant for point ( "+t+", "+n+" )");var i=Math.abs(t),r=Math.abs(n);return t>=0?n>=0?i>=r?0:1:i>=r?7:6:n>=0?i>=r?3:2:i>=r?4:5}if(arguments[0]instanceof B&&arguments[1]instanceof B){var s=arguments[0],o=arguments[1],a=o.x-s.x,l=o.y-s.y;if(0===a&&0===l)throw new v("Cannot compute the octant for two identical points "+s);return e.octant(a,l)}}}]),e}(),xn=function(){function e(){t(this,e)}return n(e,[{key:"getCoordinates",value:function(){}},{key:"size",value:function(){}},{key:"getCoordinate",value:function(t){}},{key:"isClosed",value:function(){}},{key:"setData",value:function(t){}},{key:"getData",value:function(){}}]),e}(),wn=function(){function e(){t(this,e)}return n(e,[{key:"addIntersection",value:function(t,e){}},{key:"interfaces_",get:function(){return[xn]}}]),e}(),kn=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:"getCoordinates",value:function(){return this._pts}},{key:"size",value:function(){return this._pts.length}},{key:"getCoordinate",value:function(t){return this._pts[t]}},{key:"isClosed",value:function(){return this._pts[0].equals(this._pts[this._pts.length-1])}},{key:"getSegmentOctant",value:function(t){return t===this._pts.length-1?-1:this.safeOctant(this.getCoordinate(t),this.getCoordinate(t+1))}},{key:"setData",value:function(t){this._data=t}},{key:"safeOctant",value:function(t,e){return t.equals2D(e)?0:vn.octant(t,e)}},{key:"getData",value:function(){return this._data}},{key:"addIntersection",value:function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];this.addIntersectionNode(t,e)}else if(4===arguments.length){var n=arguments[1],i=arguments[3],r=new B(arguments[0].getIntersection(i));this.addIntersection(r,n)}}},{key:"toString",value:function(){return Re.toLineString(new Jt(this._pts))}},{key:"getNodeList",value:function(){return this._nodeList}},{key:"addIntersectionNode",value:function(t,e){var n=e,i=n+1;if(i<this._pts.length){var r=this._pts[i];t.equals2D(r)&&(n=i)}return this._nodeList.add(t,n)}},{key:"addIntersections",value:function(t,e,n){for(var i=0;i<t.getIntersectionNum();i++)this.addIntersection(t,e,n,i)}},{key:"interfaces_",get:function(){return[wn]}}],[{key:"constructor_",value:function(){this._nodeList=new _n(this),this._pts=null,this._data=null;var t=arguments[0],e=arguments[1];this._pts=t,this._data=e}},{key:"getNodedSubstrings",value:function(){if(1===arguments.length){var t=arguments[0],n=new pt;return e.getNodedSubstrings(t,n),n}if(2===arguments.length)for(var i=arguments[1],r=arguments[0].iterator();r.hasNext();)r.next().getNodeList().addSplitEdges(i)}}]),e}(),En=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:"minX",value:function(){return Math.min(this.p0.x,this.p1.x)}},{key:"orientationIndex",value:function(){if(arguments[0]instanceof e){var t=arguments[0],n=ct.index(this.p0,this.p1,t.p0),i=ct.index(this.p0,this.p1,t.p1);return n>=0&&i>=0||n<=0&&i<=0?Math.max(n,i):0}if(arguments[0]instanceof B){var r=arguments[0];return ct.index(this.p0,this.p1,r)}}},{key:"toGeometry",value:function(t){return t.createLineString([this.p0,this.p1])}},{key:"isVertical",value:function(){return this.p0.x===this.p1.x}},{key:"equals",value:function(t){if(!(t instanceof e))return!1;var n=t;return this.p0.equals(n.p0)&&this.p1.equals(n.p1)}},{key:"intersection",value:function(t){var e=new Le;return e.computeIntersection(this.p0,this.p1,t.p0,t.p1),e.hasIntersection()?e.getIntersection(0):null}},{key:"project",value:function(){if(arguments[0]instanceof B){var t=arguments[0];if(t.equals(this.p0)||t.equals(this.p1))return new B(t);var n=this.projectionFactor(t),i=new B;return i.x=this.p0.x+n*(this.p1.x-this.p0.x),i.y=this.p0.y+n*(this.p1.y-this.p0.y),i}if(arguments[0]instanceof e){var r=arguments[0],s=this.projectionFactor(r.p0),o=this.projectionFactor(r.p1);if(s>=1&&o>=1)return null;if(s<=0&&o<=0)return null;var a=this.project(r.p0);s<0&&(a=this.p0),s>1&&(a=this.p1);var l=this.project(r.p1);return o<0&&(l=this.p0),o>1&&(l=this.p1),new e(a,l)}}},{key:"normalize",value:function(){this.p1.compareTo(this.p0)<0&&this.reverse()}},{key:"angle",value:function(){return Math.atan2(this.p1.y-this.p0.y,this.p1.x-this.p0.x)}},{key:"getCoordinate",value:function(t){return 0===t?this.p0:this.p1}},{key:"distancePerpendicular",value:function(t){return wt.pointToLinePerpendicular(t,this.p0,this.p1)}},{key:"minY",value:function(){return Math.min(this.p0.y,this.p1.y)}},{key:"midPoint",value:function(){return e.midPoint(this.p0,this.p1)}},{key:"projectionFactor",value:function(t){if(t.equals(this.p0))return 0;if(t.equals(this.p1))return 1;var e=this.p1.x-this.p0.x,n=this.p1.y-this.p0.y,i=e*e+n*n;return i<=0?O.NaN:((t.x-this.p0.x)*e+(t.y-this.p0.y)*n)/i}},{key:"closestPoints",value:function(t){var e=this.intersection(t);if(null!==e)return[e,e];var n=new Array(2).fill(null),i=O.MAX_VALUE,r=null,s=this.closestPoint(t.p0);i=s.distance(t.p0),n[0]=s,n[1]=t.p0;var o=this.closestPoint(t.p1);(r=o.distance(t.p1))<i&&(i=r,n[0]=o,n[1]=t.p1);var a=t.closestPoint(this.p0);(r=a.distance(this.p0))<i&&(i=r,n[0]=this.p0,n[1]=a);var l=t.closestPoint(this.p1);return(r=l.distance(this.p1))<i&&(i=r,n[0]=this.p1,n[1]=l),n}},{key:"closestPoint",value:function(t){var e=this.projectionFactor(t);return e>0&&e<1?this.project(t):this.p0.distance(t)<this.p1.distance(t)?this.p0:this.p1}},{key:"maxX",value:function(){return Math.max(this.p0.x,this.p1.x)}},{key:"getLength",value:function(){return this.p0.distance(this.p1)}},{key:"compareTo",value:function(t){var e=t,n=this.p0.compareTo(e.p0);return 0!==n?n:this.p1.compareTo(e.p1)}},{key:"reverse",value:function(){var t=this.p0;this.p0=this.p1,this.p1=t}},{key:"equalsTopo",value:function(t){return this.p0.equals(t.p0)&&this.p1.equals(t.p1)||this.p0.equals(t.p1)&&this.p1.equals(t.p0)}},{key:"lineIntersection",value:function(t){return _t.intersection(this.p0,this.p1,t.p0,t.p1)}},{key:"maxY",value:function(){return Math.max(this.p0.y,this.p1.y)}},{key:"pointAlongOffset",value:function(t,e){var n=this.p0.x+t*(this.p1.x-this.p0.x),i=this.p0.y+t*(this.p1.y-this.p0.y),r=this.p1.x-this.p0.x,s=this.p1.y-this.p0.y,o=Math.sqrt(r*r+s*s),a=0,l=0;if(0!==e){if(o<=0)throw new IllegalStateException("Cannot compute offset from zero-length line segment");a=e*r/o,l=e*s/o}return new B(n-l,i+a)}},{key:"setCoordinates",value:function(){if(1===arguments.length){var t=arguments[0];this.setCoordinates(t.p0,t.p1)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.p0.x=e.x,this.p0.y=e.y,this.p1.x=n.x,this.p1.y=n.y}}},{key:"segmentFraction",value:function(t){var e=this.projectionFactor(t);return e<0?e=0:(e>1||O.isNaN(e))&&(e=1),e}},{key:"toString",value:function(){return"LINESTRING( "+this.p0.x+" "+this.p0.y+", "+this.p1.x+" "+this.p1.y+")"}},{key:"isHorizontal",value:function(){return this.p0.y===this.p1.y}},{key:"reflect",value:function(t){var e=this.p1.getY()-this.p0.getY(),n=this.p0.getX()-this.p1.getX(),i=this.p0.getY()*(this.p1.getX()-this.p0.getX())-this.p0.getX()*(this.p1.getY()-this.p0.getY()),r=e*e+n*n,s=e*e-n*n,o=t.getX(),a=t.getY();return new B((-s*o-2*e*n*a-2*e*i)/r,(s*a-2*e*n*o-2*n*i)/r)}},{key:"distance",value:function(){if(arguments[0]instanceof e){var t=arguments[0];return wt.segmentToSegment(this.p0,this.p1,t.p0,t.p1)}if(arguments[0]instanceof B){var n=arguments[0];return wt.pointToSegment(n,this.p0,this.p1)}}},{key:"pointAlong",value:function(t){var e=new B;return e.x=this.p0.x+t*(this.p1.x-this.p0.x),e.y=this.p0.y+t*(this.p1.y-this.p0.y),e}},{key:"hashCode",value:function(){var t=O.doubleToLongBits(this.p0.x);t^=31*O.doubleToLongBits(this.p0.y);var e=Math.trunc(t)^Math.trunc(t>>32),n=O.doubleToLongBits(this.p1.x);return n^=31*O.doubleToLongBits(this.p1.y),e^Math.trunc(n)^Math.trunc(n>>32)}},{key:"interfaces_",get:function(){return[w,E]}}],[{key:"constructor_",value:function(){if(this.p0=null,this.p1=null,0===arguments.length)e.constructor_.call(this,new B,new B);else if(1===arguments.length){var t=arguments[0];e.constructor_.call(this,t.p0,t.p1)}else if(2===arguments.length){var n=arguments[0],i=arguments[1];this.p0=n,this.p1=i}else if(4===arguments.length){var r=arguments[0],s=arguments[1],o=arguments[2],a=arguments[3];e.constructor_.call(this,new B(r,s),new B(o,a))}}},{key:"midPoint",value:function(t,e){return new B((t.x+e.x)/2,(t.y+e.y)/2)}}]),e}(),Sn=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:"overlap",value:function(){if(2===arguments.length);else if(4===arguments.length){var t=arguments[1],e=arguments[2],n=arguments[3];arguments[0].getLineSegment(t,this._overlapSeg1),e.getLineSegment(n,this._overlapSeg2),this.overlap(this._overlapSeg1,this._overlapSeg2)}}}],[{key:"constructor_",value:function(){this._overlapSeg1=new En,this._overlapSeg2=new En}}]),e}(),bn=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:"getLineSegment",value:function(t,e){e.p0=this._pts[t],e.p1=this._pts[t+1]}},{key:"computeSelect",value:function(t,e,n,i){var r=this._pts[e],s=this._pts[n];if(n-e==1)return i.select(this,e),null;if(!t.intersects(r,s))return null;var o=Math.trunc((e+n)/2);e<o&&this.computeSelect(t,e,o,i),o<n&&this.computeSelect(t,o,n,i)}},{key:"getCoordinates",value:function(){for(var t=new Array(this._end-this._start+1).fill(null),e=0,n=this._start;n<=this._end;n++)t[e++]=this._pts[n];return t}},{key:"computeOverlaps",value:function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];this.computeOverlaps(this._start,this._end,t,t._start,t._end,e)}else if(6===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2],s=arguments[3],o=arguments[4],a=arguments[5];if(i-n==1&&o-s==1)return a.overlap(this,n,r,s),null;if(!this.overlaps(n,i,r,s,o))return null;var l=Math.trunc((n+i)/2),u=Math.trunc((s+o)/2);n<l&&(s<u&&this.computeOverlaps(n,l,r,s,u,a),u<o&&this.computeOverlaps(n,l,r,u,o,a)),l<i&&(s<u&&this.computeOverlaps(l,i,r,s,u,a),u<o&&this.computeOverlaps(l,i,r,u,o,a))}}},{key:"setId",value:function(t){this._id=t}},{key:"select",value:function(t,e){this.computeSelect(t,this._start,this._end,e)}},{key:"getEnvelope",value:function(){if(null===this._env){var t=this._pts[this._start],e=this._pts[this._end];this._env=new X(t,e)}return this._env}},{key:"overlaps",value:function(t,e,n,i,r){return X.intersects(this._pts[t],this._pts[e],n._pts[i],n._pts[r])}},{key:"getEndIndex",value:function(){return this._end}},{key:"getStartIndex",value:function(){return this._start}},{key:"getContext",value:function(){return this._context}},{key:"getId",value:function(){return this._id}}],[{key:"constructor_",value:function(){this._pts=null,this._start=null,this._end=null,this._env=null,this._context=null,this._id=null;var t=arguments[0],e=arguments[1],n=arguments[2],i=arguments[3];this._pts=t,this._start=e,this._end=n,this._context=i}}]),e}(),Cn=function(){function e(){t(this,e)}return n(e,null,[{key:"findChainEnd",value:function(t,e){for(var n=e;n<t.length-1&&t[n].equals2D(t[n+1]);)n++;if(n>=t.length-1)return t.length-1;for(var i=Ke.quadrant(t[n],t[n+1]),r=e+1;r<t.length&&(t[r-1].equals2D(t[r])||Ke.quadrant(t[r-1],t[r])===i);)r++;return r-1}},{key:"getChains",value:function(){if(1===arguments.length){var t=arguments[0];return e.getChains(t,null)}if(2===arguments.length){var n=arguments[0],i=arguments[1],r=new pt,s=0;do{var o=e.findChainEnd(n,s),a=new bn(n,s,o,i);r.add(a),s=o}while(s<n.length-1);return r}}}]),e}(),In=function(){function e(){t(this,e)}return n(e,[{key:"computeNodes",value:function(t){}},{key:"getNodedSubstrings",value:function(){}}]),e}(),Tn=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:"setSegmentIntersector",value:function(t){this._segInt=t}},{key:"interfaces_",get:function(){return[In]}}],[{key:"constructor_",value:function(){if(this._segInt=null,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this.setSegmentIntersector(t)}}}]),e}(),Rn=function(e){i(s,e);var r=c(s);function s(){var e;return t(this,s),e=r.call(this),s.constructor_.apply(u(e),arguments),e}return n(s,[{key:"getMonotoneChains",value:function(){return this._monoChains}},{key:"getNodedSubstrings",value:function(){return kn.getNodedSubstrings(this._nodedSegStrings)}},{key:"getIndex",value:function(){return this._index}},{key:"add",value:function(t){for(var e=Cn.getChains(t.getCoordinates(),t).iterator();e.hasNext();){var n=e.next();n.setId(this._idCounter++),this._index.insert(n.getEnvelope(),n),this._monoChains.add(n)}}},{key:"computeNodes",value:function(t){this._nodedSegStrings=t;for(var e=t.iterator();e.hasNext();)this.add(e.next());this.intersectChains()}},{key:"intersectChains",value:function(){for(var t=new Nn(this._segInt),e=this._monoChains.iterator();e.hasNext();)for(var n=e.next(),i=this._index.query(n.getEnvelope()).iterator();i.hasNext();){var r=i.next();if(r.getId()>n.getId()&&(n.computeOverlaps(r,t),this._nOverlaps++),this._segInt.isDone())return null}}}],[{key:"constructor_",value:function(){if(this._monoChains=new pt,this._index=new fn,this._idCounter=0,this._nodedSegStrings=null,this._nOverlaps=0,0===arguments.length);else if(1===arguments.length){var t=arguments[0];Tn.constructor_.call(this,t)}}}]),s}(Tn),Nn=function(e){i(o,e);var s=c(o);function o(){var e;return t(this,o),e=s.call(this),o.constructor_.apply(u(e),arguments),e}return n(o,[{key:"overlap",value:function(){if(4!==arguments.length)return d(r(o.prototype),"overlap",this).apply(this,arguments);var t=arguments[1],e=arguments[2],n=arguments[3],i=arguments[0].getContext(),s=e.getContext();this._si.processIntersections(i,t,s,n)}}],[{key:"constructor_",value:function(){this._si=null;var t=arguments[0];this._si=t}}]),o}(Sn);Rn.SegmentOverlapAction=Nn;var Ln=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:"isDeletable",value:function(t,e,n,i){var r=this._inputLine[t],s=this._inputLine[e],o=this._inputLine[n];return!!this.isConcave(r,s,o)&&!!this.isShallow(r,s,o,i)&&this.isShallowSampled(r,s,t,n,i)}},{key:"deleteShallowConcavities",value:function(){for(var t=1,n=this.findNextNonDeletedIndex(t),i=this.findNextNonDeletedIndex(n),r=!1;i<this._inputLine.length;){var s=!1;this.isDeletable(t,n,i,this._distanceTol)&&(this._isDeleted[n]=e.DELETE,s=!0,r=!0),t=s?i:n,n=this.findNextNonDeletedIndex(t),i=this.findNextNonDeletedIndex(n)}return r}},{key:"isShallowConcavity",value:function(t,e,n,i){return ct.index(t,e,n)===this._angleOrientation&&wt.pointToSegment(e,t,n)<i}},{key:"isShallowSampled",value:function(t,n,i,r,s){var o=Math.trunc((r-i)/e.NUM_PTS_TO_CHECK);o<=0&&(o=1);for(var a=i;a<r;a+=o)if(!this.isShallow(t,n,this._inputLine[a],s))return!1;return!0}},{key:"isConcave",value:function(t,e,n){return ct.index(t,e,n)===this._angleOrientation}},{key:"simplify",value:function(t){this._distanceTol=Math.abs(t),t<0&&(this._angleOrientation=ct.CLOCKWISE),this._isDeleted=new Array(this._inputLine.length).fill(null);var e=!1;do{e=this.deleteShallowConcavities()}while(e);return this.collapseLine()}},{key:"findNextNonDeletedIndex",value:function(t){for(var n=t+1;n<this._inputLine.length&&this._isDeleted[n]===e.DELETE;)n++;return n}},{key:"isShallow",value:function(t,e,n,i){return wt.pointToSegment(e,t,n)<i}},{key:"collapseLine",value:function(){for(var t=new Vt,n=0;n<this._inputLine.length;n++)this._isDeleted[n]!==e.DELETE&&t.add(this._inputLine[n]);return t.toCoordinateArray()}}],[{key:"constructor_",value:function(){this._inputLine=null,this._distanceTol=null,this._isDeleted=null,this._angleOrientation=ct.COUNTERCLOCKWISE;var t=arguments[0];this._inputLine=t}},{key:"simplify",value:function(t,n){return new e(t).simplify(n)}}]),e}();Ln.INIT=0,Ln.DELETE=1,Ln.KEEP=1,Ln.NUM_PTS_TO_CHECK=10;var Mn=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:"getCoordinates",value:function(){return this._ptList.toArray(e.COORDINATE_ARRAY_TYPE)}},{key:"setPrecisionModel",value:function(t){this._precisionModel=t}},{key:"addPt",value:function(t){var e=new B(t);if(this._precisionModel.makePrecise(e),this.isRedundant(e))return null;this._ptList.add(e)}},{key:"reverse",value:function(){}},{key:"addPts",value:function(t,e){if(e)for(var n=0;n<t.length;n++)this.addPt(t[n]);else for(var i=t.length-1;i>=0;i--)this.addPt(t[i])}},{key:"isRedundant",value:function(t){if(this._ptList.size()<1)return!1;var e=this._ptList.get(this._ptList.size()-1);return t.distance(e)<this._minimimVertexDistance}},{key:"toString",value:function(){return(new oe).createLineString(this.getCoordinates()).toString()}},{key:"closeRing",value:function(){if(this._ptList.size()<1)return null;var t=new B(this._ptList.get(0)),e=this._ptList.get(this._ptList.size()-1);if(t.equals(e))return null;this._ptList.add(t)}},{key:"setMinimumVertexDistance",value:function(t){this._minimimVertexDistance=t}}],[{key:"constructor_",value:function(){this._ptList=null,this._precisionModel=null,this._minimimVertexDistance=0,this._ptList=new pt}}]),e}();Mn.COORDINATE_ARRAY_TYPE=new Array(0).fill(null);var Pn=function(){function e(){t(this,e)}return n(e,null,[{key:"toDegrees",value:function(t){return 180*t/Math.PI}},{key:"normalize",value:function(t){for(;t>Math.PI;)t-=e.PI_TIMES_2;for(;t<=-Math.PI;)t+=e.PI_TIMES_2;return t}},{key:"angle",value:function(){if(1===arguments.length){var t=arguments[0];return Math.atan2(t.y,t.x)}if(2===arguments.length){var e=arguments[0],n=arguments[1],i=n.x-e.x,r=n.y-e.y;return Math.atan2(r,i)}}},{key:"isAcute",value:function(t,e,n){var i=t.x-e.x,r=t.y-e.y;return i*(n.x-e.x)+r*(n.y-e.y)>0}},{key:"isObtuse",value:function(t,e,n){var i=t.x-e.x,r=t.y-e.y;return i*(n.x-e.x)+r*(n.y-e.y)<0}},{key:"interiorAngle",value:function(t,n,i){var r=e.angle(n,t),s=e.angle(n,i);return Math.abs(s-r)}},{key:"normalizePositive",value:function(t){if(t<0){for(;t<0;)t+=e.PI_TIMES_2;t>=e.PI_TIMES_2&&(t=0)}else{for(;t>=e.PI_TIMES_2;)t-=e.PI_TIMES_2;t<0&&(t=0)}return t}},{key:"angleBetween",value:function(t,n,i){var r=e.angle(n,t),s=e.angle(n,i);return e.diff(r,s)}},{key:"diff",value:function(t,e){var n=null;return(n=t<e?e-t:t-e)>Math.PI&&(n=2*Math.PI-n),n}},{key:"toRadians",value:function(t){return t*Math.PI/180}},{key:"getTurn",value:function(t,n){var i=Math.sin(n-t);return i>0?e.COUNTERCLOCKWISE:i<0?e.CLOCKWISE:e.NONE}},{key:"angleBetweenOriented",value:function(t,n,i){var r=e.angle(n,t),s=e.angle(n,i)-r;return s<=-Math.PI?s+e.PI_TIMES_2:s>Math.PI?s-e.PI_TIMES_2:s}}]),e}();Pn.PI_TIMES_2=2*Math.PI,Pn.PI_OVER_2=Math.PI/2,Pn.PI_OVER_4=Math.PI/4,Pn.COUNTERCLOCKWISE=ct.COUNTERCLOCKWISE,Pn.CLOCKWISE=ct.CLOCKWISE,Pn.NONE=ct.COLLINEAR;var On=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:"addNextSegment",value:function(t,e){if(this._s0=this._s1,this._s1=this._s2,this._s2=t,this._seg0.setCoordinates(this._s0,this._s1),this.computeOffsetSegment(this._seg0,this._side,this._distance,this._offset0),this._seg1.setCoordinates(this._s1,this._s2),this.computeOffsetSegment(this._seg1,this._side,this._distance,this._offset1),this._s1.equals(this._s2))return null;var n=ct.index(this._s0,this._s1,this._s2),i=n===ct.CLOCKWISE&&this._side===Q.LEFT||n===ct.COUNTERCLOCKWISE&&this._side===Q.RIGHT;0===n?this.addCollinear(e):i?this.addOutsideTurn(n,e):this.addInsideTurn(n,e)}},{key:"addLineEndCap",value:function(t,e){var n=new En(t,e),i=new En;this.computeOffsetSegment(n,Q.LEFT,this._distance,i);var r=new En;this.computeOffsetSegment(n,Q.RIGHT,this._distance,r);var s=e.x-t.x,o=e.y-t.y,a=Math.atan2(o,s);switch(this._bufParams.getEndCapStyle()){case y.CAP_ROUND:this._segList.addPt(i.p1),this.addDirectedFillet(e,a+Math.PI/2,a-Math.PI/2,ct.CLOCKWISE,this._distance),this._segList.addPt(r.p1);break;case y.CAP_FLAT:this._segList.addPt(i.p1),this._segList.addPt(r.p1);break;case y.CAP_SQUARE:var l=new B;l.x=Math.abs(this._distance)*Math.cos(a),l.y=Math.abs(this._distance)*Math.sin(a);var u=new B(i.p1.x+l.x,i.p1.y+l.y),h=new B(r.p1.x+l.x,r.p1.y+l.y);this._segList.addPt(u),this._segList.addPt(h)}}},{key:"getCoordinates",value:function(){return this._segList.getCoordinates()}},{key:"addMitreJoin",value:function(t,e,n,i){var r=_t.intersection(e.p0,e.p1,n.p0,n.p1);if(null!==r&&(i<=0?1:r.distance(t)/Math.abs(i))<=this._bufParams.getMitreLimit())return this._segList.addPt(r),null;this.addLimitedMitreJoin(e,n,i,this._bufParams.getMitreLimit())}},{key:"addOutsideTurn",value:function(t,n){if(this._offset0.p1.distance(this._offset1.p0)<this._distance*e.OFFSET_SEGMENT_SEPARATION_FACTOR)return this._segList.addPt(this._offset0.p1),null;this._bufParams.getJoinStyle()===y.JOIN_MITRE?this.addMitreJoin(this._s1,this._offset0,this._offset1,this._distance):this._bufParams.getJoinStyle()===y.JOIN_BEVEL?this.addBevelJoin(this._offset0,this._offset1):(n&&this._segList.addPt(this._offset0.p1),this.addCornerFillet(this._s1,this._offset0.p1,this._offset1.p0,t,this._distance),this._segList.addPt(this._offset1.p0))}},{key:"createSquare",value:function(t){this._segList.addPt(new B(t.x+this._distance,t.y+this._distance)),this._segList.addPt(new B(t.x+this._distance,t.y-this._distance)),this._segList.addPt(new B(t.x-this._distance,t.y-this._distance)),this._segList.addPt(new B(t.x-this._distance,t.y+this._distance)),this._segList.closeRing()}},{key:"addSegments",value:function(t,e){this._segList.addPts(t,e)}},{key:"addFirstSegment",value:function(){this._segList.addPt(this._offset1.p0)}},{key:"addCornerFillet",value:function(t,e,n,i,r){var s=e.x-t.x,o=e.y-t.y,a=Math.atan2(o,s),l=n.x-t.x,u=n.y-t.y,h=Math.atan2(u,l);i===ct.CLOCKWISE?a<=h&&(a+=2*Math.PI):a>=h&&(a-=2*Math.PI),this._segList.addPt(e),this.addDirectedFillet(t,a,h,i,r),this._segList.addPt(n)}},{key:"addLastSegment",value:function(){this._segList.addPt(this._offset1.p1)}},{key:"initSideSegments",value:function(t,e,n){this._s1=t,this._s2=e,this._side=n,this._seg1.setCoordinates(t,e),this.computeOffsetSegment(this._seg1,n,this._distance,this._offset1)}},{key:"addLimitedMitreJoin",value:function(t,e,n,i){var r=this._seg0.p1,s=Pn.angle(r,this._seg0.p0),o=Pn.angleBetweenOriented(this._seg0.p0,r,this._seg1.p1)/2,a=Pn.normalize(s+o),l=Pn.normalize(a+Math.PI),u=i*n,h=n-u*Math.abs(Math.sin(o)),c=r.x+u*Math.cos(l),d=r.y+u*Math.sin(l),f=new B(c,d),g=new En(r,f),p=g.pointAlongOffset(1,h),m=g.pointAlongOffset(1,-h);this._side===Q.LEFT?(this._segList.addPt(p),this._segList.addPt(m)):(this._segList.addPt(m),this._segList.addPt(p))}},{key:"addDirectedFillet",value:function(t,e,n,i,r){var s=i===ct.CLOCKWISE?-1:1,o=Math.abs(e-n),a=Math.trunc(o/this._filletAngleQuantum+.5);if(a<1)return null;for(var l=o/a,u=new B,h=0;h<a;h++){var c=e+s*h*l;u.x=t.x+r*Math.cos(c),u.y=t.y+r*Math.sin(c),this._segList.addPt(u)}}},{key:"computeOffsetSegment",value:function(t,e,n,i){var r=e===Q.LEFT?1:-1,s=t.p1.x-t.p0.x,o=t.p1.y-t.p0.y,a=Math.sqrt(s*s+o*o),l=r*n*s/a,u=r*n*o/a;i.p0.x=t.p0.x-u,i.p0.y=t.p0.y+l,i.p1.x=t.p1.x-u,i.p1.y=t.p1.y+l}},{key:"addInsideTurn",value:function(t,n){if(this._li.computeIntersection(this._offset0.p0,this._offset0.p1,this._offset1.p0,this._offset1.p1),this._li.hasIntersection())this._segList.addPt(this._li.getIntersection(0));else if(this._hasNarrowConcaveAngle=!0,this._offset0.p1.distance(this._offset1.p0)<this._distance*e.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR)this._segList.addPt(this._offset0.p1);else{if(this._segList.addPt(this._offset0.p1),this._closingSegLengthFactor>0){var i=new B((this._closingSegLengthFactor*this._offset0.p1.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset0.p1.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(i);var r=new B((this._closingSegLengthFactor*this._offset1.p0.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset1.p0.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(r)}else this._segList.addPt(this._s1);this._segList.addPt(this._offset1.p0)}}},{key:"createCircle",value:function(t){var e=new B(t.x+this._distance,t.y);this._segList.addPt(e),this.addDirectedFillet(t,0,2*Math.PI,-1,this._distance),this._segList.closeRing()}},{key:"addBevelJoin",value:function(t,e){this._segList.addPt(t.p1),this._segList.addPt(e.p0)}},{key:"init",value:function(t){this._distance=t,this._maxCurveSegmentError=t*(1-Math.cos(this._filletAngleQuantum/2)),this._segList=new Mn,this._segList.setPrecisionModel(this._precisionModel),this._segList.setMinimumVertexDistance(t*e.CURVE_VERTEX_SNAP_DISTANCE_FACTOR)}},{key:"addCollinear",value:function(t){this._li.computeIntersection(this._s0,this._s1,this._s1,this._s2),this._li.getIntersectionNum()>=2&&(this._bufParams.getJoinStyle()===y.JOIN_BEVEL||this._bufParams.getJoinStyle()===y.JOIN_MITRE?(t&&this._segList.addPt(this._offset0.p1),this._segList.addPt(this._offset1.p0)):this.addCornerFillet(this._s1,this._offset0.p1,this._offset1.p0,ct.CLOCKWISE,this._distance))}},{key:"closeRing",value:function(){this._segList.closeRing()}},{key:"hasNarrowConcaveAngle",value:function(){return this._hasNarrowConcaveAngle}}],[{key:"constructor_",value:function(){this._maxCurveSegmentError=0,this._filletAngleQuantum=null,this._closingSegLengthFactor=1,this._segList=null,this._distance=0,this._precisionModel=null,this._bufParams=null,this._li=null,this._s0=null,this._s1=null,this._s2=null,this._seg0=new En,this._seg1=new En,this._offset0=new En,this._offset1=new En,this._side=0,this._hasNarrowConcaveAngle=!1;var t=arguments[0],n=arguments[1],i=arguments[2];this._precisionModel=t,this._bufParams=n,this._li=new Le,this._filletAngleQuantum=Math.PI/2/n.getQuadrantSegments(),n.getQuadrantSegments()>=8&&n.getJoinStyle()===y.JOIN_ROUND&&(this._closingSegLengthFactor=e.MAX_CLOSING_SEG_LEN_FACTOR),this.init(i)}}]),e}();On.OFFSET_SEGMENT_SEPARATION_FACTOR=.001,On.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR=.001,On.CURVE_VERTEX_SNAP_DISTANCE_FACTOR=1e-6,On.MAX_CLOSING_SEG_LEN_FACTOR=80;var An=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:"getOffsetCurve",value:function(t,e){if(this._distance=e,0===e)return null;var n=e<0,i=Math.abs(e),r=this.getSegGen(i);t.length<=1?this.computePointCurve(t[0],r):this.computeOffsetCurve(t,n,r);var s=r.getCoordinates();return n&&Ht.reverse(s),s}},{key:"computeSingleSidedBufferCurve",value:function(t,e,n){var i=this.simplifyTolerance(this._distance);if(e){n.addSegments(t,!0);var r=Ln.simplify(t,-i),s=r.length-1;n.initSideSegments(r[s],r[s-1],Q.LEFT),n.addFirstSegment();for(var o=s-2;o>=0;o--)n.addNextSegment(r[o],!0)}else{n.addSegments(t,!1);var a=Ln.simplify(t,i),l=a.length-1;n.initSideSegments(a[0],a[1],Q.LEFT),n.addFirstSegment();for(var u=2;u<=l;u++)n.addNextSegment(a[u],!0)}n.addLastSegment(),n.closeRing()}},{key:"computeRingBufferCurve",value:function(t,e,n){var i=this.simplifyTolerance(this._distance);e===Q.RIGHT&&(i=-i);var r=Ln.simplify(t,i),s=r.length-1;n.initSideSegments(r[s-1],r[0],e);for(var o=1;o<=s;o++){var a=1!==o;n.addNextSegment(r[o],a)}n.closeRing()}},{key:"computeLineBufferCurve",value:function(t,e){var n=this.simplifyTolerance(this._distance),i=Ln.simplify(t,n),r=i.length-1;e.initSideSegments(i[0],i[1],Q.LEFT);for(var s=2;s<=r;s++)e.addNextSegment(i[s],!0);e.addLastSegment(),e.addLineEndCap(i[r-1],i[r]);var o=Ln.simplify(t,-n),a=o.length-1;e.initSideSegments(o[a],o[a-1],Q.LEFT);for(var l=a-2;l>=0;l--)e.addNextSegment(o[l],!0);e.addLastSegment(),e.addLineEndCap(o[1],o[0]),e.closeRing()}},{key:"computePointCurve",value:function(t,e){switch(this._bufParams.getEndCapStyle()){case y.CAP_ROUND:e.createCircle(t);break;case y.CAP_SQUARE:e.createSquare(t)}}},{key:"getLineCurve",value:function(t,e){if(this._distance=e,this.isLineOffsetEmpty(e))return null;var n=Math.abs(e),i=this.getSegGen(n);if(t.length<=1)this.computePointCurve(t[0],i);else if(this._bufParams.isSingleSided()){var r=e<0;this.computeSingleSidedBufferCurve(t,r,i)}else this.computeLineBufferCurve(t,i);return i.getCoordinates()}},{key:"getBufferParameters",value:function(){return this._bufParams}},{key:"simplifyTolerance",value:function(t){return t*this._bufParams.getSimplifyFactor()}},{key:"getRingCurve",value:function(t,n,i){if(this._distance=i,t.length<=2)return this.getLineCurve(t,i);if(0===i)return e.copyCoordinates(t);var r=this.getSegGen(i);return this.computeRingBufferCurve(t,n,r),r.getCoordinates()}},{key:"computeOffsetCurve",value:function(t,e,n){var i=this.simplifyTolerance(this._distance);if(e){var r=Ln.simplify(t,-i),s=r.length-1;n.initSideSegments(r[s],r[s-1],Q.LEFT),n.addFirstSegment();for(var o=s-2;o>=0;o--)n.addNextSegment(r[o],!0)}else{var a=Ln.simplify(t,i),l=a.length-1;n.initSideSegments(a[0],a[1],Q.LEFT),n.addFirstSegment();for(var u=2;u<=l;u++)n.addNextSegment(a[u],!0)}n.addLastSegment()}},{key:"isLineOffsetEmpty",value:function(t){return 0===t||t<0&&!this._bufParams.isSingleSided()}},{key:"getSegGen",value:function(t){return new On(this._precisionModel,this._bufParams,t)}}],[{key:"constructor_",value:function(){this._distance=0,this._precisionModel=null,this._bufParams=null;var t=arguments[0],e=arguments[1];this._precisionModel=t,this._bufParams=e}},{key:"copyCoordinates",value:function(t){for(var e=new Array(t.length).fill(null),n=0;n<e.length;n++)e[n]=new B(t[n]);return e}}]),e}(),Fn=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:"findStabbedSegments",value:function(){if(1===arguments.length){for(var t=arguments[0],e=new pt,n=this._subgraphs.iterator();n.hasNext();){var i=n.next(),r=i.getEnvelope();t.y<r.getMinY()||t.y>r.getMaxY()||this.findStabbedSegments(t,i.getDirectedEdges(),e)}return e}if(3===arguments.length)if(rt(arguments[2],nt)&&arguments[0]instanceof B&&arguments[1]instanceof $e){for(var s=arguments[0],o=arguments[1],a=arguments[2],l=o.getEdge().getCoordinates(),u=0;u<l.length-1;u++)if(this._seg.p0=l[u],this._seg.p1=l[u+1],this._seg.p0.y>this._seg.p1.y&&this._seg.reverse(),!(Math.max(this._seg.p0.x,this._seg.p1.x)<s.x)&&!(this._seg.isHorizontal()||s.y<this._seg.p0.y||s.y>this._seg.p1.y||ct.index(this._seg.p0,this._seg.p1,s)===ct.RIGHT)){var h=o.getDepth(Q.LEFT);this._seg.p0.equals(l[u])||(h=o.getDepth(Q.RIGHT));var c=new Dn(this._seg,h);a.add(c)}}else if(rt(arguments[2],nt)&&arguments[0]instanceof B&&rt(arguments[1],nt))for(var d=arguments[0],f=arguments[2],g=arguments[1].iterator();g.hasNext();){var p=g.next();p.isForward()&&this.findStabbedSegments(d,p,f)}}},{key:"getDepth",value:function(t){var e=this.findStabbedSegments(t);return 0===e.size()?0:an.min(e)._leftDepth}}],[{key:"constructor_",value:function(){this._subgraphs=null,this._seg=new En;var t=arguments[0];this._subgraphs=t}}]),e}(),Dn=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:"compareTo",value:function(t){var e=t;if(this._upwardSeg.minX()>=e._upwardSeg.maxX())return 1;if(this._upwardSeg.maxX()<=e._upwardSeg.minX())return-1;var n=this._upwardSeg.orientationIndex(e._upwardSeg);return 0!==n||0!==(n=-1*e._upwardSeg.orientationIndex(this._upwardSeg))?n:this._upwardSeg.compareTo(e._upwardSeg)}},{key:"compareX",value:function(t,e){var n=t.p0.compareTo(e.p0);return 0!==n?n:t.p1.compareTo(e.p1)}},{key:"toString",value:function(){return this._upwardSeg.toString()}},{key:"interfaces_",get:function(){return[w]}}],[{key:"constructor_",value:function(){this._upwardSeg=null,this._leftDepth=null;var t=arguments[0],e=arguments[1];this._upwardSeg=new En(t),this._leftDepth=e}}]),e}();Fn.DepthSegment=Dn;var zn=function(e){i(s,e);var r=c(s);function s(){var e;return t(this,s),e=r.call(this),s.constructor_.apply(u(e),arguments),e}return n(s,null,[{key:"constructor_",value:function(){_.constructor_.call(this,"Projective point not representable on the Cartesian plane.")}}]),s}(_),Gn=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:"getY",value:function(){var t=this.y/this.w;if(O.isNaN(t)||O.isInfinite(t))throw new zn;return t}},{key:"getX",value:function(){var t=this.x/this.w;if(O.isNaN(t)||O.isInfinite(t))throw new zn;return t}},{key:"getCoordinate",value:function(){var t=new B;return t.x=this.getX(),t.y=this.getY(),t}}],[{key:"constructor_",value:function(){if(this.x=null,this.y=null,this.w=null,0===arguments.length)this.x=0,this.y=0,this.w=1;else if(1===arguments.length){var t=arguments[0];this.x=t.x,this.y=t.y,this.w=1}else if(2===arguments.length){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var n=arguments[0],i=arguments[1];this.x=n,this.y=i,this.w=1}else if(arguments[0]instanceof e&&arguments[1]instanceof e){var r=arguments[0],s=arguments[1];this.x=r.y*s.w-s.y*r.w,this.y=s.x*r.w-r.x*s.w,this.w=r.x*s.y-s.x*r.y}else if(arguments[0]instanceof B&&arguments[1]instanceof B){var o=arguments[0],a=arguments[1];this.x=o.y-a.y,this.y=a.x-o.x,this.w=o.x*a.y-a.x*o.y}}else if(3===arguments.length){var l=arguments[0],u=arguments[1],h=arguments[2];this.x=l,this.y=u,this.w=h}else if(4===arguments.length){var c=arguments[0],d=arguments[1],f=arguments[2],g=arguments[3],p=c.y-d.y,m=d.x-c.x,y=c.x*d.y-d.x*c.y,_=f.y-g.y,v=g.x-f.x,x=f.x*g.y-g.x*f.y;this.x=m*x-v*y,this.y=_*y-p*x,this.w=p*v-_*m}}}]),e}(),jn=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:"area",value:function(){return e.area(this.p0,this.p1,this.p2)}},{key:"signedArea",value:function(){return e.signedArea(this.p0,this.p1,this.p2)}},{key:"interpolateZ",value:function(t){if(null===t)throw new v("Supplied point is null.");return e.interpolateZ(t,this.p0,this.p1,this.p2)}},{key:"longestSideLength",value:function(){return e.longestSideLength(this.p0,this.p1,this.p2)}},{key:"isAcute",value:function(){return e.isAcute(this.p0,this.p1,this.p2)}},{key:"circumcentre",value:function(){return e.circumcentre(this.p0,this.p1,this.p2)}},{key:"area3D",value:function(){return e.area3D(this.p0,this.p1,this.p2)}},{key:"centroid",value:function(){return e.centroid(this.p0,this.p1,this.p2)}},{key:"inCentre",value:function(){return e.inCentre(this.p0,this.p1,this.p2)}}],[{key:"constructor_",value:function(){this.p0=null,this.p1=null,this.p2=null;var t=arguments[0],e=arguments[1],n=arguments[2];this.p0=t,this.p1=e,this.p2=n}},{key:"area",value:function(t,e,n){return Math.abs(((n.x-t.x)*(e.y-t.y)-(e.x-t.x)*(n.y-t.y))/2)}},{key:"signedArea",value:function(t,e,n){return((n.x-t.x)*(e.y-t.y)-(e.x-t.x)*(n.y-t.y))/2}},{key:"det",value:function(t,e,n,i){return t*i-e*n}},{key:"interpolateZ",value:function(t,e,n,i){var r=e.x,s=e.y,o=n.x-r,a=i.x-r,l=n.y-s,u=i.y-s,h=o*u-a*l,c=t.x-r,d=t.y-s,f=(u*c-a*d)/h,g=(-l*c+o*d)/h;return e.getZ()+f*(n.getZ()-e.getZ())+g*(i.getZ()-e.getZ())}},{key:"longestSideLength",value:function(t,e,n){var i=t.distance(e),r=e.distance(n),s=n.distance(t),o=i;return r>o&&(o=r),s>o&&(o=s),o}},{key:"circumcentreDD",value:function(t,e,n){var i=lt.valueOf(t.x).subtract(n.x),r=lt.valueOf(t.y).subtract(n.y),s=lt.valueOf(e.x).subtract(n.x),o=lt.valueOf(e.y).subtract(n.y),a=lt.determinant(i,r,s,o).multiply(2),l=i.sqr().add(r.sqr()),u=s.sqr().add(o.sqr()),h=lt.determinant(r,l,o,u),c=lt.determinant(i,l,s,u),d=lt.valueOf(n.x).subtract(h.divide(a)).doubleValue(),f=lt.valueOf(n.y).add(c.divide(a)).doubleValue();return new B(d,f)}},{key:"isAcute",value:function(t,e,n){return!!Pn.isAcute(t,e,n)&&!!Pn.isAcute(e,n,t)&&!!Pn.isAcute(n,t,e)}},{key:"circumcentre",value:function(t,n,i){var r=i.x,s=i.y,o=t.x-r,a=t.y-s,l=n.x-r,u=n.y-s,h=2*e.det(o,a,l,u),c=e.det(a,o*o+a*a,u,l*l+u*u),d=e.det(o,o*o+a*a,l,l*l+u*u);return new B(r-c/h,s+d/h)}},{key:"perpendicularBisector",value:function(t,e){var n=e.x-t.x,i=e.y-t.y,r=new Gn(t.x+n/2,t.y+i/2,1),s=new Gn(t.x-i+n/2,t.y+n+i/2,1);return new Gn(r,s)}},{key:"angleBisector",value:function(t,e,n){var i=e.distance(t),r=i/(i+e.distance(n)),s=n.x-t.x,o=n.y-t.y;return new B(t.x+r*s,t.y+r*o)}},{key:"area3D",value:function(t,e,n){var i=e.x-t.x,r=e.y-t.y,s=e.getZ()-t.getZ(),o=n.x-t.x,a=n.y-t.y,l=n.getZ()-t.getZ(),u=r*l-s*a,h=s*o-i*l,c=i*a-r*o,d=u*u+h*h+c*c;return Math.sqrt(d)/2}},{key:"centroid",value:function(t,e,n){var i=(t.x+e.x+n.x)/3,r=(t.y+e.y+n.y)/3;return new B(i,r)}},{key:"inCentre",value:function(t,e,n){var i=e.distance(n),r=t.distance(n),s=t.distance(e),o=i+r+s,a=(i*t.x+r*e.x+s*n.x)/o,l=(i*t.y+r*e.y+s*n.y)/o;return new B(a,l)}}]),e}(),Yn=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:"addRingSide",value:function(t,e,n,i,r){if(0===e&&t.length<Bt.MINIMUM_VALID_SIZE)return null;var s=i,o=r;t.length>=Bt.MINIMUM_VALID_SIZE&&ct.isCCW(t)&&(s=r,o=i,n=Q.opposite(n));var a=this._curveBuilder.getRingCurve(t,n,e);this.addCurve(a,s,o)}},{key:"addRingBothSides",value:function(t,e){this.addRingSide(t,e,Q.LEFT,W.EXTERIOR,W.INTERIOR),this.addRingSide(t,e,Q.RIGHT,W.INTERIOR,W.EXTERIOR)}},{key:"addPoint",value:function(t){if(this._distance<=0)return null;var e=t.getCoordinates(),n=this._curveBuilder.getLineCurve(e,this._distance);this.addCurve(n,W.EXTERIOR,W.INTERIOR)}},{key:"addPolygon",value:function(t){var e=this._distance,n=Q.LEFT;this._distance<0&&(e=-this._distance,n=Q.RIGHT);var i=t.getExteriorRing(),r=Ht.removeRepeatedPoints(i.getCoordinates());if(this._distance<0&&this.isErodedCompletely(i,this._distance))return null;if(this._distance<=0&&r.length<3)return null;this.addRingSide(r,e,n,W.EXTERIOR,W.INTERIOR);for(var s=0;s<t.getNumInteriorRing();s++){var o=t.getInteriorRingN(s),a=Ht.removeRepeatedPoints(o.getCoordinates());this._distance>0&&this.isErodedCompletely(o,-this._distance)||this.addRingSide(a,e,Q.opposite(n),W.INTERIOR,W.EXTERIOR)}}},{key:"isTriangleErodedCompletely",value:function(t,e){var n=new jn(t[0],t[1],t[2]),i=n.inCentre();return wt.pointToSegment(i,n.p0,n.p1)<Math.abs(e)}},{key:"addLineString",value:function(t){if(this._curveBuilder.isLineOffsetEmpty(this._distance))return null;var e=Ht.removeRepeatedPoints(t.getCoordinates());if(Ht.isRing(e)&&!this._curveBuilder.getBufferParameters().isSingleSided())this.addRingBothSides(e,this._distance);else{var n=this._curveBuilder.getLineCurve(e,this._distance);this.addCurve(n,W.EXTERIOR,W.INTERIOR)}}},{key:"addCurve",value:function(t,e,n){if(null===t||t.length<2)return null;var i=new kn(t,new Ae(0,W.BOUNDARY,e,n));this._curveList.add(i)}},{key:"getCurves",value:function(){return this.add(this._inputGeom),this._curveList}},{key:"add",value:function(t){if(t.isEmpty())return null;if(t instanceof Ft)this.addPolygon(t);else if(t instanceof Nt)this.addLineString(t);else if(t instanceof Mt)this.addPoint(t);else if(t instanceof Yt)this.addCollection(t);else if(t instanceof se)this.addCollection(t);else if(t instanceof te)this.addCollection(t);else{if(!(t instanceof jt))throw new K(t.getGeometryType());this.addCollection(t)}}},{key:"isErodedCompletely",value:function(t,e){var n=t.getCoordinates();if(n.length<4)return e<0;if(4===n.length)return this.isTriangleErodedCompletely(n,e);var i=t.getEnvelopeInternal(),r=Math.min(i.getHeight(),i.getWidth());return e<0&&2*Math.abs(e)>r}},{key:"addCollection",value:function(t){for(var e=0;e<t.getNumGeometries();e++){var n=t.getGeometryN(e);this.add(n)}}}],[{key:"constructor_",value:function(){this._inputGeom=null,this._distance=null,this._curveBuilder=null,this._curveList=new pt;var t=arguments[0],e=arguments[1],n=arguments[2];this._inputGeom=t,this._distance=e,this._curveBuilder=n}}]),e}(),Bn=function(){function e(){t(this,e)}return n(e,[{key:"locate",value:function(t){}}]),e}(),Un=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:"next",value:function(){if(this._atStart)return this._atStart=!1,e.isAtomic(this._parent)&&this._index++,this._parent;if(null!==this._subcollectionIterator){if(this._subcollectionIterator.hasNext())return this._subcollectionIterator.next();this._subcollectionIterator=null}if(this._index>=this._max)throw new H;var t=this._parent.getGeometryN(this._index++);return t instanceof jt?(this._subcollectionIterator=new e(t),this._subcollectionIterator.next()):t}},{key:"remove",value:function(){throw new K(this.getClass().getName())}},{key:"hasNext",value:function(){if(this._atStart)return!0;if(null!==this._subcollectionIterator){if(this._subcollectionIterator.hasNext())return!0;this._subcollectionIterator=null}return!(this._index>=this._max)}},{key:"interfaces_",get:function(){return[yn]}}],[{key:"constructor_",value:function(){this._parent=null,this._atStart=null,this._max=null,this._index=null,this._subcollectionIterator=null;var t=arguments[0];this._parent=t,this._atStart=!0,this._index=0,this._max=t.getNumGeometries()}},{key:"isAtomic",value:function(t){return!(t instanceof jt)}}]),e}(),Xn=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:"locate",value:function(t){return e.locate(t,this._geom)}},{key:"interfaces_",get:function(){return[Bn]}}],[{key:"constructor_",value:function(){this._geom=null;var t=arguments[0];this._geom=t}},{key:"locatePointInPolygon",value:function(t,n){if(n.isEmpty())return W.EXTERIOR;var i=n.getExteriorRing(),r=e.locatePointInRing(t,i);if(r!==W.INTERIOR)return r;for(var s=0;s<n.getNumInteriorRing();s++){var o=n.getInteriorRingN(s),a=e.locatePointInRing(t,o);if(a===W.BOUNDARY)return W.BOUNDARY;if(a===W.INTERIOR)return W.EXTERIOR}return W.INTERIOR}},{key:"locatePointInRing",value:function(t,e){return e.getEnvelopeInternal().intersects(t)?Pe.locateInRing(t,e.getCoordinates()):W.EXTERIOR}},{key:"containsPointInPolygon",value:function(t,n){return W.EXTERIOR!==e.locatePointInPolygon(t,n)}},{key:"locateInGeometry",value:function(t,n){if(n instanceof Ft)return e.locatePointInPolygon(t,n);if(n instanceof jt)for(var i=new Un(n);i.hasNext();){var r=i.next();if(r!==n){var s=e.locateInGeometry(t,r);if(s!==W.EXTERIOR)return s}}return W.EXTERIOR}},{key:"isContained",value:function(t,n){return W.EXTERIOR!==e.locate(t,n)}},{key:"locate",value:function(t,n){return n.isEmpty()?W.EXTERIOR:n.getEnvelopeInternal().intersects(t)?e.locateInGeometry(t,n):W.EXTERIOR}}]),e}(),qn=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:"getNextCW",value:function(t){this.getEdges();var e=this._edgeList.indexOf(t),n=e-1;return 0===e&&(n=this._edgeList.size()-1),this._edgeList.get(n)}},{key:"propagateSideLabels",value:function(t){for(var e=W.NONE,n=this.iterator();n.hasNext();){var i=n.next().getLabel();i.isArea(t)&&i.getLocation(t,Q.LEFT)!==W.NONE&&(e=i.getLocation(t,Q.LEFT))}if(e===W.NONE)return null;for(var r=e,s=this.iterator();s.hasNext();){var o=s.next(),a=o.getLabel();if(a.getLocation(t,Q.ON)===W.NONE&&a.setLocation(t,Q.ON,r),a.isArea(t)){var l=a.getLocation(t,Q.LEFT),u=a.getLocation(t,Q.RIGHT);if(u!==W.NONE){if(u!==r)throw new ft("side location conflict",o.getCoordinate());l===W.NONE&&z.shouldNeverReachHere("found single null side (at "+o.getCoordinate()+")"),r=l}else z.isTrue(a.getLocation(t,Q.LEFT)===W.NONE,"found single null side"),a.setLocation(t,Q.RIGHT,r),a.setLocation(t,Q.LEFT,r)}}}},{key:"getCoordinate",value:function(){var t=this.iterator();return t.hasNext()?t.next().getCoordinate():null}},{key:"print",value:function(t){vt.out.println("EdgeEndStar:   "+this.getCoordinate());for(var e=this.iterator();e.hasNext();)e.next().print(t)}},{key:"isAreaLabelsConsistent",value:function(t){return this.computeEdgeEndLabels(t.getBoundaryNodeRule()),this.checkAreaLabelsConsistent(0)}},{key:"checkAreaLabelsConsistent",value:function(t){var e=this.getEdges();if(e.size()<=0)return!0;var n=e.size()-1,i=e.get(n).getLabel().getLocation(t,Q.LEFT);z.isTrue(i!==W.NONE,"Found unlabelled area edge");for(var r=i,s=this.iterator();s.hasNext();){var o=s.next().getLabel();z.isTrue(o.isArea(t),"Found non-area edge");var a=o.getLocation(t,Q.LEFT),l=o.getLocation(t,Q.RIGHT);if(a===l)return!1;if(l!==r)return!1;r=a}return!0}},{key:"findIndex",value:function(t){this.iterator();for(var e=0;e<this._edgeList.size();e++)if(this._edgeList.get(e)===t)return e;return-1}},{key:"iterator",value:function(){return this.getEdges().iterator()}},{key:"getEdges",value:function(){return null===this._edgeList&&(this._edgeList=new pt(this._edgeMap.values())),this._edgeList}},{key:"getLocation",value:function(t,e,n){return this._ptInAreaLocation[t]===W.NONE&&(this._ptInAreaLocation[t]=Xn.locate(e,n[t].getGeometry())),this._ptInAreaLocation[t]}},{key:"toString",value:function(){var t=new st;t.append("EdgeEndStar:   "+this.getCoordinate()),t.append("\n");for(var e=this.iterator();e.hasNext();){var n=e.next();t.append(n),t.append("\n")}return t.toString()}},{key:"computeEdgeEndLabels",value:function(t){for(var e=this.iterator();e.hasNext();)e.next().computeLabel(t)}},{key:"computeLabelling",value:function(t){this.computeEdgeEndLabels(t[0].getBoundaryNodeRule()),this.propagateSideLabels(0),this.propagateSideLabels(1);for(var e=[!1,!1],n=this.iterator();n.hasNext();)for(var i=n.next().getLabel(),r=0;r<2;r++)i.isLine(r)&&i.getLocation(r)===W.BOUNDARY&&(e[r]=!0);for(var s=this.iterator();s.hasNext();)for(var o=s.next(),a=o.getLabel(),l=0;l<2;l++)if(a.isAnyNull(l)){var u=W.NONE;if(e[l])u=W.EXTERIOR;else{var h=o.getCoordinate();u=this.getLocation(l,h,t)}a.setAllLocationsIfNull(l,u)}}},{key:"getDegree",value:function(){return this._edgeMap.size()}},{key:"insertEdgeEnd",value:function(t,e){this._edgeMap.put(t,e),this._edgeList=null}}],[{key:"constructor_",value:function(){this._edgeMap=new Ve,this._edgeList=null,this._ptInAreaLocation=[W.NONE,W.NONE]}}]),e}(),Wn=function(e){i(o,e);var s=c(o);function o(){var e;return t(this,o),e=s.call(this),o.constructor_.apply(u(e),arguments),e}return n(o,[{key:"linkResultDirectedEdges",value:function(){this.getResultAreaEdges();for(var t=null,e=null,n=this._SCANNING_FOR_INCOMING,i=0;i<this._resultAreaEdgeList.size();i++){var r=this._resultAreaEdgeList.get(i),s=r.getSym();if(r.getLabel().isArea())switch(null===t&&r.isInResult()&&(t=r),n){case this._SCANNING_FOR_INCOMING:if(!s.isInResult())continue;e=s,n=this._LINKING_TO_OUTGOING;break;case this._LINKING_TO_OUTGOING:if(!r.isInResult())continue;e.setNext(r),n=this._SCANNING_FOR_INCOMING}}if(n===this._LINKING_TO_OUTGOING){if(null===t)throw new ft("no outgoing dirEdge found",this.getCoordinate());z.isTrue(t.isInResult(),"unable to link last incoming dirEdge"),e.setNext(t)}}},{key:"insert",value:function(t){var e=t;this.insertEdgeEnd(e,e)}},{key:"getRightmostEdge",value:function(){var t=this.getEdges(),e=t.size();if(e<1)return null;var n=t.get(0);if(1===e)return n;var i=t.get(e-1),r=n.getQuadrant(),s=i.getQuadrant();return Ke.isNorthern(r)&&Ke.isNorthern(s)?n:Ke.isNorthern(r)||Ke.isNorthern(s)?0!==n.getDy()?n:0!==i.getDy()?i:(z.shouldNeverReachHere("found two horizontal edges incident on node"),null):i}},{key:"print",value:function(t){vt.out.println("DirectedEdgeStar: "+this.getCoordinate());for(var e=this.iterator();e.hasNext();){var n=e.next();t.print("out "),n.print(t),t.println(),t.print("in "),n.getSym().print(t),t.println()}}},{key:"getResultAreaEdges",value:function(){if(null!==this._resultAreaEdgeList)return this._resultAreaEdgeList;this._resultAreaEdgeList=new pt;for(var t=this.iterator();t.hasNext();){var e=t.next();(e.isInResult()||e.getSym().isInResult())&&this._resultAreaEdgeList.add(e)}return this._resultAreaEdgeList}},{key:"updateLabelling",value:function(t){for(var e=this.iterator();e.hasNext();){var n=e.next().getLabel();n.setAllLocationsIfNull(0,t.getLocation(0)),n.setAllLocationsIfNull(1,t.getLocation(1))}}},{key:"linkAllDirectedEdges",value:function(){this.getEdges();for(var t=null,e=null,n=this._edgeList.size()-1;n>=0;n--){var i=this._edgeList.get(n),r=i.getSym();null===e&&(e=r),null!==t&&r.setNext(t),t=i}e.setNext(t)}},{key:"computeDepths",value:function(){if(1===arguments.length){var t=arguments[0],e=this.findIndex(t),n=t.getDepth(Q.LEFT),i=t.getDepth(Q.RIGHT),r=this.computeDepths(e+1,this._edgeList.size(),n);if(this.computeDepths(0,e,r)!==i)throw new ft("depth mismatch at "+t.getCoordinate())}else if(3===arguments.length){for(var s=arguments[1],o=arguments[2],a=arguments[0];a<s;a++){var l=this._edgeList.get(a);l.setEdgeDepths(Q.RIGHT,o),o=l.getDepth(Q.LEFT)}return o}}},{key:"mergeSymLabels",value:function(){for(var t=this.iterator();t.hasNext();){var e=t.next();e.getLabel().merge(e.getSym().getLabel())}}},{key:"linkMinimalDirectedEdges",value:function(t){for(var e=null,n=null,i=this._SCANNING_FOR_INCOMING,r=this._resultAreaEdgeList.size()-1;r>=0;r--){var s=this._resultAreaEdgeList.get(r),o=s.getSym();switch(null===e&&s.getEdgeRing()===t&&(e=s),i){case this._SCANNING_FOR_INCOMING:if(o.getEdgeRing()!==t)continue;n=o,i=this._LINKING_TO_OUTGOING;break;case this._LINKING_TO_OUTGOING:if(s.getEdgeRing()!==t)continue;n.setNextMin(s),i=this._SCANNING_FOR_INCOMING}}i===this._LINKING_TO_OUTGOING&&(z.isTrue(null!==e,"found null for first outgoing dirEdge"),z.isTrue(e.getEdgeRing()===t,"unable to link last incoming dirEdge"),n.setNextMin(e))}},{key:"getOutgoingDegree",value:function(){if(0===arguments.length){for(var t=0,e=this.iterator();e.hasNext();)e.next().isInResult()&&t++;return t}if(1===arguments.length){for(var n=arguments[0],i=0,r=this.iterator();r.hasNext();)r.next().getEdgeRing()===n&&i++;return i}}},{key:"getLabel",value:function(){return this._label}},{key:"findCoveredLineEdges",value:function(){for(var t=W.NONE,e=this.iterator();e.hasNext();){var n=e.next(),i=n.getSym();if(!n.isLineEdge()){if(n.isInResult()){t=W.INTERIOR;break}if(i.isInResult()){t=W.EXTERIOR;break}}}if(t===W.NONE)return null;for(var r=t,s=this.iterator();s.hasNext();){var o=s.next(),a=o.getSym();o.isLineEdge()?o.getEdge().setCovered(r===W.INTERIOR):(o.isInResult()&&(r=W.EXTERIOR),a.isInResult()&&(r=W.INTERIOR))}}},{key:"computeLabelling",value:function(t){d(r(o.prototype),"computeLabelling",this).call(this,t),this._label=new Ae(W.NONE);for(var e=this.iterator();e.hasNext();)for(var n=e.next().getEdge().getLabel(),i=0;i<2;i++){var s=n.getLocation(i);s!==W.INTERIOR&&s!==W.BOUNDARY||this._label.setLocation(i,W.INTERIOR)}}}],[{key:"constructor_",value:function(){this._resultAreaEdgeList=null,this._label=null,this._SCANNING_FOR_INCOMING=1,this._LINKING_TO_OUTGOING=2}}]),o}(qn),Vn=function(e){i(s,e);var r=c(s);function s(){return t(this,s),r.call(this)}return n(s,[{key:"createNode",value:function(t){return new je(t,new Wn)}}]),s}(Je),Hn=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:"compareTo",value:function(t){var n=t;return e.compareOriented(this._pts,this._orientation,n._pts,n._orientation)}},{key:"interfaces_",get:function(){return[w]}}],[{key:"constructor_",value:function(){this._pts=null,this._orientation=null;var t=arguments[0];this._pts=t,this._orientation=e.orientation(t)}},{key:"orientation",value:function(t){return 1===Ht.increasingDirection(t)}},{key:"compareOriented",value:function(t,e,n,i){for(var r=e?1:-1,s=i?1:-1,o=e?t.length:-1,a=i?n.length:-1,l=e?0:t.length-1,u=i?0:n.length-1;;){var h=t[l].compareTo(n[u]);if(0!==h)return h;var c=(l+=r)===o,d=(u+=s)===a;if(c&&!d)return-1;if(!c&&d)return 1;if(c&&d)return 0}}}]),e}(),Kn=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:"print",value:function(t){t.print("MULTILINESTRING ( ");for(var e=0;e<this._edges.size();e++){var n=this._edges.get(e);e>0&&t.print(","),t.print("(");for(var i=n.getCoordinates(),r=0;r<i.length;r++)r>0&&t.print(","),t.print(i[r].x+" "+i[r].y);t.println(")")}t.print(")  ")}},{key:"addAll",value:function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next())}},{key:"findEdgeIndex",value:function(t){for(var e=0;e<this._edges.size();e++)if(this._edges.get(e).equals(t))return e;return-1}},{key:"iterator",value:function(){return this._edges.iterator()}},{key:"getEdges",value:function(){return this._edges}},{key:"get",value:function(t){return this._edges.get(t)}},{key:"findEqualEdge",value:function(t){var e=new Hn(t.getCoordinates());return this._ocaMap.get(e)}},{key:"add",value:function(t){this._edges.add(t);var e=new Hn(t.getCoordinates());this._ocaMap.put(e,t)}}],[{key:"constructor_",value:function(){this._edges=new pt,this._ocaMap=new Ve}}]),e}(),Zn=function(){function e(){t(this,e)}return n(e,[{key:"processIntersections",value:function(t,e,n,i){}},{key:"isDone",value:function(){}}]),e}(),$n=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:"isTrivialIntersection",value:function(t,n,i,r){if(t===i&&1===this._li.getIntersectionNum()){if(e.isAdjacentSegments(n,r))return!0;if(t.isClosed()){var s=t.size()-1;if(0===n&&r===s||0===r&&n===s)return!0}}return!1}},{key:"getProperIntersectionPoint",value:function(){return this._properIntersectionPoint}},{key:"hasProperInteriorIntersection",value:function(){return this._hasProperInterior}},{key:"getLineIntersector",value:function(){return this._li}},{key:"hasProperIntersection",value:function(){return this._hasProper}},{key:"processIntersections",value:function(t,e,n,i){if(t===n&&e===i)return null;this.numTests++;var r=t.getCoordinates()[e],s=t.getCoordinates()[e+1],o=n.getCoordinates()[i],a=n.getCoordinates()[i+1];this._li.computeIntersection(r,s,o,a),this._li.hasIntersection()&&(this.numIntersections++,this._li.isInteriorIntersection()&&(this.numInteriorIntersections++,this._hasInterior=!0),this.isTrivialIntersection(t,e,n,i)||(this._hasIntersection=!0,t.addIntersections(this._li,e,0),n.addIntersections(this._li,i,1),this._li.isProper()&&(this.numProperIntersections++,this._hasProper=!0,this._hasProperInterior=!0)))}},{key:"hasIntersection",value:function(){return this._hasIntersection}},{key:"isDone",value:function(){return!1}},{key:"hasInteriorIntersection",value:function(){return this._hasInterior}},{key:"interfaces_",get:function(){return[Zn]}}],[{key:"constructor_",value:function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._hasInterior=!1,this._properIntersectionPoint=null,this._li=null,this._isSelfIntersection=null,this.numIntersections=0,this.numInteriorIntersections=0,this.numProperIntersections=0,this.numTests=0;var t=arguments[0];this._li=t}},{key:"isAdjacentSegments",value:function(t,e){return 1===Math.abs(t-e)}}]),e}(),Jn=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:"getSegmentIndex",value:function(){return this.segmentIndex}},{key:"getCoordinate",value:function(){return this.coord}},{key:"print",value:function(t){t.print(this.coord),t.print(" seg # = "+this.segmentIndex),t.println(" dist = "+this.dist)}},{key:"compareTo",value:function(t){var e=t;return this.compare(e.segmentIndex,e.dist)}},{key:"isEndPoint",value:function(t){return 0===this.segmentIndex&&0===this.dist||this.segmentIndex===t}},{key:"toString",value:function(){return this.coord+" seg # = "+this.segmentIndex+" dist = "+this.dist}},{key:"getDistance",value:function(){return this.dist}},{key:"compare",value:function(t,e){return this.segmentIndex<t?-1:this.segmentIndex>t?1:this.dist<e?-1:this.dist>e?1:0}},{key:"interfaces_",get:function(){return[w]}}],[{key:"constructor_",value:function(){this.coord=null,this.segmentIndex=null,this.dist=null;var t=arguments[0],e=arguments[1],n=arguments[2];this.coord=new B(t),this.segmentIndex=e,this.dist=n}}]),e}(),Qn=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:"print",value:function(t){t.println("Intersections:");for(var e=this.iterator();e.hasNext();)e.next().print(t)}},{key:"iterator",value:function(){return this._nodeMap.values().iterator()}},{key:"addSplitEdges",value:function(t){this.addEndpoints();for(var e=this.iterator(),n=e.next();e.hasNext();){var i=e.next(),r=this.createSplitEdge(n,i);t.add(r),n=i}}},{key:"addEndpoints",value:function(){var t=this.edge.pts.length-1;this.add(this.edge.pts[0],0,0),this.add(this.edge.pts[t],t,0)}},{key:"createSplitEdge",value:function(t,e){var n=e.segmentIndex-t.segmentIndex+2,i=this.edge.pts[e.segmentIndex],r=e.dist>0||!e.coord.equals2D(i);r||n--;var s=new Array(n).fill(null),o=0;s[o++]=new B(t.coord);for(var a=t.segmentIndex+1;a<=e.segmentIndex;a++)s[o++]=this.edge.pts[a];return r&&(s[o]=e.coord),new si(s,new Ae(this.edge._label))}},{key:"add",value:function(t,e,n){var i=new Jn(t,e,n),r=this._nodeMap.get(i);return null!==r?r:(this._nodeMap.put(i,i),i)}},{key:"isIntersection",value:function(t){for(var e=this.iterator();e.hasNext();)if(e.next().coord.equals(t))return!0;return!1}}],[{key:"constructor_",value:function(){this._nodeMap=new Ve,this.edge=null;var t=arguments[0];this.edge=t}}]),e}(),ti=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:"isIntersects",value:function(){return!this.isDisjoint()}},{key:"isCovers",value:function(){return(e.isTrue(this._matrix[W.INTERIOR][W.INTERIOR])||e.isTrue(this._matrix[W.INTERIOR][W.BOUNDARY])||e.isTrue(this._matrix[W.BOUNDARY][W.INTERIOR])||e.isTrue(this._matrix[W.BOUNDARY][W.BOUNDARY]))&&this._matrix[W.EXTERIOR][W.INTERIOR]===It.FALSE&&this._matrix[W.EXTERIOR][W.BOUNDARY]===It.FALSE}},{key:"isCoveredBy",value:function(){return(e.isTrue(this._matrix[W.INTERIOR][W.INTERIOR])||e.isTrue(this._matrix[W.INTERIOR][W.BOUNDARY])||e.isTrue(this._matrix[W.BOUNDARY][W.INTERIOR])||e.isTrue(this._matrix[W.BOUNDARY][W.BOUNDARY]))&&this._matrix[W.INTERIOR][W.EXTERIOR]===It.FALSE&&this._matrix[W.BOUNDARY][W.EXTERIOR]===It.FALSE}},{key:"set",value:function(){if(1===arguments.length)for(var t=arguments[0],e=0;e<t.length;e++){var n=Math.trunc(e/3),i=e%3;this._matrix[n][i]=It.toDimensionValue(t.charAt(e))}else if(3===arguments.length){var r=arguments[0],s=arguments[1],o=arguments[2];this._matrix[r][s]=o}}},{key:"isContains",value:function(){return e.isTrue(this._matrix[W.INTERIOR][W.INTERIOR])&&this._matrix[W.EXTERIOR][W.INTERIOR]===It.FALSE&&this._matrix[W.EXTERIOR][W.BOUNDARY]===It.FALSE}},{key:"setAtLeast",value:function(){if(1===arguments.length)for(var t=arguments[0],e=0;e<t.length;e++){var n=Math.trunc(e/3),i=e%3;this.setAtLeast(n,i,It.toDimensionValue(t.charAt(e)))}else if(3===arguments.length){var r=arguments[0],s=arguments[1],o=arguments[2];this._matrix[r][s]<o&&(this._matrix[r][s]=o)}}},{key:"setAtLeastIfValid",value:function(t,e,n){t>=0&&e>=0&&this.setAtLeast(t,e,n)}},{key:"isWithin",value:function(){return e.isTrue(this._matrix[W.INTERIOR][W.INTERIOR])&&this._matrix[W.INTERIOR][W.EXTERIOR]===It.FALSE&&this._matrix[W.BOUNDARY][W.EXTERIOR]===It.FALSE}},{key:"isTouches",value:function(t,n){return t>n?this.isTouches(n,t):(t===It.A&&n===It.A||t===It.L&&n===It.L||t===It.L&&n===It.A||t===It.P&&n===It.A||t===It.P&&n===It.L)&&this._matrix[W.INTERIOR][W.INTERIOR]===It.FALSE&&(e.isTrue(this._matrix[W.INTERIOR][W.BOUNDARY])||e.isTrue(this._matrix[W.BOUNDARY][W.INTERIOR])||e.isTrue(this._matrix[W.BOUNDARY][W.BOUNDARY]))}},{key:"isOverlaps",value:function(t,n){return t===It.P&&n===It.P||t===It.A&&n===It.A?e.isTrue(this._matrix[W.INTERIOR][W.INTERIOR])&&e.isTrue(this._matrix[W.INTERIOR][W.EXTERIOR])&&e.isTrue(this._matrix[W.EXTERIOR][W.INTERIOR]):t===It.L&&n===It.L&&1===this._matrix[W.INTERIOR][W.INTERIOR]&&e.isTrue(this._matrix[W.INTERIOR][W.EXTERIOR])&&e.isTrue(this._matrix[W.EXTERIOR][W.INTERIOR])}},{key:"isEquals",value:function(t,n){return t===n&&e.isTrue(this._matrix[W.INTERIOR][W.INTERIOR])&&this._matrix[W.INTERIOR][W.EXTERIOR]===It.FALSE&&this._matrix[W.BOUNDARY][W.EXTERIOR]===It.FALSE&&this._matrix[W.EXTERIOR][W.INTERIOR]===It.FALSE&&this._matrix[W.EXTERIOR][W.BOUNDARY]===It.FALSE}},{key:"toString",value:function(){for(var t=new $t("123456789"),e=0;e<3;e++)for(var n=0;n<3;n++)t.setCharAt(3*e+n,It.toDimensionSymbol(this._matrix[e][n]));return t.toString()}},{key:"setAll",value:function(t){for(var e=0;e<3;e++)for(var n=0;n<3;n++)this._matrix[e][n]=t}},{key:"get",value:function(t,e){return this._matrix[t][e]}},{key:"transpose",value:function(){var t=this._matrix[1][0];return this._matrix[1][0]=this._matrix[0][1],this._matrix[0][1]=t,t=this._matrix[2][0],this._matrix[2][0]=this._matrix[0][2],this._matrix[0][2]=t,t=this._matrix[2][1],this._matrix[2][1]=this._matrix[1][2],this._matrix[1][2]=t,this}},{key:"matches",value:function(t){if(9!==t.length)throw new v("Should be length 9: "+t);for(var n=0;n<3;n++)for(var i=0;i<3;i++)if(!e.matches(this._matrix[n][i],t.charAt(3*n+i)))return!1;return!0}},{key:"add",value:function(t){for(var e=0;e<3;e++)for(var n=0;n<3;n++)this.setAtLeast(e,n,t.get(e,n))}},{key:"isDisjoint",value:function(){return this._matrix[W.INTERIOR][W.INTERIOR]===It.FALSE&&this._matrix[W.INTERIOR][W.BOUNDARY]===It.FALSE&&this._matrix[W.BOUNDARY][W.INTERIOR]===It.FALSE&&this._matrix[W.BOUNDARY][W.BOUNDARY]===It.FALSE}},{key:"isCrosses",value:function(t,n){return t===It.P&&n===It.L||t===It.P&&n===It.A||t===It.L&&n===It.A?e.isTrue(this._matrix[W.INTERIOR][W.INTERIOR])&&e.isTrue(this._matrix[W.INTERIOR][W.EXTERIOR]):t===It.L&&n===It.P||t===It.A&&n===It.P||t===It.A&&n===It.L?e.isTrue(this._matrix[W.INTERIOR][W.INTERIOR])&&e.isTrue(this._matrix[W.EXTERIOR][W.INTERIOR]):t===It.L&&n===It.L&&0===this._matrix[W.INTERIOR][W.INTERIOR]}},{key:"interfaces_",get:function(){return[k]}}],[{key:"constructor_",value:function(){if(this._matrix=null,0===arguments.length)this._matrix=Array(3).fill().map((function(){return Array(3)})),this.setAll(It.FALSE);else if(1===arguments.length)if("string"==typeof arguments[0]){var t=arguments[0];e.constructor_.call(this),this.set(t)}else if(arguments[0]instanceof e){var n=arguments[0];e.constructor_.call(this),this._matrix[W.INTERIOR][W.INTERIOR]=n._matrix[W.INTERIOR][W.INTERIOR],this._matrix[W.INTERIOR][W.BOUNDARY]=n._matrix[W.INTERIOR][W.BOUNDARY],this._matrix[W.INTERIOR][W.EXTERIOR]=n._matrix[W.INTERIOR][W.EXTERIOR],this._matrix[W.BOUNDARY][W.INTERIOR]=n._matrix[W.BOUNDARY][W.INTERIOR],this._matrix[W.BOUNDARY][W.BOUNDARY]=n._matrix[W.BOUNDARY][W.BOUNDARY],this._matrix[W.BOUNDARY][W.EXTERIOR]=n._matrix[W.BOUNDARY][W.EXTERIOR],this._matrix[W.EXTERIOR][W.INTERIOR]=n._matrix[W.EXTERIOR][W.INTERIOR],this._matrix[W.EXTERIOR][W.BOUNDARY]=n._matrix[W.EXTERIOR][W.BOUNDARY],this._matrix[W.EXTERIOR][W.EXTERIOR]=n._matrix[W.EXTERIOR][W.EXTERIOR]}}},{key:"matches",value:function(){if(Number.isInteger(arguments[0])&&"string"==typeof arguments[1]){var t=arguments[0],n=arguments[1];return n===It.SYM_DONTCARE||n===It.SYM_TRUE&&(t>=0||t===It.TRUE)||n===It.SYM_FALSE&&t===It.FALSE||n===It.SYM_P&&t===It.P||n===It.SYM_L&&t===It.L||n===It.SYM_A&&t===It.A}if("string"==typeof arguments[0]&&"string"==typeof arguments[1]){var i=arguments[1];return new e(arguments[0]).matches(i)}}},{key:"isTrue",value:function(t){return t>=0||t===It.TRUE}}]),e}(),ei=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:"size",value:function(){return this._size}},{key:"addAll",value:function(t){return null===t||0===t.length?null:(this.ensureCapacity(this._size+t.length),vt.arraycopy(t,0,this._data,this._size,t.length),void(this._size+=t.length))}},{key:"ensureCapacity",value:function(t){if(t<=this._data.length)return null;var e=Math.max(t,2*this._data.length);this._data=Ot.copyOf(this._data,e)}},{key:"toArray",value:function(){var t=new Array(this._size).fill(null);return vt.arraycopy(this._data,0,t,0,this._size),t}},{key:"add",value:function(t){this.ensureCapacity(this._size+1),this._data[this._size]=t,++this._size}}],[{key:"constructor_",value:function(){if(this._data=null,this._size=0,0===arguments.length)e.constructor_.call(this,10);else if(1===arguments.length){var t=arguments[0];this._data=new Array(t).fill(null)}}}]),e}(),ni=function(){function e(){t(this,e)}return n(e,[{key:"getChainStartIndices",value:function(t){var e=0,n=new ei(Math.trunc(t.length/2));n.add(e);do{var i=this.findChainEnd(t,e);n.add(i),e=i}while(e<t.length-1);return n.toArray()}},{key:"findChainEnd",value:function(t,e){for(var n=Ke.quadrant(t[e],t[e+1]),i=e+1;i<t.length&&Ke.quadrant(t[i-1],t[i])===n;)i++;return i-1}},{key:"OLDgetChainStartIndices",value:function(t){var n=0,i=new pt;i.add(n);do{var r=this.findChainEnd(t,n);i.add(r),n=r}while(n<t.length-1);return e.toIntArray(i)}}],[{key:"toIntArray",value:function(t){for(var e=new Array(t.size()).fill(null),n=0;n<e.length;n++)e[n]=t.get(n).intValue();return e}}]),e}(),ii=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:"getCoordinates",value:function(){return this.pts}},{key:"getMaxX",value:function(t){var e=this.pts[this.startIndex[t]].x,n=this.pts[this.startIndex[t+1]].x;return e>n?e:n}},{key:"getMinX",value:function(t){var e=this.pts[this.startIndex[t]].x,n=this.pts[this.startIndex[t+1]].x;return e<n?e:n}},{key:"computeIntersectsForChain",value:function(){if(4===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2],i=arguments[3];this.computeIntersectsForChain(this.startIndex[t],this.startIndex[t+1],e,e.startIndex[n],e.startIndex[n+1],i)}else if(6===arguments.length){var r=arguments[0],s=arguments[1],o=arguments[2],a=arguments[3],l=arguments[4],u=arguments[5];if(s-r==1&&l-a==1)return u.addIntersections(this.e,r,o.e,a),null;if(!this.overlaps(r,s,o,a,l))return null;var h=Math.trunc((r+s)/2),c=Math.trunc((a+l)/2);r<h&&(a<c&&this.computeIntersectsForChain(r,h,o,a,c,u),c<l&&this.computeIntersectsForChain(r,h,o,c,l,u)),h<s&&(a<c&&this.computeIntersectsForChain(h,s,o,a,c,u),c<l&&this.computeIntersectsForChain(h,s,o,c,l,u))}}},{key:"overlaps",value:function(t,e,n,i,r){return X.intersects(this.pts[t],this.pts[e],n.pts[i],n.pts[r])}},{key:"getStartIndexes",value:function(){return this.startIndex}},{key:"computeIntersects",value:function(t,e){for(var n=0;n<this.startIndex.length-1;n++)for(var i=0;i<t.startIndex.length-1;i++)this.computeIntersectsForChain(n,t,i,e)}}],[{key:"constructor_",value:function(){this.e=null,this.pts=null,this.startIndex=null;var t=arguments[0];this.e=t,this.pts=t.getCoordinates();var e=new ni;this.startIndex=e.getChainStartIndices(this.pts)}}]),e}(),ri=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:"getDepth",value:function(t,e){return this._depth[t][e]}},{key:"setDepth",value:function(t,e,n){this._depth[t][e]=n}},{key:"isNull",value:function(){if(0===arguments.length){for(var t=0;t<2;t++)for(var n=0;n<3;n++)if(this._depth[t][n]!==e.NULL_VALUE)return!1;return!0}if(1===arguments.length){var i=arguments[0];return this._depth[i][1]===e.NULL_VALUE}if(2===arguments.length){var r=arguments[0],s=arguments[1];return this._depth[r][s]===e.NULL_VALUE}}},{key:"normalize",value:function(){for(var t=0;t<2;t++)if(!this.isNull(t)){var e=this._depth[t][1];this._depth[t][2]<e&&(e=this._depth[t][2]),e<0&&(e=0);for(var n=1;n<3;n++){var i=0;this._depth[t][n]>e&&(i=1),this._depth[t][n]=i}}}},{key:"getDelta",value:function(t){return this._depth[t][Q.RIGHT]-this._depth[t][Q.LEFT]}},{key:"getLocation",value:function(t,e){return this._depth[t][e]<=0?W.EXTERIOR:W.INTERIOR}},{key:"toString",value:function(){return"A: "+this._depth[0][1]+","+this._depth[0][2]+" B: "+this._depth[1][1]+","+this._depth[1][2]}},{key:"add",value:function(){if(1===arguments.length)for(var t=arguments[0],n=0;n<2;n++)for(var i=1;i<3;i++){var r=t.getLocation(n,i);r!==W.EXTERIOR&&r!==W.INTERIOR||(this.isNull(n,i)?this._depth[n][i]=e.depthAtLocation(r):this._depth[n][i]+=e.depthAtLocation(r))}else if(3===arguments.length){var s=arguments[0],o=arguments[1];arguments[2]===W.INTERIOR&&this._depth[s][o]++}}}],[{key:"constructor_",value:function(){this._depth=Array(2).fill().map((function(){return Array(3)}));for(var t=0;t<2;t++)for(var n=0;n<3;n++)this._depth[t][n]=e.NULL_VALUE}},{key:"depthAtLocation",value:function(t){return t===W.EXTERIOR?0:t===W.INTERIOR?1:e.NULL_VALUE}}]),e}();ri.NULL_VALUE=-1;var si=function(e){i(o,e);var s=c(o);function o(){var e;return t(this,o),e=s.call(this),o.constructor_.apply(u(e),arguments),e}return n(o,[{key:"getDepth",value:function(){return this._depth}},{key:"getCollapsedEdge",value:function(){var t=new Array(2).fill(null);return t[0]=this.pts[0],t[1]=this.pts[1],new o(t,Ae.toLineLabel(this._label))}},{key:"isIsolated",value:function(){return this._isIsolated}},{key:"getCoordinates",value:function(){return this.pts}},{key:"setIsolated",value:function(t){this._isIsolated=t}},{key:"setName",value:function(t){this._name=t}},{key:"equals",value:function(t){if(!(t instanceof o))return!1;var e=t;if(this.pts.length!==e.pts.length)return!1;for(var n=!0,i=!0,r=this.pts.length,s=0;s<this.pts.length;s++)if(this.pts[s].equals2D(e.pts[s])||(n=!1),this.pts[s].equals2D(e.pts[--r])||(i=!1),!n&&!i)return!1;return!0}},{key:"getCoordinate",value:function(){if(0===arguments.length)return this.pts.length>0?this.pts[0]:null;if(1===arguments.length){var t=arguments[0];return this.pts[t]}}},{key:"print",value:function(t){t.print("edge "+this._name+": "),t.print("LINESTRING (");for(var e=0;e<this.pts.length;e++)e>0&&t.print(","),t.print(this.pts[e].x+" "+this.pts[e].y);t.print(")  "+this._label+" "+this._depthDelta)}},{key:"computeIM",value:function(t){o.updateIM(this._label,t)}},{key:"isCollapsed",value:function(){return!!this._label.isArea()&&3===this.pts.length&&!!this.pts[0].equals(this.pts[2])}},{key:"isClosed",value:function(){return this.pts[0].equals(this.pts[this.pts.length-1])}},{key:"getMaximumSegmentIndex",value:function(){return this.pts.length-1}},{key:"getDepthDelta",value:function(){return this._depthDelta}},{key:"getNumPoints",value:function(){return this.pts.length}},{key:"printReverse",value:function(t){t.print("edge "+this._name+": ");for(var e=this.pts.length-1;e>=0;e--)t.print(this.pts[e]+" ");t.println("")}},{key:"getMonotoneChainEdge",value:function(){return null===this._mce&&(this._mce=new ii(this)),this._mce}},{key:"getEnvelope",value:function(){if(null===this._env){this._env=new X;for(var t=0;t<this.pts.length;t++)this._env.expandToInclude(this.pts[t])}return this._env}},{key:"addIntersection",value:function(t,e,n,i){var r=new B(t.getIntersection(i)),s=e,o=t.getEdgeDistance(n,i),a=s+1;if(a<this.pts.length){var l=this.pts[a];r.equals2D(l)&&(s=a,o=0)}this.eiList.add(r,s,o)}},{key:"toString",value:function(){var t=new $t;t.append("edge "+this._name+": "),t.append("LINESTRING (");for(var e=0;e<this.pts.length;e++)e>0&&t.append(","),t.append(this.pts[e].x+" "+this.pts[e].y);return t.append(")  "+this._label+" "+this._depthDelta),t.toString()}},{key:"isPointwiseEqual",value:function(t){if(this.pts.length!==t.pts.length)return!1;for(var e=0;e<this.pts.length;e++)if(!this.pts[e].equals2D(t.pts[e]))return!1;return!0}},{key:"setDepthDelta",value:function(t){this._depthDelta=t}},{key:"getEdgeIntersectionList",value:function(){return this.eiList}},{key:"addIntersections",value:function(t,e,n){for(var i=0;i<t.getIntersectionNum();i++)this.addIntersection(t,e,n,i)}}],[{key:"constructor_",value:function(){if(this.pts=null,this._env=null,this.eiList=new Qn(this),this._name=null,this._mce=null,this._isIsolated=!0,this._depth=new ri,this._depthDelta=0,1===arguments.length){var t=arguments[0];o.constructor_.call(this,t,null)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.pts=e,this._label=n}}},{key:"updateIM",value:function(){if(!(2===arguments.length&&arguments[1]instanceof ti&&arguments[0]instanceof Ae))return d(r(o),"updateIM",this).apply(this,arguments);var t=arguments[0],e=arguments[1];e.setAtLeastIfValid(t.getLocation(0,Q.ON),t.getLocation(1,Q.ON),1),t.isArea()&&(e.setAtLeastIfValid(t.getLocation(0,Q.LEFT),t.getLocation(1,Q.LEFT),2),e.setAtLeastIfValid(t.getLocation(0,Q.RIGHT),t.getLocation(1,Q.RIGHT),2))}}]),o}(Ge),oi=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:"setWorkingPrecisionModel",value:function(t){this._workingPrecisionModel=t}},{key:"insertUniqueEdge",value:function(t){var n=this._edgeList.findEqualEdge(t);if(null!==n){var i=n.getLabel(),r=t.getLabel();n.isPointwiseEqual(t)||(r=new Ae(t.getLabel())).flip(),i.merge(r);var s=e.depthDelta(r),o=n.getDepthDelta()+s;n.setDepthDelta(o)}else this._edgeList.add(t),t.setDepthDelta(e.depthDelta(t.getLabel()))}},{key:"buildSubgraphs",value:function(t,e){for(var n=new pt,i=t.iterator();i.hasNext();){var r=i.next(),s=r.getRightmostCoordinate(),o=new Fn(n).getDepth(s);r.computeDepth(o),r.findResultEdges(),n.add(r),e.add(r.getDirectedEdges(),r.getNodes())}}},{key:"createSubgraphs",value:function(t){for(var e=new pt,n=t.getNodes().iterator();n.hasNext();){var i=n.next();if(!i.isVisited()){var r=new yt;r.create(i),e.add(r)}}return an.sort(e,an.reverseOrder()),e}},{key:"createEmptyResultGeometry",value:function(){return this._geomFact.createPolygon()}},{key:"getNoder",value:function(t){if(null!==this._workingNoder)return this._workingNoder;var e=new Rn,n=new Le;return n.setPrecisionModel(t),e.setSegmentIntersector(new $n(n)),e}},{key:"buffer",value:function(t,e){var n=this._workingPrecisionModel;null===n&&(n=t.getPrecisionModel()),this._geomFact=t.getFactory();var i=new An(n,this._bufParams),r=new Yn(t,e,i).getCurves();if(r.size()<=0)return this.createEmptyResultGeometry();this.computeNodedEdges(r,n),this._graph=new Qe(new Vn),this._graph.addEdges(this._edgeList.getEdges());var s=this.createSubgraphs(this._graph),o=new tn(this._geomFact);this.buildSubgraphs(s,o);var a=o.getPolygons();return a.size()<=0?this.createEmptyResultGeometry():this._geomFact.buildGeometry(a)}},{key:"computeNodedEdges",value:function(t,e){var n=this.getNoder(e);n.computeNodes(t);for(var i=n.getNodedSubstrings().iterator();i.hasNext();){var r=i.next(),s=r.getCoordinates();if(2!==s.length||!s[0].equals2D(s[1])){var o=r.getData(),a=new si(r.getCoordinates(),new Ae(o));this.insertUniqueEdge(a)}}}},{key:"setNoder",value:function(t){this._workingNoder=t}}],[{key:"constructor_",value:function(){this._bufParams=null,this._workingPrecisionModel=null,this._workingNoder=null,this._geomFact=null,this._graph=null,this._edgeList=new Kn;var t=arguments[0];this._bufParams=t}},{key:"depthDelta",value:function(t){var e=t.getLocation(0,Q.LEFT),n=t.getLocation(0,Q.RIGHT);return e===W.INTERIOR&&n===W.EXTERIOR?1:e===W.EXTERIOR&&n===W.INTERIOR?-1:0}},{key:"convertSegStrings",value:function(t){for(var e=new oe,n=new pt;t.hasNext();){var i=t.next(),r=e.createLineString(i.getCoordinates());n.add(r)}return e.buildGeometry(n)}}]),e}(),ai=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:"rescale",value:function(){if(rt(arguments[0],V))for(var t=arguments[0].iterator();t.hasNext();){var e=t.next();this.rescale(e.getCoordinates())}else if(arguments[0]instanceof Array){for(var n=arguments[0],i=0;i<n.length;i++)n[i].x=n[i].x/this._scaleFactor+this._offsetX,n[i].y=n[i].y/this._scaleFactor+this._offsetY;2===n.length&&n[0].equals2D(n[1])&&vt.out.println(n)}}},{key:"scale",value:function(){if(rt(arguments[0],V)){for(var t=arguments[0],e=new pt(t.size()),n=t.iterator();n.hasNext();){var i=n.next();e.add(new kn(this.scale(i.getCoordinates()),i.getData()))}return e}if(arguments[0]instanceof Array){for(var r=arguments[0],s=new Array(r.length).fill(null),o=0;o<r.length;o++)s[o]=new B(Math.round((r[o].x-this._offsetX)*this._scaleFactor),Math.round((r[o].y-this._offsetY)*this._scaleFactor),r[o].getZ());return Ht.removeRepeatedPoints(s)}}},{key:"isIntegerPrecision",value:function(){return 1===this._scaleFactor}},{key:"getNodedSubstrings",value:function(){var t=this._noder.getNodedSubstrings();return this._isScaled&&this.rescale(t),t}},{key:"computeNodes",value:function(t){var e=t;this._isScaled&&(e=this.scale(t)),this._noder.computeNodes(e)}},{key:"interfaces_",get:function(){return[In]}}],[{key:"constructor_",value:function(){if(this._noder=null,this._scaleFactor=null,this._offsetX=null,this._offsetY=null,this._isScaled=!1,2===arguments.length){var t=arguments[0],n=arguments[1];e.constructor_.call(this,t,n,0,0)}else if(4===arguments.length){var i=arguments[0],r=arguments[1];this._noder=i,this._scaleFactor=r,this._isScaled=!this.isIntegerPrecision()}}}]),e}(),li=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:"checkEndPtVertexIntersections",value:function(){if(0===arguments.length)for(var t=this._segStrings.iterator();t.hasNext();){var e=t.next().getCoordinates();this.checkEndPtVertexIntersections(e[0],this._segStrings),this.checkEndPtVertexIntersections(e[e.length-1],this._segStrings)}else if(2===arguments.length)for(var n=arguments[0],i=arguments[1].iterator();i.hasNext();)for(var r=i.next().getCoordinates(),s=1;s<r.length-1;s++)if(r[s].equals(n))throw new F("found endpt/interior pt intersection at index "+s+" :pt "+n)}},{key:"checkInteriorIntersections",value:function(){if(0===arguments.length)for(var t=this._segStrings.iterator();t.hasNext();)for(var e=t.next(),n=this._segStrings.iterator();n.hasNext();){var i=n.next();this.checkInteriorIntersections(e,i)}else if(2===arguments.length)for(var r=arguments[0],s=arguments[1],o=r.getCoordinates(),a=s.getCoordinates(),l=0;l<o.length-1;l++)for(var u=0;u<a.length-1;u++)this.checkInteriorIntersections(r,l,s,u);else if(4===arguments.length){var h=arguments[0],c=arguments[1],d=arguments[2],f=arguments[3];if(h===d&&c===f)return null;var g=h.getCoordinates()[c],p=h.getCoordinates()[c+1],m=d.getCoordinates()[f],y=d.getCoordinates()[f+1];if(this._li.computeIntersection(g,p,m,y),this._li.hasIntersection()&&(this._li.isProper()||this.hasInteriorIntersection(this._li,g,p)||this.hasInteriorIntersection(this._li,m,y)))throw new F("found non-noded intersection at "+g+"-"+p+" and "+m+"-"+y)}}},{key:"checkValid",value:function(){this.checkEndPtVertexIntersections(),this.checkInteriorIntersections(),this.checkCollapses()}},{key:"checkCollapses",value:function(){if(0===arguments.length)for(var t=this._segStrings.iterator();t.hasNext();){var e=t.next();this.checkCollapses(e)}else if(1===arguments.length)for(var n=arguments[0].getCoordinates(),i=0;i<n.length-2;i++)this.checkCollapse(n[i],n[i+1],n[i+2])}},{key:"hasInteriorIntersection",value:function(t,e,n){for(var i=0;i<t.getIntersectionNum();i++){var r=t.getIntersection(i);if(!r.equals(e)&&!r.equals(n))return!0}return!1}},{key:"checkCollapse",value:function(t,n,i){if(t.equals(i))throw new F("found non-noded collapse at "+e.fact.createLineString([t,n,i]))}}],[{key:"constructor_",value:function(){this._li=new Le,this._segStrings=null;var t=arguments[0];this._segStrings=t}}]),e}();li.fact=new oe;var ui=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:"intersectsScaled",value:function(t,e){var n=Math.min(t.x,e.x),i=Math.max(t.x,e.x),r=Math.min(t.y,e.y),s=Math.max(t.y,e.y),o=this._maxx<n||this._minx>i||this._maxy<r||this._miny>s;if(o)return!1;var a=this.intersectsToleranceSquare(t,e);return z.isTrue(!(o&&a),"Found bad envelope test"),a}},{key:"initCorners",value:function(t){var e=.5;this._minx=t.x-e,this._maxx=t.x+e,this._miny=t.y-e,this._maxy=t.y+e,this._corner[0]=new B(this._maxx,this._maxy),this._corner[1]=new B(this._minx,this._maxy),this._corner[2]=new B(this._minx,this._miny),this._corner[3]=new B(this._maxx,this._miny)}},{key:"intersects",value:function(t,e){return 1===this._scaleFactor?this.intersectsScaled(t,e):(this.copyScaled(t,this._p0Scaled),this.copyScaled(e,this._p1Scaled),this.intersectsScaled(this._p0Scaled,this._p1Scaled))}},{key:"scale",value:function(t){return Math.round(t*this._scaleFactor)}},{key:"getCoordinate",value:function(){return this._originalPt}},{key:"copyScaled",value:function(t,e){e.x=this.scale(t.x),e.y=this.scale(t.y)}},{key:"getSafeEnvelope",value:function(){if(null===this._safeEnv){var t=e.SAFE_ENV_EXPANSION_FACTOR/this._scaleFactor;this._safeEnv=new X(this._originalPt.x-t,this._originalPt.x+t,this._originalPt.y-t,this._originalPt.y+t)}return this._safeEnv}},{key:"intersectsPixelClosure",value:function(t,e){return this._li.computeIntersection(t,e,this._corner[0],this._corner[1]),!!this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[1],this._corner[2]),!!this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[2],this._corner[3]),!!this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[3],this._corner[0]),!!this._li.hasIntersection())))}},{key:"intersectsToleranceSquare",value:function(t,e){var n=!1,i=!1;return this._li.computeIntersection(t,e,this._corner[0],this._corner[1]),!!this._li.isProper()||(this._li.computeIntersection(t,e,this._corner[1],this._corner[2]),!!this._li.isProper()||(this._li.hasIntersection()&&(n=!0),this._li.computeIntersection(t,e,this._corner[2],this._corner[3]),!!this._li.isProper()||(this._li.hasIntersection()&&(i=!0),this._li.computeIntersection(t,e,this._corner[3],this._corner[0]),!!this._li.isProper()||!(!n||!i)||!!t.equals(this._pt)||!!e.equals(this._pt))))}},{key:"addSnappedNode",value:function(t,e){var n=t.getCoordinate(e),i=t.getCoordinate(e+1);return!!this.intersects(n,i)&&(t.addIntersection(this.getCoordinate(),e),!0)}}],[{key:"constructor_",value:function(){this._li=null,this._pt=null,this._originalPt=null,this._ptScaled=null,this._p0Scaled=null,this._p1Scaled=null,this._scaleFactor=null,this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,this._corner=new Array(4).fill(null),this._safeEnv=null;var t=arguments[0],e=arguments[1],n=arguments[2];if(this._originalPt=t,this._pt=t,this._scaleFactor=e,this._li=n,e<=0)throw new v("Scale factor must be non-zero");1!==e&&(this._pt=new B(this.scale(t.x),this.scale(t.y)),this._p0Scaled=new B,this._p1Scaled=new B),this.initCorners(this._pt)}}]),e}();ui.SAFE_ENV_EXPANSION_FACTOR=.75;var hi=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:"select",value:function(){if(1===arguments.length);else if(2===arguments.length){var t=arguments[1];arguments[0].getLineSegment(t,this.selectedSegment),this.select(this.selectedSegment)}}}],[{key:"constructor_",value:function(){this.selectedSegment=new En}}]),e}(),ci=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:"snap",value:function(){if(1===arguments.length){var e=arguments[0];return this.snap(e,null,-1)}if(3===arguments.length){var i=arguments[0],r=arguments[1],s=arguments[2],o=i.getSafeEnvelope(),a=new di(i,r,s);return this._index.query(o,new(function(){function e(){t(this,e)}return n(e,[{key:"interfaces_",get:function(){return[hn]}},{key:"visitItem",value:function(t){t.select(o,a)}}]),e}())),a.isNodeAdded()}}}],[{key:"constructor_",value:function(){this._index=null;var t=arguments[0];this._index=t}}]),e}(),di=function(e){i(o,e);var s=c(o);function o(){var e;return t(this,o),e=s.call(this),o.constructor_.apply(u(e),arguments),e}return n(o,[{key:"isNodeAdded",value:function(){return this._isNodeAdded}},{key:"select",value:function(){if(!(2===arguments.length&&Number.isInteger(arguments[1])&&arguments[0]instanceof bn))return d(r(o.prototype),"select",this).apply(this,arguments);var t=arguments[1],e=arguments[0].getContext();if(this._parentEdge===e&&(t===this._hotPixelVertexIndex||t+1===this._hotPixelVertexIndex))return null;this._isNodeAdded|=this._hotPixel.addSnappedNode(e,t)}}],[{key:"constructor_",value:function(){this._hotPixel=null,this._parentEdge=null,this._hotPixelVertexIndex=null,this._isNodeAdded=!1;var t=arguments[0],e=arguments[1],n=arguments[2];this._hotPixel=t,this._parentEdge=e,this._hotPixelVertexIndex=n}}]),o}(hi);ci.HotPixelSnapAction=di;var fi=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:"processIntersections",value:function(t,e,n,i){if(t===n&&e===i)return null;var r=t.getCoordinates()[e],s=t.getCoordinates()[e+1],o=n.getCoordinates()[i],a=n.getCoordinates()[i+1];if(this._li.computeIntersection(r,s,o,a),this._li.hasIntersection()&&this._li.isInteriorIntersection()){for(var l=0;l<this._li.getIntersectionNum();l++)this._interiorIntersections.add(this._li.getIntersection(l));t.addIntersections(this._li,e,0),n.addIntersections(this._li,i,1)}}},{key:"isDone",value:function(){return!1}},{key:"getInteriorIntersections",value:function(){return this._interiorIntersections}},{key:"interfaces_",get:function(){return[Zn]}}],[{key:"constructor_",value:function(){this._li=null,this._interiorIntersections=null;var t=arguments[0];this._li=t,this._interiorIntersections=new pt}}]),e}(),gi=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:"checkCorrectness",value:function(t){var e=kn.getNodedSubstrings(t),n=new li(e);try{n.checkValid()}catch(t){if(!(t instanceof _))throw t;t.printStackTrace()}}},{key:"getNodedSubstrings",value:function(){return kn.getNodedSubstrings(this._nodedSegStrings)}},{key:"snapRound",value:function(t,e){var n=this.findInteriorIntersections(t,e);this.computeIntersectionSnaps(n),this.computeVertexSnaps(t)}},{key:"findInteriorIntersections",value:function(t,e){var n=new fi(e);return this._noder.setSegmentIntersector(n),this._noder.computeNodes(t),n.getInteriorIntersections()}},{key:"computeVertexSnaps",value:function(){if(rt(arguments[0],V))for(var t=arguments[0].iterator();t.hasNext();){var e=t.next();this.computeVertexSnaps(e)}else if(arguments[0]instanceof kn)for(var n=arguments[0],i=n.getCoordinates(),r=0;r<i.length;r++){var s=new ui(i[r],this._scaleFactor,this._li);this._pointSnapper.snap(s,n,r)&&n.addIntersection(i[r],r)}}},{key:"computeNodes",value:function(t){this._nodedSegStrings=t,this._noder=new Rn,this._pointSnapper=new ci(this._noder.getIndex()),this.snapRound(t,this._li)}},{key:"computeIntersectionSnaps",value:function(t){for(var e=t.iterator();e.hasNext();){var n=e.next(),i=new ui(n,this._scaleFactor,this._li);this._pointSnapper.snap(i)}}},{key:"interfaces_",get:function(){return[In]}}],[{key:"constructor_",value:function(){this._pm=null,this._li=null,this._scaleFactor=null,this._noder=null,this._pointSnapper=null,this._nodedSegStrings=null;var t=arguments[0];this._pm=t,this._li=new Le,this._li.setPrecisionModel(t),this._scaleFactor=t.getScale()}}]),e}(),pi=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:"bufferFixedPrecision",value:function(t){var e=new ai(new gi(new ie(1)),t.getScale()),n=new oi(this._bufParams);n.setWorkingPrecisionModel(t),n.setNoder(e),this._resultGeometry=n.buffer(this._argGeom,this._distance)}},{key:"bufferReducedPrecision",value:function(){if(0===arguments.length){for(var t=e.MAX_PRECISION_DIGITS;t>=0;t--){try{this.bufferReducedPrecision(t)}catch(t){if(!(t instanceof ft))throw t;this._saveException=t}if(null!==this._resultGeometry)return null}throw this._saveException}if(1===arguments.length){var n=arguments[0],i=e.precisionScaleFactor(this._argGeom,this._distance,n),r=new ie(i);this.bufferFixedPrecision(r)}}},{key:"computeGeometry",value:function(){if(this.bufferOriginalPrecision(),null!==this._resultGeometry)return null;var t=this._argGeom.getFactory().getPrecisionModel();t.getType()===ie.FIXED?this.bufferFixedPrecision(t):this.bufferReducedPrecision()}},{key:"setQuadrantSegments",value:function(t){this._bufParams.setQuadrantSegments(t)}},{key:"bufferOriginalPrecision",value:function(){try{var t=new oi(this._bufParams);this._resultGeometry=t.buffer(this._argGeom,this._distance)}catch(t){if(!(t instanceof F))throw t;this._saveException=t}}},{key:"getResultGeometry",value:function(t){return this._distance=t,this.computeGeometry(),this._resultGeometry}},{key:"setEndCapStyle",value:function(t){this._bufParams.setEndCapStyle(t)}}],[{key:"constructor_",value:function(){if(this._argGeom=null,this._distance=null,this._bufParams=new y,this._resultGeometry=null,this._saveException=null,1===arguments.length){var t=arguments[0];this._argGeom=t}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this._argGeom=e,this._bufParams=n}}},{key:"bufferOp",value:function(){if(2===arguments.length){var t=arguments[1];return new e(arguments[0]).getResultGeometry(t)}if(3===arguments.length){if(Number.isInteger(arguments[2])&&arguments[0]instanceof q&&"number"==typeof arguments[1]){var n=arguments[1],i=arguments[2],r=new e(arguments[0]);return r.setQuadrantSegments(i),r.getResultGeometry(n)}if(arguments[2]instanceof y&&arguments[0]instanceof q&&"number"==typeof arguments[1]){var s=arguments[1];return new e(arguments[0],arguments[2]).getResultGeometry(s)}}else if(4===arguments.length){var o=arguments[1],a=arguments[2],l=arguments[3],u=new e(arguments[0]);return u.setQuadrantSegments(a),u.setEndCapStyle(l),u.getResultGeometry(o)}}},{key:"precisionScaleFactor",value:function(t,e,n){var i=t.getEnvelopeInternal(),r=xt.max(Math.abs(i.getMaxX()),Math.abs(i.getMaxY()),Math.abs(i.getMinX()),Math.abs(i.getMinY()))+2*(e>0?e:0),s=n-Math.trunc(Math.log(r)/Math.log(10)+1);return Math.pow(10,s)}}]),e}();pi.CAP_ROUND=y.CAP_ROUND,pi.CAP_BUTT=y.CAP_FLAT,pi.CAP_FLAT=y.CAP_FLAT,pi.CAP_SQUARE=y.CAP_SQUARE,pi.MAX_PRECISION_DIGITS=12;var mi=["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"],yi=function(){function e(n){t(this,e),this.geometryFactory=n||new oe}return n(e,[{key:"read",value:function(t){var e,n=(e="string"==typeof t?JSON.parse(t):t).type;if(!_i[n])throw new Error("Unknown GeoJSON type: "+e.type);return-1!==mi.indexOf(n)?_i[n].call(this,e.coordinates):"GeometryCollection"===n?_i[n].call(this,e.geometries):_i[n].call(this,e)}},{key:"write",value:function(t){var e=t.getGeometryType();if(!vi[e])throw new Error("Geometry is not supported");return vi[e].call(this,t)}}]),e}(),_i={Feature:function(t){var e={};for(var n in t)e[n]=t[n];if(t.geometry){var i=t.geometry.type;if(!_i[i])throw new Error("Unknown GeoJSON type: "+t.type);e.geometry=this.read(t.geometry)}return t.bbox&&(e.bbox=_i.bbox.call(this,t.bbox)),e},FeatureCollection:function(t){var e={};if(t.features){e.features=[];for(var n=0;n<t.features.length;++n)e.features.push(this.read(t.features[n]))}return t.bbox&&(e.bbox=this.parse.bbox.call(this,t.bbox)),e},coordinates:function(t){for(var e=[],n=0;n<t.length;++n){var i=t[n];e.push(a(B,f(i)))}return e},bbox:function(t){return this.geometryFactory.createLinearRing([new B(t[0],t[1]),new B(t[2],t[1]),new B(t[2],t[3]),new B(t[0],t[3]),new B(t[0],t[1])])},Point:function(t){var e=a(B,f(t));return this.geometryFactory.createPoint(e)},MultiPoint:function(t){for(var e=[],n=0;n<t.length;++n)e.push(_i.Point.call(this,t[n]));return this.geometryFactory.createMultiPoint(e)},LineString:function(t){var e=_i.coordinates.call(this,t);return this.geometryFactory.createLineString(e)},MultiLineString:function(t){for(var e=[],n=0;n<t.length;++n)e.push(_i.LineString.call(this,t[n]));return this.geometryFactory.createMultiLineString(e)},Polygon:function(t){for(var e=_i.coordinates.call(this,t[0]),n=this.geometryFactory.createLinearRing(e),i=[],r=1;r<t.length;++r){var s=t[r],o=_i.coordinates.call(this,s),a=this.geometryFactory.createLinearRing(o);i.push(a)}return this.geometryFactory.createPolygon(n,i)},MultiPolygon:function(t){for(var e=[],n=0;n<t.length;++n){var i=t[n];e.push(_i.Polygon.call(this,i))}return this.geometryFactory.createMultiPolygon(e)},GeometryCollection:function(t){for(var e=[],n=0;n<t.length;++n){var i=t[n];e.push(this.read(i))}return this.geometryFactory.createGeometryCollection(e)}},vi={coordinate:function(t){var e=[t.x,t.y];return t.z&&e.push(t.z),t.m&&e.push(t.m),e},Point:function(t){return{type:"Point",coordinates:vi.coordinate.call(this,t.getCoordinate())}},MultiPoint:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var i=t._geometries[n],r=vi.Point.call(this,i);e.push(r.coordinates)}return{type:"MultiPoint",coordinates:e}},LineString:function(t){for(var e=[],n=t.getCoordinates(),i=0;i<n.length;++i){var r=n[i];e.push(vi.coordinate.call(this,r))}return{type:"LineString",coordinates:e}},MultiLineString:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var i=t._geometries[n],r=vi.LineString.call(this,i);e.push(r.coordinates)}return{type:"MultiLineString",coordinates:e}},Polygon:function(t){var e=[],n=vi.LineString.call(this,t._shell);e.push(n.coordinates);for(var i=0;i<t._holes.length;++i){var r=t._holes[i],s=vi.LineString.call(this,r);e.push(s.coordinates)}return{type:"Polygon",coordinates:e}},MultiPolygon:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var i=t._geometries[n],r=vi.Polygon.call(this,i);e.push(r.coordinates)}return{type:"MultiPolygon",coordinates:e}},GeometryCollection:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var i=t._geometries[n],r=i.getGeometryType();e.push(vi[r].call(this,i))}return{type:"GeometryCollection",geometries:e}}};return{BufferOp:pi,GeoJSONReader:function(){function e(n){t(this,e),this.parser=new yi(n||new oe)}return n(e,[{key:"read",value:function(t){return this.parser.read(t)}}]),e}(),GeoJSONWriter:function(){function e(){t(this,e),this.parser=new yi(this.geometryFactory)}return n(e,[{key:"write",value:function(t){return this.parser.write(t)}}]),e}()}}()},730:(t,e,n)=>{"use strict";var i=n(43),r=n(853);function s(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,a={};function l(t,e){u(t,e),u(t+"Capture",e)}function u(t,e){for(a[t]=e,t=0;t<e.length;t++)o.add(e[t])}var h=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),c=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},g={};function p(t,e,n,i,r,s,o){this.acceptsBooleans=2===e||3===e||4===e,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var m={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(t){m[t]=new p(t,0,!1,t,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(t){var e=t[0];m[e]=new p(e,1,!1,t[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(t){m[t]=new p(t,2,!1,t.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(t){m[t]=new p(t,2,!1,t,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(t){m[t]=new p(t,3,!1,t.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(t){m[t]=new p(t,3,!0,t,null,!1,!1)})),["capture","download"].forEach((function(t){m[t]=new p(t,4,!1,t,null,!1,!1)})),["cols","rows","size","span"].forEach((function(t){m[t]=new p(t,6,!1,t,null,!1,!1)})),["rowSpan","start"].forEach((function(t){m[t]=new p(t,5,!1,t.toLowerCase(),null,!1,!1)}));var y=/[\-:]([a-z])/g;function _(t){return t[1].toUpperCase()}function v(t,e,n,i){var r=m.hasOwnProperty(e)?m[e]:null;(null!==r?0!==r.type:i||!(2<e.length)||"o"!==e[0]&&"O"!==e[0]||"n"!==e[1]&&"N"!==e[1])&&(function(t,e,n,i){if(null===e||"undefined"===typeof e||function(t,e,n,i){if(null!==n&&0===n.type)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return!i&&(null!==n?!n.acceptsBooleans:"data-"!==(t=t.toLowerCase().slice(0,5))&&"aria-"!==t);default:return!1}}(t,e,n,i))return!0;if(i)return!1;if(null!==n)switch(n.type){case 3:return!e;case 4:return!1===e;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}(e,n,r,i)&&(n=null),i||null===r?function(t){return!!c.call(g,t)||!c.call(f,t)&&(d.test(t)?g[t]=!0:(f[t]=!0,!1))}(e)&&(null===n?t.removeAttribute(e):t.setAttribute(e,""+n)):r.mustUseProperty?t[r.propertyName]=null===n?3!==r.type&&"":n:(e=r.attributeName,i=r.attributeNamespace,null===n?t.removeAttribute(e):(n=3===(r=r.type)||4===r&&!0===n?"":""+n,i?t.setAttributeNS(i,e,n):t.setAttribute(e,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(t){var e=t.replace(y,_);m[e]=new p(e,1,!1,t,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(t){var e=t.replace(y,_);m[e]=new p(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(t){var e=t.replace(y,_);m[e]=new p(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(t){m[t]=new p(t,1,!1,t.toLowerCase(),null,!1,!1)})),m.xlinkHref=new p("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(t){m[t]=new p(t,1,!1,t.toLowerCase(),null,!0,!0)}));var x=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),k=Symbol.for("react.portal"),E=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),b=Symbol.for("react.profiler"),C=Symbol.for("react.provider"),I=Symbol.for("react.context"),T=Symbol.for("react.forward_ref"),R=Symbol.for("react.suspense"),N=Symbol.for("react.suspense_list"),L=Symbol.for("react.memo"),M=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var P=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var O=Symbol.iterator;function A(t){return null===t||"object"!==typeof t?null:"function"===typeof(t=O&&t[O]||t["@@iterator"])?t:null}var F,D=Object.assign;function z(t){if(void 0===F)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);F=e&&e[1]||""}return"\n"+F+t}var G=!1;function j(t,e){if(!t||G)return"";G=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var i=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){i=u}t.call(e.prototype)}else{try{throw Error()}catch(u){i=u}t()}}catch(u){if(u&&i&&"string"===typeof u.stack){for(var r=u.stack.split("\n"),s=i.stack.split("\n"),o=r.length-1,a=s.length-1;1<=o&&0<=a&&r[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(r[o]!==s[a]){if(1!==o||1!==a)do{if(o--,0>--a||r[o]!==s[a]){var l="\n"+r[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}}while(1<=o&&0<=a);break}}}finally{G=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?z(t):""}function Y(t){switch(t.tag){case 5:return z(t.type);case 16:return z("Lazy");case 13:return z("Suspense");case 19:return z("SuspenseList");case 0:case 2:case 15:return t=j(t.type,!1);case 11:return t=j(t.type.render,!1);case 1:return t=j(t.type,!0);default:return""}}function B(t){if(null==t)return null;if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t;switch(t){case E:return"Fragment";case k:return"Portal";case b:return"Profiler";case S:return"StrictMode";case R:return"Suspense";case N:return"SuspenseList"}if("object"===typeof t)switch(t.$$typeof){case I:return(t.displayName||"Context")+".Consumer";case C:return(t._context.displayName||"Context")+".Provider";case T:var e=t.render;return(t=t.displayName)||(t=""!==(t=e.displayName||e.name||"")?"ForwardRef("+t+")":"ForwardRef"),t;case L:return null!==(e=t.displayName||null)?e:B(t.type)||"Memo";case M:e=t._payload,t=t._init;try{return B(t(e))}catch(n){}}return null}function U(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=(t=e.render).displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return B(e);case 8:return e===S?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e}return null}function X(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":case"object":return t;default:return""}}function q(t){var e=t.type;return(t=t.nodeName)&&"input"===t.toLowerCase()&&("checkbox"===e||"radio"===e)}function W(t){t._valueTracker||(t._valueTracker=function(t){var e=q(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),i=""+t[e];if(!t.hasOwnProperty(e)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var r=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return r.call(this)},set:function(t){i=""+t,s.call(this,t)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(t){i=""+t},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}(t))}function V(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),i="";return t&&(i=q(t)?t.checked?"true":"false":t.value),(t=i)!==n&&(e.setValue(t),!0)}function H(t){if("undefined"===typeof(t=t||("undefined"!==typeof document?document:void 0)))return null;try{return t.activeElement||t.body}catch(e){return t.body}}function K(t,e){var n=e.checked;return D({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:t._wrapperState.initialChecked})}function Z(t,e){var n=null==e.defaultValue?"":e.defaultValue,i=null!=e.checked?e.checked:e.defaultChecked;n=X(null!=e.value?e.value:n),t._wrapperState={initialChecked:i,initialValue:n,controlled:"checkbox"===e.type||"radio"===e.type?null!=e.checked:null!=e.value}}function $(t,e){null!=(e=e.checked)&&v(t,"checked",e,!1)}function J(t,e){$(t,e);var n=X(e.value),i=e.type;if(null!=n)"number"===i?(0===n&&""===t.value||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if("submit"===i||"reset"===i)return void t.removeAttribute("value");e.hasOwnProperty("value")?tt(t,e.type,n):e.hasOwnProperty("defaultValue")&&tt(t,e.type,X(e.defaultValue)),null==e.checked&&null!=e.defaultChecked&&(t.defaultChecked=!!e.defaultChecked)}function Q(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!("submit"!==i&&"reset"!==i||void 0!==e.value&&null!==e.value))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}""!==(n=t.name)&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,""!==n&&(t.name=n)}function tt(t,e,n){"number"===e&&H(t.ownerDocument)===t||(null==n?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var et=Array.isArray;function nt(t,e,n,i){if(t=t.options,e){e={};for(var r=0;r<n.length;r++)e["$"+n[r]]=!0;for(n=0;n<t.length;n++)r=e.hasOwnProperty("$"+t[n].value),t[n].selected!==r&&(t[n].selected=r),r&&i&&(t[n].defaultSelected=!0)}else{for(n=""+X(n),e=null,r=0;r<t.length;r++){if(t[r].value===n)return t[r].selected=!0,void(i&&(t[r].defaultSelected=!0));null!==e||t[r].disabled||(e=t[r])}null!==e&&(e.selected=!0)}}function it(t,e){if(null!=e.dangerouslySetInnerHTML)throw Error(s(91));return D({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function rt(t,e){var n=e.value;if(null==n){if(n=e.children,e=e.defaultValue,null!=n){if(null!=e)throw Error(s(92));if(et(n)){if(1<n.length)throw Error(s(93));n=n[0]}e=n}null==e&&(e=""),n=e}t._wrapperState={initialValue:X(n)}}function st(t,e){var n=X(e.value),i=X(e.defaultValue);null!=n&&((n=""+n)!==t.value&&(t.value=n),null==e.defaultValue&&t.defaultValue!==n&&(t.defaultValue=n)),null!=i&&(t.defaultValue=""+i)}function ot(t){var e=t.textContent;e===t._wrapperState.initialValue&&""!==e&&null!==e&&(t.value=e)}function at(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function lt(t,e){return null==t||"http://www.w3.org/1999/xhtml"===t?at(e):"http://www.w3.org/2000/svg"===t&&"foreignObject"===e?"http://www.w3.org/1999/xhtml":t}var ut,ht,ct=(ht=function(t,e){if("http://www.w3.org/2000/svg"!==t.namespaceURI||"innerHTML"in t)t.innerHTML=e;else{for((ut=ut||document.createElement("div")).innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=ut.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(t,e,n,i){MSApp.execUnsafeLocalFunction((function(){return ht(t,e)}))}:ht);function dt(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&3===n.nodeType)return void(n.nodeValue=e)}t.textContent=e}var ft={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},gt=["Webkit","ms","Moz","O"];function pt(t,e,n){return null==e||"boolean"===typeof e||""===e?"":n||"number"!==typeof e||0===e||ft.hasOwnProperty(t)&&ft[t]?(""+e).trim():e+"px"}function mt(t,e){for(var n in t=t.style,e)if(e.hasOwnProperty(n)){var i=0===n.indexOf("--"),r=pt(n,e[n],i);"float"===n&&(n="cssFloat"),i?t.setProperty(n,r):t[n]=r}}Object.keys(ft).forEach((function(t){gt.forEach((function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),ft[e]=ft[t]}))}));var yt=D({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function _t(t,e){if(e){if(yt[t]&&(null!=e.children||null!=e.dangerouslySetInnerHTML))throw Error(s(137,t));if(null!=e.dangerouslySetInnerHTML){if(null!=e.children)throw Error(s(60));if("object"!==typeof e.dangerouslySetInnerHTML||!("__html"in e.dangerouslySetInnerHTML))throw Error(s(61))}if(null!=e.style&&"object"!==typeof e.style)throw Error(s(62))}}function vt(t,e){if(-1===t.indexOf("-"))return"string"===typeof e.is;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var xt=null;function wt(t){return(t=t.target||t.srcElement||window).correspondingUseElement&&(t=t.correspondingUseElement),3===t.nodeType?t.parentNode:t}var kt=null,Et=null,St=null;function bt(t){if(t=vr(t)){if("function"!==typeof kt)throw Error(s(280));var e=t.stateNode;e&&(e=wr(e),kt(t.stateNode,t.type,e))}}function Ct(t){Et?St?St.push(t):St=[t]:Et=t}function It(){if(Et){var t=Et,e=St;if(St=Et=null,bt(t),e)for(t=0;t<e.length;t++)bt(e[t])}}function Tt(t,e){return t(e)}function Rt(){}var Nt=!1;function Lt(t,e,n){if(Nt)return t(e,n);Nt=!0;try{return Tt(t,e,n)}finally{Nt=!1,(null!==Et||null!==St)&&(Rt(),It())}}function Mt(t,e){var n=t.stateNode;if(null===n)return null;var i=wr(n);if(null===i)return null;n=i[e];t:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(i=!("button"===(t=t.type)||"input"===t||"select"===t||"textarea"===t)),t=!i;break t;default:t=!1}if(t)return null;if(n&&"function"!==typeof n)throw Error(s(231,e,typeof n));return n}var Pt=!1;if(h)try{var Ot={};Object.defineProperty(Ot,"passive",{get:function(){Pt=!0}}),window.addEventListener("test",Ot,Ot),window.removeEventListener("test",Ot,Ot)}catch(ht){Pt=!1}function At(t,e,n,i,r,s,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(h){this.onError(h)}}var Ft=!1,Dt=null,zt=!1,Gt=null,jt={onError:function(t){Ft=!0,Dt=t}};function Yt(t,e,n,i,r,s,o,a,l){Ft=!1,Dt=null,At.apply(jt,arguments)}function Bt(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do{0!==(4098&(e=t).flags)&&(n=e.return),t=e.return}while(t)}return 3===e.tag?n:null}function Ut(t){if(13===t.tag){var e=t.memoizedState;if(null===e&&(null!==(t=t.alternate)&&(e=t.memoizedState)),null!==e)return e.dehydrated}return null}function Xt(t){if(Bt(t)!==t)throw Error(s(188))}function qt(t){return null!==(t=function(t){var e=t.alternate;if(!e){if(null===(e=Bt(t)))throw Error(s(188));return e!==t?null:t}for(var n=t,i=e;;){var r=n.return;if(null===r)break;var o=r.alternate;if(null===o){if(null!==(i=r.return)){n=i;continue}break}if(r.child===o.child){for(o=r.child;o;){if(o===n)return Xt(r),t;if(o===i)return Xt(r),e;o=o.sibling}throw Error(s(188))}if(n.return!==i.return)n=r,i=o;else{for(var a=!1,l=r.child;l;){if(l===n){a=!0,n=r,i=o;break}if(l===i){a=!0,i=r,n=o;break}l=l.sibling}if(!a){for(l=o.child;l;){if(l===n){a=!0,n=o,i=r;break}if(l===i){a=!0,i=o,n=r;break}l=l.sibling}if(!a)throw Error(s(189))}}if(n.alternate!==i)throw Error(s(190))}if(3!==n.tag)throw Error(s(188));return n.stateNode.current===n?t:e}(t))?Wt(t):null}function Wt(t){if(5===t.tag||6===t.tag)return t;for(t=t.child;null!==t;){var e=Wt(t);if(null!==e)return e;t=t.sibling}return null}var Vt=r.unstable_scheduleCallback,Ht=r.unstable_cancelCallback,Kt=r.unstable_shouldYield,Zt=r.unstable_requestPaint,$t=r.unstable_now,Jt=r.unstable_getCurrentPriorityLevel,Qt=r.unstable_ImmediatePriority,te=r.unstable_UserBlockingPriority,ee=r.unstable_NormalPriority,ne=r.unstable_LowPriority,ie=r.unstable_IdlePriority,re=null,se=null;var oe=Math.clz32?Math.clz32:function(t){return t>>>=0,0===t?32:31-(ae(t)/le|0)|0},ae=Math.log,le=Math.LN2;var ue=64,he=4194304;function ce(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&t;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&t;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function de(t,e){var n=t.pendingLanes;if(0===n)return 0;var i=0,r=t.suspendedLanes,s=t.pingedLanes,o=268435455&n;if(0!==o){var a=o&~r;0!==a?i=ce(a):0!==(s&=o)&&(i=ce(s))}else 0!==(o=n&~r)?i=ce(o):0!==s&&(i=ce(s));if(0===i)return 0;if(0!==e&&e!==i&&0===(e&r)&&((r=i&-i)>=(s=e&-e)||16===r&&0!==(4194240&s)))return e;if(0!==(4&i)&&(i|=16&n),0!==(e=t.entangledLanes))for(t=t.entanglements,e&=i;0<e;)r=1<<(n=31-oe(e)),i|=t[n],e&=~r;return i}function fe(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;default:return-1}}function ge(t){return 0!==(t=-1073741825&t.pendingLanes)?t:1073741824&t?1073741824:0}function pe(){var t=ue;return 0===(4194240&(ue<<=1))&&(ue=64),t}function me(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function ye(t,e,n){t.pendingLanes|=e,536870912!==e&&(t.suspendedLanes=0,t.pingedLanes=0),(t=t.eventTimes)[e=31-oe(e)]=n}function _e(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var i=31-oe(n),r=1<<i;r&e|t[i]&e&&(t[i]|=e),n&=~r}}var ve=0;function xe(t){return 1<(t&=-t)?4<t?0!==(268435455&t)?16:536870912:4:1}var we,ke,Ee,Se,be,Ce=!1,Ie=[],Te=null,Re=null,Ne=null,Le=new Map,Me=new Map,Pe=[],Oe="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ae(t,e){switch(t){case"focusin":case"focusout":Te=null;break;case"dragenter":case"dragleave":Re=null;break;case"mouseover":case"mouseout":Ne=null;break;case"pointerover":case"pointerout":Le.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Me.delete(e.pointerId)}}function Fe(t,e,n,i,r,s){return null===t||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:i,nativeEvent:s,targetContainers:[r]},null!==e&&(null!==(e=vr(e))&&ke(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,null!==r&&-1===e.indexOf(r)&&e.push(r),t)}function De(t){var e=_r(t.target);if(null!==e){var n=Bt(e);if(null!==n)if(13===(e=n.tag)){if(null!==(e=Ut(n)))return t.blockedOn=e,void be(t.priority,(function(){Ee(n)}))}else if(3===e&&n.stateNode.current.memoizedState.isDehydrated)return void(t.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}t.blockedOn=null}function ze(t){if(null!==t.blockedOn)return!1;for(var e=t.targetContainers;0<e.length;){var n=Ke(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(null!==n)return null!==(e=vr(n))&&ke(e),t.blockedOn=n,!1;var i=new(n=t.nativeEvent).constructor(n.type,n);xt=i,n.target.dispatchEvent(i),xt=null,e.shift()}return!0}function Ge(t,e,n){ze(t)&&n.delete(e)}function je(){Ce=!1,null!==Te&&ze(Te)&&(Te=null),null!==Re&&ze(Re)&&(Re=null),null!==Ne&&ze(Ne)&&(Ne=null),Le.forEach(Ge),Me.forEach(Ge)}function Ye(t,e){t.blockedOn===e&&(t.blockedOn=null,Ce||(Ce=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,je)))}function Be(t){function e(e){return Ye(e,t)}if(0<Ie.length){Ye(Ie[0],t);for(var n=1;n<Ie.length;n++){var i=Ie[n];i.blockedOn===t&&(i.blockedOn=null)}}for(null!==Te&&Ye(Te,t),null!==Re&&Ye(Re,t),null!==Ne&&Ye(Ne,t),Le.forEach(e),Me.forEach(e),n=0;n<Pe.length;n++)(i=Pe[n]).blockedOn===t&&(i.blockedOn=null);for(;0<Pe.length&&null===(n=Pe[0]).blockedOn;)De(n),null===n.blockedOn&&Pe.shift()}var Ue=x.ReactCurrentBatchConfig,Xe=!0;function qe(t,e,n,i){var r=ve,s=Ue.transition;Ue.transition=null;try{ve=1,Ve(t,e,n,i)}finally{ve=r,Ue.transition=s}}function We(t,e,n,i){var r=ve,s=Ue.transition;Ue.transition=null;try{ve=4,Ve(t,e,n,i)}finally{ve=r,Ue.transition=s}}function Ve(t,e,n,i){if(Xe){var r=Ke(t,e,n,i);if(null===r)Xi(t,e,i,He,n),Ae(t,i);else if(function(t,e,n,i,r){switch(e){case"focusin":return Te=Fe(Te,t,e,n,i,r),!0;case"dragenter":return Re=Fe(Re,t,e,n,i,r),!0;case"mouseover":return Ne=Fe(Ne,t,e,n,i,r),!0;case"pointerover":var s=r.pointerId;return Le.set(s,Fe(Le.get(s)||null,t,e,n,i,r)),!0;case"gotpointercapture":return s=r.pointerId,Me.set(s,Fe(Me.get(s)||null,t,e,n,i,r)),!0}return!1}(r,t,e,n,i))i.stopPropagation();else if(Ae(t,i),4&e&&-1<Oe.indexOf(t)){for(;null!==r;){var s=vr(r);if(null!==s&&we(s),null===(s=Ke(t,e,n,i))&&Xi(t,e,i,He,n),s===r)break;r=s}null!==r&&i.stopPropagation()}else Xi(t,e,i,null,n)}}var He=null;function Ke(t,e,n,i){if(He=null,null!==(t=_r(t=wt(i))))if(null===(e=Bt(t)))t=null;else if(13===(n=e.tag)){if(null!==(t=Ut(e)))return t;t=null}else if(3===n){if(e.stateNode.current.memoizedState.isDehydrated)return 3===e.tag?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return He=t,null}function Ze(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Jt()){case Qt:return 1;case te:return 4;case ee:case ne:return 16;case ie:return 536870912;default:return 16}default:return 16}}var $e=null,Je=null,Qe=null;function tn(){if(Qe)return Qe;var t,e,n=Je,i=n.length,r="value"in $e?$e.value:$e.textContent,s=r.length;for(t=0;t<i&&n[t]===r[t];t++);var o=i-t;for(e=1;e<=o&&n[i-e]===r[s-e];e++);return Qe=r.slice(t,1<e?1-e:void 0)}function en(t){var e=t.keyCode;return"charCode"in t?0===(t=t.charCode)&&13===e&&(t=13):t=e,10===t&&(t=13),32<=t||13===t?t:0}function nn(){return!0}function rn(){return!1}function sn(t){function e(e,n,i,r,s){for(var o in this._reactName=e,this._targetInst=i,this.type=n,this.nativeEvent=r,this.target=s,this.currentTarget=null,t)t.hasOwnProperty(o)&&(e=t[o],this[o]=e?e(r):r[o]);return this.isDefaultPrevented=(null!=r.defaultPrevented?r.defaultPrevented:!1===r.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return D(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():"unknown"!==typeof t.returnValue&&(t.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():"unknown"!==typeof t.cancelBubble&&(t.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),e}var on,an,ln,un={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},hn=sn(un),cn=D({},un,{view:0,detail:0}),dn=sn(cn),fn=D({},cn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:bn,button:0,buttons:0,relatedTarget:function(t){return void 0===t.relatedTarget?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ln&&(ln&&"mousemove"===t.type?(on=t.screenX-ln.screenX,an=t.screenY-ln.screenY):an=on=0,ln=t),on)},movementY:function(t){return"movementY"in t?t.movementY:an}}),gn=sn(fn),pn=sn(D({},fn,{dataTransfer:0})),mn=sn(D({},cn,{relatedTarget:0})),yn=sn(D({},un,{animationName:0,elapsedTime:0,pseudoElement:0})),_n=D({},un,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),vn=sn(_n),xn=sn(D({},un,{data:0})),wn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},kn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},En={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Sn(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):!!(t=En[t])&&!!e[t]}function bn(){return Sn}var Cn=D({},cn,{key:function(t){if(t.key){var e=wn[t.key]||t.key;if("Unidentified"!==e)return e}return"keypress"===t.type?13===(t=en(t))?"Enter":String.fromCharCode(t):"keydown"===t.type||"keyup"===t.type?kn[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:bn,charCode:function(t){return"keypress"===t.type?en(t):0},keyCode:function(t){return"keydown"===t.type||"keyup"===t.type?t.keyCode:0},which:function(t){return"keypress"===t.type?en(t):"keydown"===t.type||"keyup"===t.type?t.keyCode:0}}),In=sn(Cn),Tn=sn(D({},fn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Rn=sn(D({},cn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:bn})),Nn=sn(D({},un,{propertyName:0,elapsedTime:0,pseudoElement:0})),Ln=D({},fn,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Mn=sn(Ln),Pn=[9,13,27,32],On=h&&"CompositionEvent"in window,An=null;h&&"documentMode"in document&&(An=document.documentMode);var Fn=h&&"TextEvent"in window&&!An,Dn=h&&(!On||An&&8<An&&11>=An),zn=String.fromCharCode(32),Gn=!1;function jn(t,e){switch(t){case"keyup":return-1!==Pn.indexOf(e.keyCode);case"keydown":return 229!==e.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Yn(t){return"object"===typeof(t=t.detail)&&"data"in t?t.data:null}var Bn=!1;var Un={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Xn(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return"input"===e?!!Un[t.type]:"textarea"===e}function qn(t,e,n,i){Ct(i),0<(e=Wi(e,"onChange")).length&&(n=new hn("onChange","change",null,n,i),t.push({event:n,listeners:e}))}var Wn=null,Vn=null;function Hn(t){zi(t,0)}function Kn(t){if(V(xr(t)))return t}function Zn(t,e){if("change"===t)return e}var $n=!1;if(h){var Jn;if(h){var Qn="oninput"in document;if(!Qn){var ti=document.createElement("div");ti.setAttribute("oninput","return;"),Qn="function"===typeof ti.oninput}Jn=Qn}else Jn=!1;$n=Jn&&(!document.documentMode||9<document.documentMode)}function ei(){Wn&&(Wn.detachEvent("onpropertychange",ni),Vn=Wn=null)}function ni(t){if("value"===t.propertyName&&Kn(Vn)){var e=[];qn(e,Vn,t,wt(t)),Lt(Hn,e)}}function ii(t,e,n){"focusin"===t?(ei(),Vn=n,(Wn=e).attachEvent("onpropertychange",ni)):"focusout"===t&&ei()}function ri(t){if("selectionchange"===t||"keyup"===t||"keydown"===t)return Kn(Vn)}function si(t,e){if("click"===t)return Kn(e)}function oi(t,e){if("input"===t||"change"===t)return Kn(e)}var ai="function"===typeof Object.is?Object.is:function(t,e){return t===e&&(0!==t||1/t===1/e)||t!==t&&e!==e};function li(t,e){if(ai(t,e))return!0;if("object"!==typeof t||null===t||"object"!==typeof e||null===e)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!c.call(e,r)||!ai(t[r],e[r]))return!1}return!0}function ui(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function hi(t,e){var n,i=ui(t);for(t=0;i;){if(3===i.nodeType){if(n=t+i.textContent.length,t<=e&&n>=e)return{node:i,offset:e-t};t=n}t:{for(;i;){if(i.nextSibling){i=i.nextSibling;break t}i=i.parentNode}i=void 0}i=ui(i)}}function ci(t,e){return!(!t||!e)&&(t===e||(!t||3!==t.nodeType)&&(e&&3===e.nodeType?ci(t,e.parentNode):"contains"in t?t.contains(e):!!t.compareDocumentPosition&&!!(16&t.compareDocumentPosition(e))))}function di(){for(var t=window,e=H();e instanceof t.HTMLIFrameElement;){try{var n="string"===typeof e.contentWindow.location.href}catch(i){n=!1}if(!n)break;e=H((t=e.contentWindow).document)}return e}function fi(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&("input"===e&&("text"===t.type||"search"===t.type||"tel"===t.type||"url"===t.type||"password"===t.type)||"textarea"===e||"true"===t.contentEditable)}function gi(t){var e=di(),n=t.focusedElem,i=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&ci(n.ownerDocument.documentElement,n)){if(null!==i&&fi(n))if(e=i.start,void 0===(t=i.end)&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if((t=(e=n.ownerDocument||document)&&e.defaultView||window).getSelection){t=t.getSelection();var r=n.textContent.length,s=Math.min(i.start,r);i=void 0===i.end?s:Math.min(i.end,r),!t.extend&&s>i&&(r=i,i=s,s=r),r=hi(n,s);var o=hi(n,i);r&&o&&(1!==t.rangeCount||t.anchorNode!==r.node||t.anchorOffset!==r.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&((e=e.createRange()).setStart(r.node,r.offset),t.removeAllRanges(),s>i?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}for(e=[],t=n;t=t.parentNode;)1===t.nodeType&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<e.length;n++)(t=e[n]).element.scrollLeft=t.left,t.element.scrollTop=t.top}}var pi=h&&"documentMode"in document&&11>=document.documentMode,mi=null,yi=null,_i=null,vi=!1;function xi(t,e,n){var i=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;vi||null==mi||mi!==H(i)||("selectionStart"in(i=mi)&&fi(i)?i={start:i.selectionStart,end:i.selectionEnd}:i={anchorNode:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset},_i&&li(_i,i)||(_i=i,0<(i=Wi(yi,"onSelect")).length&&(e=new hn("onSelect","select",null,e,n),t.push({event:e,listeners:i}),e.target=mi)))}function wi(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var ki={animationend:wi("Animation","AnimationEnd"),animationiteration:wi("Animation","AnimationIteration"),animationstart:wi("Animation","AnimationStart"),transitionend:wi("Transition","TransitionEnd")},Ei={},Si={};function bi(t){if(Ei[t])return Ei[t];if(!ki[t])return t;var e,n=ki[t];for(e in n)if(n.hasOwnProperty(e)&&e in Si)return Ei[t]=n[e];return t}h&&(Si=document.createElement("div").style,"AnimationEvent"in window||(delete ki.animationend.animation,delete ki.animationiteration.animation,delete ki.animationstart.animation),"TransitionEvent"in window||delete ki.transitionend.transition);var Ci=bi("animationend"),Ii=bi("animationiteration"),Ti=bi("animationstart"),Ri=bi("transitionend"),Ni=new Map,Li="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Mi(t,e){Ni.set(t,e),l(e,[t])}for(var Pi=0;Pi<Li.length;Pi++){var Oi=Li[Pi];Mi(Oi.toLowerCase(),"on"+(Oi[0].toUpperCase()+Oi.slice(1)))}Mi(Ci,"onAnimationEnd"),Mi(Ii,"onAnimationIteration"),Mi(Ti,"onAnimationStart"),Mi("dblclick","onDoubleClick"),Mi("focusin","onFocus"),Mi("focusout","onBlur"),Mi(Ri,"onTransitionEnd"),u("onMouseEnter",["mouseout","mouseover"]),u("onMouseLeave",["mouseout","mouseover"]),u("onPointerEnter",["pointerout","pointerover"]),u("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ai="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Fi=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ai));function Di(t,e,n){var i=t.type||"unknown-event";t.currentTarget=n,function(t,e,n,i,r,o,a,l,u){if(Yt.apply(this,arguments),Ft){if(!Ft)throw Error(s(198));var h=Dt;Ft=!1,Dt=null,zt||(zt=!0,Gt=h)}}(i,e,void 0,t),t.currentTarget=null}function zi(t,e){e=0!==(4&e);for(var n=0;n<t.length;n++){var i=t[n],r=i.event;i=i.listeners;t:{var s=void 0;if(e)for(var o=i.length-1;0<=o;o--){var a=i[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==s&&r.isPropagationStopped())break t;Di(r,a,u),s=l}else for(o=0;o<i.length;o++){if(l=(a=i[o]).instance,u=a.currentTarget,a=a.listener,l!==s&&r.isPropagationStopped())break t;Di(r,a,u),s=l}}}if(zt)throw t=Gt,zt=!1,Gt=null,t}function Gi(t,e){var n=e[pr];void 0===n&&(n=e[pr]=new Set);var i=t+"__bubble";n.has(i)||(Ui(e,t,2,!1),n.add(i))}function ji(t,e,n){var i=0;e&&(i|=4),Ui(n,t,i,e)}var Yi="_reactListening"+Math.random().toString(36).slice(2);function Bi(t){if(!t[Yi]){t[Yi]=!0,o.forEach((function(e){"selectionchange"!==e&&(Fi.has(e)||ji(e,!1,t),ji(e,!0,t))}));var e=9===t.nodeType?t:t.ownerDocument;null===e||e[Yi]||(e[Yi]=!0,ji("selectionchange",!1,e))}}function Ui(t,e,n,i){switch(Ze(e)){case 1:var r=qe;break;case 4:r=We;break;default:r=Ve}n=r.bind(null,e,n,t),r=void 0,!Pt||"touchstart"!==e&&"touchmove"!==e&&"wheel"!==e||(r=!0),i?void 0!==r?t.addEventListener(e,n,{capture:!0,passive:r}):t.addEventListener(e,n,!0):void 0!==r?t.addEventListener(e,n,{passive:r}):t.addEventListener(e,n,!1)}function Xi(t,e,n,i,r){var s=i;if(0===(1&e)&&0===(2&e)&&null!==i)t:for(;;){if(null===i)return;var o=i.tag;if(3===o||4===o){var a=i.stateNode.containerInfo;if(a===r||8===a.nodeType&&a.parentNode===r)break;if(4===o)for(o=i.return;null!==o;){var l=o.tag;if((3===l||4===l)&&((l=o.stateNode.containerInfo)===r||8===l.nodeType&&l.parentNode===r))return;o=o.return}for(;null!==a;){if(null===(o=_r(a)))return;if(5===(l=o.tag)||6===l){i=s=o;continue t}a=a.parentNode}}i=i.return}Lt((function(){var i=s,r=wt(n),o=[];t:{var a=Ni.get(t);if(void 0!==a){var l=hn,u=t;switch(t){case"keypress":if(0===en(n))break t;case"keydown":case"keyup":l=In;break;case"focusin":u="focus",l=mn;break;case"focusout":u="blur",l=mn;break;case"beforeblur":case"afterblur":l=mn;break;case"click":if(2===n.button)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=gn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=pn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Rn;break;case Ci:case Ii:case Ti:l=yn;break;case Ri:l=Nn;break;case"scroll":l=dn;break;case"wheel":l=Mn;break;case"copy":case"cut":case"paste":l=vn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Tn}var h=0!==(4&e),c=!h&&"scroll"===t,d=h?null!==a?a+"Capture":null:a;h=[];for(var f,g=i;null!==g;){var p=(f=g).stateNode;if(5===f.tag&&null!==p&&(f=p,null!==d&&(null!=(p=Mt(g,d))&&h.push(qi(g,p,f)))),c)break;g=g.return}0<h.length&&(a=new l(a,u,null,n,r),o.push({event:a,listeners:h}))}}if(0===(7&e)){if(l="mouseout"===t||"pointerout"===t,(!(a="mouseover"===t||"pointerover"===t)||n===xt||!(u=n.relatedTarget||n.fromElement)||!_r(u)&&!u[gr])&&(l||a)&&(a=r.window===r?r:(a=r.ownerDocument)?a.defaultView||a.parentWindow:window,l?(l=i,null!==(u=(u=n.relatedTarget||n.toElement)?_r(u):null)&&(u!==(c=Bt(u))||5!==u.tag&&6!==u.tag)&&(u=null)):(l=null,u=i),l!==u)){if(h=gn,p="onMouseLeave",d="onMouseEnter",g="mouse","pointerout"!==t&&"pointerover"!==t||(h=Tn,p="onPointerLeave",d="onPointerEnter",g="pointer"),c=null==l?a:xr(l),f=null==u?a:xr(u),(a=new h(p,g+"leave",l,n,r)).target=c,a.relatedTarget=f,p=null,_r(r)===i&&((h=new h(d,g+"enter",u,n,r)).target=f,h.relatedTarget=c,p=h),c=p,l&&u)t:{for(d=u,g=0,f=h=l;f;f=Vi(f))g++;for(f=0,p=d;p;p=Vi(p))f++;for(;0<g-f;)h=Vi(h),g--;for(;0<f-g;)d=Vi(d),f--;for(;g--;){if(h===d||null!==d&&h===d.alternate)break t;h=Vi(h),d=Vi(d)}h=null}else h=null;null!==l&&Hi(o,a,l,h,!1),null!==u&&null!==c&&Hi(o,c,u,h,!0)}if("select"===(l=(a=i?xr(i):window).nodeName&&a.nodeName.toLowerCase())||"input"===l&&"file"===a.type)var m=Zn;else if(Xn(a))if($n)m=oi;else{m=ri;var y=ii}else(l=a.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===a.type||"radio"===a.type)&&(m=si);switch(m&&(m=m(t,i))?qn(o,m,n,r):(y&&y(t,a,i),"focusout"===t&&(y=a._wrapperState)&&y.controlled&&"number"===a.type&&tt(a,"number",a.value)),y=i?xr(i):window,t){case"focusin":(Xn(y)||"true"===y.contentEditable)&&(mi=y,yi=i,_i=null);break;case"focusout":_i=yi=mi=null;break;case"mousedown":vi=!0;break;case"contextmenu":case"mouseup":case"dragend":vi=!1,xi(o,n,r);break;case"selectionchange":if(pi)break;case"keydown":case"keyup":xi(o,n,r)}var _;if(On)t:{switch(t){case"compositionstart":var v="onCompositionStart";break t;case"compositionend":v="onCompositionEnd";break t;case"compositionupdate":v="onCompositionUpdate";break t}v=void 0}else Bn?jn(t,n)&&(v="onCompositionEnd"):"keydown"===t&&229===n.keyCode&&(v="onCompositionStart");v&&(Dn&&"ko"!==n.locale&&(Bn||"onCompositionStart"!==v?"onCompositionEnd"===v&&Bn&&(_=tn()):(Je="value"in($e=r)?$e.value:$e.textContent,Bn=!0)),0<(y=Wi(i,v)).length&&(v=new xn(v,t,null,n,r),o.push({event:v,listeners:y}),_?v.data=_:null!==(_=Yn(n))&&(v.data=_))),(_=Fn?function(t,e){switch(t){case"compositionend":return Yn(e);case"keypress":return 32!==e.which?null:(Gn=!0,zn);case"textInput":return(t=e.data)===zn&&Gn?null:t;default:return null}}(t,n):function(t,e){if(Bn)return"compositionend"===t||!On&&jn(t,e)?(t=tn(),Qe=Je=$e=null,Bn=!1,t):null;switch(t){case"paste":default:return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Dn&&"ko"!==e.locale?null:e.data}}(t,n))&&(0<(i=Wi(i,"onBeforeInput")).length&&(r=new xn("onBeforeInput","beforeinput",null,n,r),o.push({event:r,listeners:i}),r.data=_))}zi(o,e)}))}function qi(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Wi(t,e){for(var n=e+"Capture",i=[];null!==t;){var r=t,s=r.stateNode;5===r.tag&&null!==s&&(r=s,null!=(s=Mt(t,n))&&i.unshift(qi(t,s,r)),null!=(s=Mt(t,e))&&i.push(qi(t,s,r))),t=t.return}return i}function Vi(t){if(null===t)return null;do{t=t.return}while(t&&5!==t.tag);return t||null}function Hi(t,e,n,i,r){for(var s=e._reactName,o=[];null!==n&&n!==i;){var a=n,l=a.alternate,u=a.stateNode;if(null!==l&&l===i)break;5===a.tag&&null!==u&&(a=u,r?null!=(l=Mt(n,s))&&o.unshift(qi(n,l,a)):r||null!=(l=Mt(n,s))&&o.push(qi(n,l,a))),n=n.return}0!==o.length&&t.push({event:e,listeners:o})}var Ki=/\r\n?/g,Zi=/\u0000|\uFFFD/g;function $i(t){return("string"===typeof t?t:""+t).replace(Ki,"\n").replace(Zi,"")}function Ji(t,e,n){if(e=$i(e),$i(t)!==e&&n)throw Error(s(425))}function Qi(){}var tr=null,er=null;function nr(t,e){return"textarea"===t||"noscript"===t||"string"===typeof e.children||"number"===typeof e.children||"object"===typeof e.dangerouslySetInnerHTML&&null!==e.dangerouslySetInnerHTML&&null!=e.dangerouslySetInnerHTML.__html}var ir="function"===typeof setTimeout?setTimeout:void 0,rr="function"===typeof clearTimeout?clearTimeout:void 0,sr="function"===typeof Promise?Promise:void 0,or="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof sr?function(t){return sr.resolve(null).then(t).catch(ar)}:ir;function ar(t){setTimeout((function(){throw t}))}function lr(t,e){var n=e,i=0;do{var r=n.nextSibling;if(t.removeChild(n),r&&8===r.nodeType)if("/$"===(n=r.data)){if(0===i)return t.removeChild(r),void Be(e);i--}else"$"!==n&&"$?"!==n&&"$!"!==n||i++;n=r}while(n);Be(e)}function ur(t){for(;null!=t;t=t.nextSibling){var e=t.nodeType;if(1===e||3===e)break;if(8===e){if("$"===(e=t.data)||"$!"===e||"$?"===e)break;if("/$"===e)return null}}return t}function hr(t){t=t.previousSibling;for(var e=0;t;){if(8===t.nodeType){var n=t.data;if("$"===n||"$!"===n||"$?"===n){if(0===e)return t;e--}else"/$"===n&&e++}t=t.previousSibling}return null}var cr=Math.random().toString(36).slice(2),dr="__reactFiber$"+cr,fr="__reactProps$"+cr,gr="__reactContainer$"+cr,pr="__reactEvents$"+cr,mr="__reactListeners$"+cr,yr="__reactHandles$"+cr;function _r(t){var e=t[dr];if(e)return e;for(var n=t.parentNode;n;){if(e=n[gr]||n[dr]){if(n=e.alternate,null!==e.child||null!==n&&null!==n.child)for(t=hr(t);null!==t;){if(n=t[dr])return n;t=hr(t)}return e}n=(t=n).parentNode}return null}function vr(t){return!(t=t[dr]||t[gr])||5!==t.tag&&6!==t.tag&&13!==t.tag&&3!==t.tag?null:t}function xr(t){if(5===t.tag||6===t.tag)return t.stateNode;throw Error(s(33))}function wr(t){return t[fr]||null}var kr=[],Er=-1;function Sr(t){return{current:t}}function br(t){0>Er||(t.current=kr[Er],kr[Er]=null,Er--)}function Cr(t,e){Er++,kr[Er]=t.current,t.current=e}var Ir={},Tr=Sr(Ir),Rr=Sr(!1),Nr=Ir;function Lr(t,e){var n=t.type.contextTypes;if(!n)return Ir;var i=t.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var r,s={};for(r in n)s[r]=e[r];return i&&((t=t.stateNode).__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Mr(t){return null!==(t=t.childContextTypes)&&void 0!==t}function Pr(){br(Rr),br(Tr)}function Or(t,e,n){if(Tr.current!==Ir)throw Error(s(168));Cr(Tr,e),Cr(Rr,n)}function Ar(t,e,n){var i=t.stateNode;if(e=e.childContextTypes,"function"!==typeof i.getChildContext)return n;for(var r in i=i.getChildContext())if(!(r in e))throw Error(s(108,U(t)||"Unknown",r));return D({},n,i)}function Fr(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Ir,Nr=Tr.current,Cr(Tr,t),Cr(Rr,Rr.current),!0}function Dr(t,e,n){var i=t.stateNode;if(!i)throw Error(s(169));n?(t=Ar(t,e,Nr),i.__reactInternalMemoizedMergedChildContext=t,br(Rr),br(Tr),Cr(Tr,t)):br(Rr),Cr(Rr,n)}var zr=null,Gr=!1,jr=!1;function Yr(t){null===zr?zr=[t]:zr.push(t)}function Br(){if(!jr&&null!==zr){jr=!0;var t=0,e=ve;try{var n=zr;for(ve=1;t<n.length;t++){var i=n[t];do{i=i(!0)}while(null!==i)}zr=null,Gr=!1}catch(r){throw null!==zr&&(zr=zr.slice(t+1)),Vt(Qt,Br),r}finally{ve=e,jr=!1}}return null}var Ur=[],Xr=0,qr=null,Wr=0,Vr=[],Hr=0,Kr=null,Zr=1,$r="";function Jr(t,e){Ur[Xr++]=Wr,Ur[Xr++]=qr,qr=t,Wr=e}function Qr(t,e,n){Vr[Hr++]=Zr,Vr[Hr++]=$r,Vr[Hr++]=Kr,Kr=t;var i=Zr;t=$r;var r=32-oe(i)-1;i&=~(1<<r),n+=1;var s=32-oe(e)+r;if(30<s){var o=r-r%5;s=(i&(1<<o)-1).toString(32),i>>=o,r-=o,Zr=1<<32-oe(e)+r|n<<r|i,$r=s+t}else Zr=1<<s|n<<r|i,$r=t}function ts(t){null!==t.return&&(Jr(t,1),Qr(t,1,0))}function es(t){for(;t===qr;)qr=Ur[--Xr],Ur[Xr]=null,Wr=Ur[--Xr],Ur[Xr]=null;for(;t===Kr;)Kr=Vr[--Hr],Vr[Hr]=null,$r=Vr[--Hr],Vr[Hr]=null,Zr=Vr[--Hr],Vr[Hr]=null}var ns=null,is=null,rs=!1,ss=null;function os(t,e){var n=Lu(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,null===(e=t.deletions)?(t.deletions=[n],t.flags|=16):e.push(n)}function as(t,e){switch(t.tag){case 5:var n=t.type;return null!==(e=1!==e.nodeType||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e)&&(t.stateNode=e,ns=t,is=ur(e.firstChild),!0);case 6:return null!==(e=""===t.pendingProps||3!==e.nodeType?null:e)&&(t.stateNode=e,ns=t,is=null,!0);case 13:return null!==(e=8!==e.nodeType?null:e)&&(n=null!==Kr?{id:Zr,overflow:$r}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},(n=Lu(18,null,null,0)).stateNode=e,n.return=t,t.child=n,ns=t,is=null,!0);default:return!1}}function ls(t){return 0!==(1&t.mode)&&0===(128&t.flags)}function us(t){if(rs){var e=is;if(e){var n=e;if(!as(t,e)){if(ls(t))throw Error(s(418));e=ur(n.nextSibling);var i=ns;e&&as(t,e)?os(i,n):(t.flags=-4097&t.flags|2,rs=!1,ns=t)}}else{if(ls(t))throw Error(s(418));t.flags=-4097&t.flags|2,rs=!1,ns=t}}}function hs(t){for(t=t.return;null!==t&&5!==t.tag&&3!==t.tag&&13!==t.tag;)t=t.return;ns=t}function cs(t){if(t!==ns)return!1;if(!rs)return hs(t),rs=!0,!1;var e;if((e=3!==t.tag)&&!(e=5!==t.tag)&&(e="head"!==(e=t.type)&&"body"!==e&&!nr(t.type,t.memoizedProps)),e&&(e=is)){if(ls(t))throw ds(),Error(s(418));for(;e;)os(t,e),e=ur(e.nextSibling)}if(hs(t),13===t.tag){if(!(t=null!==(t=t.memoizedState)?t.dehydrated:null))throw Error(s(317));t:{for(t=t.nextSibling,e=0;t;){if(8===t.nodeType){var n=t.data;if("/$"===n){if(0===e){is=ur(t.nextSibling);break t}e--}else"$"!==n&&"$!"!==n&&"$?"!==n||e++}t=t.nextSibling}is=null}}else is=ns?ur(t.stateNode.nextSibling):null;return!0}function ds(){for(var t=is;t;)t=ur(t.nextSibling)}function fs(){is=ns=null,rs=!1}function gs(t){null===ss?ss=[t]:ss.push(t)}var ps=x.ReactCurrentBatchConfig;function ms(t,e,n){if(null!==(t=n.ref)&&"function"!==typeof t&&"object"!==typeof t){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(s(309));var i=n.stateNode}if(!i)throw Error(s(147,t));var r=i,o=""+t;return null!==e&&null!==e.ref&&"function"===typeof e.ref&&e.ref._stringRef===o?e.ref:(e=function(t){var e=r.refs;null===t?delete e[o]:e[o]=t},e._stringRef=o,e)}if("string"!==typeof t)throw Error(s(284));if(!n._owner)throw Error(s(290,t))}return t}function ys(t,e){throw t=Object.prototype.toString.call(e),Error(s(31,"[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function _s(t){return(0,t._init)(t._payload)}function vs(t){function e(e,n){if(t){var i=e.deletions;null===i?(e.deletions=[n],e.flags|=16):i.push(n)}}function n(n,i){if(!t)return null;for(;null!==i;)e(n,i),i=i.sibling;return null}function i(t,e){for(t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function r(t,e){return(t=Pu(t,e)).index=0,t.sibling=null,t}function o(e,n,i){return e.index=i,t?null!==(i=e.alternate)?(i=i.index)<n?(e.flags|=2,n):i:(e.flags|=2,n):(e.flags|=1048576,n)}function a(e){return t&&null===e.alternate&&(e.flags|=2),e}function l(t,e,n,i){return null===e||6!==e.tag?((e=Du(n,t.mode,i)).return=t,e):((e=r(e,n)).return=t,e)}function u(t,e,n,i){var s=n.type;return s===E?c(t,e,n.props.children,i,n.key):null!==e&&(e.elementType===s||"object"===typeof s&&null!==s&&s.$$typeof===M&&_s(s)===e.type)?((i=r(e,n.props)).ref=ms(t,e,n),i.return=t,i):((i=Ou(n.type,n.key,n.props,null,t.mode,i)).ref=ms(t,e,n),i.return=t,i)}function h(t,e,n,i){return null===e||4!==e.tag||e.stateNode.containerInfo!==n.containerInfo||e.stateNode.implementation!==n.implementation?((e=zu(n,t.mode,i)).return=t,e):((e=r(e,n.children||[])).return=t,e)}function c(t,e,n,i,s){return null===e||7!==e.tag?((e=Au(n,t.mode,i,s)).return=t,e):((e=r(e,n)).return=t,e)}function d(t,e,n){if("string"===typeof e&&""!==e||"number"===typeof e)return(e=Du(""+e,t.mode,n)).return=t,e;if("object"===typeof e&&null!==e){switch(e.$$typeof){case w:return(n=Ou(e.type,e.key,e.props,null,t.mode,n)).ref=ms(t,null,e),n.return=t,n;case k:return(e=zu(e,t.mode,n)).return=t,e;case M:return d(t,(0,e._init)(e._payload),n)}if(et(e)||A(e))return(e=Au(e,t.mode,n,null)).return=t,e;ys(t,e)}return null}function f(t,e,n,i){var r=null!==e?e.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==r?null:l(t,e,""+n,i);if("object"===typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===r?u(t,e,n,i):null;case k:return n.key===r?h(t,e,n,i):null;case M:return f(t,e,(r=n._init)(n._payload),i)}if(et(n)||A(n))return null!==r?null:c(t,e,n,i,null);ys(t,n)}return null}function g(t,e,n,i,r){if("string"===typeof i&&""!==i||"number"===typeof i)return l(e,t=t.get(n)||null,""+i,r);if("object"===typeof i&&null!==i){switch(i.$$typeof){case w:return u(e,t=t.get(null===i.key?n:i.key)||null,i,r);case k:return h(e,t=t.get(null===i.key?n:i.key)||null,i,r);case M:return g(t,e,n,(0,i._init)(i._payload),r)}if(et(i)||A(i))return c(e,t=t.get(n)||null,i,r,null);ys(e,i)}return null}function p(r,s,a,l){for(var u=null,h=null,c=s,p=s=0,m=null;null!==c&&p<a.length;p++){c.index>p?(m=c,c=null):m=c.sibling;var y=f(r,c,a[p],l);if(null===y){null===c&&(c=m);break}t&&c&&null===y.alternate&&e(r,c),s=o(y,s,p),null===h?u=y:h.sibling=y,h=y,c=m}if(p===a.length)return n(r,c),rs&&Jr(r,p),u;if(null===c){for(;p<a.length;p++)null!==(c=d(r,a[p],l))&&(s=o(c,s,p),null===h?u=c:h.sibling=c,h=c);return rs&&Jr(r,p),u}for(c=i(r,c);p<a.length;p++)null!==(m=g(c,r,p,a[p],l))&&(t&&null!==m.alternate&&c.delete(null===m.key?p:m.key),s=o(m,s,p),null===h?u=m:h.sibling=m,h=m);return t&&c.forEach((function(t){return e(r,t)})),rs&&Jr(r,p),u}function m(r,a,l,u){var h=A(l);if("function"!==typeof h)throw Error(s(150));if(null==(l=h.call(l)))throw Error(s(151));for(var c=h=null,p=a,m=a=0,y=null,_=l.next();null!==p&&!_.done;m++,_=l.next()){p.index>m?(y=p,p=null):y=p.sibling;var v=f(r,p,_.value,u);if(null===v){null===p&&(p=y);break}t&&p&&null===v.alternate&&e(r,p),a=o(v,a,m),null===c?h=v:c.sibling=v,c=v,p=y}if(_.done)return n(r,p),rs&&Jr(r,m),h;if(null===p){for(;!_.done;m++,_=l.next())null!==(_=d(r,_.value,u))&&(a=o(_,a,m),null===c?h=_:c.sibling=_,c=_);return rs&&Jr(r,m),h}for(p=i(r,p);!_.done;m++,_=l.next())null!==(_=g(p,r,m,_.value,u))&&(t&&null!==_.alternate&&p.delete(null===_.key?m:_.key),a=o(_,a,m),null===c?h=_:c.sibling=_,c=_);return t&&p.forEach((function(t){return e(r,t)})),rs&&Jr(r,m),h}return function t(i,s,o,l){if("object"===typeof o&&null!==o&&o.type===E&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case w:t:{for(var u=o.key,h=s;null!==h;){if(h.key===u){if((u=o.type)===E){if(7===h.tag){n(i,h.sibling),(s=r(h,o.props.children)).return=i,i=s;break t}}else if(h.elementType===u||"object"===typeof u&&null!==u&&u.$$typeof===M&&_s(u)===h.type){n(i,h.sibling),(s=r(h,o.props)).ref=ms(i,h,o),s.return=i,i=s;break t}n(i,h);break}e(i,h),h=h.sibling}o.type===E?((s=Au(o.props.children,i.mode,l,o.key)).return=i,i=s):((l=Ou(o.type,o.key,o.props,null,i.mode,l)).ref=ms(i,s,o),l.return=i,i=l)}return a(i);case k:t:{for(h=o.key;null!==s;){if(s.key===h){if(4===s.tag&&s.stateNode.containerInfo===o.containerInfo&&s.stateNode.implementation===o.implementation){n(i,s.sibling),(s=r(s,o.children||[])).return=i,i=s;break t}n(i,s);break}e(i,s),s=s.sibling}(s=zu(o,i.mode,l)).return=i,i=s}return a(i);case M:return t(i,s,(h=o._init)(o._payload),l)}if(et(o))return p(i,s,o,l);if(A(o))return m(i,s,o,l);ys(i,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==s&&6===s.tag?(n(i,s.sibling),(s=r(s,o)).return=i,i=s):(n(i,s),(s=Du(o,i.mode,l)).return=i,i=s),a(i)):n(i,s)}}var xs=vs(!0),ws=vs(!1),ks=Sr(null),Es=null,Ss=null,bs=null;function Cs(){bs=Ss=Es=null}function Is(t){var e=ks.current;br(ks),t._currentValue=e}function Ts(t,e,n){for(;null!==t;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,null!==i&&(i.childLanes|=e)):null!==i&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===n)break;t=t.return}}function Rs(t,e){Es=t,bs=Ss=null,null!==(t=t.dependencies)&&null!==t.firstContext&&(0!==(t.lanes&e)&&(va=!0),t.firstContext=null)}function Ns(t){var e=t._currentValue;if(bs!==t)if(t={context:t,memoizedValue:e,next:null},null===Ss){if(null===Es)throw Error(s(308));Ss=t,Es.dependencies={lanes:0,firstContext:t}}else Ss=Ss.next=t;return e}var Ls=null;function Ms(t){null===Ls?Ls=[t]:Ls.push(t)}function Ps(t,e,n,i){var r=e.interleaved;return null===r?(n.next=n,Ms(e)):(n.next=r.next,r.next=n),e.interleaved=n,Os(t,i)}function Os(t,e){t.lanes|=e;var n=t.alternate;for(null!==n&&(n.lanes|=e),n=t,t=t.return;null!==t;)t.childLanes|=e,null!==(n=t.alternate)&&(n.childLanes|=e),n=t,t=t.return;return 3===n.tag?n.stateNode:null}var As=!1;function Fs(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ds(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function zs(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Gs(t,e,n){var i=t.updateQueue;if(null===i)return null;if(i=i.shared,0!==(2&Tl)){var r=i.pending;return null===r?e.next=e:(e.next=r.next,r.next=e),i.pending=e,Os(t,n)}return null===(r=i.interleaved)?(e.next=e,Ms(i)):(e.next=r.next,r.next=e),i.interleaved=e,Os(t,n)}function js(t,e,n){if(null!==(e=e.updateQueue)&&(e=e.shared,0!==(4194240&n))){var i=e.lanes;n|=i&=t.pendingLanes,e.lanes=n,_e(t,n)}}function Ys(t,e){var n=t.updateQueue,i=t.alternate;if(null!==i&&n===(i=i.updateQueue)){var r=null,s=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===s?r=s=o:s=s.next=o,n=n.next}while(null!==n);null===s?r=s=e:s=s.next=e}else r=s=e;return n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:s,shared:i.shared,effects:i.effects},void(t.updateQueue=n)}null===(t=n.lastBaseUpdate)?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Bs(t,e,n,i){var r=t.updateQueue;As=!1;var s=r.firstBaseUpdate,o=r.lastBaseUpdate,a=r.shared.pending;if(null!==a){r.shared.pending=null;var l=a,u=l.next;l.next=null,null===o?s=u:o.next=u,o=l;var h=t.alternate;null!==h&&((a=(h=h.updateQueue).lastBaseUpdate)!==o&&(null===a?h.firstBaseUpdate=u:a.next=u,h.lastBaseUpdate=l))}if(null!==s){var c=r.baseState;for(o=0,h=u=l=null,a=s;;){var d=a.lane,f=a.eventTime;if((i&d)===d){null!==h&&(h=h.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});t:{var g=t,p=a;switch(d=e,f=n,p.tag){case 1:if("function"===typeof(g=p.payload)){c=g.call(f,c,d);break t}c=g;break t;case 3:g.flags=-65537&g.flags|128;case 0:if(null===(d="function"===typeof(g=p.payload)?g.call(f,c,d):g)||void 0===d)break t;c=D({},c,d);break t;case 2:As=!0}}null!==a.callback&&0!==a.lane&&(t.flags|=64,null===(d=r.effects)?r.effects=[a]:d.push(a))}else f={eventTime:f,lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===h?(u=h=f,l=c):h=h.next=f,o|=d;if(null===(a=a.next)){if(null===(a=r.shared.pending))break;a=(d=a).next,d.next=null,r.lastBaseUpdate=d,r.shared.pending=null}}if(null===h&&(l=c),r.baseState=l,r.firstBaseUpdate=u,r.lastBaseUpdate=h,null!==(e=r.shared.interleaved)){r=e;do{o|=r.lane,r=r.next}while(r!==e)}else null===s&&(r.shared.lanes=0);Fl|=o,t.lanes=o,t.memoizedState=c}}function Us(t,e,n){if(t=e.effects,e.effects=null,null!==t)for(e=0;e<t.length;e++){var i=t[e],r=i.callback;if(null!==r){if(i.callback=null,i=n,"function"!==typeof r)throw Error(s(191,r));r.call(i)}}}var Xs={},qs=Sr(Xs),Ws=Sr(Xs),Vs=Sr(Xs);function Hs(t){if(t===Xs)throw Error(s(174));return t}function Ks(t,e){switch(Cr(Vs,e),Cr(Ws,t),Cr(qs,Xs),t=e.nodeType){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:lt(null,"");break;default:e=lt(e=(t=8===t?e.parentNode:e).namespaceURI||null,t=t.tagName)}br(qs),Cr(qs,e)}function Zs(){br(qs),br(Ws),br(Vs)}function $s(t){Hs(Vs.current);var e=Hs(qs.current),n=lt(e,t.type);e!==n&&(Cr(Ws,t),Cr(qs,n))}function Js(t){Ws.current===t&&(br(qs),br(Ws))}var Qs=Sr(0);function to(t){for(var e=t;null!==e;){if(13===e.tag){var n=e.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return e}else if(19===e.tag&&void 0!==e.memoizedProps.revealOrder){if(0!==(128&e.flags))return e}else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break;for(;null===e.sibling;){if(null===e.return||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var eo=[];function no(){for(var t=0;t<eo.length;t++)eo[t]._workInProgressVersionPrimary=null;eo.length=0}var io=x.ReactCurrentDispatcher,ro=x.ReactCurrentBatchConfig,so=0,oo=null,ao=null,lo=null,uo=!1,ho=!1,co=0,fo=0;function go(){throw Error(s(321))}function po(t,e){if(null===e)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!ai(t[n],e[n]))return!1;return!0}function mo(t,e,n,i,r,o){if(so=o,oo=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,io.current=null===t||null===t.memoizedState?Qo:ta,t=n(i,r),ho){o=0;do{if(ho=!1,co=0,25<=o)throw Error(s(301));o+=1,lo=ao=null,e.updateQueue=null,io.current=ea,t=n(i,r)}while(ho)}if(io.current=Jo,e=null!==ao&&null!==ao.next,so=0,lo=ao=oo=null,uo=!1,e)throw Error(s(300));return t}function yo(){var t=0!==co;return co=0,t}function _o(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===lo?oo.memoizedState=lo=t:lo=lo.next=t,lo}function vo(){if(null===ao){var t=oo.alternate;t=null!==t?t.memoizedState:null}else t=ao.next;var e=null===lo?oo.memoizedState:lo.next;if(null!==e)lo=e,ao=t;else{if(null===t)throw Error(s(310));t={memoizedState:(ao=t).memoizedState,baseState:ao.baseState,baseQueue:ao.baseQueue,queue:ao.queue,next:null},null===lo?oo.memoizedState=lo=t:lo=lo.next=t}return lo}function xo(t,e){return"function"===typeof e?e(t):e}function wo(t){var e=vo(),n=e.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=t;var i=ao,r=i.baseQueue,o=n.pending;if(null!==o){if(null!==r){var a=r.next;r.next=o.next,o.next=a}i.baseQueue=r=o,n.pending=null}if(null!==r){o=r.next,i=i.baseState;var l=a=null,u=null,h=o;do{var c=h.lane;if((so&c)===c)null!==u&&(u=u.next={lane:0,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null}),i=h.hasEagerState?h.eagerState:t(i,h.action);else{var d={lane:c,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null};null===u?(l=u=d,a=i):u=u.next=d,oo.lanes|=c,Fl|=c}h=h.next}while(null!==h&&h!==o);null===u?a=i:u.next=l,ai(i,e.memoizedState)||(va=!0),e.memoizedState=i,e.baseState=a,e.baseQueue=u,n.lastRenderedState=i}if(null!==(t=n.interleaved)){r=t;do{o=r.lane,oo.lanes|=o,Fl|=o,r=r.next}while(r!==t)}else null===r&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function ko(t){var e=vo(),n=e.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=t;var i=n.dispatch,r=n.pending,o=e.memoizedState;if(null!==r){n.pending=null;var a=r=r.next;do{o=t(o,a.action),a=a.next}while(a!==r);ai(o,e.memoizedState)||(va=!0),e.memoizedState=o,null===e.baseQueue&&(e.baseState=o),n.lastRenderedState=o}return[o,i]}function Eo(){}function So(t,e){var n=oo,i=vo(),r=e(),o=!ai(i.memoizedState,r);if(o&&(i.memoizedState=r,va=!0),i=i.queue,Fo(Io.bind(null,n,i,t),[t]),i.getSnapshot!==e||o||null!==lo&&1&lo.memoizedState.tag){if(n.flags|=2048,Lo(9,Co.bind(null,n,i,r,e),void 0,null),null===Rl)throw Error(s(349));0!==(30&so)||bo(n,e,r)}return r}function bo(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},null===(e=oo.updateQueue)?(e={lastEffect:null,stores:null},oo.updateQueue=e,e.stores=[t]):null===(n=e.stores)?e.stores=[t]:n.push(t)}function Co(t,e,n,i){e.value=n,e.getSnapshot=i,To(e)&&Ro(t)}function Io(t,e,n){return n((function(){To(e)&&Ro(t)}))}function To(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!ai(t,n)}catch(i){return!0}}function Ro(t){var e=Os(t,1);null!==e&&nu(e,t,1,-1)}function No(t){var e=_o();return"function"===typeof t&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:xo,lastRenderedState:t},e.queue=t,t=t.dispatch=Ho.bind(null,oo,t),[e.memoizedState,t]}function Lo(t,e,n,i){return t={tag:t,create:e,destroy:n,deps:i,next:null},null===(e=oo.updateQueue)?(e={lastEffect:null,stores:null},oo.updateQueue=e,e.lastEffect=t.next=t):null===(n=e.lastEffect)?e.lastEffect=t.next=t:(i=n.next,n.next=t,t.next=i,e.lastEffect=t),t}function Mo(){return vo().memoizedState}function Po(t,e,n,i){var r=_o();oo.flags|=t,r.memoizedState=Lo(1|e,n,void 0,void 0===i?null:i)}function Oo(t,e,n,i){var r=vo();i=void 0===i?null:i;var s=void 0;if(null!==ao){var o=ao.memoizedState;if(s=o.destroy,null!==i&&po(i,o.deps))return void(r.memoizedState=Lo(e,n,s,i))}oo.flags|=t,r.memoizedState=Lo(1|e,n,s,i)}function Ao(t,e){return Po(8390656,8,t,e)}function Fo(t,e){return Oo(2048,8,t,e)}function Do(t,e){return Oo(4,2,t,e)}function zo(t,e){return Oo(4,4,t,e)}function Go(t,e){return"function"===typeof e?(t=t(),e(t),function(){e(null)}):null!==e&&void 0!==e?(t=t(),e.current=t,function(){e.current=null}):void 0}function jo(t,e,n){return n=null!==n&&void 0!==n?n.concat([t]):null,Oo(4,4,Go.bind(null,e,t),n)}function Yo(){}function Bo(t,e){var n=vo();e=void 0===e?null:e;var i=n.memoizedState;return null!==i&&null!==e&&po(e,i[1])?i[0]:(n.memoizedState=[t,e],t)}function Uo(t,e){var n=vo();e=void 0===e?null:e;var i=n.memoizedState;return null!==i&&null!==e&&po(e,i[1])?i[0]:(t=t(),n.memoizedState=[t,e],t)}function Xo(t,e,n){return 0===(21&so)?(t.baseState&&(t.baseState=!1,va=!0),t.memoizedState=n):(ai(n,e)||(n=pe(),oo.lanes|=n,Fl|=n,t.baseState=!0),e)}function qo(t,e){var n=ve;ve=0!==n&&4>n?n:4,t(!0);var i=ro.transition;ro.transition={};try{t(!1),e()}finally{ve=n,ro.transition=i}}function Wo(){return vo().memoizedState}function Vo(t,e,n){var i=eu(t);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},Ko(t))Zo(e,n);else if(null!==(n=Ps(t,e,n,i))){nu(n,t,i,tu()),$o(n,e,i)}}function Ho(t,e,n){var i=eu(t),r={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(Ko(t))Zo(e,r);else{var s=t.alternate;if(0===t.lanes&&(null===s||0===s.lanes)&&null!==(s=e.lastRenderedReducer))try{var o=e.lastRenderedState,a=s(o,n);if(r.hasEagerState=!0,r.eagerState=a,ai(a,o)){var l=e.interleaved;return null===l?(r.next=r,Ms(e)):(r.next=l.next,l.next=r),void(e.interleaved=r)}}catch(u){}null!==(n=Ps(t,e,r,i))&&(nu(n,t,i,r=tu()),$o(n,e,i))}}function Ko(t){var e=t.alternate;return t===oo||null!==e&&e===oo}function Zo(t,e){ho=uo=!0;var n=t.pending;null===n?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function $o(t,e,n){if(0!==(4194240&n)){var i=e.lanes;n|=i&=t.pendingLanes,e.lanes=n,_e(t,n)}}var Jo={readContext:Ns,useCallback:go,useContext:go,useEffect:go,useImperativeHandle:go,useInsertionEffect:go,useLayoutEffect:go,useMemo:go,useReducer:go,useRef:go,useState:go,useDebugValue:go,useDeferredValue:go,useTransition:go,useMutableSource:go,useSyncExternalStore:go,useId:go,unstable_isNewReconciler:!1},Qo={readContext:Ns,useCallback:function(t,e){return _o().memoizedState=[t,void 0===e?null:e],t},useContext:Ns,useEffect:Ao,useImperativeHandle:function(t,e,n){return n=null!==n&&void 0!==n?n.concat([t]):null,Po(4194308,4,Go.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Po(4194308,4,t,e)},useInsertionEffect:function(t,e){return Po(4,2,t,e)},useMemo:function(t,e){var n=_o();return e=void 0===e?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var i=_o();return e=void 0!==n?n(e):e,i.memoizedState=i.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},i.queue=t,t=t.dispatch=Vo.bind(null,oo,t),[i.memoizedState,t]},useRef:function(t){return t={current:t},_o().memoizedState=t},useState:No,useDebugValue:Yo,useDeferredValue:function(t){return _o().memoizedState=t},useTransition:function(){var t=No(!1),e=t[0];return t=qo.bind(null,t[1]),_o().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var i=oo,r=_o();if(rs){if(void 0===n)throw Error(s(407));n=n()}else{if(n=e(),null===Rl)throw Error(s(349));0!==(30&so)||bo(i,e,n)}r.memoizedState=n;var o={value:n,getSnapshot:e};return r.queue=o,Ao(Io.bind(null,i,o,t),[t]),i.flags|=2048,Lo(9,Co.bind(null,i,o,n,e),void 0,null),n},useId:function(){var t=_o(),e=Rl.identifierPrefix;if(rs){var n=$r;e=":"+e+"R"+(n=(Zr&~(1<<32-oe(Zr)-1)).toString(32)+n),0<(n=co++)&&(e+="H"+n.toString(32)),e+=":"}else e=":"+e+"r"+(n=fo++).toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},ta={readContext:Ns,useCallback:Bo,useContext:Ns,useEffect:Fo,useImperativeHandle:jo,useInsertionEffect:Do,useLayoutEffect:zo,useMemo:Uo,useReducer:wo,useRef:Mo,useState:function(){return wo(xo)},useDebugValue:Yo,useDeferredValue:function(t){return Xo(vo(),ao.memoizedState,t)},useTransition:function(){return[wo(xo)[0],vo().memoizedState]},useMutableSource:Eo,useSyncExternalStore:So,useId:Wo,unstable_isNewReconciler:!1},ea={readContext:Ns,useCallback:Bo,useContext:Ns,useEffect:Fo,useImperativeHandle:jo,useInsertionEffect:Do,useLayoutEffect:zo,useMemo:Uo,useReducer:ko,useRef:Mo,useState:function(){return ko(xo)},useDebugValue:Yo,useDeferredValue:function(t){var e=vo();return null===ao?e.memoizedState=t:Xo(e,ao.memoizedState,t)},useTransition:function(){return[ko(xo)[0],vo().memoizedState]},useMutableSource:Eo,useSyncExternalStore:So,useId:Wo,unstable_isNewReconciler:!1};function na(t,e){if(t&&t.defaultProps){for(var n in e=D({},e),t=t.defaultProps)void 0===e[n]&&(e[n]=t[n]);return e}return e}function ia(t,e,n,i){n=null===(n=n(i,e=t.memoizedState))||void 0===n?e:D({},e,n),t.memoizedState=n,0===t.lanes&&(t.updateQueue.baseState=n)}var ra={isMounted:function(t){return!!(t=t._reactInternals)&&Bt(t)===t},enqueueSetState:function(t,e,n){t=t._reactInternals;var i=tu(),r=eu(t),s=zs(i,r);s.payload=e,void 0!==n&&null!==n&&(s.callback=n),null!==(e=Gs(t,s,r))&&(nu(e,t,r,i),js(e,t,r))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var i=tu(),r=eu(t),s=zs(i,r);s.tag=1,s.payload=e,void 0!==n&&null!==n&&(s.callback=n),null!==(e=Gs(t,s,r))&&(nu(e,t,r,i),js(e,t,r))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=tu(),i=eu(t),r=zs(n,i);r.tag=2,void 0!==e&&null!==e&&(r.callback=e),null!==(e=Gs(t,r,i))&&(nu(e,t,i,n),js(e,t,i))}};function sa(t,e,n,i,r,s,o){return"function"===typeof(t=t.stateNode).shouldComponentUpdate?t.shouldComponentUpdate(i,s,o):!e.prototype||!e.prototype.isPureReactComponent||(!li(n,i)||!li(r,s))}function oa(t,e,n){var i=!1,r=Ir,s=e.contextType;return"object"===typeof s&&null!==s?s=Ns(s):(r=Mr(e)?Nr:Tr.current,s=(i=null!==(i=e.contextTypes)&&void 0!==i)?Lr(t,r):Ir),e=new e(n,s),t.memoizedState=null!==e.state&&void 0!==e.state?e.state:null,e.updater=ra,t.stateNode=e,e._reactInternals=t,i&&((t=t.stateNode).__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=s),e}function aa(t,e,n,i){t=e.state,"function"===typeof e.componentWillReceiveProps&&e.componentWillReceiveProps(n,i),"function"===typeof e.UNSAFE_componentWillReceiveProps&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&ra.enqueueReplaceState(e,e.state,null)}function la(t,e,n,i){var r=t.stateNode;r.props=n,r.state=t.memoizedState,r.refs={},Fs(t);var s=e.contextType;"object"===typeof s&&null!==s?r.context=Ns(s):(s=Mr(e)?Nr:Tr.current,r.context=Lr(t,s)),r.state=t.memoizedState,"function"===typeof(s=e.getDerivedStateFromProps)&&(ia(t,e,s,n),r.state=t.memoizedState),"function"===typeof e.getDerivedStateFromProps||"function"===typeof r.getSnapshotBeforeUpdate||"function"!==typeof r.UNSAFE_componentWillMount&&"function"!==typeof r.componentWillMount||(e=r.state,"function"===typeof r.componentWillMount&&r.componentWillMount(),"function"===typeof r.UNSAFE_componentWillMount&&r.UNSAFE_componentWillMount(),e!==r.state&&ra.enqueueReplaceState(r,r.state,null),Bs(t,n,r,i),r.state=t.memoizedState),"function"===typeof r.componentDidMount&&(t.flags|=4194308)}function ua(t,e){try{var n="",i=e;do{n+=Y(i),i=i.return}while(i);var r=n}catch(s){r="\nError generating stack: "+s.message+"\n"+s.stack}return{value:t,source:e,stack:r,digest:null}}function ha(t,e,n){return{value:t,source:null,stack:null!=n?n:null,digest:null!=e?e:null}}function ca(t,e){try{console.error(e.value)}catch(n){setTimeout((function(){throw n}))}}var da="function"===typeof WeakMap?WeakMap:Map;function fa(t,e,n){(n=zs(-1,n)).tag=3,n.payload={element:null};var i=e.value;return n.callback=function(){Xl||(Xl=!0,ql=i),ca(0,e)},n}function ga(t,e,n){(n=zs(-1,n)).tag=3;var i=t.type.getDerivedStateFromError;if("function"===typeof i){var r=e.value;n.payload=function(){return i(r)},n.callback=function(){ca(0,e)}}var s=t.stateNode;return null!==s&&"function"===typeof s.componentDidCatch&&(n.callback=function(){ca(0,e),"function"!==typeof i&&(null===Wl?Wl=new Set([this]):Wl.add(this));var t=e.stack;this.componentDidCatch(e.value,{componentStack:null!==t?t:""})}),n}function pa(t,e,n){var i=t.pingCache;if(null===i){i=t.pingCache=new da;var r=new Set;i.set(e,r)}else void 0===(r=i.get(e))&&(r=new Set,i.set(e,r));r.has(n)||(r.add(n),t=bu.bind(null,t,e,n),e.then(t,t))}function ma(t){do{var e;if((e=13===t.tag)&&(e=null===(e=t.memoizedState)||null!==e.dehydrated),e)return t;t=t.return}while(null!==t);return null}function ya(t,e,n,i,r){return 0===(1&t.mode)?(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((e=zs(-1,1)).tag=2,Gs(n,e,1))),n.lanes|=1),t):(t.flags|=65536,t.lanes=r,t)}var _a=x.ReactCurrentOwner,va=!1;function xa(t,e,n,i){e.child=null===t?ws(e,null,n,i):xs(e,t.child,n,i)}function wa(t,e,n,i,r){n=n.render;var s=e.ref;return Rs(e,r),i=mo(t,e,n,i,s,r),n=yo(),null===t||va?(rs&&n&&ts(e),e.flags|=1,xa(t,e,i,r),e.child):(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,Xa(t,e,r))}function ka(t,e,n,i,r){if(null===t){var s=n.type;return"function"!==typeof s||Mu(s)||void 0!==s.defaultProps||null!==n.compare||void 0!==n.defaultProps?((t=Ou(n.type,null,i,e,e.mode,r)).ref=e.ref,t.return=e,e.child=t):(e.tag=15,e.type=s,Ea(t,e,s,i,r))}if(s=t.child,0===(t.lanes&r)){var o=s.memoizedProps;if((n=null!==(n=n.compare)?n:li)(o,i)&&t.ref===e.ref)return Xa(t,e,r)}return e.flags|=1,(t=Pu(s,i)).ref=e.ref,t.return=e,e.child=t}function Ea(t,e,n,i,r){if(null!==t){var s=t.memoizedProps;if(li(s,i)&&t.ref===e.ref){if(va=!1,e.pendingProps=i=s,0===(t.lanes&r))return e.lanes=t.lanes,Xa(t,e,r);0!==(131072&t.flags)&&(va=!0)}}return Ca(t,e,n,i,r)}function Sa(t,e,n){var i=e.pendingProps,r=i.children,s=null!==t?t.memoizedState:null;if("hidden"===i.mode)if(0===(1&e.mode))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Cr(Pl,Ml),Ml|=n;else{if(0===(1073741824&n))return t=null!==s?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Cr(Pl,Ml),Ml|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=null!==s?s.baseLanes:n,Cr(Pl,Ml),Ml|=i}else null!==s?(i=s.baseLanes|n,e.memoizedState=null):i=n,Cr(Pl,Ml),Ml|=i;return xa(t,e,r,n),e.child}function ba(t,e){var n=e.ref;(null===t&&null!==n||null!==t&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Ca(t,e,n,i,r){var s=Mr(n)?Nr:Tr.current;return s=Lr(e,s),Rs(e,r),n=mo(t,e,n,i,s,r),i=yo(),null===t||va?(rs&&i&&ts(e),e.flags|=1,xa(t,e,n,r),e.child):(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,Xa(t,e,r))}function Ia(t,e,n,i,r){if(Mr(n)){var s=!0;Fr(e)}else s=!1;if(Rs(e,r),null===e.stateNode)Ua(t,e),oa(e,n,i),la(e,n,i,r),i=!0;else if(null===t){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,u=n.contextType;"object"===typeof u&&null!==u?u=Ns(u):u=Lr(e,u=Mr(n)?Nr:Tr.current);var h=n.getDerivedStateFromProps,c="function"===typeof h||"function"===typeof o.getSnapshotBeforeUpdate;c||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(a!==i||l!==u)&&aa(e,o,i,u),As=!1;var d=e.memoizedState;o.state=d,Bs(e,i,o,r),l=e.memoizedState,a!==i||d!==l||Rr.current||As?("function"===typeof h&&(ia(e,n,h,i),l=e.memoizedState),(a=As||sa(e,n,a,i,d,l,u))?(c||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(e.flags|=4194308)):("function"===typeof o.componentDidMount&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=l),o.props=i,o.state=l,o.context=u,i=a):("function"===typeof o.componentDidMount&&(e.flags|=4194308),i=!1)}else{o=e.stateNode,Ds(t,e),a=e.memoizedProps,u=e.type===e.elementType?a:na(e.type,a),o.props=u,c=e.pendingProps,d=o.context,"object"===typeof(l=n.contextType)&&null!==l?l=Ns(l):l=Lr(e,l=Mr(n)?Nr:Tr.current);var f=n.getDerivedStateFromProps;(h="function"===typeof f||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(a!==c||d!==l)&&aa(e,o,i,l),As=!1,d=e.memoizedState,o.state=d,Bs(e,i,o,r);var g=e.memoizedState;a!==c||d!==g||Rr.current||As?("function"===typeof f&&(ia(e,n,f,i),g=e.memoizedState),(u=As||sa(e,n,u,i,d,g,l)||!1)?(h||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(i,g,l),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(i,g,l)),"function"===typeof o.componentDidUpdate&&(e.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(e.flags|=1024)):("function"!==typeof o.componentDidUpdate||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=g),o.props=i,o.state=g,o.context=l,i=u):("function"!==typeof o.componentDidUpdate||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),i=!1)}return Ta(t,e,n,i,s,r)}function Ta(t,e,n,i,r,s){ba(t,e);var o=0!==(128&e.flags);if(!i&&!o)return r&&Dr(e,n,!1),Xa(t,e,s);i=e.stateNode,_a.current=e;var a=o&&"function"!==typeof n.getDerivedStateFromError?null:i.render();return e.flags|=1,null!==t&&o?(e.child=xs(e,t.child,null,s),e.child=xs(e,null,a,s)):xa(t,e,a,s),e.memoizedState=i.state,r&&Dr(e,n,!0),e.child}function Ra(t){var e=t.stateNode;e.pendingContext?Or(0,e.pendingContext,e.pendingContext!==e.context):e.context&&Or(0,e.context,!1),Ks(t,e.containerInfo)}function Na(t,e,n,i,r){return fs(),gs(r),e.flags|=256,xa(t,e,n,i),e.child}var La,Ma,Pa,Oa,Aa={dehydrated:null,treeContext:null,retryLane:0};function Fa(t){return{baseLanes:t,cachePool:null,transitions:null}}function Da(t,e,n){var i,r=e.pendingProps,o=Qs.current,a=!1,l=0!==(128&e.flags);if((i=l)||(i=(null===t||null!==t.memoizedState)&&0!==(2&o)),i?(a=!0,e.flags&=-129):null!==t&&null===t.memoizedState||(o|=1),Cr(Qs,1&o),null===t)return us(e),null!==(t=e.memoizedState)&&null!==(t=t.dehydrated)?(0===(1&e.mode)?e.lanes=1:"$!"===t.data?e.lanes=8:e.lanes=1073741824,null):(l=r.children,t=r.fallback,a?(r=e.mode,a=e.child,l={mode:"hidden",children:l},0===(1&r)&&null!==a?(a.childLanes=0,a.pendingProps=l):a=Fu(l,r,0,null),t=Au(t,r,n,null),a.return=e,t.return=e,a.sibling=t,e.child=a,e.child.memoizedState=Fa(n),e.memoizedState=Aa,t):za(e,l));if(null!==(o=t.memoizedState)&&null!==(i=o.dehydrated))return function(t,e,n,i,r,o,a){if(n)return 256&e.flags?(e.flags&=-257,Ga(t,e,a,i=ha(Error(s(422))))):null!==e.memoizedState?(e.child=t.child,e.flags|=128,null):(o=i.fallback,r=e.mode,i=Fu({mode:"visible",children:i.children},r,0,null),(o=Au(o,r,a,null)).flags|=2,i.return=e,o.return=e,i.sibling=o,e.child=i,0!==(1&e.mode)&&xs(e,t.child,null,a),e.child.memoizedState=Fa(a),e.memoizedState=Aa,o);if(0===(1&e.mode))return Ga(t,e,a,null);if("$!"===r.data){if(i=r.nextSibling&&r.nextSibling.dataset)var l=i.dgst;return i=l,Ga(t,e,a,i=ha(o=Error(s(419)),i,void 0))}if(l=0!==(a&t.childLanes),va||l){if(null!==(i=Rl)){switch(a&-a){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}0!==(r=0!==(r&(i.suspendedLanes|a))?0:r)&&r!==o.retryLane&&(o.retryLane=r,Os(t,r),nu(i,t,r,-1))}return pu(),Ga(t,e,a,i=ha(Error(s(421))))}return"$?"===r.data?(e.flags|=128,e.child=t.child,e=Iu.bind(null,t),r._reactRetry=e,null):(t=o.treeContext,is=ur(r.nextSibling),ns=e,rs=!0,ss=null,null!==t&&(Vr[Hr++]=Zr,Vr[Hr++]=$r,Vr[Hr++]=Kr,Zr=t.id,$r=t.overflow,Kr=e),e=za(e,i.children),e.flags|=4096,e)}(t,e,l,r,i,o,n);if(a){a=r.fallback,l=e.mode,i=(o=t.child).sibling;var u={mode:"hidden",children:r.children};return 0===(1&l)&&e.child!==o?((r=e.child).childLanes=0,r.pendingProps=u,e.deletions=null):(r=Pu(o,u)).subtreeFlags=14680064&o.subtreeFlags,null!==i?a=Pu(i,a):(a=Au(a,l,n,null)).flags|=2,a.return=e,r.return=e,r.sibling=a,e.child=r,r=a,a=e.child,l=null===(l=t.child.memoizedState)?Fa(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},a.memoizedState=l,a.childLanes=t.childLanes&~n,e.memoizedState=Aa,r}return t=(a=t.child).sibling,r=Pu(a,{mode:"visible",children:r.children}),0===(1&e.mode)&&(r.lanes=n),r.return=e,r.sibling=null,null!==t&&(null===(n=e.deletions)?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function za(t,e){return(e=Fu({mode:"visible",children:e},t.mode,0,null)).return=t,t.child=e}function Ga(t,e,n,i){return null!==i&&gs(i),xs(e,t.child,null,n),(t=za(e,e.pendingProps.children)).flags|=2,e.memoizedState=null,t}function ja(t,e,n){t.lanes|=e;var i=t.alternate;null!==i&&(i.lanes|=e),Ts(t.return,e,n)}function Ya(t,e,n,i,r){var s=t.memoizedState;null===s?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=i,s.tail=n,s.tailMode=r)}function Ba(t,e,n){var i=e.pendingProps,r=i.revealOrder,s=i.tail;if(xa(t,e,i.children,n),0!==(2&(i=Qs.current)))i=1&i|2,e.flags|=128;else{if(null!==t&&0!==(128&t.flags))t:for(t=e.child;null!==t;){if(13===t.tag)null!==t.memoizedState&&ja(t,n,e);else if(19===t.tag)ja(t,n,e);else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break t;for(;null===t.sibling;){if(null===t.return||t.return===e)break t;t=t.return}t.sibling.return=t.return,t=t.sibling}i&=1}if(Cr(Qs,i),0===(1&e.mode))e.memoizedState=null;else switch(r){case"forwards":for(n=e.child,r=null;null!==n;)null!==(t=n.alternate)&&null===to(t)&&(r=n),n=n.sibling;null===(n=r)?(r=e.child,e.child=null):(r=n.sibling,n.sibling=null),Ya(e,!1,r,n,s);break;case"backwards":for(n=null,r=e.child,e.child=null;null!==r;){if(null!==(t=r.alternate)&&null===to(t)){e.child=r;break}t=r.sibling,r.sibling=n,n=r,r=t}Ya(e,!0,n,null,s);break;case"together":Ya(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Ua(t,e){0===(1&e.mode)&&null!==t&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Xa(t,e,n){if(null!==t&&(e.dependencies=t.dependencies),Fl|=e.lanes,0===(n&e.childLanes))return null;if(null!==t&&e.child!==t.child)throw Error(s(153));if(null!==e.child){for(n=Pu(t=e.child,t.pendingProps),e.child=n,n.return=e;null!==t.sibling;)t=t.sibling,(n=n.sibling=Pu(t,t.pendingProps)).return=e;n.sibling=null}return e.child}function qa(t,e){if(!rs)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;null!==e;)null!==e.alternate&&(n=e),e=e.sibling;null===n?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var i=null;null!==n;)null!==n.alternate&&(i=n),n=n.sibling;null===i?e||null===t.tail?t.tail=null:t.tail.sibling=null:i.sibling=null}}function Wa(t){var e=null!==t.alternate&&t.alternate.child===t.child,n=0,i=0;if(e)for(var r=t.child;null!==r;)n|=r.lanes|r.childLanes,i|=14680064&r.subtreeFlags,i|=14680064&r.flags,r.return=t,r=r.sibling;else for(r=t.child;null!==r;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=t,r=r.sibling;return t.subtreeFlags|=i,t.childLanes=n,e}function Va(t,e,n){var i=e.pendingProps;switch(es(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Wa(e),null;case 1:case 17:return Mr(e.type)&&Pr(),Wa(e),null;case 3:return i=e.stateNode,Zs(),br(Rr),br(Tr),no(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),null!==t&&null!==t.child||(cs(e)?e.flags|=4:null===t||t.memoizedState.isDehydrated&&0===(256&e.flags)||(e.flags|=1024,null!==ss&&(ou(ss),ss=null))),Ma(t,e),Wa(e),null;case 5:Js(e);var r=Hs(Vs.current);if(n=e.type,null!==t&&null!=e.stateNode)Pa(t,e,n,i,r),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(null===e.stateNode)throw Error(s(166));return Wa(e),null}if(t=Hs(qs.current),cs(e)){i=e.stateNode,n=e.type;var o=e.memoizedProps;switch(i[dr]=e,i[fr]=o,t=0!==(1&e.mode),n){case"dialog":Gi("cancel",i),Gi("close",i);break;case"iframe":case"object":case"embed":Gi("load",i);break;case"video":case"audio":for(r=0;r<Ai.length;r++)Gi(Ai[r],i);break;case"source":Gi("error",i);break;case"img":case"image":case"link":Gi("error",i),Gi("load",i);break;case"details":Gi("toggle",i);break;case"input":Z(i,o),Gi("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!o.multiple},Gi("invalid",i);break;case"textarea":rt(i,o),Gi("invalid",i)}for(var l in _t(n,o),r=null,o)if(o.hasOwnProperty(l)){var u=o[l];"children"===l?"string"===typeof u?i.textContent!==u&&(!0!==o.suppressHydrationWarning&&Ji(i.textContent,u,t),r=["children",u]):"number"===typeof u&&i.textContent!==""+u&&(!0!==o.suppressHydrationWarning&&Ji(i.textContent,u,t),r=["children",""+u]):a.hasOwnProperty(l)&&null!=u&&"onScroll"===l&&Gi("scroll",i)}switch(n){case"input":W(i),Q(i,o,!0);break;case"textarea":W(i),ot(i);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(i.onclick=Qi)}i=r,e.updateQueue=i,null!==i&&(e.flags|=4)}else{l=9===r.nodeType?r:r.ownerDocument,"http://www.w3.org/1999/xhtml"===t&&(t=at(n)),"http://www.w3.org/1999/xhtml"===t?"script"===n?((t=l.createElement("div")).innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):"string"===typeof i.is?t=l.createElement(n,{is:i.is}):(t=l.createElement(n),"select"===n&&(l=t,i.multiple?l.multiple=!0:i.size&&(l.size=i.size))):t=l.createElementNS(t,n),t[dr]=e,t[fr]=i,La(t,e,!1,!1),e.stateNode=t;t:{switch(l=vt(n,i),n){case"dialog":Gi("cancel",t),Gi("close",t),r=i;break;case"iframe":case"object":case"embed":Gi("load",t),r=i;break;case"video":case"audio":for(r=0;r<Ai.length;r++)Gi(Ai[r],t);r=i;break;case"source":Gi("error",t),r=i;break;case"img":case"image":case"link":Gi("error",t),Gi("load",t),r=i;break;case"details":Gi("toggle",t),r=i;break;case"input":Z(t,i),r=K(t,i),Gi("invalid",t);break;case"option":default:r=i;break;case"select":t._wrapperState={wasMultiple:!!i.multiple},r=D({},i,{value:void 0}),Gi("invalid",t);break;case"textarea":rt(t,i),r=it(t,i),Gi("invalid",t)}for(o in _t(n,r),u=r)if(u.hasOwnProperty(o)){var h=u[o];"style"===o?mt(t,h):"dangerouslySetInnerHTML"===o?null!=(h=h?h.__html:void 0)&&ct(t,h):"children"===o?"string"===typeof h?("textarea"!==n||""!==h)&&dt(t,h):"number"===typeof h&&dt(t,""+h):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(a.hasOwnProperty(o)?null!=h&&"onScroll"===o&&Gi("scroll",t):null!=h&&v(t,o,h,l))}switch(n){case"input":W(t),Q(t,i,!1);break;case"textarea":W(t),ot(t);break;case"option":null!=i.value&&t.setAttribute("value",""+X(i.value));break;case"select":t.multiple=!!i.multiple,null!=(o=i.value)?nt(t,!!i.multiple,o,!1):null!=i.defaultValue&&nt(t,!!i.multiple,i.defaultValue,!0);break;default:"function"===typeof r.onClick&&(t.onclick=Qi)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break t;case"img":i=!0;break t;default:i=!1}}i&&(e.flags|=4)}null!==e.ref&&(e.flags|=512,e.flags|=2097152)}return Wa(e),null;case 6:if(t&&null!=e.stateNode)Oa(t,e,t.memoizedProps,i);else{if("string"!==typeof i&&null===e.stateNode)throw Error(s(166));if(n=Hs(Vs.current),Hs(qs.current),cs(e)){if(i=e.stateNode,n=e.memoizedProps,i[dr]=e,(o=i.nodeValue!==n)&&null!==(t=ns))switch(t.tag){case 3:Ji(i.nodeValue,n,0!==(1&t.mode));break;case 5:!0!==t.memoizedProps.suppressHydrationWarning&&Ji(i.nodeValue,n,0!==(1&t.mode))}o&&(e.flags|=4)}else(i=(9===n.nodeType?n:n.ownerDocument).createTextNode(i))[dr]=e,e.stateNode=i}return Wa(e),null;case 13:if(br(Qs),i=e.memoizedState,null===t||null!==t.memoizedState&&null!==t.memoizedState.dehydrated){if(rs&&null!==is&&0!==(1&e.mode)&&0===(128&e.flags))ds(),fs(),e.flags|=98560,o=!1;else if(o=cs(e),null!==i&&null!==i.dehydrated){if(null===t){if(!o)throw Error(s(318));if(!(o=null!==(o=e.memoizedState)?o.dehydrated:null))throw Error(s(317));o[dr]=e}else fs(),0===(128&e.flags)&&(e.memoizedState=null),e.flags|=4;Wa(e),o=!1}else null!==ss&&(ou(ss),ss=null),o=!0;if(!o)return 65536&e.flags?e:null}return 0!==(128&e.flags)?(e.lanes=n,e):((i=null!==i)!==(null!==t&&null!==t.memoizedState)&&i&&(e.child.flags|=8192,0!==(1&e.mode)&&(null===t||0!==(1&Qs.current)?0===Ol&&(Ol=3):pu())),null!==e.updateQueue&&(e.flags|=4),Wa(e),null);case 4:return Zs(),Ma(t,e),null===t&&Bi(e.stateNode.containerInfo),Wa(e),null;case 10:return Is(e.type._context),Wa(e),null;case 19:if(br(Qs),null===(o=e.memoizedState))return Wa(e),null;if(i=0!==(128&e.flags),null===(l=o.rendering))if(i)qa(o,!1);else{if(0!==Ol||null!==t&&0!==(128&t.flags))for(t=e.child;null!==t;){if(null!==(l=to(t))){for(e.flags|=128,qa(o,!1),null!==(i=l.updateQueue)&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=n,n=e.child;null!==n;)t=i,(o=n).flags&=14680066,null===(l=o.alternate)?(o.childLanes=0,o.lanes=t,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=l.childLanes,o.lanes=l.lanes,o.child=l.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=l.memoizedProps,o.memoizedState=l.memoizedState,o.updateQueue=l.updateQueue,o.type=l.type,t=l.dependencies,o.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Cr(Qs,1&Qs.current|2),e.child}t=t.sibling}null!==o.tail&&$t()>Bl&&(e.flags|=128,i=!0,qa(o,!1),e.lanes=4194304)}else{if(!i)if(null!==(t=to(l))){if(e.flags|=128,i=!0,null!==(n=t.updateQueue)&&(e.updateQueue=n,e.flags|=4),qa(o,!0),null===o.tail&&"hidden"===o.tailMode&&!l.alternate&&!rs)return Wa(e),null}else 2*$t()-o.renderingStartTime>Bl&&1073741824!==n&&(e.flags|=128,i=!0,qa(o,!1),e.lanes=4194304);o.isBackwards?(l.sibling=e.child,e.child=l):(null!==(n=o.last)?n.sibling=l:e.child=l,o.last=l)}return null!==o.tail?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=$t(),e.sibling=null,n=Qs.current,Cr(Qs,i?1&n|2:1&n),e):(Wa(e),null);case 22:case 23:return cu(),i=null!==e.memoizedState,null!==t&&null!==t.memoizedState!==i&&(e.flags|=8192),i&&0!==(1&e.mode)?0!==(1073741824&Ml)&&(Wa(e),6&e.subtreeFlags&&(e.flags|=8192)):Wa(e),null;case 24:case 25:return null}throw Error(s(156,e.tag))}function Ha(t,e){switch(es(e),e.tag){case 1:return Mr(e.type)&&Pr(),65536&(t=e.flags)?(e.flags=-65537&t|128,e):null;case 3:return Zs(),br(Rr),br(Tr),no(),0!==(65536&(t=e.flags))&&0===(128&t)?(e.flags=-65537&t|128,e):null;case 5:return Js(e),null;case 13:if(br(Qs),null!==(t=e.memoizedState)&&null!==t.dehydrated){if(null===e.alternate)throw Error(s(340));fs()}return 65536&(t=e.flags)?(e.flags=-65537&t|128,e):null;case 19:return br(Qs),null;case 4:return Zs(),null;case 10:return Is(e.type._context),null;case 22:case 23:return cu(),null;default:return null}}La=function(t,e){for(var n=e.child;null!==n;){if(5===n.tag||6===n.tag)t.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===e)break;for(;null===n.sibling;){if(null===n.return||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Ma=function(){},Pa=function(t,e,n,i){var r=t.memoizedProps;if(r!==i){t=e.stateNode,Hs(qs.current);var s,o=null;switch(n){case"input":r=K(t,r),i=K(t,i),o=[];break;case"select":r=D({},r,{value:void 0}),i=D({},i,{value:void 0}),o=[];break;case"textarea":r=it(t,r),i=it(t,i),o=[];break;default:"function"!==typeof r.onClick&&"function"===typeof i.onClick&&(t.onclick=Qi)}for(h in _t(n,i),n=null,r)if(!i.hasOwnProperty(h)&&r.hasOwnProperty(h)&&null!=r[h])if("style"===h){var l=r[h];for(s in l)l.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else"dangerouslySetInnerHTML"!==h&&"children"!==h&&"suppressContentEditableWarning"!==h&&"suppressHydrationWarning"!==h&&"autoFocus"!==h&&(a.hasOwnProperty(h)?o||(o=[]):(o=o||[]).push(h,null));for(h in i){var u=i[h];if(l=null!=r?r[h]:void 0,i.hasOwnProperty(h)&&u!==l&&(null!=u||null!=l))if("style"===h)if(l){for(s in l)!l.hasOwnProperty(s)||u&&u.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in u)u.hasOwnProperty(s)&&l[s]!==u[s]&&(n||(n={}),n[s]=u[s])}else n||(o||(o=[]),o.push(h,n)),n=u;else"dangerouslySetInnerHTML"===h?(u=u?u.__html:void 0,l=l?l.__html:void 0,null!=u&&l!==u&&(o=o||[]).push(h,u)):"children"===h?"string"!==typeof u&&"number"!==typeof u||(o=o||[]).push(h,""+u):"suppressContentEditableWarning"!==h&&"suppressHydrationWarning"!==h&&(a.hasOwnProperty(h)?(null!=u&&"onScroll"===h&&Gi("scroll",t),o||l===u||(o=[])):(o=o||[]).push(h,u))}n&&(o=o||[]).push("style",n);var h=o;(e.updateQueue=h)&&(e.flags|=4)}},Oa=function(t,e,n,i){n!==i&&(e.flags|=4)};var Ka=!1,Za=!1,$a="function"===typeof WeakSet?WeakSet:Set,Ja=null;function Qa(t,e){var n=t.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(i){Su(t,e,i)}else n.current=null}function tl(t,e,n){try{n()}catch(i){Su(t,e,i)}}var el=!1;function nl(t,e,n){var i=e.updateQueue;if(null!==(i=null!==i?i.lastEffect:null)){var r=i=i.next;do{if((r.tag&t)===t){var s=r.destroy;r.destroy=void 0,void 0!==s&&tl(e,n,s)}r=r.next}while(r!==i)}}function il(t,e){if(null!==(e=null!==(e=e.updateQueue)?e.lastEffect:null)){var n=e=e.next;do{if((n.tag&t)===t){var i=n.create;n.destroy=i()}n=n.next}while(n!==e)}}function rl(t){var e=t.ref;if(null!==e){var n=t.stateNode;t.tag,t=n,"function"===typeof e?e(t):e.current=t}}function sl(t){var e=t.alternate;null!==e&&(t.alternate=null,sl(e)),t.child=null,t.deletions=null,t.sibling=null,5===t.tag&&(null!==(e=t.stateNode)&&(delete e[dr],delete e[fr],delete e[pr],delete e[mr],delete e[yr])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function ol(t){return 5===t.tag||3===t.tag||4===t.tag}function al(t){t:for(;;){for(;null===t.sibling;){if(null===t.return||ol(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;5!==t.tag&&6!==t.tag&&18!==t.tag;){if(2&t.flags)continue t;if(null===t.child||4===t.tag)continue t;t.child.return=t,t=t.child}if(!(2&t.flags))return t.stateNode}}function ll(t,e,n){var i=t.tag;if(5===i||6===i)t=t.stateNode,e?8===n.nodeType?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(8===n.nodeType?(e=n.parentNode).insertBefore(t,n):(e=n).appendChild(t),null!==(n=n._reactRootContainer)&&void 0!==n||null!==e.onclick||(e.onclick=Qi));else if(4!==i&&null!==(t=t.child))for(ll(t,e,n),t=t.sibling;null!==t;)ll(t,e,n),t=t.sibling}function ul(t,e,n){var i=t.tag;if(5===i||6===i)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(4!==i&&null!==(t=t.child))for(ul(t,e,n),t=t.sibling;null!==t;)ul(t,e,n),t=t.sibling}var hl=null,cl=!1;function dl(t,e,n){for(n=n.child;null!==n;)fl(t,e,n),n=n.sibling}function fl(t,e,n){if(se&&"function"===typeof se.onCommitFiberUnmount)try{se.onCommitFiberUnmount(re,n)}catch(a){}switch(n.tag){case 5:Za||Qa(n,e);case 6:var i=hl,r=cl;hl=null,dl(t,e,n),cl=r,null!==(hl=i)&&(cl?(t=hl,n=n.stateNode,8===t.nodeType?t.parentNode.removeChild(n):t.removeChild(n)):hl.removeChild(n.stateNode));break;case 18:null!==hl&&(cl?(t=hl,n=n.stateNode,8===t.nodeType?lr(t.parentNode,n):1===t.nodeType&&lr(t,n),Be(t)):lr(hl,n.stateNode));break;case 4:i=hl,r=cl,hl=n.stateNode.containerInfo,cl=!0,dl(t,e,n),hl=i,cl=r;break;case 0:case 11:case 14:case 15:if(!Za&&(null!==(i=n.updateQueue)&&null!==(i=i.lastEffect))){r=i=i.next;do{var s=r,o=s.destroy;s=s.tag,void 0!==o&&(0!==(2&s)||0!==(4&s))&&tl(n,e,o),r=r.next}while(r!==i)}dl(t,e,n);break;case 1:if(!Za&&(Qa(n,e),"function"===typeof(i=n.stateNode).componentWillUnmount))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(a){Su(n,e,a)}dl(t,e,n);break;case 21:dl(t,e,n);break;case 22:1&n.mode?(Za=(i=Za)||null!==n.memoizedState,dl(t,e,n),Za=i):dl(t,e,n);break;default:dl(t,e,n)}}function gl(t){var e=t.updateQueue;if(null!==e){t.updateQueue=null;var n=t.stateNode;null===n&&(n=t.stateNode=new $a),e.forEach((function(e){var i=Tu.bind(null,t,e);n.has(e)||(n.add(e),e.then(i,i))}))}}function pl(t,e){var n=e.deletions;if(null!==n)for(var i=0;i<n.length;i++){var r=n[i];try{var o=t,a=e,l=a;t:for(;null!==l;){switch(l.tag){case 5:hl=l.stateNode,cl=!1;break t;case 3:case 4:hl=l.stateNode.containerInfo,cl=!0;break t}l=l.return}if(null===hl)throw Error(s(160));fl(o,a,r),hl=null,cl=!1;var u=r.alternate;null!==u&&(u.return=null),r.return=null}catch(h){Su(r,e,h)}}if(12854&e.subtreeFlags)for(e=e.child;null!==e;)ml(e,t),e=e.sibling}function ml(t,e){var n=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(pl(e,t),yl(t),4&i){try{nl(3,t,t.return),il(3,t)}catch(m){Su(t,t.return,m)}try{nl(5,t,t.return)}catch(m){Su(t,t.return,m)}}break;case 1:pl(e,t),yl(t),512&i&&null!==n&&Qa(n,n.return);break;case 5:if(pl(e,t),yl(t),512&i&&null!==n&&Qa(n,n.return),32&t.flags){var r=t.stateNode;try{dt(r,"")}catch(m){Su(t,t.return,m)}}if(4&i&&null!=(r=t.stateNode)){var o=t.memoizedProps,a=null!==n?n.memoizedProps:o,l=t.type,u=t.updateQueue;if(t.updateQueue=null,null!==u)try{"input"===l&&"radio"===o.type&&null!=o.name&&$(r,o),vt(l,a);var h=vt(l,o);for(a=0;a<u.length;a+=2){var c=u[a],d=u[a+1];"style"===c?mt(r,d):"dangerouslySetInnerHTML"===c?ct(r,d):"children"===c?dt(r,d):v(r,c,d,h)}switch(l){case"input":J(r,o);break;case"textarea":st(r,o);break;case"select":var f=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!o.multiple;var g=o.value;null!=g?nt(r,!!o.multiple,g,!1):f!==!!o.multiple&&(null!=o.defaultValue?nt(r,!!o.multiple,o.defaultValue,!0):nt(r,!!o.multiple,o.multiple?[]:"",!1))}r[fr]=o}catch(m){Su(t,t.return,m)}}break;case 6:if(pl(e,t),yl(t),4&i){if(null===t.stateNode)throw Error(s(162));r=t.stateNode,o=t.memoizedProps;try{r.nodeValue=o}catch(m){Su(t,t.return,m)}}break;case 3:if(pl(e,t),yl(t),4&i&&null!==n&&n.memoizedState.isDehydrated)try{Be(e.containerInfo)}catch(m){Su(t,t.return,m)}break;case 4:default:pl(e,t),yl(t);break;case 13:pl(e,t),yl(t),8192&(r=t.child).flags&&(o=null!==r.memoizedState,r.stateNode.isHidden=o,!o||null!==r.alternate&&null!==r.alternate.memoizedState||(Yl=$t())),4&i&&gl(t);break;case 22:if(c=null!==n&&null!==n.memoizedState,1&t.mode?(Za=(h=Za)||c,pl(e,t),Za=h):pl(e,t),yl(t),8192&i){if(h=null!==t.memoizedState,(t.stateNode.isHidden=h)&&!c&&0!==(1&t.mode))for(Ja=t,c=t.child;null!==c;){for(d=Ja=c;null!==Ja;){switch(g=(f=Ja).child,f.tag){case 0:case 11:case 14:case 15:nl(4,f,f.return);break;case 1:Qa(f,f.return);var p=f.stateNode;if("function"===typeof p.componentWillUnmount){i=f,n=f.return;try{e=i,p.props=e.memoizedProps,p.state=e.memoizedState,p.componentWillUnmount()}catch(m){Su(i,n,m)}}break;case 5:Qa(f,f.return);break;case 22:if(null!==f.memoizedState){wl(d);continue}}null!==g?(g.return=f,Ja=g):wl(d)}c=c.sibling}t:for(c=null,d=t;;){if(5===d.tag){if(null===c){c=d;try{r=d.stateNode,h?"function"===typeof(o=r.style).setProperty?o.setProperty("display","none","important"):o.display="none":(l=d.stateNode,a=void 0!==(u=d.memoizedProps.style)&&null!==u&&u.hasOwnProperty("display")?u.display:null,l.style.display=pt("display",a))}catch(m){Su(t,t.return,m)}}}else if(6===d.tag){if(null===c)try{d.stateNode.nodeValue=h?"":d.memoizedProps}catch(m){Su(t,t.return,m)}}else if((22!==d.tag&&23!==d.tag||null===d.memoizedState||d===t)&&null!==d.child){d.child.return=d,d=d.child;continue}if(d===t)break t;for(;null===d.sibling;){if(null===d.return||d.return===t)break t;c===d&&(c=null),d=d.return}c===d&&(c=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:pl(e,t),yl(t),4&i&&gl(t);case 21:}}function yl(t){var e=t.flags;if(2&e){try{t:{for(var n=t.return;null!==n;){if(ol(n)){var i=n;break t}n=n.return}throw Error(s(160))}switch(i.tag){case 5:var r=i.stateNode;32&i.flags&&(dt(r,""),i.flags&=-33),ul(t,al(t),r);break;case 3:case 4:var o=i.stateNode.containerInfo;ll(t,al(t),o);break;default:throw Error(s(161))}}catch(a){Su(t,t.return,a)}t.flags&=-3}4096&e&&(t.flags&=-4097)}function _l(t,e,n){Ja=t,vl(t,e,n)}function vl(t,e,n){for(var i=0!==(1&t.mode);null!==Ja;){var r=Ja,s=r.child;if(22===r.tag&&i){var o=null!==r.memoizedState||Ka;if(!o){var a=r.alternate,l=null!==a&&null!==a.memoizedState||Za;a=Ka;var u=Za;if(Ka=o,(Za=l)&&!u)for(Ja=r;null!==Ja;)l=(o=Ja).child,22===o.tag&&null!==o.memoizedState?kl(r):null!==l?(l.return=o,Ja=l):kl(r);for(;null!==s;)Ja=s,vl(s,e,n),s=s.sibling;Ja=r,Ka=a,Za=u}xl(t)}else 0!==(8772&r.subtreeFlags)&&null!==s?(s.return=r,Ja=s):xl(t)}}function xl(t){for(;null!==Ja;){var e=Ja;if(0!==(8772&e.flags)){var n=e.alternate;try{if(0!==(8772&e.flags))switch(e.tag){case 0:case 11:case 15:Za||il(5,e);break;case 1:var i=e.stateNode;if(4&e.flags&&!Za)if(null===n)i.componentDidMount();else{var r=e.elementType===e.type?n.memoizedProps:na(e.type,n.memoizedProps);i.componentDidUpdate(r,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;null!==o&&Us(e,o,i);break;case 3:var a=e.updateQueue;if(null!==a){if(n=null,null!==e.child)switch(e.child.tag){case 5:case 1:n=e.child.stateNode}Us(e,a,n)}break;case 5:var l=e.stateNode;if(null===n&&4&e.flags){n=l;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===e.memoizedState){var h=e.alternate;if(null!==h){var c=h.memoizedState;if(null!==c){var d=c.dehydrated;null!==d&&Be(d)}}}break;default:throw Error(s(163))}Za||512&e.flags&&rl(e)}catch(f){Su(e,e.return,f)}}if(e===t){Ja=null;break}if(null!==(n=e.sibling)){n.return=e.return,Ja=n;break}Ja=e.return}}function wl(t){for(;null!==Ja;){var e=Ja;if(e===t){Ja=null;break}var n=e.sibling;if(null!==n){n.return=e.return,Ja=n;break}Ja=e.return}}function kl(t){for(;null!==Ja;){var e=Ja;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{il(4,e)}catch(l){Su(e,n,l)}break;case 1:var i=e.stateNode;if("function"===typeof i.componentDidMount){var r=e.return;try{i.componentDidMount()}catch(l){Su(e,r,l)}}var s=e.return;try{rl(e)}catch(l){Su(e,s,l)}break;case 5:var o=e.return;try{rl(e)}catch(l){Su(e,o,l)}}}catch(l){Su(e,e.return,l)}if(e===t){Ja=null;break}var a=e.sibling;if(null!==a){a.return=e.return,Ja=a;break}Ja=e.return}}var El,Sl=Math.ceil,bl=x.ReactCurrentDispatcher,Cl=x.ReactCurrentOwner,Il=x.ReactCurrentBatchConfig,Tl=0,Rl=null,Nl=null,Ll=0,Ml=0,Pl=Sr(0),Ol=0,Al=null,Fl=0,Dl=0,zl=0,Gl=null,jl=null,Yl=0,Bl=1/0,Ul=null,Xl=!1,ql=null,Wl=null,Vl=!1,Hl=null,Kl=0,Zl=0,$l=null,Jl=-1,Ql=0;function tu(){return 0!==(6&Tl)?$t():-1!==Jl?Jl:Jl=$t()}function eu(t){return 0===(1&t.mode)?1:0!==(2&Tl)&&0!==Ll?Ll&-Ll:null!==ps.transition?(0===Ql&&(Ql=pe()),Ql):0!==(t=ve)?t:t=void 0===(t=window.event)?16:Ze(t.type)}function nu(t,e,n,i){if(50<Zl)throw Zl=0,$l=null,Error(s(185));ye(t,n,i),0!==(2&Tl)&&t===Rl||(t===Rl&&(0===(2&Tl)&&(Dl|=n),4===Ol&&au(t,Ll)),iu(t,i),1===n&&0===Tl&&0===(1&e.mode)&&(Bl=$t()+500,Gr&&Br()))}function iu(t,e){var n=t.callbackNode;!function(t,e){for(var n=t.suspendedLanes,i=t.pingedLanes,r=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-oe(s),a=1<<o,l=r[o];-1===l?0!==(a&n)&&0===(a&i)||(r[o]=fe(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}(t,e);var i=de(t,t===Rl?Ll:0);if(0===i)null!==n&&Ht(n),t.callbackNode=null,t.callbackPriority=0;else if(e=i&-i,t.callbackPriority!==e){if(null!=n&&Ht(n),1===e)0===t.tag?function(t){Gr=!0,Yr(t)}(lu.bind(null,t)):Yr(lu.bind(null,t)),or((function(){0===(6&Tl)&&Br()})),n=null;else{switch(xe(i)){case 1:n=Qt;break;case 4:n=te;break;case 16:default:n=ee;break;case 536870912:n=ie}n=Ru(n,ru.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function ru(t,e){if(Jl=-1,Ql=0,0!==(6&Tl))throw Error(s(327));var n=t.callbackNode;if(ku()&&t.callbackNode!==n)return null;var i=de(t,t===Rl?Ll:0);if(0===i)return null;if(0!==(30&i)||0!==(i&t.expiredLanes)||e)e=mu(t,i);else{e=i;var r=Tl;Tl|=2;var o=gu();for(Rl===t&&Ll===e||(Ul=null,Bl=$t()+500,du(t,e));;)try{_u();break}catch(l){fu(t,l)}Cs(),bl.current=o,Tl=r,null!==Nl?e=0:(Rl=null,Ll=0,e=Ol)}if(0!==e){if(2===e&&(0!==(r=ge(t))&&(i=r,e=su(t,r))),1===e)throw n=Al,du(t,0),au(t,i),iu(t,$t()),n;if(6===e)au(t,i);else{if(r=t.current.alternate,0===(30&i)&&!function(t){for(var e=t;;){if(16384&e.flags){var n=e.updateQueue;if(null!==n&&null!==(n=n.stores))for(var i=0;i<n.length;i++){var r=n[i],s=r.getSnapshot;r=r.value;try{if(!ai(s(),r))return!1}catch(a){return!1}}}if(n=e.child,16384&e.subtreeFlags&&null!==n)n.return=e,e=n;else{if(e===t)break;for(;null===e.sibling;){if(null===e.return||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}(r)&&(2===(e=mu(t,i))&&(0!==(o=ge(t))&&(i=o,e=su(t,o))),1===e))throw n=Al,du(t,0),au(t,i),iu(t,$t()),n;switch(t.finishedWork=r,t.finishedLanes=i,e){case 0:case 1:throw Error(s(345));case 2:case 5:wu(t,jl,Ul);break;case 3:if(au(t,i),(130023424&i)===i&&10<(e=Yl+500-$t())){if(0!==de(t,0))break;if(((r=t.suspendedLanes)&i)!==i){tu(),t.pingedLanes|=t.suspendedLanes&r;break}t.timeoutHandle=ir(wu.bind(null,t,jl,Ul),e);break}wu(t,jl,Ul);break;case 4:if(au(t,i),(4194240&i)===i)break;for(e=t.eventTimes,r=-1;0<i;){var a=31-oe(i);o=1<<a,(a=e[a])>r&&(r=a),i&=~o}if(i=r,10<(i=(120>(i=$t()-i)?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*Sl(i/1960))-i)){t.timeoutHandle=ir(wu.bind(null,t,jl,Ul),i);break}wu(t,jl,Ul);break;default:throw Error(s(329))}}}return iu(t,$t()),t.callbackNode===n?ru.bind(null,t):null}function su(t,e){var n=Gl;return t.current.memoizedState.isDehydrated&&(du(t,e).flags|=256),2!==(t=mu(t,e))&&(e=jl,jl=n,null!==e&&ou(e)),t}function ou(t){null===jl?jl=t:jl.push.apply(jl,t)}function au(t,e){for(e&=~zl,e&=~Dl,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-oe(e),i=1<<n;t[n]=-1,e&=~i}}function lu(t){if(0!==(6&Tl))throw Error(s(327));ku();var e=de(t,0);if(0===(1&e))return iu(t,$t()),null;var n=mu(t,e);if(0!==t.tag&&2===n){var i=ge(t);0!==i&&(e=i,n=su(t,i))}if(1===n)throw n=Al,du(t,0),au(t,e),iu(t,$t()),n;if(6===n)throw Error(s(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,wu(t,jl,Ul),iu(t,$t()),null}function uu(t,e){var n=Tl;Tl|=1;try{return t(e)}finally{0===(Tl=n)&&(Bl=$t()+500,Gr&&Br())}}function hu(t){null!==Hl&&0===Hl.tag&&0===(6&Tl)&&ku();var e=Tl;Tl|=1;var n=Il.transition,i=ve;try{if(Il.transition=null,ve=1,t)return t()}finally{ve=i,Il.transition=n,0===(6&(Tl=e))&&Br()}}function cu(){Ml=Pl.current,br(Pl)}function du(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(-1!==n&&(t.timeoutHandle=-1,rr(n)),null!==Nl)for(n=Nl.return;null!==n;){var i=n;switch(es(i),i.tag){case 1:null!==(i=i.type.childContextTypes)&&void 0!==i&&Pr();break;case 3:Zs(),br(Rr),br(Tr),no();break;case 5:Js(i);break;case 4:Zs();break;case 13:case 19:br(Qs);break;case 10:Is(i.type._context);break;case 22:case 23:cu()}n=n.return}if(Rl=t,Nl=t=Pu(t.current,null),Ll=Ml=e,Ol=0,Al=null,zl=Dl=Fl=0,jl=Gl=null,null!==Ls){for(e=0;e<Ls.length;e++)if(null!==(i=(n=Ls[e]).interleaved)){n.interleaved=null;var r=i.next,s=n.pending;if(null!==s){var o=s.next;s.next=r,i.next=o}n.pending=i}Ls=null}return t}function fu(t,e){for(;;){var n=Nl;try{if(Cs(),io.current=Jo,uo){for(var i=oo.memoizedState;null!==i;){var r=i.queue;null!==r&&(r.pending=null),i=i.next}uo=!1}if(so=0,lo=ao=oo=null,ho=!1,co=0,Cl.current=null,null===n||null===n.return){Ol=1,Al=e,Nl=null;break}t:{var o=t,a=n.return,l=n,u=e;if(e=Ll,l.flags|=32768,null!==u&&"object"===typeof u&&"function"===typeof u.then){var h=u,c=l,d=c.tag;if(0===(1&c.mode)&&(0===d||11===d||15===d)){var f=c.alternate;f?(c.updateQueue=f.updateQueue,c.memoizedState=f.memoizedState,c.lanes=f.lanes):(c.updateQueue=null,c.memoizedState=null)}var g=ma(a);if(null!==g){g.flags&=-257,ya(g,a,l,0,e),1&g.mode&&pa(o,h,e),u=h;var p=(e=g).updateQueue;if(null===p){var m=new Set;m.add(u),e.updateQueue=m}else p.add(u);break t}if(0===(1&e)){pa(o,h,e),pu();break t}u=Error(s(426))}else if(rs&&1&l.mode){var y=ma(a);if(null!==y){0===(65536&y.flags)&&(y.flags|=256),ya(y,a,l,0,e),gs(ua(u,l));break t}}o=u=ua(u,l),4!==Ol&&(Ol=2),null===Gl?Gl=[o]:Gl.push(o),o=a;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e,Ys(o,fa(0,u,e));break t;case 1:l=u;var _=o.type,v=o.stateNode;if(0===(128&o.flags)&&("function"===typeof _.getDerivedStateFromError||null!==v&&"function"===typeof v.componentDidCatch&&(null===Wl||!Wl.has(v)))){o.flags|=65536,e&=-e,o.lanes|=e,Ys(o,ga(o,l,e));break t}}o=o.return}while(null!==o)}xu(n)}catch(x){e=x,Nl===n&&null!==n&&(Nl=n=n.return);continue}break}}function gu(){var t=bl.current;return bl.current=Jo,null===t?Jo:t}function pu(){0!==Ol&&3!==Ol&&2!==Ol||(Ol=4),null===Rl||0===(268435455&Fl)&&0===(268435455&Dl)||au(Rl,Ll)}function mu(t,e){var n=Tl;Tl|=2;var i=gu();for(Rl===t&&Ll===e||(Ul=null,du(t,e));;)try{yu();break}catch(r){fu(t,r)}if(Cs(),Tl=n,bl.current=i,null!==Nl)throw Error(s(261));return Rl=null,Ll=0,Ol}function yu(){for(;null!==Nl;)vu(Nl)}function _u(){for(;null!==Nl&&!Kt();)vu(Nl)}function vu(t){var e=El(t.alternate,t,Ml);t.memoizedProps=t.pendingProps,null===e?xu(t):Nl=e,Cl.current=null}function xu(t){var e=t;do{var n=e.alternate;if(t=e.return,0===(32768&e.flags)){if(null!==(n=Va(n,e,Ml)))return void(Nl=n)}else{if(null!==(n=Ha(n,e)))return n.flags&=32767,void(Nl=n);if(null===t)return Ol=6,void(Nl=null);t.flags|=32768,t.subtreeFlags=0,t.deletions=null}if(null!==(e=e.sibling))return void(Nl=e);Nl=e=t}while(null!==e);0===Ol&&(Ol=5)}function wu(t,e,n){var i=ve,r=Il.transition;try{Il.transition=null,ve=1,function(t,e,n,i){do{ku()}while(null!==Hl);if(0!==(6&Tl))throw Error(s(327));n=t.finishedWork;var r=t.finishedLanes;if(null===n)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(s(177));t.callbackNode=null,t.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var i=t.eventTimes;for(t=t.expirationTimes;0<n;){var r=31-oe(n),s=1<<r;e[r]=0,i[r]=-1,t[r]=-1,n&=~s}}(t,o),t===Rl&&(Nl=Rl=null,Ll=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Vl||(Vl=!0,Ru(ee,(function(){return ku(),null}))),o=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||o){o=Il.transition,Il.transition=null;var a=ve;ve=1;var l=Tl;Tl|=4,Cl.current=null,function(t,e){if(tr=Xe,fi(t=di())){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else t:{var i=(n=(n=t.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(i&&0!==i.rangeCount){n=i.anchorNode;var r=i.anchorOffset,o=i.focusNode;i=i.focusOffset;try{n.nodeType,o.nodeType}catch(w){n=null;break t}var a=0,l=-1,u=-1,h=0,c=0,d=t,f=null;e:for(;;){for(var g;d!==n||0!==r&&3!==d.nodeType||(l=a+r),d!==o||0!==i&&3!==d.nodeType||(u=a+i),3===d.nodeType&&(a+=d.nodeValue.length),null!==(g=d.firstChild);)f=d,d=g;for(;;){if(d===t)break e;if(f===n&&++h===r&&(l=a),f===o&&++c===i&&(u=a),null!==(g=d.nextSibling))break;f=(d=f).parentNode}d=g}n=-1===l||-1===u?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(er={focusedElem:t,selectionRange:n},Xe=!1,Ja=e;null!==Ja;)if(t=(e=Ja).child,0!==(1028&e.subtreeFlags)&&null!==t)t.return=e,Ja=t;else for(;null!==Ja;){e=Ja;try{var p=e.alternate;if(0!==(1024&e.flags))switch(e.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==p){var m=p.memoizedProps,y=p.memoizedState,_=e.stateNode,v=_.getSnapshotBeforeUpdate(e.elementType===e.type?m:na(e.type,m),y);_.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var x=e.stateNode.containerInfo;1===x.nodeType?x.textContent="":9===x.nodeType&&x.documentElement&&x.removeChild(x.documentElement);break;default:throw Error(s(163))}}catch(w){Su(e,e.return,w)}if(null!==(t=e.sibling)){t.return=e.return,Ja=t;break}Ja=e.return}p=el,el=!1}(t,n),ml(n,t),gi(er),Xe=!!tr,er=tr=null,t.current=n,_l(n,t,r),Zt(),Tl=l,ve=a,Il.transition=o}else t.current=n;if(Vl&&(Vl=!1,Hl=t,Kl=r),o=t.pendingLanes,0===o&&(Wl=null),function(t){if(se&&"function"===typeof se.onCommitFiberRoot)try{se.onCommitFiberRoot(re,t,void 0,128===(128&t.current.flags))}catch(e){}}(n.stateNode),iu(t,$t()),null!==e)for(i=t.onRecoverableError,n=0;n<e.length;n++)r=e[n],i(r.value,{componentStack:r.stack,digest:r.digest});if(Xl)throw Xl=!1,t=ql,ql=null,t;0!==(1&Kl)&&0!==t.tag&&ku(),o=t.pendingLanes,0!==(1&o)?t===$l?Zl++:(Zl=0,$l=t):Zl=0,Br()}(t,e,n,i)}finally{Il.transition=r,ve=i}return null}function ku(){if(null!==Hl){var t=xe(Kl),e=Il.transition,n=ve;try{if(Il.transition=null,ve=16>t?16:t,null===Hl)var i=!1;else{if(t=Hl,Hl=null,Kl=0,0!==(6&Tl))throw Error(s(331));var r=Tl;for(Tl|=4,Ja=t.current;null!==Ja;){var o=Ja,a=o.child;if(0!==(16&Ja.flags)){var l=o.deletions;if(null!==l){for(var u=0;u<l.length;u++){var h=l[u];for(Ja=h;null!==Ja;){var c=Ja;switch(c.tag){case 0:case 11:case 15:nl(8,c,o)}var d=c.child;if(null!==d)d.return=c,Ja=d;else for(;null!==Ja;){var f=(c=Ja).sibling,g=c.return;if(sl(c),c===h){Ja=null;break}if(null!==f){f.return=g,Ja=f;break}Ja=g}}}var p=o.alternate;if(null!==p){var m=p.child;if(null!==m){p.child=null;do{var y=m.sibling;m.sibling=null,m=y}while(null!==m)}}Ja=o}}if(0!==(2064&o.subtreeFlags)&&null!==a)a.return=o,Ja=a;else t:for(;null!==Ja;){if(0!==(2048&(o=Ja).flags))switch(o.tag){case 0:case 11:case 15:nl(9,o,o.return)}var _=o.sibling;if(null!==_){_.return=o.return,Ja=_;break t}Ja=o.return}}var v=t.current;for(Ja=v;null!==Ja;){var x=(a=Ja).child;if(0!==(2064&a.subtreeFlags)&&null!==x)x.return=a,Ja=x;else t:for(a=v;null!==Ja;){if(0!==(2048&(l=Ja).flags))try{switch(l.tag){case 0:case 11:case 15:il(9,l)}}catch(k){Su(l,l.return,k)}if(l===a){Ja=null;break t}var w=l.sibling;if(null!==w){w.return=l.return,Ja=w;break t}Ja=l.return}}if(Tl=r,Br(),se&&"function"===typeof se.onPostCommitFiberRoot)try{se.onPostCommitFiberRoot(re,t)}catch(k){}i=!0}return i}finally{ve=n,Il.transition=e}}return!1}function Eu(t,e,n){t=Gs(t,e=fa(0,e=ua(n,e),1),1),e=tu(),null!==t&&(ye(t,1,e),iu(t,e))}function Su(t,e,n){if(3===t.tag)Eu(t,t,n);else for(;null!==e;){if(3===e.tag){Eu(e,t,n);break}if(1===e.tag){var i=e.stateNode;if("function"===typeof e.type.getDerivedStateFromError||"function"===typeof i.componentDidCatch&&(null===Wl||!Wl.has(i))){e=Gs(e,t=ga(e,t=ua(n,t),1),1),t=tu(),null!==e&&(ye(e,1,t),iu(e,t));break}}e=e.return}}function bu(t,e,n){var i=t.pingCache;null!==i&&i.delete(e),e=tu(),t.pingedLanes|=t.suspendedLanes&n,Rl===t&&(Ll&n)===n&&(4===Ol||3===Ol&&(130023424&Ll)===Ll&&500>$t()-Yl?du(t,0):zl|=n),iu(t,e)}function Cu(t,e){0===e&&(0===(1&t.mode)?e=1:(e=he,0===(130023424&(he<<=1))&&(he=4194304)));var n=tu();null!==(t=Os(t,e))&&(ye(t,e,n),iu(t,n))}function Iu(t){var e=t.memoizedState,n=0;null!==e&&(n=e.retryLane),Cu(t,n)}function Tu(t,e){var n=0;switch(t.tag){case 13:var i=t.stateNode,r=t.memoizedState;null!==r&&(n=r.retryLane);break;case 19:i=t.stateNode;break;default:throw Error(s(314))}null!==i&&i.delete(e),Cu(t,n)}function Ru(t,e){return Vt(t,e)}function Nu(t,e,n,i){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Lu(t,e,n,i){return new Nu(t,e,n,i)}function Mu(t){return!(!(t=t.prototype)||!t.isReactComponent)}function Pu(t,e){var n=t.alternate;return null===n?((n=Lu(t.tag,e,t.key,t.mode)).elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&t.flags,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Ou(t,e,n,i,r,o){var a=2;if(i=t,"function"===typeof t)Mu(t)&&(a=1);else if("string"===typeof t)a=5;else t:switch(t){case E:return Au(n.children,r,o,e);case S:a=8,r|=8;break;case b:return(t=Lu(12,n,e,2|r)).elementType=b,t.lanes=o,t;case R:return(t=Lu(13,n,e,r)).elementType=R,t.lanes=o,t;case N:return(t=Lu(19,n,e,r)).elementType=N,t.lanes=o,t;case P:return Fu(n,r,o,e);default:if("object"===typeof t&&null!==t)switch(t.$$typeof){case C:a=10;break t;case I:a=9;break t;case T:a=11;break t;case L:a=14;break t;case M:a=16,i=null;break t}throw Error(s(130,null==t?t:typeof t,""))}return(e=Lu(a,n,e,r)).elementType=t,e.type=i,e.lanes=o,e}function Au(t,e,n,i){return(t=Lu(7,t,i,e)).lanes=n,t}function Fu(t,e,n,i){return(t=Lu(22,t,i,e)).elementType=P,t.lanes=n,t.stateNode={isHidden:!1},t}function Du(t,e,n){return(t=Lu(6,t,null,e)).lanes=n,t}function zu(t,e,n){return(e=Lu(4,null!==t.children?t.children:[],t.key,e)).lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Gu(t,e,n,i,r){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=me(0),this.expirationTimes=me(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=me(0),this.identifierPrefix=i,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function ju(t,e,n,i,r,s,o,a,l){return t=new Gu(t,e,n,a,l),1===e?(e=1,!0===s&&(e|=8)):e=0,s=Lu(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Fs(s),t}function Yu(t){if(!t)return Ir;t:{if(Bt(t=t._reactInternals)!==t||1!==t.tag)throw Error(s(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break t;case 1:if(Mr(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break t}}e=e.return}while(null!==e);throw Error(s(171))}if(1===t.tag){var n=t.type;if(Mr(n))return Ar(t,n,e)}return e}function Bu(t,e,n,i,r,s,o,a,l){return(t=ju(n,i,!0,t,0,s,0,a,l)).context=Yu(null),n=t.current,(s=zs(i=tu(),r=eu(n))).callback=void 0!==e&&null!==e?e:null,Gs(n,s,r),t.current.lanes=r,ye(t,r,i),iu(t,i),t}function Uu(t,e,n,i){var r=e.current,s=tu(),o=eu(r);return n=Yu(n),null===e.context?e.context=n:e.pendingContext=n,(e=zs(s,o)).payload={element:t},null!==(i=void 0===i?null:i)&&(e.callback=i),null!==(t=Gs(r,e,o))&&(nu(t,r,o,s),js(t,r,o)),o}function Xu(t){return(t=t.current).child?(t.child.tag,t.child.stateNode):null}function qu(t,e){if(null!==(t=t.memoizedState)&&null!==t.dehydrated){var n=t.retryLane;t.retryLane=0!==n&&n<e?n:e}}function Wu(t,e){qu(t,e),(t=t.alternate)&&qu(t,e)}El=function(t,e,n){if(null!==t)if(t.memoizedProps!==e.pendingProps||Rr.current)va=!0;else{if(0===(t.lanes&n)&&0===(128&e.flags))return va=!1,function(t,e,n){switch(e.tag){case 3:Ra(e),fs();break;case 5:$s(e);break;case 1:Mr(e.type)&&Fr(e);break;case 4:Ks(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,r=e.memoizedProps.value;Cr(ks,i._currentValue),i._currentValue=r;break;case 13:if(null!==(i=e.memoizedState))return null!==i.dehydrated?(Cr(Qs,1&Qs.current),e.flags|=128,null):0!==(n&e.child.childLanes)?Da(t,e,n):(Cr(Qs,1&Qs.current),null!==(t=Xa(t,e,n))?t.sibling:null);Cr(Qs,1&Qs.current);break;case 19:if(i=0!==(n&e.childLanes),0!==(128&t.flags)){if(i)return Ba(t,e,n);e.flags|=128}if(null!==(r=e.memoizedState)&&(r.rendering=null,r.tail=null,r.lastEffect=null),Cr(Qs,Qs.current),i)break;return null;case 22:case 23:return e.lanes=0,Sa(t,e,n)}return Xa(t,e,n)}(t,e,n);va=0!==(131072&t.flags)}else va=!1,rs&&0!==(1048576&e.flags)&&Qr(e,Wr,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;Ua(t,e),t=e.pendingProps;var r=Lr(e,Tr.current);Rs(e,n),r=mo(null,e,i,t,r,n);var o=yo();return e.flags|=1,"object"===typeof r&&null!==r&&"function"===typeof r.render&&void 0===r.$$typeof?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Mr(i)?(o=!0,Fr(e)):o=!1,e.memoizedState=null!==r.state&&void 0!==r.state?r.state:null,Fs(e),r.updater=ra,e.stateNode=r,r._reactInternals=e,la(e,i,t,n),e=Ta(null,e,i,!0,o,n)):(e.tag=0,rs&&o&&ts(e),xa(null,e,r,n),e=e.child),e;case 16:i=e.elementType;t:{switch(Ua(t,e),t=e.pendingProps,i=(r=i._init)(i._payload),e.type=i,r=e.tag=function(t){if("function"===typeof t)return Mu(t)?1:0;if(void 0!==t&&null!==t){if((t=t.$$typeof)===T)return 11;if(t===L)return 14}return 2}(i),t=na(i,t),r){case 0:e=Ca(null,e,i,t,n);break t;case 1:e=Ia(null,e,i,t,n);break t;case 11:e=wa(null,e,i,t,n);break t;case 14:e=ka(null,e,i,na(i.type,t),n);break t}throw Error(s(306,i,""))}return e;case 0:return i=e.type,r=e.pendingProps,Ca(t,e,i,r=e.elementType===i?r:na(i,r),n);case 1:return i=e.type,r=e.pendingProps,Ia(t,e,i,r=e.elementType===i?r:na(i,r),n);case 3:t:{if(Ra(e),null===t)throw Error(s(387));i=e.pendingProps,r=(o=e.memoizedState).element,Ds(t,e),Bs(e,i,null,n);var a=e.memoizedState;if(i=a.element,o.isDehydrated){if(o={element:i,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=o,e.memoizedState=o,256&e.flags){e=Na(t,e,i,n,r=ua(Error(s(423)),e));break t}if(i!==r){e=Na(t,e,i,n,r=ua(Error(s(424)),e));break t}for(is=ur(e.stateNode.containerInfo.firstChild),ns=e,rs=!0,ss=null,n=ws(e,null,i,n),e.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(fs(),i===r){e=Xa(t,e,n);break t}xa(t,e,i,n)}e=e.child}return e;case 5:return $s(e),null===t&&us(e),i=e.type,r=e.pendingProps,o=null!==t?t.memoizedProps:null,a=r.children,nr(i,r)?a=null:null!==o&&nr(i,o)&&(e.flags|=32),ba(t,e),xa(t,e,a,n),e.child;case 6:return null===t&&us(e),null;case 13:return Da(t,e,n);case 4:return Ks(e,e.stateNode.containerInfo),i=e.pendingProps,null===t?e.child=xs(e,null,i,n):xa(t,e,i,n),e.child;case 11:return i=e.type,r=e.pendingProps,wa(t,e,i,r=e.elementType===i?r:na(i,r),n);case 7:return xa(t,e,e.pendingProps,n),e.child;case 8:case 12:return xa(t,e,e.pendingProps.children,n),e.child;case 10:t:{if(i=e.type._context,r=e.pendingProps,o=e.memoizedProps,a=r.value,Cr(ks,i._currentValue),i._currentValue=a,null!==o)if(ai(o.value,a)){if(o.children===r.children&&!Rr.current){e=Xa(t,e,n);break t}}else for(null!==(o=e.child)&&(o.return=e);null!==o;){var l=o.dependencies;if(null!==l){a=o.child;for(var u=l.firstContext;null!==u;){if(u.context===i){if(1===o.tag){(u=zs(-1,n&-n)).tag=2;var h=o.updateQueue;if(null!==h){var c=(h=h.shared).pending;null===c?u.next=u:(u.next=c.next,c.next=u),h.pending=u}}o.lanes|=n,null!==(u=o.alternate)&&(u.lanes|=n),Ts(o.return,n,e),l.lanes|=n;break}u=u.next}}else if(10===o.tag)a=o.type===e.type?null:o.child;else if(18===o.tag){if(null===(a=o.return))throw Error(s(341));a.lanes|=n,null!==(l=a.alternate)&&(l.lanes|=n),Ts(a,n,e),a=o.sibling}else a=o.child;if(null!==a)a.return=o;else for(a=o;null!==a;){if(a===e){a=null;break}if(null!==(o=a.sibling)){o.return=a.return,a=o;break}a=a.return}o=a}xa(t,e,r.children,n),e=e.child}return e;case 9:return r=e.type,i=e.pendingProps.children,Rs(e,n),i=i(r=Ns(r)),e.flags|=1,xa(t,e,i,n),e.child;case 14:return r=na(i=e.type,e.pendingProps),ka(t,e,i,r=na(i.type,r),n);case 15:return Ea(t,e,e.type,e.pendingProps,n);case 17:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:na(i,r),Ua(t,e),e.tag=1,Mr(i)?(t=!0,Fr(e)):t=!1,Rs(e,n),oa(e,i,r),la(e,i,r,n),Ta(null,e,i,!0,t,n);case 19:return Ba(t,e,n);case 22:return Sa(t,e,n)}throw Error(s(156,e.tag))};var Vu="function"===typeof reportError?reportError:function(t){console.error(t)};function Hu(t){this._internalRoot=t}function Ku(t){this._internalRoot=t}function Zu(t){return!(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType)}function $u(t){return!(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType&&(8!==t.nodeType||" react-mount-point-unstable "!==t.nodeValue))}function Ju(){}function Qu(t,e,n,i,r){var s=n._reactRootContainer;if(s){var o=s;if("function"===typeof r){var a=r;r=function(){var t=Xu(o);a.call(t)}}Uu(e,o,t,r)}else o=function(t,e,n,i,r){if(r){if("function"===typeof i){var s=i;i=function(){var t=Xu(o);s.call(t)}}var o=Bu(e,i,t,0,null,!1,0,"",Ju);return t._reactRootContainer=o,t[gr]=o.current,Bi(8===t.nodeType?t.parentNode:t),hu(),o}for(;r=t.lastChild;)t.removeChild(r);if("function"===typeof i){var a=i;i=function(){var t=Xu(l);a.call(t)}}var l=ju(t,0,!1,null,0,!1,0,"",Ju);return t._reactRootContainer=l,t[gr]=l.current,Bi(8===t.nodeType?t.parentNode:t),hu((function(){Uu(e,l,n,i)})),l}(n,e,t,r,i);return Xu(o)}Ku.prototype.render=Hu.prototype.render=function(t){var e=this._internalRoot;if(null===e)throw Error(s(409));Uu(t,e,null,null)},Ku.prototype.unmount=Hu.prototype.unmount=function(){var t=this._internalRoot;if(null!==t){this._internalRoot=null;var e=t.containerInfo;hu((function(){Uu(null,t,null,null)})),e[gr]=null}},Ku.prototype.unstable_scheduleHydration=function(t){if(t){var e=Se();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Pe.length&&0!==e&&e<Pe[n].priority;n++);Pe.splice(n,0,t),0===n&&De(t)}},we=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=ce(e.pendingLanes);0!==n&&(_e(e,1|n),iu(e,$t()),0===(6&Tl)&&(Bl=$t()+500,Br()))}break;case 13:hu((function(){var e=Os(t,1);if(null!==e){var n=tu();nu(e,t,1,n)}})),Wu(t,1)}},ke=function(t){if(13===t.tag){var e=Os(t,134217728);if(null!==e)nu(e,t,134217728,tu());Wu(t,134217728)}},Ee=function(t){if(13===t.tag){var e=eu(t),n=Os(t,e);if(null!==n)nu(n,t,e,tu());Wu(t,e)}},Se=function(){return ve},be=function(t,e){var n=ve;try{return ve=t,e()}finally{ve=n}},kt=function(t,e,n){switch(e){case"input":if(J(t,n),e=n.name,"radio"===n.type&&null!=e){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var r=wr(i);if(!r)throw Error(s(90));V(i),J(i,r)}}}break;case"textarea":st(t,n);break;case"select":null!=(e=n.value)&&nt(t,!!n.multiple,e,!1)}},Tt=uu,Rt=hu;var th={usingClientEntryPoint:!1,Events:[vr,xr,wr,Ct,It,uu]},eh={findFiberByHostInstance:_r,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},nh={bundleType:eh.bundleType,version:eh.version,rendererPackageName:eh.rendererPackageName,rendererConfig:eh.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:x.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return null===(t=qt(t))?null:t.stateNode},findFiberByHostInstance:eh.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var ih=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ih.isDisabled&&ih.supportsFiber)try{re=ih.inject(nh),se=ih}catch(ht){}}e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=th,e.createPortal=function(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Zu(e))throw Error(s(200));return function(t,e,n){var i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:k,key:null==i?null:""+i,children:t,containerInfo:e,implementation:n}}(t,e,null,n)},e.createRoot=function(t,e){if(!Zu(t))throw Error(s(299));var n=!1,i="",r=Vu;return null!==e&&void 0!==e&&(!0===e.unstable_strictMode&&(n=!0),void 0!==e.identifierPrefix&&(i=e.identifierPrefix),void 0!==e.onRecoverableError&&(r=e.onRecoverableError)),e=ju(t,1,!1,null,0,n,0,i,r),t[gr]=e.current,Bi(8===t.nodeType?t.parentNode:t),new Hu(e)},e.findDOMNode=function(t){if(null==t)return null;if(1===t.nodeType)return t;var e=t._reactInternals;if(void 0===e){if("function"===typeof t.render)throw Error(s(188));throw t=Object.keys(t).join(","),Error(s(268,t))}return t=null===(t=qt(e))?null:t.stateNode},e.flushSync=function(t){return hu(t)},e.hydrate=function(t,e,n){if(!$u(e))throw Error(s(200));return Qu(null,t,e,!0,n)},e.hydrateRoot=function(t,e,n){if(!Zu(t))throw Error(s(405));var i=null!=n&&n.hydratedSources||null,r=!1,o="",a=Vu;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(r=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(a=n.onRecoverableError)),e=Bu(e,null,t,1,null!=n?n:null,r,0,o,a),t[gr]=e.current,Bi(t),i)for(t=0;t<i.length;t++)r=(r=(n=i[t])._getVersion)(n._source),null==e.mutableSourceEagerHydrationData?e.mutableSourceEagerHydrationData=[n,r]:e.mutableSourceEagerHydrationData.push(n,r);return new Ku(e)},e.render=function(t,e,n){if(!$u(e))throw Error(s(200));return Qu(null,t,e,!1,n)},e.unmountComponentAtNode=function(t){if(!$u(t))throw Error(s(40));return!!t._reactRootContainer&&(hu((function(){Qu(null,null,t,!1,(function(){t._reactRootContainer=null,t[gr]=null}))})),!0)},e.unstable_batchedUpdates=uu,e.unstable_renderSubtreeIntoContainer=function(t,e,n,i){if(!$u(n))throw Error(s(200));if(null==t||void 0===t._reactInternals)throw Error(s(38));return Qu(t,e,n,!1,i)},e.version="18.3.1-next-f1338f8080-20240426"},950:(t,e,n)=>{"use strict";!function t(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}(),t.exports=n(730)},358:(t,e)=>{"use strict";const n=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,i=/^[\u0021-\u003A\u003C-\u007E]*$/,r=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,s=/^[\u0020-\u003A\u003D-\u007E]*$/,o=Object.prototype.toString,a=(()=>{const t=function(){};return t.prototype=Object.create(null),t})();function l(t,e,n){do{const n=t.charCodeAt(e);if(32!==n&&9!==n)return e}while(++e<n);return n}function u(t,e,n){for(;e>n;){const n=t.charCodeAt(--e);if(32!==n&&9!==n)return e+1}return n}function h(t){if(-1===t.indexOf("%"))return t;try{return decodeURIComponent(t)}catch(e){return t}}},153:(t,e,n)=>{"use strict";var i=n(43),r=Symbol.for("react.element"),s=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,a=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function u(t,e,n){var i,s={},u=null,h=null;for(i in void 0!==n&&(u=""+n),void 0!==e.key&&(u=""+e.key),void 0!==e.ref&&(h=e.ref),e)o.call(e,i)&&!l.hasOwnProperty(i)&&(s[i]=e[i]);if(t&&t.defaultProps)for(i in e=t.defaultProps)void 0===s[i]&&(s[i]=e[i]);return{$$typeof:r,type:t,key:u,ref:h,props:s,_owner:a.current}}e.Fragment=s,e.jsx=u,e.jsxs=u},202:(t,e)=>{"use strict";var n=Symbol.for("react.element"),i=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),c=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),f=Symbol.iterator;var g={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},p=Object.assign,m={};function y(t,e,n){this.props=t,this.context=e,this.refs=m,this.updater=n||g}function _(){}function v(t,e,n){this.props=t,this.context=e,this.refs=m,this.updater=n||g}y.prototype.isReactComponent={},y.prototype.setState=function(t,e){if("object"!==typeof t&&"function"!==typeof t&&null!=t)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")},y.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")},_.prototype=y.prototype;var x=v.prototype=new _;x.constructor=v,p(x,y.prototype),x.isPureReactComponent=!0;var w=Array.isArray,k=Object.prototype.hasOwnProperty,E={current:null},S={key:!0,ref:!0,__self:!0,__source:!0};function b(t,e,i){var r,s={},o=null,a=null;if(null!=e)for(r in void 0!==e.ref&&(a=e.ref),void 0!==e.key&&(o=""+e.key),e)k.call(e,r)&&!S.hasOwnProperty(r)&&(s[r]=e[r]);var l=arguments.length-2;if(1===l)s.children=i;else if(1<l){for(var u=Array(l),h=0;h<l;h++)u[h]=arguments[h+2];s.children=u}if(t&&t.defaultProps)for(r in l=t.defaultProps)void 0===s[r]&&(s[r]=l[r]);return{$$typeof:n,type:t,key:o,ref:a,props:s,_owner:E.current}}function C(t){return"object"===typeof t&&null!==t&&t.$$typeof===n}var I=/\/+/g;function T(t,e){return"object"===typeof t&&null!==t&&null!=t.key?function(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,(function(t){return e[t]}))}(""+t.key):e.toString(36)}function R(t,e,r,s,o){var a=typeof t;"undefined"!==a&&"boolean"!==a||(t=null);var l=!1;if(null===t)l=!0;else switch(a){case"string":case"number":l=!0;break;case"object":switch(t.$$typeof){case n:case i:l=!0}}if(l)return o=o(l=t),t=""===s?"."+T(l,0):s,w(o)?(r="",null!=t&&(r=t.replace(I,"$&/")+"/"),R(o,e,r,"",(function(t){return t}))):null!=o&&(C(o)&&(o=function(t,e){return{$$typeof:n,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}(o,r+(!o.key||l&&l.key===o.key?"":(""+o.key).replace(I,"$&/")+"/")+t)),e.push(o)),1;if(l=0,s=""===s?".":s+":",w(t))for(var u=0;u<t.length;u++){var h=s+T(a=t[u],u);l+=R(a,e,r,h,o)}else if(h=function(t){return null===t||"object"!==typeof t?null:"function"===typeof(t=f&&t[f]||t["@@iterator"])?t:null}(t),"function"===typeof h)for(t=h.call(t),u=0;!(a=t.next()).done;)l+=R(a=a.value,e,r,h=s+T(a,u++),o);else if("object"===a)throw e=String(t),Error("Objects are not valid as a React child (found: "+("[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return l}function N(t,e,n){if(null==t)return t;var i=[],r=0;return R(t,i,"","",(function(t){return e.call(n,t,r++)})),i}function L(t){if(-1===t._status){var e=t._result;(e=e()).then((function(e){0!==t._status&&-1!==t._status||(t._status=1,t._result=e)}),(function(e){0!==t._status&&-1!==t._status||(t._status=2,t._result=e)})),-1===t._status&&(t._status=0,t._result=e)}if(1===t._status)return t._result.default;throw t._result}var M={current:null},P={transition:null},O={ReactCurrentDispatcher:M,ReactCurrentBatchConfig:P,ReactCurrentOwner:E};function A(){throw Error("act(...) is not supported in production builds of React.")}e.Children={map:N,forEach:function(t,e,n){N(t,(function(){e.apply(this,arguments)}),n)},count:function(t){var e=0;return N(t,(function(){e++})),e},toArray:function(t){return N(t,(function(t){return t}))||[]},only:function(t){if(!C(t))throw Error("React.Children.only expected to receive a single React element child.");return t}},e.Component=y,e.Fragment=r,e.Profiler=o,e.PureComponent=v,e.StrictMode=s,e.Suspense=h,e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=O,e.act=A,e.cloneElement=function(t,e,i){if(null===t||void 0===t)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=p({},t.props),s=t.key,o=t.ref,a=t._owner;if(null!=e){if(void 0!==e.ref&&(o=e.ref,a=E.current),void 0!==e.key&&(s=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(u in e)k.call(e,u)&&!S.hasOwnProperty(u)&&(r[u]=void 0===e[u]&&void 0!==l?l[u]:e[u])}var u=arguments.length-2;if(1===u)r.children=i;else if(1<u){l=Array(u);for(var h=0;h<u;h++)l[h]=arguments[h+2];r.children=l}return{$$typeof:n,type:t.type,key:s,ref:o,props:r,_owner:a}},e.createContext=function(t){return(t={$$typeof:l,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:a,_context:t},t.Consumer=t},e.createElement=b,e.createFactory=function(t){var e=b.bind(null,t);return e.type=t,e},e.createRef=function(){return{current:null}},e.forwardRef=function(t){return{$$typeof:u,render:t}},e.isValidElement=C,e.lazy=function(t){return{$$typeof:d,_payload:{_status:-1,_result:t},_init:L}},e.memo=function(t,e){return{$$typeof:c,type:t,compare:void 0===e?null:e}},e.startTransition=function(t){var e=P.transition;P.transition={};try{t()}finally{P.transition=e}},e.unstable_act=A,e.useCallback=function(t,e){return M.current.useCallback(t,e)},e.useContext=function(t){return M.current.useContext(t)},e.useDebugValue=function(){},e.useDeferredValue=function(t){return M.current.useDeferredValue(t)},e.useEffect=function(t,e){return M.current.useEffect(t,e)},e.useId=function(){return M.current.useId()},e.useImperativeHandle=function(t,e,n){return M.current.useImperativeHandle(t,e,n)},e.useInsertionEffect=function(t,e){return M.current.useInsertionEffect(t,e)},e.useLayoutEffect=function(t,e){return M.current.useLayoutEffect(t,e)},e.useMemo=function(t,e){return M.current.useMemo(t,e)},e.useReducer=function(t,e,n){return M.current.useReducer(t,e,n)},e.useRef=function(t){return M.current.useRef(t)},e.useState=function(t){return M.current.useState(t)},e.useSyncExternalStore=function(t,e,n){return M.current.useSyncExternalStore(t,e,n)},e.useTransition=function(){return M.current.useTransition()},e.version="18.3.1"},43:(t,e,n)=>{"use strict";t.exports=n(202)},579:(t,e,n)=>{"use strict";t.exports=n(153)},234:(t,e)=>{"use strict";function n(t,e){var n=t.length;t.push(e);t:for(;0<n;){var i=n-1>>>1,r=t[i];if(!(0<s(r,e)))break t;t[i]=e,t[n]=r,n=i}}function i(t){return 0===t.length?null:t[0]}function r(t){if(0===t.length)return null;var e=t[0],n=t.pop();if(n!==e){t[0]=n;t:for(var i=0,r=t.length,o=r>>>1;i<o;){var a=2*(i+1)-1,l=t[a],u=a+1,h=t[u];if(0>s(l,n))u<r&&0>s(h,l)?(t[i]=h,t[u]=n,i=u):(t[i]=l,t[a]=n,i=a);else{if(!(u<r&&0>s(h,n)))break t;t[i]=h,t[u]=n,i=u}}}return e}function s(t,e){var n=t.sortIndex-e.sortIndex;return 0!==n?n:t.id-e.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;e.unstable_now=function(){return o.now()}}else{var a=Date,l=a.now();e.unstable_now=function(){return a.now()-l}}var u=[],h=[],c=1,d=null,f=3,g=!1,p=!1,m=!1,y="function"===typeof setTimeout?setTimeout:null,_="function"===typeof clearTimeout?clearTimeout:null,v="undefined"!==typeof setImmediate?setImmediate:null;function x(t){for(var e=i(h);null!==e;){if(null===e.callback)r(h);else{if(!(e.startTime<=t))break;r(h),e.sortIndex=e.expirationTime,n(u,e)}e=i(h)}}function w(t){if(m=!1,x(t),!p)if(null!==i(u))p=!0,P(k);else{var e=i(h);null!==e&&O(w,e.startTime-t)}}function k(t,n){p=!1,m&&(m=!1,_(C),C=-1),g=!0;var s=f;try{for(x(n),d=i(u);null!==d&&(!(d.expirationTime>n)||t&&!R());){var o=d.callback;if("function"===typeof o){d.callback=null,f=d.priorityLevel;var a=o(d.expirationTime<=n);n=e.unstable_now(),"function"===typeof a?d.callback=a:d===i(u)&&r(u),x(n)}else r(u);d=i(u)}if(null!==d)var l=!0;else{var c=i(h);null!==c&&O(w,c.startTime-n),l=!1}return l}finally{d=null,f=s,g=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var E,S=!1,b=null,C=-1,I=5,T=-1;function R(){return!(e.unstable_now()-T<I)}function N(){if(null!==b){var t=e.unstable_now();T=t;var n=!0;try{n=b(!0,t)}finally{n?E():(S=!1,b=null)}}else S=!1}if("function"===typeof v)E=function(){v(N)};else if("undefined"!==typeof MessageChannel){var L=new MessageChannel,M=L.port2;L.port1.onmessage=N,E=function(){M.postMessage(null)}}else E=function(){y(N,0)};function P(t){b=t,S||(S=!0,E())}function O(t,n){C=y((function(){t(e.unstable_now())}),n)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(t){t.callback=null},e.unstable_continueExecution=function(){p||g||(p=!0,P(k))},e.unstable_forceFrameRate=function(t){0>t||125<t?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<t?Math.floor(1e3/t):5},e.unstable_getCurrentPriorityLevel=function(){return f},e.unstable_getFirstCallbackNode=function(){return i(u)},e.unstable_next=function(t){switch(f){case 1:case 2:case 3:var e=3;break;default:e=f}var n=f;f=e;try{return t()}finally{f=n}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(t,e){switch(t){case 1:case 2:case 3:case 4:case 5:break;default:t=3}var n=f;f=t;try{return e()}finally{f=n}},e.unstable_scheduleCallback=function(t,r,s){var o=e.unstable_now();switch("object"===typeof s&&null!==s?s="number"===typeof(s=s.delay)&&0<s?o+s:o:s=o,t){case 1:var a=-1;break;case 2:a=250;break;case 5:a=1073741823;break;case 4:a=1e4;break;default:a=5e3}return t={id:c++,callback:r,priorityLevel:t,startTime:s,expirationTime:a=s+a,sortIndex:-1},s>o?(t.sortIndex=s,n(h,t),null===i(u)&&t===i(h)&&(m?(_(C),C=-1):m=!0,O(w,s-o))):(t.sortIndex=a,n(u,t),p||g||(p=!0,P(k))),t},e.unstable_shouldYield=R,e.unstable_wrapCallback=function(t){var e=f;return function(){var n=f;f=e;try{return t.apply(this,arguments)}finally{f=n}}}},853:(t,e,n)=>{"use strict";t.exports=n(234)}},e={};function n(i){var r=e[i];if(void 0!==r)return r.exports;var s=e[i]={exports:{}};return t[i].call(s.exports,s,s.exports,n),s.exports}n.m=t,n.d=(t,e)=>{for(var i in e)n.o(e,i)&&!n.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},n.f={},n.e=t=>Promise.all(Object.keys(n.f).reduce(((e,i)=>(n.f[i](t,e),e)),[])),n.u=t=>"static/js/"+t+".a57aa845.chunk.js",n.miniCssF=t=>{},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{var t={},e="holmes-hub:";n.l=(i,r,s,o)=>{if(t[i])t[i].push(r);else{var a,l;if(void 0!==s)for(var u=document.getElementsByTagName("script"),h=0;h<u.length;h++){var c=u[h];if(c.getAttribute("src")==i||c.getAttribute("data-webpack")==e+s){a=c;break}}a||(l=!0,(a=document.createElement("script")).charset="utf-8",a.timeout=120,n.nc&&a.setAttribute("nonce",n.nc),a.setAttribute("data-webpack",e+s),a.src=i),t[i]=[r];var d=(e,n)=>{a.onerror=a.onload=null,clearTimeout(f);var r=t[i];if(delete t[i],a.parentNode&&a.parentNode.removeChild(a),r&&r.forEach((t=>t(n))),e)return e(n)},f=setTimeout(d.bind(null,void 0,{type:"timeout",target:a}),12e4);a.onerror=d.bind(null,a.onerror),a.onload=d.bind(null,a.onload),l&&document.head.appendChild(a)}}})(),n.r=t=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.p="/",(()=>{var t={792:0};n.f.j=(e,i)=>{var r=n.o(t,e)?t[e]:void 0;if(0!==r)if(r)i.push(r[2]);else{var s=new Promise(((n,i)=>r=t[e]=[n,i]));i.push(r[2]=s);var o=n.p+n.u(e),a=new Error;n.l(o,(i=>{if(n.o(t,e)&&(0!==(r=t[e])&&(t[e]=void 0),r)){var s=i&&("load"===i.type?"missing":i.type),o=i&&i.target&&i.target.src;a.message="Loading chunk "+e+" failed.\n("+s+": "+o+")",a.name="ChunkLoadError",a.type=s,a.request=o,r[1](a)}}),"chunk-"+e,e)}};var e=(e,i)=>{var r,s,o=i[0],a=i[1],l=i[2],u=0;if(o.some((e=>0!==t[e]))){for(r in a)n.o(a,r)&&(n.m[r]=a[r]);if(l)l(n)}for(e&&e(i);u<o.length;u++)s=o[u],n.o(t,s)&&t[s]&&t[s][0](),t[s]=0},i=self.webpackChunkholmes_hub=self.webpackChunkholmes_hub||[];i.forEach(e.bind(null,0)),i.push=e.bind(null,i.push.bind(i))})(),(()=>{"use strict";var t=n(43),e=n(950),i={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},r=t.createContext&&t.createContext(i),s=["attr","size","title"];function o(t,e){if(null==t)return{};var n,i,r=function(t,e){if(null==t)return{};var n={};for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){if(e.indexOf(i)>=0)continue;n[i]=t[i]}return n}(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function a(){return a=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},a.apply(this,arguments)}function l(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function u(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?l(Object(n),!0).forEach((function(e){h(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function h(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function c(e){return e&&e.map(((e,n)=>t.createElement(e.tag,u({key:n},e.attr),c(e.child))))}function d(e){return n=>t.createElement(f,a({attr:u({},e.attr)},n),c(e.child))}function f(e){var n=n=>{var i,{attr:r,size:l,title:h}=e,c=o(e,s),d=l||n.size||"1em";return n.className&&(i=n.className),e.className&&(i=(i?i+" ":"")+e.className),t.createElement("svg",a({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,r,c,{className:i,style:u(u({color:e.color||n.color},n.style),e.style),height:d,width:d,xmlns:"http://www.w3.org/2000/svg"}),h&&t.createElement("title",null,h),e.children)};return void 0!==r?t.createElement(r.Consumer,null,(t=>n(t))):n(i)}function g(t){return d({tag:"svg",attr:{viewBox:"0 0 1024 1024"},child:[{tag:"path",attr:{fill:"#333",d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"},child:[]},{tag:"path",attr:{fill:"#E6E6E6",d:"M512 140c-205.4 0-372 166.6-372 372s166.6 372 372 372 372-166.6 372-372-166.6-372-372-372zm32 588c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8V456c0-4.4 3.6-8 8-8h48c4.4 0 8 3.6 8 8v272zm-32-344a48.01 48.01 0 0 1 0-96 48.01 48.01 0 0 1 0 96z"},child:[]},{tag:"path",attr:{fill:"#333",d:"M464 336a48 48 0 1 0 96 0 48 48 0 1 0-96 0zm72 112h-48c-4.4 0-8 3.6-8 8v272c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V456c0-4.4-3.6-8-8-8z"},child:[]}]})(t)}const p=n.p+"static/media/back1.182a47325195628ff111.JPG",m=n.p+"static/media/back2.ced851e1184142c34755.jpg";n.p;var y=n(579);const _=e=>{let{columns:n,spacing:i,elements:r}=e;return(0,y.jsx)("div",{className:"wrapper",style:{gridTemplateColumns:n,gridGap:i},children:t.Children.toArray(r.map((t=>(0,y.jsx)("div",{children:t},t.key))))})};_.defaultProps={spacing:"1em",columns:"1fr 1fr",count:2,elements:[]};const v=_,x=e=>{const[n,i]=(0,t.useState)("none");return(0,y.jsxs)("div",{className:"dropdownAll",children:[(0,y.jsx)("div",{className:"dropdownHeader",onClick:function(){i("none"===n?"block":"none")},children:(0,y.jsx)("h2",{children:e.name})}),(0,y.jsx)("div",{className:"dropdownBody",style:{display:n},children:e.children})]})};x.defaultProps={name:"Click to see more"};const w={homeElements:[(0,y.jsx)("div",{children:(0,y.jsxs)("p",{children:["Garrett Holmes is a programmer and graduate of the University of Guelph school of computer science.",(0,y.jsx)("br",{}),(0,y.jsx)("br",{}),"With over 5 years of experience in software development using python, C, JavaScript and more, I have worked on a variety of projects involving web development, systems programming, and computer vision for ",(0,y.jsx)("a",{href:"https://github.com/ga-holmes/cows_drinking",target:"_blank",rel:"noopener noreferrer",children:"Precision Livestock Farming "}),"as part of the ",(0,y.jsx)("a",{href:"https://csl.uwaterloo.ca/",target:"_blank",rel:"noopener noreferrer",children:"Collaborative Systems Lab"}),".",(0,y.jsx)("br",{}),"I have worked extensively in GIS applications like QGIS & ArcGIS for environmental analysis including Moose Habitat suitability in the ",(0,y.jsx)("a",{href:"https://geg.uoguelph.ca/sites/default/files/GEOG4480-W23_Group02.pdf",target:"_blank",rel:"noopener noreferrer",children:"Missinaibi forest"}),".",(0,y.jsx)("br",{}),(0,y.jsx)("br",{}),"I am passionate about the outdoors and Canada's natural spaces. I have worked as a river guide and outdoor educator for ",(0,y.jsx)("a",{href:"https://www.kandalore.com/",target:"_blank",rel:"noopener noreferrer",children:"Kandalore"}),", as an instructor at the ",(0,y.jsx)("a",{href:"https://paddlerco-op.ca/",target:"_blank",rel:"noopener noreferrer",children:"Paddler Coop"}),", and have over 100 days of experience on wilderness canoe trips & back-country camping.",(0,y.jsx)("br",{}),(0,y.jsx)("br",{}),"As a visual arist I have worked as a composer and cinematographer on independent film projects including an upcoming feature film, some of which are showcased here. Some of my photography and digital art is viewable on this website in a reduced-resolution format.",(0,y.jsx)("br",{}),(0,y.jsx)("br",{}),"Please feel free to reach out to me at ",(0,y.jsx)("a",{href:"mailto:garrett.a.holmes01@gmail.com",target:"_blank",rel:"noopener noreferrer",children:"@garrett.a.holmes01@gmail.com"}),", or on ",(0,y.jsx)("a",{href:"https://www.linkedin.com/in/garrett-holmes-b4a219225/",target:"_blank",rel:"noopener noreferrer",children:"LinkedIn"}),"."]})},1),(0,y.jsx)("div",{children:(0,y.jsx)("img",{src:"/media/self.jpg",alt:"",className:"imageDefault"})},2)],softwareElements:[(0,y.jsxs)("div",{children:[(0,y.jsx)("h3",{children:(0,y.jsx)("a",{href:"https://csl.uwaterloo.ca/",children:"Collaborative Systems Laboratory"})}),(0,y.jsx)("img",{src:"/media/58.jpg",className:"imageDefault",alt:""},4),(0,y.jsx)("p",{children:"As an Undergraduate Research Assistant, I explored recent literature in Precision Livestock Farming with specific regard to computer vision and remote sensing techniques for automatic detection of cattle on pastures and in feedlots. My research led to the independent development of software that could detect the presence of cattle in watering pens after training on a labeled dataset. The script used PyTorch and OpenCV to parse video files and automatically create sub-clips and output labels in a format that could then be used to further train the model. I worked closely with the Resnet, YOLO, and Mask-R-CNN computer vision models."})]},2)],experienceElements:[(0,y.jsx)("img",{src:"/media/tripcentre.JPG",className:"imageDefault",alt:""},2),(0,y.jsxs)("div",{children:[(0,y.jsx)("a",{href:"https://www.kandalore.com/",children:(0,y.jsx)("h3",{children:"Camp Kandalore"})}),(0,y.jsxs)("p",{children:["At Kandalore, where I worked in the summers of 2019 and 2021, my main role was guiding canoe trips with groups of up to 10 campers lasting from 3 to 7 days in length. The main focus on these trips was creating a welcoming and educational environment where campers could learn and grow.",(0,y.jsx)("br",{}),(0,y.jsx)("br",{}),"In the summer of 2021 I ran a 7 day trip down the spanish river, navigating long lakes, portages, and whitewater sets.",(0,y.jsx)("br",{}),(0,y.jsx)("br",{}),"Meanwhile in camp, I had an actve role in organizing the trip centre, where all our trip gear/maps/etc. was kept, as well as fixing boats before and after they were on trips. "]})]},1)],projectsElementsOld:[(0,y.jsxs)("div",{children:[(0,y.jsxs)("h4",{children:["Composer - ",(0,y.jsx)("a",{href:"https://letterboxd.com/film/sole-of-a-salesman/",children:"'Sole of a Salesman' by Lliam Bittle"})]}),(0,y.jsx)("iframe",{className:"video",src:"https://www.youtube.com/embed/OOtX7AmzdAA",title:"Sole Of A Salesman",frameborder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowfullscreen:!0})]}),(0,y.jsx)("p",{children:"Independent short film soundtrack, written and produced using a variety of digital instruments as well as recorded instruments."}),(0,y.jsxs)("div",{children:[(0,y.jsx)("h4",{children:"Personal Project - 'some lines'"}),(0,y.jsx)("iframe",{className:"video",src:"https://www.youtube.com/embed/6oY2tPwBhj0",title:"some lines",frameborder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowfullscreen:!0})]}),(0,y.jsx)("p",{children:"Hand drawn animation with original music. Created in Blender."})],icons:[{icon:"/media/github-logo.png",text:"",linkTo:"https://github.com/ga-holmes"},{icon:"/media/linkedin.png",text:"",linkTo:"https://www.linkedin.com/in/garrett-a-holmes/"},{icon:"/media/resume.png",text:"",linkTo:"/media/GarrettHolmesResume.pdf"},{icon:"",text:"G A R R E T T _ H O L M E S",linkTo:"/#start"},{icon:"",text:"gallery",linkTo:"/gallery"},{icon:"",text:"madawaska",linkTo:"/map"}]};n(358);var k="popstate";function E(){return N((function(t,e){let{pathname:n,search:i,hash:r}=t.location;return I("",{pathname:n,search:i,hash:r},e.state&&e.state.usr||null,e.state&&e.state.key||"default")}),(function(t,e){return"string"===typeof e?e:T(e)}),null,arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})}function S(t,e){if(!1===t||null===t||"undefined"===typeof t)throw new Error(e)}function b(t,e){if(!t){"undefined"!==typeof console&&console.warn(e);try{throw new Error(e)}catch(n){}}}function C(t,e){return{usr:t.state,key:t.key,idx:e}}function I(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3?arguments[3]:void 0;return{pathname:"string"===typeof t?t:t.pathname,search:"",hash:"",..."string"===typeof e?R(e):e,state:n,key:e&&e.key||i||Math.random().toString(36).substring(2,10)}}function T(t){let{pathname:e="/",search:n="",hash:i=""}=t;return n&&"?"!==n&&(e+="?"===n.charAt(0)?n:"?"+n),i&&"#"!==i&&(e+="#"===i.charAt(0)?i:"#"+i),e}function R(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let i=t.indexOf("?");i>=0&&(e.search=t.substring(i),t=t.substring(0,i)),t&&(e.pathname=t)}return e}function N(t,e,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},{window:r=document.defaultView,v5Compat:s=!1}=i,o=r.history,a="POP",l=null,u=h();function h(){return(o.state||{idx:null}).idx}function c(){a="POP";let t=h(),e=null==t?null:t-u;u=t,l&&l({action:a,location:f.location,delta:e})}function d(t){let e="null"!==r.location.origin?r.location.origin:r.location.href,n="string"===typeof t?t:T(t);return n=n.replace(/ $/,"%20"),S(e,`No window.location.(origin|href) available to create URL for href: ${n}`),new URL(n,e)}null==u&&(u=0,o.replaceState({...o.state,idx:u},""));let f={get action(){return a},get location(){return t(r,o)},listen(t){if(l)throw new Error("A history only accepts one active listener");return r.addEventListener(k,c),l=t,()=>{r.removeEventListener(k,c),l=null}},createHref:t=>e(r,t),createURL:d,encodeLocation(t){let e=d(t);return{pathname:e.pathname,search:e.search,hash:e.hash}},push:function(t,e){a="PUSH";let i=I(f.location,t,e);n&&n(i,t),u=h()+1;let c=C(i,u),d=f.createHref(i);try{o.pushState(c,"",d)}catch(g){if(g instanceof DOMException&&"DataCloneError"===g.name)throw g;r.location.assign(d)}s&&l&&l({action:a,location:f.location,delta:1})},replace:function(t,e){a="REPLACE";let i=I(f.location,t,e);n&&n(i,t),u=h();let r=C(i,u),c=f.createHref(i);o.replaceState(r,"",c),s&&l&&l({action:a,location:f.location,delta:0})},go:t=>o.go(t)};return f}function L(t,e){return M(t,e,arguments.length>2&&void 0!==arguments[2]?arguments[2]:"/",!1)}function M(t,e,n,i){let r=W(("string"===typeof e?R(e):e).pathname||"/",n);if(null==r)return null;let s=P(t);!function(t){t.sort(((t,e)=>t.score!==e.score?e.score-t.score:function(t,e){let n=t.length===e.length&&t.slice(0,-1).every(((t,n)=>t===e[n]));return n?t[t.length-1]-e[e.length-1]:0}(t.routesMeta.map((t=>t.childrenIndex)),e.routesMeta.map((t=>t.childrenIndex)))))}(s);let o=null;for(let a=0;null==o&&a<s.length;++a){let t=q(r);o=U(s[a],t,i)}return o}function P(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",r=(t,r,s)=>{let o={relativePath:void 0===s?t.path||"":s,caseSensitive:!0===t.caseSensitive,childrenIndex:r,route:t};o.relativePath.startsWith("/")&&(S(o.relativePath.startsWith(i),`Absolute route path "${o.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),o.relativePath=o.relativePath.slice(i.length));let a=$([i,o.relativePath]),l=n.concat(o);t.children&&t.children.length>0&&(S(!0!==t.index,`Index routes must not have child routes. Please remove all child routes from route path "${a}".`),P(t.children,e,l,a)),(null!=t.path||t.index)&&e.push({path:a,score:B(a,t.index),routesMeta:l})};return t.forEach(((t,e)=>{if(""!==t.path&&t.path?.includes("?"))for(let n of O(t.path))r(t,e,n);else r(t,e)})),e}function O(t){let e=t.split("/");if(0===e.length)return[];let[n,...i]=e,r=n.endsWith("?"),s=n.replace(/\?$/,"");if(0===i.length)return r?[s,""]:[s];let o=O(i.join("/")),a=[];return a.push(...o.map((t=>""===t?s:[s,t].join("/")))),r&&a.push(...o),a.map((e=>t.startsWith("/")&&""===e?"/":e))}var A=/^:[\w-]+$/,F=3,D=2,z=1,G=10,j=-2,Y=t=>"*"===t;function B(t,e){let n=t.split("/"),i=n.length;return n.some(Y)&&(i+=j),e&&(i+=D),n.filter((t=>!Y(t))).reduce(((t,e)=>t+(A.test(e)?F:""===e?z:G)),i)}function U(t,e){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],{routesMeta:i}=t,r={},s="/",o=[];for(let a=0;a<i.length;++a){let t=i[a],l=a===i.length-1,u="/"===s?e:e.slice(s.length)||"/",h=X({path:t.relativePath,caseSensitive:t.caseSensitive,end:l},u),c=t.route;if(!h&&l&&n&&!i[i.length-1].route.index&&(h=X({path:t.relativePath,caseSensitive:t.caseSensitive,end:!1},u)),!h)return null;Object.assign(r,h.params),o.push({params:r,pathname:$([s,h.pathname]),pathnameBase:J($([s,h.pathnameBase])),route:c}),"/"!==h.pathnameBase&&(s=$([s,h.pathnameBase]))}return o}function X(t,e){"string"===typeof t&&(t={path:t,caseSensitive:!1,end:!0});let[n,i]=function(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];b("*"===t||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let i=[],r="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,((t,e,n)=>(i.push({paramName:e,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)")));t.endsWith("*")?(i.push({paramName:"*"}),r+="*"===t||"/*"===t?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?r+="\\/*$":""!==t&&"/"!==t&&(r+="(?:(?=\\/|$))");let s=new RegExp(r,e?void 0:"i");return[s,i]}(t.path,t.caseSensitive,t.end),r=e.match(n);if(!r)return null;let s=r[0],o=s.replace(/(.)\/+$/,"$1"),a=r.slice(1);return{params:i.reduce(((t,e,n)=>{let{paramName:i,isOptional:r}=e;if("*"===i){let t=a[n]||"";o=s.slice(0,s.length-t.length).replace(/(.)\/+$/,"$1")}const l=a[n];return t[i]=r&&!l?void 0:(l||"").replace(/%2F/g,"/"),t}),{}),pathname:s,pathnameBase:o,pattern:t}}function q(t){try{return t.split("/").map((t=>decodeURIComponent(t).replace(/\//g,"%2F"))).join("/")}catch(e){return b(!1,`The URL path "${t}" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function W(t,e){if("/"===e)return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,i=t.charAt(n);return i&&"/"!==i?null:t.slice(n)||"/"}function V(t,e,n,i){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function H(t){return t.filter(((t,e)=>0===e||t.route.path&&t.route.path.length>0))}function K(t){let e=H(t);return e.map(((t,n)=>n===e.length-1?t.pathname:t.pathnameBase))}function Z(t,e,n){let i,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];"string"===typeof t?i=R(t):(i={...t},S(!i.pathname||!i.pathname.includes("?"),V("?","pathname","search",i)),S(!i.pathname||!i.pathname.includes("#"),V("#","pathname","hash",i)),S(!i.search||!i.search.includes("#"),V("#","search","hash",i)));let s,o=""===t||""===i.pathname,a=o?"/":i.pathname;if(null==a)s=n;else{let t=e.length-1;if(!r&&a.startsWith("..")){let e=a.split("/");for(;".."===e[0];)e.shift(),t-=1;i.pathname=e.join("/")}s=t>=0?e[t]:"/"}let l=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/",{pathname:n,search:i="",hash:r=""}="string"===typeof t?R(t):t,s=n?n.startsWith("/")?n:function(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach((t=>{".."===t?n.length>1&&n.pop():"."!==t&&n.push(t)})),n.length>1?n.join("/"):"/"}(n,e):e;return{pathname:s,search:Q(i),hash:tt(r)}}(i,s),u=a&&"/"!==a&&a.endsWith("/"),h=(o||"."===a)&&n.endsWith("/");return l.pathname.endsWith("/")||!u&&!h||(l.pathname+="/"),l}var $=t=>t.join("/").replace(/\/\/+/g,"/"),J=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),Q=t=>t&&"?"!==t?t.startsWith("?")?t:"?"+t:"",tt=t=>t&&"#"!==t?t.startsWith("#")?t:"#"+t:"";function et(t){return null!=t&&"number"===typeof t.status&&"string"===typeof t.statusText&&"boolean"===typeof t.internal&&"data"in t}var nt=["POST","PUT","PATCH","DELETE"],it=(new Set(nt),["GET",...nt]);new Set(it),Symbol("ResetLoaderData");var rt=t.createContext(null);rt.displayName="DataRouter";var st=t.createContext(null);st.displayName="DataRouterState";var ot=t.createContext({isTransitioning:!1});ot.displayName="ViewTransition";var at=t.createContext(new Map);at.displayName="Fetchers";var lt=t.createContext(null);lt.displayName="Await";var ut=t.createContext(null);ut.displayName="Navigation";var ht=t.createContext(null);ht.displayName="Location";var ct=t.createContext({outlet:null,matches:[],isDataRoute:!1});ct.displayName="Route";var dt=t.createContext(null);dt.displayName="RouteError";function ft(){return null!=t.useContext(ht)}function gt(){return S(ft(),"useLocation() may be used only in the context of a <Router> component."),t.useContext(ht).location}var pt="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function mt(e){t.useContext(ut).static||t.useLayoutEffect(e)}function yt(){let{isDataRoute:e}=t.useContext(ct);return e?function(){let{router:e}=Ct("useNavigate"),n=Tt("useNavigate"),i=t.useRef(!1);mt((()=>{i.current=!0}));let r=t.useCallback((async function(t){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};b(i.current,pt),i.current&&("number"===typeof t?e.navigate(t):await e.navigate(t,{fromRouteId:n,...r}))}),[e,n]);return r}():function(){S(ft(),"useNavigate() may be used only in the context of a <Router> component.");let e=t.useContext(rt),{basename:n,navigator:i}=t.useContext(ut),{matches:r}=t.useContext(ct),{pathname:s}=gt(),o=JSON.stringify(K(r)),a=t.useRef(!1);mt((()=>{a.current=!0}));let l=t.useCallback((function(t){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(b(a.current,pt),!a.current)return;if("number"===typeof t)return void i.go(t);let l=Z(t,JSON.parse(o),s,"path"===r.relative);null==e&&"/"!==n&&(l.pathname="/"===l.pathname?n:$([n,l.pathname])),(r.replace?i.replace:i.push)(l,r.state,r)}),[n,i,o,s,e]);return l}()}t.createContext(null);function _t(e){let{relative:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{matches:i}=t.useContext(ct),{pathname:r}=gt(),s=JSON.stringify(K(i));return t.useMemo((()=>Z(e,JSON.parse(s),r,"path"===n)),[e,s,r,n])}function vt(e,n,i,r){S(ft(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s}=t.useContext(ut),{matches:o}=t.useContext(ct),a=o[o.length-1],l=a?a.params:{},u=(a&&a.pathname,a?a.pathnameBase:"/");a&&a.route;let h,c=gt();if(n){let t="string"===typeof n?R(n):n;S("/"===u||t.pathname?.startsWith(u),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${u}" but pathname "${t.pathname}" was given in the \`location\` prop.`),h=t}else h=c;let d=h.pathname||"/",f=d;if("/"!==u){let t=u.replace(/^\//,"").split("/");f="/"+d.replace(/^\//,"").split("/").slice(t.length).join("/")}let g=L(e,{pathname:f});let p=St(g&&g.map((t=>Object.assign({},t,{params:Object.assign({},l,t.params),pathname:$([u,s.encodeLocation?s.encodeLocation(t.pathname).pathname:t.pathname]),pathnameBase:"/"===t.pathnameBase?u:$([u,s.encodeLocation?s.encodeLocation(t.pathnameBase).pathname:t.pathnameBase])}))),o,i,r);return n&&p?t.createElement(ht.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...h},navigationType:"POP"}},p):p}function xt(){let e=Rt(),n=et(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),i=e instanceof Error?e.stack:null,r="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:r},o=null;return t.createElement(t.Fragment,null,t.createElement("h2",null,"Unexpected Application Error!"),t.createElement("h3",{style:{fontStyle:"italic"}},n),i?t.createElement("pre",{style:s},i):null,o)}var wt=t.createElement(xt,null),kt=class extends t.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||"idle"!==e.revalidation&&"idle"===t.revalidation?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:void 0!==t.error?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){console.error("React Router caught the following error during render",t,e)}render(){return void 0!==this.state.error?t.createElement(ct.Provider,{value:this.props.routeContext},t.createElement(dt.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function Et(e){let{routeContext:n,match:i,children:r}=e,s=t.useContext(rt);return s&&s.static&&s.staticContext&&(i.route.errorElement||i.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=i.route.id),t.createElement(ct.Provider,{value:n},r)}function St(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(null==e){if(!i)return null;if(i.errors)e=i.matches;else{if(0!==n.length||i.initialized||!(i.matches.length>0))return null;e=i.matches}}let r=e,s=i?.errors;if(null!=s){let t=r.findIndex((t=>t.route.id&&void 0!==s?.[t.route.id]));S(t>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(s).join(",")}`),r=r.slice(0,Math.min(r.length,t+1))}let o=!1,a=-1;if(i)for(let t=0;t<r.length;t++){let e=r[t];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(a=t),e.route.id){let{loaderData:t,errors:n}=i,s=e.route.loader&&!t.hasOwnProperty(e.route.id)&&(!n||void 0===n[e.route.id]);if(e.route.lazy||s){o=!0,r=a>=0?r.slice(0,a+1):[r[0]];break}}}return r.reduceRight(((e,l,u)=>{let h,c=!1,d=null,f=null;i&&(h=s&&l.route.id?s[l.route.id]:void 0,d=l.route.errorElement||wt,o&&(a<0&&0===u?(Lt("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),c=!0,f=null):a===u&&(c=!0,f=l.route.hydrateFallbackElement||null)));let g=n.concat(r.slice(0,u+1)),p=()=>{let n;return n=h?d:c?f:l.route.Component?t.createElement(l.route.Component,null):l.route.element?l.route.element:e,t.createElement(Et,{match:l,routeContext:{outlet:e,matches:g,isDataRoute:null!=i},children:n})};return i&&(l.route.ErrorBoundary||l.route.errorElement||0===u)?t.createElement(kt,{location:i.location,revalidation:i.revalidation,component:d,error:h,children:p(),routeContext:{outlet:null,matches:g,isDataRoute:!0}}):p()}),null)}function bt(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Ct(e){let n=t.useContext(rt);return S(n,bt(e)),n}function It(e){let n=t.useContext(st);return S(n,bt(e)),n}function Tt(e){let n=function(e){let n=t.useContext(ct);return S(n,bt(e)),n}(e),i=n.matches[n.matches.length-1];return S(i.route.id,`${e} can only be used on routes that contain a unique "id"`),i.route.id}function Rt(){let e=t.useContext(dt),n=It("useRouteError"),i=Tt("useRouteError");return void 0!==e?e:n.errors?.[i]}var Nt={};function Lt(t,e,n){e||Nt[t]||(Nt[t]=!0,b(!1,n))}t.memo((function(t){let{routes:e,future:n,state:i}=t;return vt(e,void 0,i,n)}));function Mt(t){S(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Pt(e){let{basename:n="/",children:i=null,location:r,navigationType:s="POP",navigator:o,static:a=!1}=e;S(!ft(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let l=n.replace(/^\/*/,"/"),u=t.useMemo((()=>({basename:l,navigator:o,static:a,future:{}})),[l,o,a]);"string"===typeof r&&(r=R(r));let{pathname:h="/",search:c="",hash:d="",state:f=null,key:g="default"}=r,p=t.useMemo((()=>{let t=W(h,l);return null==t?null:{location:{pathname:t,search:c,hash:d,state:f,key:g},navigationType:s}}),[l,h,c,d,f,g,s]);return b(null!=p,`<Router basename="${l}"> is not able to match the URL "${h}${c}${d}" because it does not start with the basename, so the <Router> won't render anything.`),null==p?null:t.createElement(ut.Provider,{value:u},t.createElement(ht.Provider,{children:i,value:p}))}function Ot(t){let{children:e,location:n}=t;return vt(At(e),n)}t.Component;function At(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=[];return t.Children.forEach(e,((e,r)=>{if(!t.isValidElement(e))return;let s=[...n,r];if(e.type===t.Fragment)return void i.push.apply(i,At(e.props.children,s));S(e.type===Mt,`[${"string"===typeof e.type?e.type:e.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),S(!e.props.index||!e.props.children,"An index route cannot have child routes.");let o={id:e.props.id||s.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,hydrateFallbackElement:e.props.hydrateFallbackElement,HydrateFallback:e.props.HydrateFallback,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:!0===e.props.hasErrorBoundary||null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(o.children=At(e.props.children,s)),i.push(o)})),i}var Ft="get",Dt="application/x-www-form-urlencoded";function zt(t){return null!=t&&"string"===typeof t.tagName}var Gt=null;var jt=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Yt(t){return null==t||jt.has(t)?t:(b(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Dt}"`),null)}function Bt(t,e){let n,i,r,s,o;if(function(t){return zt(t)&&"form"===t.tagName.toLowerCase()}(t)){let o=t.getAttribute("action");i=o?W(o,e):null,n=t.getAttribute("method")||Ft,r=Yt(t.getAttribute("enctype"))||Dt,s=new FormData(t)}else if(function(t){return zt(t)&&"button"===t.tagName.toLowerCase()}(t)||function(t){return zt(t)&&"input"===t.tagName.toLowerCase()}(t)&&("submit"===t.type||"image"===t.type)){let o=t.form;if(null==o)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let a=t.getAttribute("formaction")||o.getAttribute("action");if(i=a?W(a,e):null,n=t.getAttribute("formmethod")||o.getAttribute("method")||Ft,r=Yt(t.getAttribute("formenctype"))||Yt(o.getAttribute("enctype"))||Dt,s=new FormData(o,t),!function(){if(null===Gt)try{new FormData(document.createElement("form"),0),Gt=!1}catch(t){Gt=!0}return Gt}()){let{name:e,type:n,value:i}=t;if("image"===n){let t=e?`${e}.`:"";s.append(`${t}x`,"0"),s.append(`${t}y`,"0")}else e&&s.append(e,i)}}else{if(zt(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=Ft,i=null,r=Dt,o=t}return s&&"text/plain"===r&&(o=s,s=void 0),{action:i,method:n.toLowerCase(),encType:r,formData:s,body:o}}function Ut(t,e){if(!1===t||null===t||"undefined"===typeof t)throw new Error(e)}async function Xt(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise((()=>{}))}}function qt(t){return null!=t&&"string"===typeof t.page}function Wt(t){return null!=t&&(null==t.href?"preload"===t.rel&&"string"===typeof t.imageSrcSet&&"string"===typeof t.imageSizes:"string"===typeof t.rel&&"string"===typeof t.href)}function Vt(t,e,n,i,r,s){let o=(t,e)=>!n[e]||t.route.id!==n[e].route.id,a=(t,e)=>n[e].pathname!==t.pathname||n[e].route.path?.endsWith("*")&&n[e].params["*"]!==t.params["*"];return"assets"===s?e.filter(((t,e)=>o(t,e)||a(t,e))):"data"===s?e.filter(((e,s)=>{let l=i.routes[e.route.id];if(!l||!l.hasLoader)return!1;if(o(e,s)||a(e,s))return!0;if(e.route.shouldRevalidate){let i=e.route.shouldRevalidate({currentUrl:new URL(r.pathname+r.search+r.hash,window.origin),currentParams:n[0]?.params||{},nextUrl:new URL(t,window.origin),nextParams:e.params,defaultShouldRevalidate:!0});if("boolean"===typeof i)return i}return!0})):[]}function Ht(t){return[...new Set(t)]}function Kt(t,e){let n=new Set,i=new Set(e);return t.reduce(((t,r)=>{if(e&&!qt(r)&&"script"===r.as&&r.href&&i.has(r.href))return t;let s=JSON.stringify(function(t){let e={},n=Object.keys(t).sort();for(let i of n)e[i]=t[i];return e}(r));return n.has(s)||(n.add(s),t.push({key:s,link:r})),t}),[])}function Zt(t){return{__html:t}}Symbol("SingleFetchRedirect");function $t(t){let e="string"===typeof t?new URL(t,"undefined"===typeof window?"server://singlefetch/":window.location.origin):t;return"/"===e.pathname?e.pathname="_root.data":e.pathname=`${e.pathname.replace(/\/$/,"")}.data`,e}t.Component;function Jt(e){let{error:n,isOutsideRemixApp:i}=e;console.error(n);let r,s=t.createElement("script",{dangerouslySetInnerHTML:{__html:'\n        console.log(\n          "\ud83d\udcbf Hey developer \ud83d\udc4b. You can provide a way better UX than this when your app throws errors. Check out https://remix.run/guides/errors for more information."\n        );\n      '}});if(et(n))return t.createElement(Qt,{title:"Unhandled Thrown Response!"},t.createElement("h1",{style:{fontSize:"24px"}},n.status," ",n.statusText),s);if(n instanceof Error)0;else{let t=null==n?"Unknown Error":"object"===typeof n&&"toString"in n?n.toString():JSON.stringify(n);new Error(t)}return t.createElement(Qt,{title:"Application Error!",isOutsideRemixApp:i},t.createElement("h1",{style:{fontSize:"24px"}},"Application Error"),t.createElement("pre",{style:{padding:"2rem",background:"hsla(10, 50%, 50%, 0.1)",color:"red",overflow:"auto"}},r.stack),s)}function Qt(e){let{title:n,renderScripts:i,isOutsideRemixApp:r,children:s}=e,{routeModules:o}=re();return o.root?.Layout&&!r?s:t.createElement("html",{lang:"en"},t.createElement("head",null,t.createElement("meta",{charSet:"utf-8"}),t.createElement("meta",{name:"viewport",content:"width=device-width,initial-scale=1,viewport-fit=cover"}),t.createElement("title",null,n)),t.createElement("body",null,t.createElement("main",{style:{fontFamily:"system-ui, sans-serif",padding:"2rem"}},s,i?t.createElement(ce,null):null)))}function te(t){return!t}function ee(){let e=t.useContext(rt);return Ut(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function ne(){let e=t.useContext(st);return Ut(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var ie=t.createContext(void 0);function re(){let e=t.useContext(ie);return Ut(e,"You must render this element inside a <HydratedRouter> element"),e}function se(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function oe(t,e,n){if(n&&!he)return[t[0]];if(e){let n=t.findIndex((t=>void 0!==e[t.route.id]));return t.slice(0,n+1)}return t}function ae(e){let{page:n,...i}=e,{router:r}=ee(),s=t.useMemo((()=>L(r.routes,n,r.basename)),[r.routes,n,r.basename]);return s?t.createElement(ue,{page:n,matches:s,...i}):(console.warn(`Tried to prefetch ${n} but no routes matched.`),null)}function le(e){let{manifest:n,routeModules:i}=re(),[r,s]=t.useState([]);return t.useEffect((()=>{let t=!1;return async function(t,e,n){return Kt((await Promise.all(t.map((async t=>{let i=e.routes[t.route.id];if(i){let t=await Xt(i,n);return t.links?t.links():[]}return[]})))).flat(1).filter(Wt).filter((t=>"stylesheet"===t.rel||"preload"===t.rel)).map((t=>"stylesheet"===t.rel?{...t,rel:"prefetch",as:"style"}:{...t,rel:"prefetch"})))}(e,n,i).then((e=>{t||s(e)})),()=>{t=!0}}),[e,n,i]),r}function ue(e){let{page:n,matches:i,...r}=e,s=gt(),{manifest:o,routeModules:a}=re(),{loaderData:l,matches:u}=ne(),h=t.useMemo((()=>Vt(n,i,u,o,s,"data")),[n,i,u,o,s]),c=t.useMemo((()=>Vt(n,i,u,o,s,"assets")),[n,i,u,o,s]),d=t.useMemo((()=>{if(n===s.pathname+s.search+s.hash)return[];let t=new Set,e=!1;if(i.forEach((n=>{let i=o.routes[n.route.id];i&&i.hasLoader&&(!h.some((t=>t.route.id===n.route.id))&&n.route.id in l&&a[n.route.id]?.shouldRevalidate||i.hasClientLoader?e=!0:t.add(n.route.id))})),0===t.size)return[];let r=$t(n);return e&&t.size>0&&r.searchParams.set("_routes",i.filter((e=>t.has(e.route.id))).map((t=>t.route.id)).join(",")),[r.pathname+r.search]}),[l,s,o,h,i,n,a]),f=t.useMemo((()=>function(t,e){return Ht(t.map((t=>{let n=e.routes[t.route.id];if(!n)return[];let i=[n.module];return n.imports&&(i=i.concat(n.imports)),i})).flat(1))}(c,o)),[c,o]),g=le(c);return t.createElement(t.Fragment,null,d.map((e=>t.createElement("link",{key:e,rel:"prefetch",as:"fetch",href:e,...r}))),f.map((e=>t.createElement("link",{key:e,rel:"modulepreload",href:e,...r}))),g.map((e=>{let{key:n,link:i}=e;return t.createElement("link",{key:n,...i})})))}ie.displayName="FrameworkContext";var he=!1;function ce(e){let{manifest:n,serverHandoffString:i,isSpaMode:r,renderMeta:s}=re(),{router:o,static:a,staticContext:l}=ee(),{matches:u}=ne(),h=te(r);s&&(s.didRenderScripts=!0);let c=oe(u,null,r);t.useEffect((()=>{0}),[]);let d=t.useMemo((()=>{let r=l?`window.__reactRouterContext = ${i};window.__reactRouterContext.stream = new ReadableStream({start(controller){window.__reactRouterContext.streamController = controller;}}).pipeThrough(new TextEncoderStream());`:" ",s=a?`${n.hmr?.runtime?`import ${JSON.stringify(n.hmr.runtime)};`:""}${h?"":`import ${JSON.stringify(n.url)}`};\n${c.map(((t,e)=>`import * as route${e} from ${JSON.stringify(n.routes[t.route.id].module)};`)).join("\n")}\n  ${h?`window.__reactRouterManifest = ${JSON.stringify(function(t,e){let n=new Set(e.state.matches.map((t=>t.route.id))),i=e.state.location.pathname.split("/").filter(Boolean),r=["/"];for(i.pop();i.length>0;)r.push(`/${i.join("/")}`),i.pop();r.forEach((t=>{let i=L(e.routes,t,e.basename);i&&i.forEach((t=>n.add(t.route.id)))}));let s=[...n].reduce(((e,n)=>Object.assign(e,{[n]:t.routes[n]})),{});return{...t,routes:s}}(n,o),null,2)};`:""}\n  window.__reactRouterRouteModules = {${c.map(((t,e)=>`${JSON.stringify(t.route.id)}:route${e}`)).join(",")}};\n\nimport(${JSON.stringify(n.entry.module)});`:" ";return t.createElement(t.Fragment,null,t.createElement("script",{...e,suppressHydrationWarning:!0,dangerouslySetInnerHTML:Zt(r),type:void 0}),t.createElement("script",{...e,suppressHydrationWarning:!0,dangerouslySetInnerHTML:Zt(s),type:"module",async:!0}))}),[]),f=c.map((t=>{let e=n.routes[t.route.id];return e?(e.imports||[]).concat([e.module]):[]})).flat(1),g=he?[]:n.entry.imports.concat(f);return he?null:t.createElement(t.Fragment,null,h?null:t.createElement("link",{rel:"modulepreload",href:n.url,crossOrigin:e.crossOrigin}),t.createElement("link",{rel:"modulepreload",href:n.entry.module,crossOrigin:e.crossOrigin}),function(t){return[...new Set(t)]}(g).map((n=>t.createElement("link",{key:n,rel:"modulepreload",href:n,crossOrigin:e.crossOrigin}))),d)}function de(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return t=>{e.forEach((e=>{"function"===typeof e?e(t):null!=e&&(e.current=t)}))}}var fe="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement;try{fe&&(window.__reactRouterVersion="7.0.1")}catch($m){}function ge(e){let{basename:n,children:i,window:r}=e,s=t.useRef();null==s.current&&(s.current=E({window:r,v5Compat:!0}));let o=s.current,[a,l]=t.useState({action:o.action,location:o.location}),u=t.useCallback((e=>{t.startTransition((()=>l(e)))}),[l]);return t.useLayoutEffect((()=>o.listen(u)),[o,u]),t.createElement(Pt,{basename:n,children:i,location:a.location,navigationType:a.action,navigator:o})}var pe=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,me=t.forwardRef((function(e,n){let i,{onClick:r,discover:s="render",prefetch:o="none",relative:a,reloadDocument:l,replace:u,state:h,target:c,to:d,preventScrollReset:f,viewTransition:g,...p}=e,{basename:m}=t.useContext(ut),y="string"===typeof d&&pe.test(d),_=!1;if("string"===typeof d&&y&&(i=d,fe))try{let t=new URL(window.location.href),e=d.startsWith("//")?new URL(t.protocol+d):new URL(d),n=W(e.pathname,m);e.origin===t.origin&&null!=n?d=n+e.search+e.hash:_=!0}catch($m){b(!1,`<Link to="${d}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let v=function(e){let{relative:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};S(ft(),"useHref() may be used only in the context of a <Router> component.");let{basename:i,navigator:r}=t.useContext(ut),{hash:s,pathname:o,search:a}=_t(e,{relative:n}),l=o;return"/"!==i&&(l="/"===o?i:$([i,o])),r.createHref({pathname:l,search:a,hash:s})}(d,{relative:a}),[x,w,k]=function(e,n){let i=t.useContext(ie),[r,s]=t.useState(!1),[o,a]=t.useState(!1),{onFocus:l,onBlur:u,onMouseEnter:h,onMouseLeave:c,onTouchStart:d}=n,f=t.useRef(null);t.useEffect((()=>{if("render"===e&&a(!0),"viewport"===e){let t=new IntersectionObserver((t=>{t.forEach((t=>{a(t.isIntersecting)}))}),{threshold:.5});return f.current&&t.observe(f.current),()=>{t.disconnect()}}}),[e]),t.useEffect((()=>{if(r){let t=setTimeout((()=>{a(!0)}),100);return()=>{clearTimeout(t)}}}),[r]);let g=()=>{s(!0)},p=()=>{s(!1),a(!1)};return i?"intent"!==e?[o,f,{}]:[o,f,{onFocus:se(l,g),onBlur:se(u,p),onMouseEnter:se(h,g),onMouseLeave:se(c,p),onTouchStart:se(d,g)}]:[!1,f,{}]}(o,p),E=function(e){let{target:n,replace:i,state:r,preventScrollReset:s,relative:o,viewTransition:a}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},l=yt(),u=gt(),h=_t(e,{relative:o});return t.useCallback((t=>{if(function(t,e){return 0===t.button&&(!e||"_self"===e)&&!function(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}(t)}(t,n)){t.preventDefault();let n=void 0!==i?i:T(u)===T(h);l(e,{replace:n,state:r,preventScrollReset:s,relative:o,viewTransition:a})}}),[u,l,h,i,r,n,e,s,o,a])}(d,{replace:u,state:h,target:c,preventScrollReset:f,relative:a,viewTransition:g});let C=t.createElement("a",{...p,...k,href:i||v,onClick:_||l?r:function(t){r&&r(t),t.defaultPrevented||E(t)},ref:de(n,w),target:c,"data-discover":y||"render"!==s?void 0:"true"});return x&&!y?t.createElement(t.Fragment,null,C,t.createElement(ae,{page:v})):C}));me.displayName="Link";var ye=t.forwardRef((function(e,n){let{"aria-current":i="page",caseSensitive:r=!1,className:s="",end:o=!1,style:a,to:l,viewTransition:u,children:h,...c}=e,d=_t(l,{relative:c.relative}),f=gt(),g=t.useContext(st),{navigator:p,basename:m}=t.useContext(ut),y=null!=g&&function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=t.useContext(ot);S(null!=i,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=xe("useViewTransitionState"),s=_t(e,{relative:n.relative});if(!i.isTransitioning)return!1;let o=W(i.currentLocation.pathname,r)||i.currentLocation.pathname,a=W(i.nextLocation.pathname,r)||i.nextLocation.pathname;return null!=X(s.pathname,a)||null!=X(s.pathname,o)}(d)&&!0===u,_=p.encodeLocation?p.encodeLocation(d).pathname:d.pathname,v=f.pathname,x=g&&g.navigation&&g.navigation.location?g.navigation.location.pathname:null;r||(v=v.toLowerCase(),x=x?x.toLowerCase():null,_=_.toLowerCase()),x&&m&&(x=W(x,m)||x);const w="/"!==_&&_.endsWith("/")?_.length-1:_.length;let k,E=v===_||!o&&v.startsWith(_)&&"/"===v.charAt(w),b=null!=x&&(x===_||!o&&x.startsWith(_)&&"/"===x.charAt(_.length)),C={isActive:E,isPending:b,isTransitioning:y},I=E?i:void 0;k="function"===typeof s?s(C):[s,E?"active":null,b?"pending":null,y?"transitioning":null].filter(Boolean).join(" ");let T="function"===typeof a?a(C):a;return t.createElement(me,{...c,"aria-current":I,className:k,ref:n,style:T,to:l,viewTransition:u},"function"===typeof h?h(C):h)}));ye.displayName="NavLink";var _e=t.forwardRef(((e,n)=>{let{discover:i="render",fetcherKey:r,navigate:s,reloadDocument:o,replace:a,state:l,method:u=Ft,action:h,onSubmit:c,relative:d,preventScrollReset:f,viewTransition:g,...p}=e,m=Ee(),y=function(e){let{relative:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{basename:i}=t.useContext(ut),r=t.useContext(ct);S(r,"useFormAction must be used inside a RouteContext");let[s]=r.matches.slice(-1),o={..._t(e||".",{relative:n})},a=gt();if(null==e){o.search=a.search;let t=new URLSearchParams(o.search),e=t.getAll("index");if(e.some((t=>""===t))){t.delete("index"),e.filter((t=>t)).forEach((e=>t.append("index",e)));let n=t.toString();o.search=n?`?${n}`:""}}e&&"."!==e||!s.route.index||(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index");"/"!==i&&(o.pathname="/"===o.pathname?i:$([i,o.pathname]));return T(o)}(h,{relative:d}),_="get"===u.toLowerCase()?"get":"post",v="string"===typeof h&&pe.test(h);return t.createElement("form",{ref:n,method:_,action:y,onSubmit:o?c:t=>{if(c&&c(t),t.defaultPrevented)return;t.preventDefault();let e=t.nativeEvent.submitter,n=e?.getAttribute("formmethod")||u;m(e||t.currentTarget,{fetcherKey:r,method:n,navigate:s,replace:a,state:l,relative:d,preventScrollReset:f,viewTransition:g})},...p,"data-discover":v||"render"!==i?void 0:"true"})}));function ve(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function xe(e){let n=t.useContext(rt);return S(n,ve(e)),n}_e.displayName="Form";var we=0,ke=()=>`__${String(++we)}__`;function Ee(){let{router:e}=xe("useSubmit"),{basename:n}=t.useContext(ut),i=Tt("useRouteId");return t.useCallback((async function(t){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{action:s,method:o,encType:a,formData:l,body:u}=Bt(t,n);if(!1===r.navigate){let t=r.fetcherKey||ke();await e.fetch(t,i,r.action||s,{preventScrollReset:r.preventScrollReset,formData:l,body:u,formMethod:r.method||o,formEncType:r.encType||a,flushSync:r.flushSync})}else await e.navigate(r.action||s,{preventScrollReset:r.preventScrollReset,formData:l,body:u,formMethod:r.method||o,formEncType:r.encType||a,replace:r.replace,state:r.state,fromRouteId:i,flushSync:r.flushSync,viewTransition:r.viewTransition})}),[e,n,i])}new TextEncoder;var Se=function(){return Se=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},Se.apply(this,arguments)};var be="",Ce=null,Ie=null,Te=null;function Re(){be="",null!==Ce&&Ce.disconnect(),null!==Ie&&(window.clearTimeout(Ie),Ie=null)}function Ne(t){return["BUTTON","INPUT","SELECT","TEXTAREA"].includes(t.tagName)&&!t.hasAttribute("disabled")||["A","AREA"].includes(t.tagName)&&t.hasAttribute("href")}function Le(){var t=null;if("#"===be)t=document.body;else{var e=be.replace("#","");null===(t=document.getElementById(e))&&"#top"===be&&(t=document.body)}if(null!==t){Te(t);var n=t.getAttribute("tabindex");return null!==n||Ne(t)||t.setAttribute("tabindex",-1),t.focus({preventScroll:!0}),null!==n||Ne(t)||(t.blur(),t.removeAttribute("tabindex")),Re(),!0}return!1}function Me(e){return t.forwardRef((function(n,i){var r="";"string"===typeof n.to&&n.to.includes("#")?r="#"+n.to.split("#").slice(1).join("#"):"object"===typeof n.to&&"string"===typeof n.to.hash&&(r=n.to.hash);var s={};e===ye&&(s.isActive=function(t,e){return t&&t.isExact&&e.hash===r});var o=function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]])}return n}(n,["scroll","smooth","timeout","elementId"]);return t.createElement(e,Se({},s,o,{onClick:function(t){var e;Re(),be=n.elementId?"#"+n.elementId:r,n.onClick&&n.onClick(t),""===be||t.defaultPrevented||0!==t.button||n.target&&"_self"!==n.target||t.metaKey||t.altKey||t.ctrlKey||t.shiftKey||(Te=n.scroll||function(t){return n.smooth?t.scrollIntoView({behavior:"smooth"}):t.scrollIntoView()},e=n.timeout,window.setTimeout((function(){!1===Le()&&(null===Ce&&(Ce=new MutationObserver(Le)),Ce.observe(document,{attributes:!0,childList:!0,subtree:!0}),Ie=window.setTimeout((function(){Re()}),e||1e4))}),0))},ref:i}),n.children)}))}var Pe=Me(me);Me(ye);const Oe=e=>{let{linksList:n,style:i}=e;return(0,y.jsx)("div",{className:"container",style:i,children:t.Children.toArray(n.map((t=>""===t.icon?t.linkTo.includes("#")?(0,y.jsx)(Pe,{to:t.linkTo,className:"noIcon",children:t.text}):(0,y.jsx)(me,{to:t.linkTo,className:"noIcon",children:t.text}):(0,y.jsxs)("a",{className:"hasIcon",href:t.linkTo,target:"_blank",rel:"noreferrer",children:[" ",(0,y.jsx)("img",{className:"icon",src:t.icon,alt:""})," "]},t.key))))})};Oe.defaultProps={linksList:[]};const Ae=Oe;function Fe(t){return d({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M3 3c0 2 1 3 4 3c2 0 3 1 3 3"},child:[]},{tag:"path",attr:{d:"M21 3c0 2 -1 3 -4 3c-2 0 -3 .333 -3 3"},child:[]},{tag:"path",attr:{d:"M12 18c-1 0 -4 -3 -4 -6c0 -2 1.333 -3 4 -3s4 1 4 3c0 3 -3 6 -4 6"},child:[]},{tag:"path",attr:{d:"M15.185 14.889l.095 -.18a4 4 0 1 1 -6.56 0"},child:[]},{tag:"path",attr:{d:"M17 3c0 1.333 -.333 2.333 -1 3"},child:[]},{tag:"path",attr:{d:"M7 3c0 1.333 .333 2.333 1 3"},child:[]},{tag:"path",attr:{d:"M7 6c-2.667 .667 -4.333 1.667 -5 3"},child:[]},{tag:"path",attr:{d:"M17 6c2.667 .667 4.333 1.667 5 3"},child:[]},{tag:"path",attr:{d:"M8.5 10l-1.5 -1"},child:[]},{tag:"path",attr:{d:"M15.5 10l1.5 -1"},child:[]},{tag:"path",attr:{d:"M12 15h.01"},child:[]}]})(t)}function De(t){return d({tag:"svg",attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M96 224v32V416c0 17.7 14.3 32 32 32h32c17.7 0 32-14.3 32-32V327.8c9.9 6.6 20.6 12 32 16.1V368c0 8.8 7.2 16 16 16s16-7.2 16-16V351.1c5.3 .6 10.6 .9 16 .9s10.7-.3 16-.9V368c0 8.8 7.2 16 16 16s16-7.2 16-16V343.8c11.4-4 22.1-9.4 32-16.1V416c0 17.7 14.3 32 32 32h32c17.7 0 32-14.3 32-32V256l32 32v49.5c0 9.5 2.8 18.7 8.1 26.6L530 427c8.8 13.1 23.5 21 39.3 21c22.5 0 41.9-15.9 46.3-38l20.3-101.6c2.6-13-.3-26.5-8-37.3l-3.9-5.5V184c0-13.3-10.7-24-24-24s-24 10.7-24 24v14.4l-52.9-74.1C496 86.5 452.4 64 405.9 64H272 256 192 144C77.7 64 24 117.7 24 184v54C9.4 249.8 0 267.8 0 288v17.6c0 8 6.4 14.4 14.4 14.4C46.2 320 72 294.2 72 262.4V256 224 184c0-24.3 12.1-45.8 30.5-58.9C98.3 135.9 96 147.7 96 160v64zM560 336a16 16 0 1 1 32 0 16 16 0 1 1 -32 0zM166.6 166.6c-4.2-4.2-6.6-10-6.6-16c0-12.5 10.1-22.6 22.6-22.6H361.4c12.5 0 22.6 10.1 22.6 22.6c0 6-2.4 11.8-6.6 16l-23.4 23.4C332.2 211.8 302.7 224 272 224s-60.2-12.2-81.9-33.9l-23.4-23.4z"},child:[]}]})(t)}function ze(t){return d({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M0 96C0 60.7 28.7 32 64 32H448c35.3 0 64 28.7 64 64V416c0 35.3-28.7 64-64 64H64c-35.3 0-64-28.7-64-64V96zM48 368v32c0 8.8 7.2 16 16 16H96c8.8 0 16-7.2 16-16V368c0-8.8-7.2-16-16-16H64c-8.8 0-16 7.2-16 16zm368-16c-8.8 0-16 7.2-16 16v32c0 8.8 7.2 16 16 16h32c8.8 0 16-7.2 16-16V368c0-8.8-7.2-16-16-16H416zM48 240v32c0 8.8 7.2 16 16 16H96c8.8 0 16-7.2 16-16V240c0-8.8-7.2-16-16-16H64c-8.8 0-16 7.2-16 16zm368-16c-8.8 0-16 7.2-16 16v32c0 8.8 7.2 16 16 16h32c8.8 0 16-7.2 16-16V240c0-8.8-7.2-16-16-16H416zM48 112v32c0 8.8 7.2 16 16 16H96c8.8 0 16-7.2 16-16V112c0-8.8-7.2-16-16-16H64c-8.8 0-16 7.2-16 16zM416 96c-8.8 0-16 7.2-16 16v32c0 8.8 7.2 16 16 16h32c8.8 0 16-7.2 16-16V112c0-8.8-7.2-16-16-16H416zM160 128v64c0 17.7 14.3 32 32 32H320c17.7 0 32-14.3 32-32V128c0-17.7-14.3-32-32-32H192c-17.7 0-32 14.3-32 32zm32 160c-17.7 0-32 14.3-32 32v64c0 17.7 14.3 32 32 32H320c17.7 0 32-14.3 32-32V320c0-17.7-14.3-32-32-32H192z"},child:[]}]})(t)}var Ge=Object.defineProperty,je=(t,e,n)=>((t,e,n)=>e in t?Ge(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n)(t,"symbol"!==typeof e?e+"":e,n),Ye=new Map,Be=new WeakMap,Ue=0,Xe=void 0;function qe(t){return Object.keys(t).sort().filter((e=>void 0!==t[e])).map((e=>{return`${e}_${"root"===e?(n=t.root,n?(Be.has(n)||(Ue+=1,Be.set(n,Ue.toString())),Be.get(n)):"0"):t[e]}`;var n})).toString()}function We(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Xe;if("undefined"===typeof window.IntersectionObserver&&void 0!==i){const r=t.getBoundingClientRect();return e(i,{isIntersecting:i,target:t,intersectionRatio:"number"===typeof n.threshold?n.threshold:0,time:0,boundingClientRect:r,intersectionRect:r,rootBounds:r}),()=>{}}const{id:r,observer:s,elements:o}=function(t){const e=qe(t);let n=Ye.get(e);if(!n){const i=new Map;let r;const s=new IntersectionObserver((e=>{e.forEach((e=>{var n;const s=e.isIntersecting&&r.some((t=>e.intersectionRatio>=t));t.trackVisibility&&"undefined"===typeof e.isVisible&&(e.isVisible=s),null==(n=i.get(e.target))||n.forEach((t=>{t(s,e)}))}))}),t);r=s.thresholds||(Array.isArray(t.threshold)?t.threshold:[t.threshold||0]),n={id:e,observer:s,elements:i},Ye.set(e,n)}return n}(n),a=o.get(t)||[];return o.has(t)||o.set(t,a),a.push(e),s.observe(t),function(){a.splice(a.indexOf(e),1),0===a.length&&(o.delete(t),s.unobserve(t)),0===o.size&&(s.disconnect(),Ye.delete(r))}}t.Component;const Ve=[{name:(0,y.jsx)(Fe,{size:100}),label:"Moose Habitat",link:"https://geg.uoguelph.ca/sites/default/files/GEOG4480-W23_Group02.pdf",text:"I worked in a small team and a Masters Candidate to build a model measuring moose habitat suitability in Ontario's Missinaibi Forest using multi-criteria analysis and ArcGIS."},{name:(0,y.jsx)(De,{size:100}),label:"Precision Livestock",link:"https://github.com/ga-holmes/cows_drinking",text:"I explored AI and computer vision applications in precision livestock agriculture with the Collaborative Systems Lab and designed software to support a then-ongoing research project monitoring drinking habits in dairy cows."},{name:(0,y.jsx)(ze,{size:100}),label:"Independent Films",link:"https://www.youtube.com/watch?v=6oY2tPwBhj0",text:"I create indepenent films and music with friends and collaborate on a variety of creative projects."}],He=e=>{let{columns:n,spacing:i}=e;const[r,s]=(0,t.useState)("");return(0,t.useEffect)((()=>{""!==n?s(n):Ve.length>4?s("1fr 1fr 1fr 1fr"):s("1fr ".repeat(Ve.length)),console.log(r)}),[r,n,Ve]),(0,y.jsx)("div",{className:"actionWrapper",style:{gridTemplateColumns:r,gridGap:i},children:Ve.map(((t,e)=>(0,y.jsx)(Ke,{icon:t,index:e},e)))})},Ke=e=>{let{icon:n,index:i}=e;const{ref:r,inView:s}=function(){let{threshold:e,delay:n,trackVisibility:i,rootMargin:r,root:s,triggerOnce:o,skip:a,initialInView:l,fallbackInView:u,onChange:h}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var c;const[d,f]=t.useState(null),g=t.useRef(),[p,m]=t.useState({inView:!!l,entry:void 0});g.current=h,t.useEffect((()=>{if(a||!d)return;let t;return t=We(d,((e,n)=>{m({inView:e,entry:n}),g.current&&g.current(e,n),n.isIntersecting&&o&&t&&(t(),t=void 0)}),{root:s,rootMargin:r,threshold:e,trackVisibility:i,delay:n},u),()=>{t&&t()}}),[Array.isArray(e)?e.toString():e,d,s,r,o,a,i,u,n]);const y=null==(c=p.entry)?void 0:c.target,_=t.useRef();d||!y||o||a||_.current===y||(_.current=y,m({inView:!!l,entry:void 0}));const v=[f,p.inView,p.entry];return v.ref=v[0],v.inView=v[1],v.entry=v[2],v}({triggerOnce:!0,threshold:.7}),[o,a]=(0,t.useState)("0s");return(0,t.useEffect)((()=>{window.matchMedia("max-device-width: 1024px").matches&&a(.3*i+"s")}),[i]),(0,y.jsxs)("div",{ref:r,className:"actionItem "+(s?"animate":""),style:{transitionDelay:o},title:n.label,children:[(0,y.jsx)("a",{href:n.link,target:"_blank",rel:"noopener noreferrer",children:(0,y.jsx)("span",{className:"actionLink",children:(0,y.jsx)("p",{className:"actionLinkText",children:"L E A R N M O R E"})})}),(0,y.jsx)("span",{className:"actionIcon",children:n.name}),(0,y.jsx)("div",{className:"backgroundSlide",children:(0,y.jsx)("p",{className:"textFade",children:n.text})})]})};He.defaultProps={spacing:"1em",columns:"",count:2,elements:[]};const Ze=He,$e=()=>(0,y.jsxs)("div",{className:"App",children:[(0,y.jsx)("div",{className:"topBanner",id:"start",style:{backgroundImage:`url(${p})`}}),(0,y.jsx)("div",{id:"icons",children:(0,y.jsx)(Ae,{linksList:w.icons,style:{display:"flex"}})}),(0,y.jsx)("div",{className:"bck",style:{backgroundImage:`url(${m})`},children:(0,y.jsxs)("div",{className:"content",children:[(0,y.jsx)(v,{elements:w.homeElements}),(0,y.jsx)("br",{}),(0,y.jsx)("h1",{className:"sectionTitle",children:"P R O J E C T S"}),(0,y.jsx)(Ze,{elements:w.projectsElements})]})})]});const Je=()=>{let e=["boi.png","cocabike.jpg","darkforest.jpg","dylansky.jpg","jaritos.JPG","lilhpuse.png","mountain.JPG","mountaintree.JPG","raodbike.jpg","spanish.jpg","spanish2.jpg","spanish3.jpg","toronto.jpg","back1.JPG","back2.jpg","beech.jpg","clouds.jpg","cotty.jpg","fall.jpg","sil.JPG","uke.jpg","waves.jpg","prater2.jpg","prater1.jpg","mountainaus.jpg","louise.JPG","grass.jpg","dam.jpg","beach.jpg","bars.jpg"];e=function(t){for(var e=t.length-1;e>0;e--){var n=Math.floor(Math.random()*(e+1)),i=t[e];t[e]=t[n],t[n]=i}return t}(e);const n=[];let i=0;for(let t=0;t<e.length;t++)(i-1)%3===0?n.push((0,y.jsx)("div",{children:(0,y.jsx)("img",{className:"galleryimg",src:"/media/gallery/"+e[t],alt:""})})):(n.push((0,y.jsxs)("div",{children:[(0,y.jsx)("img",{className:"galleryimg",src:"/media/gallery/"+e[t],alt:""}),(0,y.jsx)("img",{className:"galleryimg",src:"/media/gallery/"+e[t+1],alt:""})]})),t++),i++;return(0,y.jsx)("div",{children:(0,y.jsx)("div",{className:"gwrapper",children:t.Children.toArray(n.map((t=>t)))})})},Qe=()=>{let e=yt(),{example:n}=function(){let{matches:e}=t.useContext(ct),n=e[e.length-1];return n?n.params:{}}();return(0,y.jsxs)("div",{children:["404: Page ",n,"not found",(0,y.jsx)("button",{onClick:()=>{e("/")},children:"Go Back"})]})};const tn=class{constructor(t){this.propagationStopped,this.defaultPrevented,this.type=t,this.target=null}preventDefault(){this.defaultPrevented=!0}stopPropagation(){this.propagationStopped=!0}},en="propertychange";const nn=class{constructor(){this.disposed=!1}dispose(){this.disposed||(this.disposed=!0,this.disposeInternal())}disposeInternal(){}};function rn(t,e){return t>e?1:t<e?-1:0}function sn(t,e,n){if(t[0]<=e)return 0;const i=t.length;if(e<=t[i-1])return i-1;if("function"===typeof n){for(let r=1;r<i;++r){const i=t[r];if(i===e)return r;if(i<e)return n(e,t[r-1],i)>0?r-1:r}return i-1}if(n>0){for(let n=1;n<i;++n)if(t[n]<e)return n-1;return i-1}if(n<0){for(let n=1;n<i;++n)if(t[n]<=e)return n;return i-1}for(let r=1;r<i;++r){if(t[r]==e)return r;if(t[r]<e)return t[r-1]-e<e-t[r]?r-1:r}return i-1}function on(t,e,n){for(;e<n;){const i=t[e];t[e]=t[n],t[n]=i,++e,--n}}function an(t,e){const n=Array.isArray(e)?e:[e],i=n.length;for(let r=0;r<i;r++)t[t.length]=n[r]}function ln(t,e){const n=t.length;if(n!==e.length)return!1;for(let i=0;i<n;i++)if(t[i]!==e[i])return!1;return!0}function un(){return!0}function hn(){return!1}function cn(){}function dn(t){let e,n,i;return function(){const r=Array.prototype.slice.call(arguments);return n&&this===i&&ln(r,n)||(i=this,n=r,e=t.apply(this,arguments)),e}}function fn(t){return function(){let e;try{e=t()}catch(n){return Promise.reject(n)}return e instanceof Promise?e:Promise.resolve(e)}()}function gn(t){for(const e in t)delete t[e]}function pn(t){let e;for(e in t)return!1;return!e}const mn=class extends nn{constructor(t){super(),this.eventTarget_=t,this.pendingRemovals_=null,this.dispatching_=null,this.listeners_=null}addEventListener(t,e){if(!t||!e)return;const n=this.listeners_||(this.listeners_={}),i=n[t]||(n[t]=[]);i.includes(e)||i.push(e)}dispatchEvent(t){const e="string"===typeof t,n=e?t:t.type,i=this.listeners_&&this.listeners_[n];if(!i)return;const r=e?new tn(t):t;r.target||(r.target=this.eventTarget_||this);const s=this.dispatching_||(this.dispatching_={}),o=this.pendingRemovals_||(this.pendingRemovals_={});let a;n in s||(s[n]=0,o[n]=0),++s[n];for(let l=0,u=i.length;l<u;++l)if(a="handleEvent"in i[l]?i[l].handleEvent(r):i[l].call(this,r),!1===a||r.propagationStopped){a=!1;break}if(0===--s[n]){let t=o[n];for(delete o[n];t--;)this.removeEventListener(n,cn);delete s[n]}return a}disposeInternal(){this.listeners_&&gn(this.listeners_)}getListeners(t){return this.listeners_&&this.listeners_[t]||void 0}hasListener(t){return!!this.listeners_&&(t?t in this.listeners_:Object.keys(this.listeners_).length>0)}removeEventListener(t,e){if(!this.listeners_)return;const n=this.listeners_[t];if(!n)return;const i=n.indexOf(e);-1!==i&&(this.pendingRemovals_&&t in this.pendingRemovals_?(n[i]=cn,++this.pendingRemovals_[t]):(n.splice(i,1),0===n.length&&delete this.listeners_[t]))}},yn="change",_n="error",vn="contextmenu",xn="click",wn="dblclick",kn="keydown",En="keypress",Sn="load",bn="touchmove",Cn="wheel";function In(t,e,n,i,r){if(r){const r=n;n=function(){t.removeEventListener(e,n),r.apply(i??this,arguments)}}else i&&i!==t&&(n=n.bind(i));const s={target:t,type:e,listener:n};return t.addEventListener(e,n),s}function Tn(t,e,n,i){return In(t,e,n,i,!0)}function Rn(t){t&&t.target&&(t.target.removeEventListener(t.type,t.listener),gn(t))}class Nn extends mn{constructor(){super(),this.on=this.onInternal,this.once=this.onceInternal,this.un=this.unInternal,this.revision_=0}changed(){++this.revision_,this.dispatchEvent(yn)}getRevision(){return this.revision_}onInternal(t,e){if(Array.isArray(t)){const n=t.length,i=new Array(n);for(let r=0;r<n;++r)i[r]=In(this,t[r],e);return i}return In(this,t,e)}onceInternal(t,e){let n;if(Array.isArray(t)){const i=t.length;n=new Array(i);for(let r=0;r<i;++r)n[r]=Tn(this,t[r],e)}else n=Tn(this,t,e);return e.ol_key=n,n}unInternal(t,e){const n=e.ol_key;if(n)!function(t){if(Array.isArray(t))for(let e=0,n=t.length;e<n;++e)Rn(t[e]);else Rn(t)}(n);else if(Array.isArray(t))for(let i=0,r=t.length;i<r;++i)this.removeEventListener(t[i],e);else this.removeEventListener(t,e)}}Nn.prototype.on,Nn.prototype.once,Nn.prototype.un;const Ln=Nn;function Mn(){throw new Error("Unimplemented abstract method.")}let Pn=0;function On(t){return t.ol_uid||(t.ol_uid=String(++Pn))}class An extends tn{constructor(t,e,n){super(t),this.key=e,this.oldValue=n}}const Fn=class extends Ln{constructor(t){super(),this.on,this.once,this.un,On(this),this.values_=null,void 0!==t&&this.setProperties(t)}get(t){let e;return this.values_&&this.values_.hasOwnProperty(t)&&(e=this.values_[t]),e}getKeys(){return this.values_&&Object.keys(this.values_)||[]}getProperties(){return this.values_&&Object.assign({},this.values_)||{}}getPropertiesInternal(){return this.values_}hasProperties(){return!!this.values_}notify(t,e){let n;n=`change:${t}`,this.hasListener(n)&&this.dispatchEvent(new An(n,t,e)),n=en,this.hasListener(n)&&this.dispatchEvent(new An(n,t,e))}addChangeListener(t,e){this.addEventListener(`change:${t}`,e)}removeChangeListener(t,e){this.removeEventListener(`change:${t}`,e)}set(t,e,n){const i=this.values_||(this.values_={});if(n)i[t]=e;else{const n=i[t];i[t]=e,n!==e&&this.notify(t,n)}}setProperties(t,e){for(const n in t)this.set(n,t[n],e)}applyProperties(t){t.values_&&Object.assign(this.values_||(this.values_={}),t.values_)}unset(t,e){if(this.values_&&t in this.values_){const n=this.values_[t];delete this.values_[t],pn(this.values_)&&(this.values_=null),e||this.notify(t,n)}}},Dn="add",zn="remove",Gn="length";class jn extends tn{constructor(t,e,n){super(t),this.element=e,this.index=n}}const Yn=class extends Fn{constructor(t,e){if(super(),this.on,this.once,this.un,e=e||{},this.unique_=!!e.unique,this.array_=t||[],this.unique_)for(let n=0,i=this.array_.length;n<i;++n)this.assertUnique_(this.array_[n],n);this.updateLength_()}clear(){for(;this.getLength()>0;)this.pop()}extend(t){for(let e=0,n=t.length;e<n;++e)this.push(t[e]);return this}forEach(t){const e=this.array_;for(let n=0,i=e.length;n<i;++n)t(e[n],n,e)}getArray(){return this.array_}item(t){return this.array_[t]}getLength(){return this.get(Gn)}insertAt(t,e){if(t<0||t>this.getLength())throw new Error("Index out of bounds: "+t);this.unique_&&this.assertUnique_(e),this.array_.splice(t,0,e),this.updateLength_(),this.dispatchEvent(new jn(Dn,e,t))}pop(){return this.removeAt(this.getLength()-1)}push(t){this.unique_&&this.assertUnique_(t);const e=this.getLength();return this.insertAt(e,t),this.getLength()}remove(t){const e=this.array_;for(let n=0,i=e.length;n<i;++n)if(e[n]===t)return this.removeAt(n)}removeAt(t){if(t<0||t>=this.getLength())return;const e=this.array_[t];return this.array_.splice(t,1),this.updateLength_(),this.dispatchEvent(new jn(zn,e,t)),e}setAt(t,e){if(t>=this.getLength())return void this.insertAt(t,e);if(t<0)throw new Error("Index out of bounds: "+t);this.unique_&&this.assertUnique_(e,t);const n=this.array_[t];this.array_[t]=e,this.dispatchEvent(new jn(zn,n,t)),this.dispatchEvent(new jn(Dn,e,t))}updateLength_(){this.set(Gn,this.array_.length)}assertUnique_(t,e){for(let n=0,i=this.array_.length;n<i;++n)if(this.array_[n]===t&&n!==e)throw new Error("Duplicate item added to a unique collection")}},Bn="opacity",Un="visible",Xn="extent",qn="zIndex",Wn="maxResolution",Vn="minResolution",Hn="maxZoom",Kn="minZoom",Zn="source",$n="map";function Jn(t,e){if(!t)throw new Error(e)}function Qn(t,e,n){return Math.min(Math.max(t,e),n)}function ti(t,e,n,i,r,s){const o=r-n,a=s-i;if(0!==o||0!==a){const l=((t-n)*o+(e-i)*a)/(o*o+a*a);l>1?(n=r,i=s):l>0&&(n+=o*l,i+=a*l)}return ei(t,e,n,i)}function ei(t,e,n,i){const r=n-t,s=i-e;return r*r+s*s}function ni(t){return t*Math.PI/180}function ii(t,e){const n=t%e;return n*e<0?n+e:n}function ri(t,e,n){return t+n*(e-t)}function si(t,e){const n=Math.pow(10,e);return Math.round(t*n)/n}function oi(t,e){return Math.floor(si(t,e))}function ai(t,e){return Math.ceil(si(t,e))}const li=class extends Fn{constructor(t){super(),this.on,this.once,this.un,this.background_=t.background;const e=Object.assign({},t);"object"===typeof t.properties&&(delete e.properties,Object.assign(e,t.properties)),e[Bn]=void 0!==t.opacity?t.opacity:1,Jn("number"===typeof e[Bn],"Layer opacity must be a number"),e[Un]=void 0===t.visible||t.visible,e[qn]=t.zIndex,e[Wn]=void 0!==t.maxResolution?t.maxResolution:1/0,e[Vn]=void 0!==t.minResolution?t.minResolution:0,e[Kn]=void 0!==t.minZoom?t.minZoom:-1/0,e[Hn]=void 0!==t.maxZoom?t.maxZoom:1/0,this.className_=void 0!==e.className?e.className:"ol-layer",delete e.className,this.setProperties(e),this.state_=null}getBackground(){return this.background_}getClassName(){return this.className_}getLayerState(t){const e=this.state_||{layer:this,managed:void 0===t||t},n=this.getZIndex();return e.opacity=Qn(Math.round(100*this.getOpacity())/100,0,1),e.visible=this.getVisible(),e.extent=this.getExtent(),e.zIndex=void 0!==n||e.managed?n:1/0,e.maxResolution=this.getMaxResolution(),e.minResolution=Math.max(this.getMinResolution(),0),e.minZoom=this.getMinZoom(),e.maxZoom=this.getMaxZoom(),this.state_=e,e}getLayersArray(t){return Mn()}getLayerStatesArray(t){return Mn()}getExtent(){return this.get(Xn)}getMaxResolution(){return this.get(Wn)}getMinResolution(){return this.get(Vn)}getMinZoom(){return this.get(Kn)}getMaxZoom(){return this.get(Hn)}getOpacity(){return this.get(Bn)}getSourceState(){return Mn()}getVisible(){return this.get(Un)}getZIndex(){return this.get(qn)}setBackground(t){this.background_=t,this.changed()}setExtent(t){this.set(Xn,t)}setMaxResolution(t){this.set(Wn,t)}setMinResolution(t){this.set(Vn,t)}setMaxZoom(t){this.set(Hn,t)}setMinZoom(t){this.set(Kn,t)}setOpacity(t){Jn("number"===typeof t,"Layer opacity must be a number"),this.set(Bn,t)}setVisible(t){this.set(Un,t)}setZIndex(t){this.set(qn,t)}disposeInternal(){this.state_&&(this.state_.layer=null,this.state_=null),super.disposeInternal()}},ui="prerender",hi="postrender",ci="precompose",di="postcompose",fi="rendercomplete",gi=0,pi=1,mi={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"},yi=256;const _i={radians:6370997/(2*Math.PI),degrees:2*Math.PI*6370997/360,ft:.3048,m:1,"us-ft":1200/3937};const vi=class{constructor(t){this.code_=t.code,this.units_=t.units,this.extent_=void 0!==t.extent?t.extent:null,this.worldExtent_=void 0!==t.worldExtent?t.worldExtent:null,this.axisOrientation_=void 0!==t.axisOrientation?t.axisOrientation:"enu",this.global_=void 0!==t.global&&t.global,this.canWrapX_=!(!this.global_||!this.extent_),this.getPointResolutionFunc_=t.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=t.metersPerUnit}canWrapX(){return this.canWrapX_}getCode(){return this.code_}getExtent(){return this.extent_}getUnits(){return this.units_}getMetersPerUnit(){return this.metersPerUnit_||_i[this.units_]}getWorldExtent(){return this.worldExtent_}getAxisOrientation(){return this.axisOrientation_}isGlobal(){return this.global_}setGlobal(t){this.global_=t,this.canWrapX_=!(!t||!this.extent_)}getDefaultTileGrid(){return this.defaultTileGrid_}setDefaultTileGrid(t){this.defaultTileGrid_=t}setExtent(t){this.extent_=t,this.canWrapX_=!(!this.global_||!t)}setWorldExtent(t){this.worldExtent_=t}setGetPointResolution(t){this.getPointResolutionFunc_=t}getPointResolutionFunc(){return this.getPointResolutionFunc_}},xi=6378137,wi=Math.PI*xi,ki=[-wi,-wi,wi,wi],Ei=[-180,-85,180,85],Si=xi*Math.log(Math.tan(Math.PI/2));class bi extends vi{constructor(t){super({code:t,units:"m",extent:ki,global:!0,worldExtent:Ei,getPointResolution:function(t,e){return t/Math.cosh(e[1]/xi)}})}}const Ci=[new bi("EPSG:3857"),new bi("EPSG:102100"),new bi("EPSG:102113"),new bi("EPSG:900913"),new bi("http://www.opengis.net/def/crs/EPSG/0/3857"),new bi("http://www.opengis.net/gml/srs/epsg.xml#3857")];function Ii(t,e,n,i){const r=t.length;n=n>1?n:2,i=i??n,void 0===e&&(e=n>2?t.slice():new Array(r));for(let s=0;s<r;s+=i){e[s]=wi*t[s]/180;let n=xi*Math.log(Math.tan(Math.PI*(+t[s+1]+90)/360));n>Si?n=Si:n<-Si&&(n=-Si),e[s+1]=n}return e}function Ti(t,e,n,i){const r=t.length;n=n>1?n:2,i=i??n,void 0===e&&(e=n>2?t.slice():new Array(r));for(let s=0;s<r;s+=i)e[s]=180*t[s]/wi,e[s+1]=360*Math.atan(Math.exp(t[s+1]/xi))/Math.PI-90;return e}const Ri=[-180,-90,180,90],Ni=6378137*Math.PI/180;class Li extends vi{constructor(t,e){super({code:t,units:"degrees",extent:Ri,axisOrientation:e,global:!0,metersPerUnit:Ni,worldExtent:Ri})}}const Mi=[new Li("CRS:84"),new Li("EPSG:4326","neu"),new Li("urn:ogc:def:crs:OGC:1.3:CRS84"),new Li("urn:ogc:def:crs:OGC:2:84"),new Li("http://www.opengis.net/def/crs/OGC/1.3/CRS84"),new Li("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new Li("http://www.opengis.net/def/crs/EPSG/0/4326","neu")];let Pi={};let Oi={};function Ai(t,e,n){const i=t.getCode(),r=e.getCode();i in Oi||(Oi[i]={}),Oi[i][r]=n}const Fi=0,Di=1,zi=2,Gi=4,ji=8,Yi=16;function Bi(t){const e=Zi();for(let n=0,i=t.length;n<i;++n)ir(e,t[n]);return e}function Ui(t,e,n){return n?(n[0]=t[0]-e,n[1]=t[1]-e,n[2]=t[2]+e,n[3]=t[3]+e,n):[t[0]-e,t[1]-e,t[2]+e,t[3]+e]}function Xi(t,e){return e?(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e):t.slice()}function qi(t,e,n){let i,r;return i=e<t[0]?t[0]-e:t[2]<e?e-t[2]:0,r=n<t[1]?t[1]-n:t[3]<n?n-t[3]:0,i*i+r*r}function Wi(t,e){return Hi(t,e[0],e[1])}function Vi(t,e){return t[0]<=e[0]&&e[2]<=t[2]&&t[1]<=e[1]&&e[3]<=t[3]}function Hi(t,e,n){return t[0]<=e&&e<=t[2]&&t[1]<=n&&n<=t[3]}function Ki(t,e){const n=t[0],i=t[1],r=t[2],s=t[3],o=e[0],a=e[1];let l=Fi;return o<n?l|=Yi:o>r&&(l|=Gi),a<i?l|=ji:a>s&&(l|=zi),l===Fi&&(l=Di),l}function Zi(){return[1/0,1/0,-1/0,-1/0]}function $i(t,e,n,i,r){return r?(r[0]=t,r[1]=e,r[2]=n,r[3]=i,r):[t,e,n,i]}function Ji(t){return $i(1/0,1/0,-1/0,-1/0,t)}function Qi(t,e){const n=t[0],i=t[1];return $i(n,i,n,i,e)}function tr(t,e,n,i,r){return rr(Ji(r),t,e,n,i)}function er(t,e){return t[0]==e[0]&&t[2]==e[2]&&t[1]==e[1]&&t[3]==e[3]}function nr(t,e){return e[0]<t[0]&&(t[0]=e[0]),e[2]>t[2]&&(t[2]=e[2]),e[1]<t[1]&&(t[1]=e[1]),e[3]>t[3]&&(t[3]=e[3]),t}function ir(t,e){e[0]<t[0]&&(t[0]=e[0]),e[0]>t[2]&&(t[2]=e[0]),e[1]<t[1]&&(t[1]=e[1]),e[1]>t[3]&&(t[3]=e[1])}function rr(t,e,n,i,r){for(;n<i;n+=r)sr(t,e[n],e[n+1]);return t}function sr(t,e,n){t[0]=Math.min(t[0],e),t[1]=Math.min(t[1],n),t[2]=Math.max(t[2],e),t[3]=Math.max(t[3],n)}function or(t,e){let n;return n=e(lr(t)),n||(n=e(ur(t)),n||(n=e(mr(t)),n||(n=e(pr(t)),n||!1)))}function ar(t){let e=0;return vr(t)||(e=yr(t)*fr(t)),e}function lr(t){return[t[0],t[1]]}function ur(t){return[t[2],t[1]]}function hr(t){return[(t[0]+t[2])/2,(t[1]+t[3])/2]}function cr(t,e){let n;if("bottom-left"===e)n=lr(t);else if("bottom-right"===e)n=ur(t);else if("top-left"===e)n=pr(t);else{if("top-right"!==e)throw new Error("Invalid corner");n=mr(t)}return n}function dr(t,e,n,i,r){const[s,o,a,l,u,h,c,d]=function(t,e,n,i){const r=e*i[0]/2,s=e*i[1]/2,o=Math.cos(n),a=Math.sin(n),l=r*o,u=r*a,h=s*o,c=s*a,d=t[0],f=t[1];return[d-l+c,f-u-h,d-l-c,f-u+h,d+l-c,f+u+h,d+l+c,f+u-h,d-l+c,f-u-h]}(t,e,n,i);return $i(Math.min(s,a,u,c),Math.min(o,l,h,d),Math.max(s,a,u,c),Math.max(o,l,h,d),r)}function fr(t){return t[3]-t[1]}function gr(t,e,n){const i=n||[1/0,1/0,-1/0,-1/0];return _r(t,e)?(t[0]>e[0]?i[0]=t[0]:i[0]=e[0],t[1]>e[1]?i[1]=t[1]:i[1]=e[1],t[2]<e[2]?i[2]=t[2]:i[2]=e[2],t[3]<e[3]?i[3]=t[3]:i[3]=e[3]):Ji(i),i}function pr(t){return[t[0],t[3]]}function mr(t){return[t[2],t[3]]}function yr(t){return t[2]-t[0]}function _r(t,e){return t[0]<=e[2]&&t[2]>=e[0]&&t[1]<=e[3]&&t[3]>=e[1]}function vr(t){return t[2]<t[0]||t[3]<t[1]}function xr(t,e,n,i){if(vr(t))return Ji(n);let r=[];if(i>1){const e=t[2]-t[0],n=t[3]-t[1];for(let s=0;s<i;++s)r.push(t[0]+e*s/i,t[1],t[2],t[1]+n*s/i,t[2]-e*s/i,t[3],t[0],t[3]-n*s/i)}else r=[t[0],t[1],t[2],t[1],t[2],t[3],t[0],t[3]];e(r,r,2);const s=[],o=[];for(let a=0,l=r.length;a<l;a+=2)s.push(r[a]),o.push(r[a+1]);return function(t,e,n){return $i(Math.min.apply(null,t),Math.min.apply(null,e),Math.max.apply(null,t),Math.max.apply(null,e),n)}(s,o,n)}function wr(t,e){const n=e.getExtent(),i=hr(t);if(e.canWrapX()&&(i[0]<n[0]||i[0]>=n[2])){const e=yr(n),r=Math.floor((i[0]-n[0])/e)*e;t[0]-=r,t[2]-=r}return t}function kr(t,e,n){if(e.canWrapX()){const i=e.getExtent();if(!isFinite(t[0])||!isFinite(t[2]))return[[i[0],t[1],i[2],t[3]]];wr(t,e);const r=yr(i);if(yr(t)>r&&!n)return[[i[0],t[1],i[2],t[3]]];if(t[0]<i[0])return[[t[0]+r,t[1],i[2],t[3]],[i[0],t[1],t[2],t[3]]];if(t[2]>i[2])return[[t[0],t[1],i[2],t[3]],[i[0],t[1],t[2]-r,t[3]]]}return[t]}function Er(t,e){let n=!0;for(let i=t.length-1;i>=0;--i)if(t[i]!=e[i]){n=!1;break}return n}function Sr(t,e){const n=Math.cos(e),i=Math.sin(e),r=t[0]*n-t[1]*i,s=t[1]*n+t[0]*i;return t[0]=r,t[1]=s,t}function br(t,e){if(e.canWrapX()){const n=yr(e.getExtent()),i=function(t,e,n){const i=e.getExtent();let r=0;e.canWrapX()&&(t[0]<i[0]||t[0]>i[2])&&(n=n||yr(i),r=Math.floor((t[0]-i[0])/n));return r}(t,e,n);i&&(t[0]-=i*n)}return t}const Cr=6371008.8;function Ir(t,e,n){n=n||Cr;const i=ni(t[1]),r=ni(e[1]),s=(r-i)/2,o=ni(e[0]-t[0])/2,a=Math.sin(s)*Math.sin(s)+Math.sin(o)*Math.sin(o)*Math.cos(i)*Math.cos(r);return 2*n*Math.atan2(Math.sqrt(a),Math.sqrt(1-a))}const Tr={info:1,warn:2,error:3,none:4};let Rr=Tr.info;function Nr(){Rr>Tr.warn||console.warn(...arguments)}let Lr=!0;function Mr(t){Lr=!(void 0===t||t)}function Pr(t,e){if(void 0!==e)for(let n=0,i=t.length;n<i;++n)e[n]=t[n];else e=t.slice();return e}function Or(t,e){if(void 0!==e&&t!==e){for(let n=0,i=t.length;n<i;++n)e[n]=t[n];t=e}return t}function Ar(t){!function(t,e){Pi[t]=e}(t.getCode(),t),Ai(t,t,Pr)}function Fr(t){return"string"===typeof t?Pi[e=t]||Pi[e.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null:t||null;var e}function Dr(t,e,n,i){let r;const s=(t=Fr(t)).getPointResolutionFunc();if(s){if(r=s(e,n),i&&i!==t.getUnits()){const e=t.getMetersPerUnit();e&&(r=r*e/_i[i])}}else{const s=t.getUnits();if("degrees"==s&&!i||"degrees"==i)r=e;else{const o=Br(t,Fr("EPSG:4326"));if(o===Or&&"degrees"!==s)r=e*t.getMetersPerUnit();else{let t=[n[0]-e/2,n[1],n[0]+e/2,n[1],n[0],n[1]-e/2,n[0],n[1]+e/2];t=o(t,t,2);r=(Ir(t.slice(0,2),t.slice(2,4))+Ir(t.slice(4,6),t.slice(6,8)))/2}const a=i?_i[i]:t.getMetersPerUnit();void 0!==a&&(r/=a)}}return r}function zr(t){!function(t){t.forEach(Ar)}(t),t.forEach((function(e){t.forEach((function(t){e!==t&&Ai(e,t,Pr)}))}))}function Gr(t,e){return t?"string"===typeof t?Fr(t):t:Fr(e)}function jr(t,e){const n=Xr(t,void 0!==e?e:"EPSG:3857","EPSG:4326"),i=n[0];return(i<-180||i>180)&&(n[0]=ii(i+180,360)-180),n}function Yr(t,e){if(t===e)return!0;const n=t.getUnits()===e.getUnits();if(t.getCode()===e.getCode())return n;return Br(t,e)===Pr&&n}function Br(t,e){let n=function(t,e){let n;return t in Oi&&e in Oi[t]&&(n=Oi[t][e]),n}(t.getCode(),e.getCode());return n||(n=Or),n}function Ur(t,e){return Br(Fr(t),Fr(e))}function Xr(t,e,n){return Ur(e,n)(t,void 0,t.length)}function qr(t,e,n,i){return xr(t,Ur(e,n),void 0,i)}let Wr=null;function Vr(){return Wr}function Hr(t,e){return Wr?Xr(t,e,Wr):t}function Kr(t,e){return Wr?Xr(t,Wr,e):(Lr&&!Er(t,[0,0])&&t[0]>=-180&&t[0]<=180&&t[1]>=-90&&t[1]<=90&&(Lr=!1,Nr("Call useGeographic() from ol/proj once to work with [longitude, latitude] coordinates.")),t)}function Zr(t,e){return Wr?qr(t,e,Wr):t}function $r(t,e){return Wr?qr(t,Wr,e):t}function Jr(t,e){if(!Wr)return t;const n=Fr(e).getMetersPerUnit(),i=Wr.getMetersPerUnit();return n&&i?t*n/i:t}function Qr(t,e,n){return function(i,r,s,o,a){if(!i)return;if(!r&&!e)return i;const l=e?0:s[0]*r,u=e?0:s[1]*r,h=a?a[0]:0,c=a?a[1]:0;let d=t[0]+l/2+h,f=t[2]-l/2+h,g=t[1]+u/2+c,p=t[3]-u/2+c;d>f&&(d=(f+d)/2,f=d),g>p&&(g=(p+g)/2,p=g);let m=Qn(i[0],d,f),y=Qn(i[1],g,p);if(o&&n&&r){const t=30*r;m+=-t*Math.log(1+Math.max(0,d-i[0])/t)+t*Math.log(1+Math.max(0,i[0]-f)/t),y+=-t*Math.log(1+Math.max(0,g-i[1])/t)+t*Math.log(1+Math.max(0,i[1]-p)/t)}return[m,y]}}function ts(t){return t}function es(t,e,n,i){const r=yr(e)/n[0],s=fr(e)/n[1];return i?Math.min(t,Math.max(r,s)):Math.min(t,Math.min(r,s))}function ns(t,e,n){let i=Math.min(t,e);return i*=Math.log(1+50*Math.max(0,t/e-1))/50+1,n&&(i=Math.max(i,n),i/=Math.log(1+50*Math.max(0,n/t-1))/50+1),Qn(i,n/2,2*e)}function is(t,e,n,i,r){return n=void 0===n||n,function(s,o,a,l){if(void 0!==s){const o=i?es(t,i,a,r):t;return n&&l?ns(s,o,e):Qn(s,e,o)}}}function rs(t){if(void 0!==t)return 0}function ss(t){if(void 0!==t)return t}function os(t){return Math.pow(t,3)}function as(t){return 1-os(1-t)}function ls(t){return 3*t*t-2*t*t*t}function us(t){return t}!function(){var t,e,n;zr(Ci),zr(Mi),t=Ci,e=Ii,n=Ti,Mi.forEach((function(i){t.forEach((function(t){Ai(i,t,e),Ai(t,i,n)}))}))}();new Array(6);function hs(t,e){const n=e[0],i=e[1];return e[0]=t[0]*n+t[2]*i+t[4],e[1]=t[1]*n+t[3]*i+t[5],e}function cs(t,e,n,i,r,s,o,a){const l=Math.sin(s),u=Math.cos(s);return t[0]=i*u,t[1]=r*l,t[2]=-i*l,t[3]=r*u,t[4]=o*i*u-a*i*l+e,t[5]=o*r*l+a*r*u+n,t}function ds(t,e){const n=(i=e)[0]*i[3]-i[1]*i[2];var i;Jn(0!==n,"Transformation matrix cannot be inverted");const r=e[0],s=e[1],o=e[2],a=e[3],l=e[4],u=e[5];return t[0]=a/n,t[1]=-s/n,t[2]=-o/n,t[3]=r/n,t[4]=(o*u-a*l)/n,t[5]=-(r*u-s*l)/n,t}const fs=[1e6,1e6,1e6,1e6,2,2];function gs(t){return"matrix("+t.map(((t,e)=>Math.round(t*fs[e])/fs[e])).join(", ")+")"}function ps(t,e,n,i,r,s,o){s=s||[],o=o||2;let a=0;for(let l=e;l<n;l+=i){const e=t[l],n=t[l+1];s[a++]=r[0]*e+r[2]*n+r[4],s[a++]=r[1]*e+r[3]*n+r[5];for(let i=2;i<o;i++)s[a++]=t[l+i]}return s&&s.length!=a&&(s.length=a),s}function ms(t,e,n,i,r,s,o){o=o||[];const a=Math.cos(r),l=Math.sin(r),u=s[0],h=s[1];let c=0;for(let d=e;d<n;d+=i){const e=t[d]-u,n=t[d+1]-h;o[c++]=u+e*a-n*l,o[c++]=h+e*l+n*a;for(let r=d+2;r<d+i;++r)o[c++]=t[r]}return o&&o.length!=c&&(o.length=c),o}const ys=[1,0,0,1,0,0];const _s=class extends Fn{constructor(){super(),this.extent_=[1/0,1/0,-1/0,-1/0],this.extentRevision_=-1,this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=0,this.simplifyTransformedInternal=dn(((t,e,n)=>{if(!n)return this.getSimplifiedGeometry(e);const i=this.clone();return i.applyTransform(n),i.getSimplifiedGeometry(e)}))}simplifyTransformed(t,e){return this.simplifyTransformedInternal(this.getRevision(),t,e)}clone(){return Mn()}closestPointXY(t,e,n,i){return Mn()}containsXY(t,e){const n=this.getClosestPoint([t,e]);return n[0]===t&&n[1]===e}getClosestPoint(t,e){return e=e||[NaN,NaN],this.closestPointXY(t[0],t[1],e,1/0),e}intersectsCoordinate(t){return this.containsXY(t[0],t[1])}computeExtent(t){return Mn()}getExtent(t){if(this.extentRevision_!=this.getRevision()){const t=this.computeExtent(this.extent_);(isNaN(t[0])||isNaN(t[1]))&&Ji(t),this.extentRevision_=this.getRevision()}return function(t,e){return e?(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e):t}(this.extent_,t)}rotate(t,e){Mn()}scale(t,e,n){Mn()}simplify(t){return this.getSimplifiedGeometry(t*t)}getSimplifiedGeometry(t){return Mn()}getType(){return Mn()}applyTransform(t){Mn()}intersectsExtent(t){return Mn()}translate(t,e){Mn()}transform(t,e){const n=Fr(t),i="tile-pixels"==n.getUnits()?function(t,i,r){const s=n.getExtent(),o=n.getWorldExtent(),a=fr(o)/fr(s);return cs(ys,o[0],o[3],a,-a,0,0,0),ps(t,0,t.length,r,ys,i),Ur(n,e)(t,i,r)}:Ur(n,e);return this.applyTransform(i),this}};function vs(t){let e;return 2==t?e="XY":3==t?e="XYZ":4==t&&(e="XYZM"),e}function xs(t){let e;return"XY"==t?e=2:"XYZ"==t||"XYM"==t?e=3:"XYZM"==t&&(e=4),e}const ws=class extends _s{constructor(){super(),this.layout="XY",this.stride=2,this.flatCoordinates}computeExtent(t){return tr(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)}getCoordinates(){return Mn()}getFirstCoordinate(){return this.flatCoordinates.slice(0,this.stride)}getFlatCoordinates(){return this.flatCoordinates}getLastCoordinate(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)}getLayout(){return this.layout}getSimplifiedGeometry(t){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&t<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;const e=this.getSimplifiedGeometryInternal(t);return e.getFlatCoordinates().length<this.flatCoordinates.length?e:(this.simplifiedGeometryMaxMinSquaredTolerance=t,this)}getSimplifiedGeometryInternal(t){return this}getStride(){return this.stride}setFlatCoordinates(t,e){this.stride=xs(t),this.layout=t,this.flatCoordinates=e}setCoordinates(t,e){Mn()}setLayout(t,e,n){let i;if(t)i=xs(t);else{for(let t=0;t<n;++t){if(0===e.length)return this.layout="XY",void(this.stride=2);e=e[0]}i=e.length,t=vs(i)}this.layout=t,this.stride=i}applyTransform(t){this.flatCoordinates&&(t(this.flatCoordinates,this.flatCoordinates,this.layout.startsWith("XYZ")?3:2,this.stride),this.changed())}rotate(t,e){const n=this.getFlatCoordinates();if(n){const i=this.getStride();ms(n,0,n.length,i,t,e,n),this.changed()}}scale(t,e,n){void 0===e&&(e=t),n||(n=hr(this.getExtent()));const i=this.getFlatCoordinates();if(i){const r=this.getStride();!function(t,e,n,i,r,s,o,a){a=a||[];const l=o[0],u=o[1];let h=0;for(let c=e;c<n;c+=i){const e=t[c]-l,n=t[c+1]-u;a[h++]=l+r*e,a[h++]=u+s*n;for(let r=c+2;r<c+i;++r)a[h++]=t[r]}a&&a.length!=h&&(a.length=h)}(i,0,i.length,r,t,e,n,i),this.changed()}}translate(t,e){const n=this.getFlatCoordinates();if(n){const i=this.getStride();!function(t,e,n,i,r,s,o){o=o||[];let a=0;for(let l=e;l<n;l+=i){o[a++]=t[l]+r,o[a++]=t[l+1]+s;for(let e=l+2;e<l+i;++e)o[a++]=t[e]}o&&o.length!=a&&(o.length=a)}(n,0,n.length,i,t,e,n),this.changed()}}};function ks(t,e,n,i,r,s,o){const a=t[e],l=t[e+1],u=t[n]-a,h=t[n+1]-l;let c;if(0===u&&0===h)c=e;else{const d=((r-a)*u+(s-l)*h)/(u*u+h*h);if(d>1)c=n;else{if(d>0){for(let r=0;r<i;++r)o[r]=ri(t[e+r],t[n+r],d);return void(o.length=i)}c=e}}for(let d=0;d<i;++d)o[d]=t[c+d];o.length=i}function Es(t,e,n,i,r){let s=t[e],o=t[e+1];for(e+=i;e<n;e+=i){const n=t[e],i=t[e+1],a=ei(s,o,n,i);a>r&&(r=a),s=n,o=i}return r}function Ss(t,e,n,i,r){for(let s=0,o=n.length;s<o;++s){const o=n[s];r=Es(t,e,o,i,r),e=o}return r}function bs(t,e,n,i,r,s,o,a,l,u,h){if(e==n)return u;let c,d;if(0===r){if(d=ei(o,a,t[e],t[e+1]),d<u){for(c=0;c<i;++c)l[c]=t[e+c];return l.length=i,d}return u}h=h||[NaN,NaN];let f=e+i;for(;f<n;)if(ks(t,f-i,f,i,o,a,h),d=ei(o,a,h[0],h[1]),d<u){for(u=d,c=0;c<i;++c)l[c]=h[c];l.length=i,f+=i}else f+=i*Math.max((Math.sqrt(d)-Math.sqrt(u))/r|0,1);if(s&&(ks(t,n-i,e,i,o,a,h),d=ei(o,a,h[0],h[1]),d<u)){for(u=d,c=0;c<i;++c)l[c]=h[c];l.length=i}return u}function Cs(t,e,n,i,r,s,o,a,l,u,h){h=h||[NaN,NaN];for(let c=0,d=n.length;c<d;++c){const d=n[c];u=bs(t,e,d,i,r,s,o,a,l,u,h),e=d}return u}function Is(t,e,n,i){for(let r=0,s=n.length;r<s;++r){const s=n[r];for(let n=0;n<i;++n)t[e++]=s[n]}return e}function Ts(t,e,n,i,r){r=r||[];let s=0;for(let o=0,a=n.length;o<a;++o){const a=Is(t,e,n[o],i);r[s++]=a,e=a}return r.length=s,r}function Rs(t,e,n,i,r){r=r||[];let s=0;for(let o=0,a=n.length;o<a;++o){const a=Ts(t,e,n[o],i,r[s]);0===a.length&&(a[0]=e),r[s++]=a,e=a[a.length-1]}return r.length=s,r}function Ns(t,e,n,i,r,s,o){const a=(n-e)/i;if(a<3){for(;e<n;e+=i)s[o++]=t[e],s[o++]=t[e+1];return o}const l=new Array(a);l[0]=1,l[a-1]=1;const u=[e,n-i];let h=0;for(;u.length>0;){const n=u.pop(),s=u.pop();let o=0;const a=t[s],c=t[s+1],d=t[n],f=t[n+1];for(let e=s+i;e<n;e+=i){const n=ti(t[e],t[e+1],a,c,d,f);n>o&&(h=e,o=n)}o>r&&(l[(h-e)/i]=1,s+i<h&&u.push(s,h),h+i<n&&u.push(h,n))}for(let c=0;c<a;++c)l[c]&&(s[o++]=t[e+c*i],s[o++]=t[e+c*i+1]);return o}function Ls(t,e,n,i,r,s,o,a){for(let l=0,u=n.length;l<u;++l){const u=n[l];o=Ns(t,e,u,i,r,s,o),a.push(o),e=u}return o}function Ms(t,e){return e*Math.round(t/e)}function Ps(t,e,n,i,r,s,o){if(e==n)return o;let a,l,u=Ms(t[e],r),h=Ms(t[e+1],r);e+=i,s[o++]=u,s[o++]=h;do{if(a=Ms(t[e],r),l=Ms(t[e+1],r),(e+=i)==n)return s[o++]=a,s[o++]=l,o}while(a==u&&l==h);for(;e<n;){const n=Ms(t[e],r),c=Ms(t[e+1],r);if(e+=i,n==a&&c==l)continue;const d=a-u,f=l-h,g=n-u,p=c-h;d*p==f*g&&(d<0&&g<d||d==g||d>0&&g>d)&&(f<0&&p<f||f==p||f>0&&p>f)?(a=n,l=c):(s[o++]=a,s[o++]=l,u=a,h=l,a=n,l=c)}return s[o++]=a,s[o++]=l,o}function Os(t,e,n,i,r,s,o,a){for(let l=0,u=n.length;l<u;++l){const u=n[l];o=Ps(t,e,u,i,r,s,o),a.push(o),e=u}return o}function As(t,e,n,i,r){r=void 0!==r?r:[];let s=0;for(let o=e;o<n;o+=i)r[s++]=t.slice(o,o+i);return r.length=s,r}function Fs(t,e,n,i,r){r=void 0!==r?r:[];let s=0;for(let o=0,a=n.length;o<a;++o){const a=n[o];r[s++]=As(t,e,a,i,r[s]),e=a}return r.length=s,r}function Ds(t,e,n,i,r){r=void 0!==r?r:[];let s=0;for(let o=0,a=n.length;o<a;++o){const a=n[o];r[s++]=1===a.length&&a[0]===e?[]:Fs(t,e,a,i,r[s]),e=a[a.length-1]}return r.length=s,r}function zs(t,e,n,i){let r=0;const s=t[n-i],o=t[n-i+1];let a=0,l=0;for(;e<n;e+=i){const n=t[e]-s,i=t[e+1]-o;r+=l*n-a*i,a=n,l=i}return r/2}function Gs(t,e,n,i){let r=0;for(let s=0,o=n.length;s<o;++s){const o=n[s];r+=zs(t,e,o,i),e=o}return r}class js extends ws{constructor(t,e){super(),this.maxDelta_=-1,this.maxDeltaRevision_=-1,void 0===e||Array.isArray(t[0])?this.setCoordinates(t,e):this.setFlatCoordinates(e,t)}clone(){return new js(this.flatCoordinates.slice(),this.layout)}closestPointXY(t,e,n,i){return i<qi(this.getExtent(),t,e)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Es(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),bs(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,t,e,n,i))}getArea(){return zs(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinates(){return As(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getSimplifiedGeometryInternal(t){const e=[];return e.length=Ns(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e,0),new js(e,"XY")}getType(){return"LinearRing"}intersectsExtent(t){return!1}setCoordinates(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Is(this.flatCoordinates,0,t,this.stride),this.changed()}}const Ys=js;class Bs extends ws{constructor(t,e){super(),this.setCoordinates(t,e)}clone(){const t=new Bs(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t}closestPointXY(t,e,n,i){const r=this.flatCoordinates,s=ei(t,e,r[0],r[1]);if(s<i){const t=this.stride;for(let e=0;e<t;++e)n[e]=r[e];return n.length=t,s}return i}getCoordinates(){return this.flatCoordinates.slice()}computeExtent(t){return Qi(this.flatCoordinates,t)}getType(){return"Point"}intersectsExtent(t){return Hi(t,this.flatCoordinates[0],this.flatCoordinates[1])}setCoordinates(t,e){this.setLayout(e,t,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=function(t,e,n){for(let i=0,r=n.length;i<r;++i)t[e++]=n[i];return e}(this.flatCoordinates,0,t,this.stride),this.changed()}}const Us=Bs;function Xs(t,e,n,i,r){return!or(r,(function(r){return!qs(t,e,n,i,r[0],r[1])}))}function qs(t,e,n,i,r,s){let o=0,a=t[n-i],l=t[n-i+1];for(;e<n;e+=i){const n=t[e],i=t[e+1];l<=s?i>s&&(n-a)*(s-l)-(r-a)*(i-l)>0&&o++:i<=s&&(n-a)*(s-l)-(r-a)*(i-l)<0&&o--,a=n,l=i}return 0!==o}function Ws(t,e,n,i,r,s){if(0===n.length)return!1;if(!qs(t,e,n[0],i,r,s))return!1;for(let o=1,a=n.length;o<a;++o)if(qs(t,n[o-1],n[o],i,r,s))return!1;return!0}function Vs(t,e,n,i,r,s,o){let a,l,u,h,c,d,f;const g=r[s+1],p=[];for(let _=0,v=n.length;_<v;++_){const r=n[_];for(h=t[r-i],d=t[r-i+1],a=e;a<r;a+=i)c=t[a],f=t[a+1],(g<=d&&f<=g||d<=g&&g<=f)&&(u=(g-d)/(f-d)*(c-h)+h,p.push(u)),h=c,d=f}let m=NaN,y=-1/0;for(p.sort(rn),h=p[0],a=1,l=p.length;a<l;++a){c=p[a];const r=Math.abs(c-h);r>y&&(u=(h+c)/2,Ws(t,e,n,i,u,g)&&(m=u,y=r)),h=c}return isNaN(m)&&(m=r[s]),o?(o.push(m,g,y),o):[m,g,y]}function Hs(t,e,n,i,r){let s=[];for(let o=0,a=n.length;o<a;++o){const a=n[o];s=Vs(t,e,a,i,r,2*o,s),e=a[a.length-1]}return s}function Ks(t,e,n,i,r){let s;for(e+=i;e<n;e+=i)if(s=r(t.slice(e-i,e),t.slice(e,e+i)),s)return s;return!1}function Zs(t,e,n,i,r){const s=rr([1/0,1/0,-1/0,-1/0],t,e,n,i);return!!_r(r,s)&&(!!Vi(r,s)||(s[0]>=r[0]&&s[2]<=r[2]||(s[1]>=r[1]&&s[3]<=r[3]||Ks(t,e,n,i,(function(t,e){return function(t,e,n){let i=!1;const r=Ki(t,e),s=Ki(t,n);if(r===Di||s===Di)i=!0;else{const o=t[0],a=t[1],l=t[2],u=t[3],h=e[0],c=e[1],d=n[0],f=n[1],g=(f-c)/(d-h);let p,m;s&zi&&!(r&zi)&&(p=d-(f-u)/g,i=p>=o&&p<=l),i||!(s&Gi)||r&Gi||(m=f-(d-l)*g,i=m>=a&&m<=u),i||!(s&ji)||r&ji||(p=d-(f-a)/g,i=p>=o&&p<=l),i||!(s&Yi)||r&Yi||(m=f-(d-o)*g,i=m>=a&&m<=u)}return i}(r,t,e)})))))}function $s(t,e,n,i,r){return!!Zs(t,e,n,i,r)||(!!qs(t,e,n,i,r[0],r[1])||(!!qs(t,e,n,i,r[0],r[3])||(!!qs(t,e,n,i,r[2],r[1])||!!qs(t,e,n,i,r[2],r[3]))))}function Js(t,e,n,i,r){if(!$s(t,e,n[0],i,r))return!1;if(1===n.length)return!0;for(let s=1,o=n.length;s<o;++s)if(Xs(t,n[s-1],n[s],i,r)&&!Zs(t,n[s-1],n[s],i,r))return!1;return!0}function Qs(t,e,n,i){for(;e<n-i;){for(let r=0;r<i;++r){const s=t[e+r];t[e+r]=t[n-i+r],t[n-i+r]=s}e+=i,n-=i}}function to(t,e,n,i){let r=0,s=t[n-i],o=t[n-i+1];for(;e<n;e+=i){const n=t[e],i=t[e+1];r+=(n-s)*(i+o),s=n,o=i}return 0===r?void 0:r>0}function eo(t,e,n,i,r){r=void 0!==r&&r;for(let s=0,o=n.length;s<o;++s){const o=n[s],a=to(t,e,o,i);if(0===s){if(r&&a||!r&&!a)return!1}else if(r&&!a||!r&&a)return!1;e=o}return!0}function no(t,e,n,i,r){for(let s=0,o=n.length;s<o;++s){const o=n[s];if(!eo(t,e,o,i,r))return!1;o.length&&(e=o[o.length-1])}return!0}function io(t,e,n,i,r){r=void 0!==r&&r;for(let s=0,o=n.length;s<o;++s){const o=n[s],a=to(t,e,o,i);(0===s?r&&a||!r&&!a:r&&!a||!r&&a)&&Qs(t,e,o,i),e=o}return e}function ro(t,e,n,i,r){for(let s=0,o=n.length;s<o;++s)e=io(t,e,n[s],i,r);return e}class so extends ws{constructor(t,e,n){super(),this.ends_=[],this.flatInteriorPointRevision_=-1,this.flatInteriorPoint_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,void 0!==e&&n?(this.setFlatCoordinates(e,t),this.ends_=n):this.setCoordinates(t,e)}appendLinearRing(t){this.flatCoordinates?an(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const t=new so(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return t.applyProperties(this),t}closestPointXY(t,e,n,i){return i<qi(this.getExtent(),t,e)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Ss(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Cs(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,t,e,n,i))}containsXY(t,e){return Ws(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,e)}getArea(){return Gs(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)}getCoordinates(t){let e;return void 0!==t?(e=this.getOrientedFlatCoordinates().slice(),io(e,0,this.ends_,this.stride,t)):e=this.flatCoordinates,Fs(e,0,this.ends_,this.stride)}getEnds(){return this.ends_}getFlatInteriorPoint(){if(this.flatInteriorPointRevision_!=this.getRevision()){const t=hr(this.getExtent());this.flatInteriorPoint_=Vs(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_}getInteriorPoint(){return new Us(this.getFlatInteriorPoint(),"XYM")}getLinearRingCount(){return this.ends_.length}getLinearRing(t){return t<0||this.ends_.length<=t?null:new Ys(this.flatCoordinates.slice(0===t?0:this.ends_[t-1],this.ends_[t]),this.layout)}getLinearRings(){const t=this.layout,e=this.flatCoordinates,n=this.ends_,i=[];let r=0;for(let s=0,o=n.length;s<o;++s){const o=n[s],a=new Ys(e.slice(r,o),t);i.push(a),r=o}return i}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const t=this.flatCoordinates;eo(t,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=t:(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=io(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(t){const e=[],n=[];return e.length=Os(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(t),e,0,n),new so(e,"XY",n)}getType(){return"Polygon"}intersectsExtent(t){return Js(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t)}setCoordinates(t,e){this.setLayout(e,t,2),this.flatCoordinates||(this.flatCoordinates=[]);const n=Ts(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=0===n.length?0:n[n.length-1],this.changed()}}const oo=so;function ao(t){if(vr(t))throw new Error("Cannot create polygon from empty extent");const e=t[0],n=t[1],i=t[2],r=t[3],s=[e,n,e,r,i,r,i,n,e,n];return new so(s,"XY",[s.length])}function lo(t,e){setTimeout((function(){t(e)}),0)}function uo(t){return!(t.sourceCenter&&t.targetCenter&&!Er(t.sourceCenter,t.targetCenter))&&(t.sourceResolution===t.targetResolution&&t.sourceRotation===t.targetRotation)}function ho(t,e,n,i,r){const s=Math.cos(-r);let o=Math.sin(-r),a=t[0]*s-t[1]*o,l=t[1]*s+t[0]*o;a+=(e[0]/2-n[0])*i,l+=(n[1]-e[1]/2)*i,o=-o;return[a*s-l*o,l*s+a*o]}const co=class extends Fn{constructor(t){super(),this.on,this.once,this.un,t=Object.assign({},t),this.hints_=[0,0],this.animations_=[],this.updateAnimationKey_,this.projection_=Gr(t.projection,"EPSG:3857"),this.viewportSize_=[100,100],this.targetCenter_=null,this.targetResolution_,this.targetRotation_,this.nextCenter_=null,this.nextResolution_,this.nextRotation_,this.cancelAnchor_=void 0,t.projection&&Mr(),t.center&&(t.center=Kr(t.center,this.projection_)),t.extent&&(t.extent=$r(t.extent,this.projection_)),this.applyOptions_(t)}applyOptions_(t){const e=Object.assign({},t);for(const o in mi)delete e[o];this.setProperties(e,!0);const n=function(t){let e,n,i;const r=28,s=2;let o=void 0!==t.minZoom?t.minZoom:0,a=void 0!==t.maxZoom?t.maxZoom:r;const l=void 0!==t.zoomFactor?t.zoomFactor:s,u=void 0!==t.multiWorld&&t.multiWorld,h=void 0===t.smoothResolutionConstraint||t.smoothResolutionConstraint,c=void 0!==t.showFullExtent&&t.showFullExtent,d=Gr(t.projection,"EPSG:3857"),f=d.getExtent();let g=t.constrainOnlyCenter,p=t.extent;u||p||!d.isGlobal()||(g=!1,p=f);if(void 0!==t.resolutions){const r=t.resolutions;n=r[o],i=void 0!==r[a]?r[a]:r[r.length-1],e=t.constrainResolution?function(t,e,n,i){return e=void 0===e||e,function(r,s,o,a){if(void 0!==r){const l=t[0],u=t[t.length-1],h=n?es(l,n,o,i):l;if(a)return e?ns(r,h,u):Qn(r,u,h);const c=Math.min(h,r),d=Math.floor(sn(t,c,s));return t[d]>h&&d<t.length-1?t[d+1]:t[d]}}}(r,h,!g&&p,c):is(n,i,h,!g&&p,c)}else{const u=(f?Math.max(yr(f),fr(f)):360*_i.degrees/d.getMetersPerUnit())/yi/Math.pow(s,0),m=u/Math.pow(s,r-0);n=t.maxResolution,void 0!==n?o=0:n=u/Math.pow(l,o),i=t.minResolution,void 0===i&&(i=void 0!==t.maxZoom?void 0!==t.maxResolution?n/Math.pow(l,a):u/Math.pow(l,a):m),a=o+Math.floor(Math.log(n/i)/Math.log(l)),i=n/Math.pow(l,a-o),e=t.constrainResolution?function(t,e,n,i,r,s){return i=void 0===i||i,n=void 0!==n?n:0,function(o,a,l,u){if(void 0!==o){const h=r?es(e,r,l,s):e;if(u)return i?ns(o,h,n):Qn(o,n,h);const c=1e-9,d=Math.ceil(Math.log(e/h)/Math.log(t)-c),f=-a*(.5-c)+.5,g=Math.min(h,o),p=Math.floor(Math.log(e/g)/Math.log(t)+f),m=Math.max(d,p);return Qn(e/Math.pow(t,m),n,h)}}}(l,n,i,h,!g&&p,c):is(n,i,h,!g&&p,c)}return{constraint:e,maxResolution:n,minResolution:i,minZoom:o,zoomFactor:l}}(t);this.maxResolution_=n.maxResolution,this.minResolution_=n.minResolution,this.zoomFactor_=n.zoomFactor,this.resolutions_=t.resolutions,this.padding_=t.padding,this.minZoom_=n.minZoom;const i=function(t){if(void 0!==t.extent){const e=void 0===t.smoothExtentConstraint||t.smoothExtentConstraint;return Qr(t.extent,t.constrainOnlyCenter,e)}const e=Gr(t.projection,"EPSG:3857");if(!0!==t.multiWorld&&e.isGlobal()){const t=e.getExtent().slice();return t[0]=-1/0,t[2]=1/0,Qr(t,!1,!1)}return ts}(t),r=n.constraint,s=function(t){const e=void 0===t.enableRotation||t.enableRotation;if(e){const e=t.constrainRotation;return void 0===e||!0===e?function(t){const e=void 0===t?ni(5):t;return function(t,n){return n||void 0===t?t:Math.abs(t)<=e?0:t}}():!1===e?ss:"number"===typeof e?function(t){const e=2*Math.PI/t;return function(t,n){return n?t:void 0!==t?t=Math.floor(t/e+.5)*e:void 0}}(e):ss}return rs}(t);this.constraints_={center:i,resolution:r,rotation:s},this.setRotation(void 0!==t.rotation?t.rotation:0),this.setCenterInternal(void 0!==t.center?t.center:null),void 0!==t.resolution?this.setResolution(t.resolution):void 0!==t.zoom&&this.setZoom(t.zoom)}get padding(){return this.padding_}set padding(t){let e=this.padding_;this.padding_=t;const n=this.getCenterInternal();if(n){const i=t||[0,0,0,0];e=e||[0,0,0,0];const r=this.getResolution(),s=r/2*(i[3]-e[3]+e[1]-i[1]),o=r/2*(i[0]-e[0]+e[2]-i[2]);this.setCenterInternal([n[0]+s,n[1]-o])}}getUpdatedOptions_(t){const e=this.getProperties();return void 0!==e.resolution?e.resolution=this.getResolution():e.zoom=this.getZoom(),e.center=this.getCenterInternal(),e.rotation=this.getRotation(),Object.assign({},e,t)}animate(t){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);const e=new Array(arguments.length);for(let n=0;n<e.length;++n){let t=arguments[n];t.center&&(t=Object.assign({},t),t.center=Kr(t.center,this.getProjection())),t.anchor&&(t=Object.assign({},t),t.anchor=Kr(t.anchor,this.getProjection())),e[n]=t}this.animateInternal.apply(this,e)}animateInternal(t){let e,n=arguments.length;n>1&&"function"===typeof arguments[n-1]&&(e=arguments[n-1],--n);let i=0;for(;i<n&&!this.isDef();++i){const t=arguments[i];t.center&&this.setCenterInternal(t.center),void 0!==t.zoom?this.setZoom(t.zoom):t.resolution&&this.setResolution(t.resolution),void 0!==t.rotation&&this.setRotation(t.rotation)}if(i===n)return void(e&&lo(e,!0));let r=Date.now(),s=this.targetCenter_.slice(),o=this.targetResolution_,a=this.targetRotation_;const l=[];for(;i<n;++i){const t=arguments[i],n={start:r,complete:!1,anchor:t.anchor,duration:void 0!==t.duration?t.duration:1e3,easing:t.easing||ls,callback:e};if(t.center&&(n.sourceCenter=s,n.targetCenter=t.center.slice(),s=n.targetCenter),void 0!==t.zoom?(n.sourceResolution=o,n.targetResolution=this.getResolutionForZoom(t.zoom),o=n.targetResolution):t.resolution&&(n.sourceResolution=o,n.targetResolution=t.resolution,o=n.targetResolution),void 0!==t.rotation){n.sourceRotation=a;const e=ii(t.rotation-a+Math.PI,2*Math.PI)-Math.PI;n.targetRotation=a+e,a=n.targetRotation}uo(n)?n.complete=!0:r+=n.duration,l.push(n)}this.animations_.push(l),this.setHint(gi,1),this.updateAnimations_()}getAnimating(){return this.hints_[gi]>0}getInteracting(){return this.hints_[pi]>0}cancelAnimations(){let t;this.setHint(gi,-this.hints_[gi]);for(let e=0,n=this.animations_.length;e<n;++e){const n=this.animations_[e];if(n[0].callback&&lo(n[0].callback,!1),!t)for(let e=0,i=n.length;e<i;++e){const i=n[e];if(!i.complete){t=i.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=t,this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN}updateAnimations_(){if(void 0!==this.updateAnimationKey_&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),!this.getAnimating())return;const t=Date.now();let e=!1;for(let n=this.animations_.length-1;n>=0;--n){const i=this.animations_[n];let r=!0;for(let n=0,s=i.length;n<s;++n){const s=i[n];if(s.complete)continue;const o=t-s.start;let a=s.duration>0?o/s.duration:1;a>=1?(s.complete=!0,a=1):r=!1;const l=s.easing(a);if(s.sourceCenter){const t=s.sourceCenter[0],e=s.sourceCenter[1],n=s.targetCenter[0],i=s.targetCenter[1];this.nextCenter_=s.targetCenter;const r=t+l*(n-t),o=e+l*(i-e);this.targetCenter_=[r,o]}if(s.sourceResolution&&s.targetResolution){const t=1===l?s.targetResolution:s.sourceResolution+l*(s.targetResolution-s.sourceResolution);if(s.anchor){const e=this.getViewportSize_(this.getRotation()),n=this.constraints_.resolution(t,0,e,!0);this.targetCenter_=this.calculateCenterZoom(n,s.anchor)}this.nextResolution_=s.targetResolution,this.targetResolution_=t,this.applyTargetState_(!0)}if(void 0!==s.sourceRotation&&void 0!==s.targetRotation){const t=1===l?ii(s.targetRotation+Math.PI,2*Math.PI)-Math.PI:s.sourceRotation+l*(s.targetRotation-s.sourceRotation);if(s.anchor){const e=this.constraints_.rotation(t,!0);this.targetCenter_=this.calculateCenterRotate(e,s.anchor)}this.nextRotation_=s.targetRotation,this.targetRotation_=t}if(this.applyTargetState_(!0),e=!0,!s.complete)break}if(r){this.animations_[n]=null,this.setHint(gi,-1),this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN;const t=i[0].callback;t&&lo(t,!0)}}this.animations_=this.animations_.filter(Boolean),e&&void 0===this.updateAnimationKey_&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}calculateCenterRotate(t,e){let n;const i=this.getCenterInternal();var r,s;return void 0!==i&&(n=[i[0]-e[0],i[1]-e[1]],Sr(n,t-this.getRotation()),s=e,(r=n)[0]+=+s[0],r[1]+=+s[1]),n}calculateCenterZoom(t,e){let n;const i=this.getCenterInternal(),r=this.getResolution();if(void 0!==i&&void 0!==r){n=[e[0]-t*(e[0]-i[0])/r,e[1]-t*(e[1]-i[1])/r]}return n}getViewportSize_(t){const e=this.viewportSize_;if(t){const n=e[0],i=e[1];return[Math.abs(n*Math.cos(t))+Math.abs(i*Math.sin(t)),Math.abs(n*Math.sin(t))+Math.abs(i*Math.cos(t))]}return e}setViewportSize(t){this.viewportSize_=Array.isArray(t)?t.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)}getCenter(){const t=this.getCenterInternal();return t?Hr(t,this.getProjection()):t}getCenterInternal(){return this.get(mi.CENTER)}getConstraints(){return this.constraints_}getConstrainResolution(){return this.get("constrainResolution")}getHints(t){return void 0!==t?(t[0]=this.hints_[0],t[1]=this.hints_[1],t):this.hints_.slice()}calculateExtent(t){return Zr(this.calculateExtentInternal(t),this.getProjection())}calculateExtentInternal(t){t=t||this.getViewportSizeMinusPadding_();const e=this.getCenterInternal();Jn(e,"The view center is not defined");const n=this.getResolution();Jn(void 0!==n,"The view resolution is not defined");const i=this.getRotation();return Jn(void 0!==i,"The view rotation is not defined"),dr(e,n,i,t)}getMaxResolution(){return this.maxResolution_}getMinResolution(){return this.minResolution_}getMaxZoom(){return this.getZoomForResolution(this.minResolution_)}setMaxZoom(t){this.applyOptions_(this.getUpdatedOptions_({maxZoom:t}))}getMinZoom(){return this.getZoomForResolution(this.maxResolution_)}setMinZoom(t){this.applyOptions_(this.getUpdatedOptions_({minZoom:t}))}setConstrainResolution(t){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:t}))}getProjection(){return this.projection_}getResolution(){return this.get(mi.RESOLUTION)}getResolutions(){return this.resolutions_}getResolutionForExtent(t,e){return this.getResolutionForExtentInternal($r(t,this.getProjection()),e)}getResolutionForExtentInternal(t,e){e=e||this.getViewportSizeMinusPadding_();const n=yr(t)/e[0],i=fr(t)/e[1];return Math.max(n,i)}getResolutionForValueFunction(t){t=t||2;const e=this.getConstrainedResolution(this.maxResolution_),n=this.minResolution_,i=Math.log(e/n)/Math.log(t);return function(n){return e/Math.pow(t,n*i)}}getRotation(){return this.get(mi.ROTATION)}getValueForResolutionFunction(t){const e=Math.log(t||2),n=this.getConstrainedResolution(this.maxResolution_),i=this.minResolution_,r=Math.log(n/i)/e;return function(t){return Math.log(n/t)/e/r}}getViewportSizeMinusPadding_(t){let e=this.getViewportSize_(t);const n=this.padding_;return n&&(e=[e[0]-n[1]-n[3],e[1]-n[0]-n[2]]),e}getState(){const t=this.getProjection(),e=this.getResolution(),n=this.getRotation();let i=this.getCenterInternal();const r=this.padding_;if(r){const t=this.getViewportSizeMinusPadding_();i=ho(i,this.getViewportSize_(),[t[0]/2+r[3],t[1]/2+r[0]],e,n)}return{center:i.slice(0),projection:void 0!==t?t:null,resolution:e,nextCenter:this.nextCenter_,nextResolution:this.nextResolution_,nextRotation:this.nextRotation_,rotation:n,zoom:this.getZoom()}}getViewStateAndExtent(){return{viewState:this.getState(),extent:this.calculateExtent()}}getZoom(){let t;const e=this.getResolution();return void 0!==e&&(t=this.getZoomForResolution(e)),t}getZoomForResolution(t){let e,n,i=this.minZoom_||0;if(this.resolutions_){const r=sn(this.resolutions_,t,1);i=r,e=this.resolutions_[r],n=r==this.resolutions_.length-1?2:e/this.resolutions_[r+1]}else e=this.maxResolution_,n=this.zoomFactor_;return i+Math.log(e/t)/Math.log(n)}getResolutionForZoom(t){if(this.resolutions_?.length){if(1===this.resolutions_.length)return this.resolutions_[0];const e=Qn(Math.floor(t),0,this.resolutions_.length-2),n=this.resolutions_[e]/this.resolutions_[e+1];return this.resolutions_[e]/Math.pow(n,Qn(t-e,0,1))}return this.maxResolution_/Math.pow(this.zoomFactor_,t-this.minZoom_)}fit(t,e){let n;if(Jn(Array.isArray(t)||"function"===typeof t.getSimplifiedGeometry,"Invalid extent or geometry provided as `geometry`"),Array.isArray(t)){Jn(!vr(t),"Cannot fit empty extent provided as `geometry`");n=ao($r(t,this.getProjection()))}else if("Circle"===t.getType()){const e=$r(t.getExtent(),this.getProjection());n=ao(e),n.rotate(this.getRotation(),hr(e))}else{const e=Vr();n=e?t.clone().transform(e,this.getProjection()):t}this.fitInternal(n,e)}rotatedExtentForGeometry(t){const e=this.getRotation(),n=Math.cos(e),i=Math.sin(-e),r=t.getFlatCoordinates(),s=t.getStride();let o=1/0,a=1/0,l=-1/0,u=-1/0;for(let h=0,c=r.length;h<c;h+=s){const t=r[h]*n-r[h+1]*i,e=r[h]*i+r[h+1]*n;o=Math.min(o,t),a=Math.min(a,e),l=Math.max(l,t),u=Math.max(u,e)}return[o,a,l,u]}fitInternal(t,e){let n=(e=e||{}).size;n||(n=this.getViewportSizeMinusPadding_());const i=void 0!==e.padding?e.padding:[0,0,0,0],r=void 0!==e.nearest&&e.nearest;let s;s=void 0!==e.minResolution?e.minResolution:void 0!==e.maxZoom?this.getResolutionForZoom(e.maxZoom):0;const o=this.rotatedExtentForGeometry(t);let a=this.getResolutionForExtentInternal(o,[n[0]-i[1]-i[3],n[1]-i[0]-i[2]]);a=isNaN(a)?s:Math.max(a,s),a=this.getConstrainedResolution(a,r?0:1);const l=this.getRotation(),u=Math.sin(l),h=Math.cos(l),c=hr(o);c[0]+=(i[1]-i[3])/2*a,c[1]+=(i[0]-i[2])/2*a;const d=c[0]*h-c[1]*u,f=c[1]*h+c[0]*u,g=this.getConstrainedCenter([d,f],a),p=e.callback?e.callback:cn;void 0!==e.duration?this.animateInternal({resolution:a,center:g,duration:e.duration,easing:e.easing},p):(this.targetResolution_=a,this.targetCenter_=g,this.applyTargetState_(!1,!0),lo(p,!0))}centerOn(t,e,n){this.centerOnInternal(Kr(t,this.getProjection()),e,n)}centerOnInternal(t,e,n){this.setCenterInternal(ho(t,e,n,this.getResolution(),this.getRotation()))}calculateCenterShift(t,e,n,i){let r;const s=this.padding_;if(s&&t){const o=this.getViewportSizeMinusPadding_(-n),a=ho(t,i,[o[0]/2+s[3],o[1]/2+s[0]],e,n);r=[t[0]-a[0],t[1]-a[1]]}return r}isDef(){return!!this.getCenterInternal()&&void 0!==this.getResolution()}adjustCenter(t){const e=Hr(this.targetCenter_,this.getProjection());this.setCenter([e[0]+t[0],e[1]+t[1]])}adjustCenterInternal(t){const e=this.targetCenter_;this.setCenterInternal([e[0]+t[0],e[1]+t[1]])}adjustResolution(t,e){e=e&&Kr(e,this.getProjection()),this.adjustResolutionInternal(t,e)}adjustResolutionInternal(t,e){const n=this.getAnimating()||this.getInteracting(),i=this.getViewportSize_(this.getRotation()),r=this.constraints_.resolution(this.targetResolution_*t,0,i,n);e&&(this.targetCenter_=this.calculateCenterZoom(r,e)),this.targetResolution_*=t,this.applyTargetState_()}adjustZoom(t,e){this.adjustResolution(Math.pow(this.zoomFactor_,-t),e)}adjustRotation(t,e){e&&(e=Kr(e,this.getProjection())),this.adjustRotationInternal(t,e)}adjustRotationInternal(t,e){const n=this.getAnimating()||this.getInteracting(),i=this.constraints_.rotation(this.targetRotation_+t,n);e&&(this.targetCenter_=this.calculateCenterRotate(i,e)),this.targetRotation_+=t,this.applyTargetState_()}setCenter(t){this.setCenterInternal(t?Kr(t,this.getProjection()):t)}setCenterInternal(t){this.targetCenter_=t,this.applyTargetState_()}setHint(t,e){return this.hints_[t]+=e,this.changed(),this.hints_[t]}setResolution(t){this.targetResolution_=t,this.applyTargetState_()}setRotation(t){this.targetRotation_=t,this.applyTargetState_()}setZoom(t){this.setResolution(this.getResolutionForZoom(t))}applyTargetState_(t,e){const n=this.getAnimating()||this.getInteracting()||e,i=this.constraints_.rotation(this.targetRotation_,n),r=this.getViewportSize_(i),s=this.constraints_.resolution(this.targetResolution_,0,r,n),o=this.constraints_.center(this.targetCenter_,s,r,n,this.calculateCenterShift(this.targetCenter_,s,i,r));this.get(mi.ROTATION)!==i&&this.set(mi.ROTATION,i),this.get(mi.RESOLUTION)!==s&&(this.set(mi.RESOLUTION,s),this.set("zoom",this.getZoom(),!0)),o&&this.get(mi.CENTER)&&Er(this.get(mi.CENTER),o)||this.set(mi.CENTER,o),this.getAnimating()&&!t&&this.cancelAnimations(),this.cancelAnchor_=void 0}resolveConstraints(t,e,n){t=void 0!==t?t:200;const i=e||0,r=this.constraints_.rotation(this.targetRotation_),s=this.getViewportSize_(r),o=this.constraints_.resolution(this.targetResolution_,i,s),a=this.constraints_.center(this.targetCenter_,o,s,!1,this.calculateCenterShift(this.targetCenter_,o,r,s));if(0===t&&!this.cancelAnchor_)return this.targetResolution_=o,this.targetRotation_=r,this.targetCenter_=a,void this.applyTargetState_();n=n||(0===t?this.cancelAnchor_:void 0),this.cancelAnchor_=void 0,this.getResolution()===o&&this.getRotation()===r&&this.getCenterInternal()&&Er(this.getCenterInternal(),a)||(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:r,center:a,resolution:o,duration:t,easing:as,anchor:n}))}beginInteraction(){this.resolveConstraints(0),this.setHint(pi,1)}endInteraction(t,e,n){n=n&&Kr(n,this.getProjection()),this.endInteractionInternal(t,e,n)}endInteractionInternal(t,e,n){this.getInteracting()&&(this.setHint(pi,-1),this.resolveConstraints(t,e,n))}getConstrainedCenter(t,e){const n=this.getViewportSize_(this.getRotation());return this.constraints_.center(t,e||this.getResolution(),n)}getConstrainedZoom(t,e){const n=this.getResolutionForZoom(t);return this.getZoomForResolution(this.getConstrainedResolution(n,e))}getConstrainedResolution(t,e){e=e||0;const n=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(t,e,n)}};function fo(t,e){if(!t.visible)return!1;const n=e.resolution;if(n<t.minResolution||n>=t.maxResolution)return!1;const i=e.zoom;return i>t.minZoom&&i<=t.maxZoom}const go=class extends li{constructor(t){const e=Object.assign({},t);delete e.source,super(e),this.on,this.once,this.un,this.mapPrecomposeKey_=null,this.mapRenderKey_=null,this.sourceChangeKey_=null,this.renderer_=null,this.sourceReady_=!1,this.rendered=!1,t.render&&(this.render=t.render),t.map&&this.setMap(t.map),this.addChangeListener(Zn,this.handleSourcePropertyChange_);const n=t.source?t.source:null;this.setSource(n)}getLayersArray(t){return(t=t||[]).push(this),t}getLayerStatesArray(t){return(t=t||[]).push(this.getLayerState()),t}getSource(){return this.get(Zn)||null}getRenderSource(){return this.getSource()}getSourceState(){const t=this.getSource();return t?t.getState():"undefined"}handleSourceChange_(){this.changed(),this.sourceReady_||"ready"!==this.getSource().getState()||(this.sourceReady_=!0,this.dispatchEvent("sourceready"))}handleSourcePropertyChange_(){this.sourceChangeKey_&&(Rn(this.sourceChangeKey_),this.sourceChangeKey_=null),this.sourceReady_=!1;const t=this.getSource();t&&(this.sourceChangeKey_=In(t,yn,this.handleSourceChange_,this),"ready"===t.getState()&&(this.sourceReady_=!0,setTimeout((()=>{this.dispatchEvent("sourceready")}),0))),this.changed()}getFeatures(t){return this.renderer_?this.renderer_.getFeatures(t):Promise.resolve([])}getData(t){return this.renderer_&&this.rendered?this.renderer_.getData(t):null}isVisible(t){let e;const n=this.getMapInternal();let i;!t&&n&&(t=n.getView()),e=t instanceof co?{viewState:t.getState(),extent:t.calculateExtent()}:t,!e.layerStatesArray&&n&&(e.layerStatesArray=n.getLayerGroup().getLayerStatesArray()),i=e.layerStatesArray?e.layerStatesArray.find((t=>t.layer===this)):this.getLayerState();const r=this.getExtent();return fo(i,e.viewState)&&(!r||_r(r,e.extent))}getAttributions(t){if(!this.isVisible(t))return[];const e=this.getSource()?.getAttributions();if(!e)return[];let n=e(t instanceof co?t.getViewStateAndExtent():t);return Array.isArray(n)||(n=[n]),n}render(t,e){const n=this.getRenderer();return n.prepareFrame(t)?(this.rendered=!0,n.renderFrame(t,e)):null}unrender(){this.rendered=!1}getDeclutter(){}renderDeclutter(t,e){}renderDeferred(t){const e=this.getRenderer();e&&e.renderDeferred(t)}setMapInternal(t){t||this.unrender(),this.set($n,t)}getMapInternal(){return this.get($n)}setMap(t){this.mapPrecomposeKey_&&(Rn(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),t||this.changed(),this.mapRenderKey_&&(Rn(this.mapRenderKey_),this.mapRenderKey_=null),t&&(this.mapPrecomposeKey_=In(t,ci,this.handlePrecompose_,this),this.mapRenderKey_=In(this,yn,t.render,t),this.changed())}handlePrecompose_(t){const e=t.frameState.layerStatesArray,n=this.getLayerState(!1);Jn(!e.some((t=>t.layer===n.layer)),"A layer can only be added to the map once. Use either `layer.setMap()` or `map.addLayer()`, not both."),e.push(n)}setSource(t){this.set(Zn,t)}getRenderer(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_}hasRenderer(){return!!this.renderer_}createRenderer(){return null}disposeInternal(){this.renderer_&&(this.renderer_.dispose(),delete this.renderer_),this.setSource(null),super.disposeInternal()}};function po(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t.length-1,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:yo;for(;i>n;){if(i-n>600){const s=i-n+1,o=e-n+1,a=Math.log(s),l=.5*Math.exp(2*a/3),u=.5*Math.sqrt(a*l*(s-l)/s)*(o-s/2<0?-1:1);po(t,e,Math.max(n,Math.floor(e-o*l/s+u)),Math.min(i,Math.floor(e+(s-o)*l/s+u)),r)}const s=t[e];let o=n,a=i;for(mo(t,n,e),r(t[i],s)>0&&mo(t,n,i);o<a;){for(mo(t,o,a),o++,a--;r(t[o],s)<0;)o++;for(;r(t[a],s)>0;)a--}0===r(t[n],s)?mo(t,n,a):(a++,mo(t,a,i)),a<=e&&(n=a+1),e<=a&&(i=a-1)}}function mo(t,e,n){const i=t[e];t[e]=t[n],t[n]=i}function yo(t,e){return t<e?-1:t>e?1:0}class _o{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:9;this._maxEntries=Math.max(4,t),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()}all(){return this._all(this.data,[])}search(t){let e=this.data;const n=[];if(!Ro(t,e))return n;const i=this.toBBox,r=[];for(;e;){for(let s=0;s<e.children.length;s++){const o=e.children[s],a=e.leaf?i(o):o;Ro(t,a)&&(e.leaf?n.push(o):To(t,a)?this._all(o,n):r.push(o))}e=r.pop()}return n}collides(t){let e=this.data;if(!Ro(t,e))return!1;const n=[];for(;e;){for(let i=0;i<e.children.length;i++){const r=e.children[i],s=e.leaf?this.toBBox(r):r;if(Ro(t,s)){if(e.leaf||To(t,s))return!0;n.push(r)}}e=n.pop()}return!1}load(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(let e=0;e<t.length;e++)this.insert(t[e]);return this}let e=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===e.height)this._splitRoot(this.data,e);else{if(this.data.height<e.height){const t=this.data;this.data=e,e=t}this._insert(e,this.data.height-e.height-1,!0)}else this.data=e;return this}insert(t){return t&&this._insert(t,this.data.height-1),this}clear(){return this.data=No([]),this}remove(t,e){if(!t)return this;let n=this.data;const i=this.toBBox(t),r=[],s=[];let o,a,l;for(;n||r.length;){if(n||(n=r.pop(),a=r[r.length-1],o=s.pop(),l=!0),n.leaf){const i=vo(t,n.children,e);if(-1!==i)return n.children.splice(i,1),r.push(n),this._condense(r),this}l||n.leaf||!To(n,i)?a?(o++,n=a.children[o],l=!1):n=null:(r.push(n),s.push(o),o=0,a=n,n=n.children[0])}return this}toBBox(t){return t}compareMinX(t,e){return t.minX-e.minX}compareMinY(t,e){return t.minY-e.minY}toJSON(){return this.data}fromJSON(t){return this.data=t,this}_all(t,e){const n=[];for(;t;)t.leaf?e.push(...t.children):n.push(...t.children),t=n.pop();return e}_build(t,e,n,i){const r=n-e+1;let s,o=this._maxEntries;if(r<=o)return s=No(t.slice(e,n+1)),xo(s,this.toBBox),s;i||(i=Math.ceil(Math.log(r)/Math.log(o)),o=Math.ceil(r/Math.pow(o,i-1))),s=No([]),s.leaf=!1,s.height=i;const a=Math.ceil(r/o),l=a*Math.ceil(Math.sqrt(o));Lo(t,e,n,l,this.compareMinX);for(let u=e;u<=n;u+=l){const e=Math.min(u+l-1,n);Lo(t,u,e,a,this.compareMinY);for(let n=u;n<=e;n+=a){const r=Math.min(n+a-1,e);s.children.push(this._build(t,n,r,i-1))}}return xo(s,this.toBBox),s}_chooseSubtree(t,e,n,i){for(;i.push(e),!e.leaf&&i.length-1!==n;){let n,i=1/0,o=1/0;for(let a=0;a<e.children.length;a++){const l=e.children[a],u=bo(l),h=(r=t,s=l,(Math.max(s.maxX,r.maxX)-Math.min(s.minX,r.minX))*(Math.max(s.maxY,r.maxY)-Math.min(s.minY,r.minY))-u);h<o?(o=h,i=u<i?u:i,n=l):h===o&&u<i&&(i=u,n=l)}e=n||e.children[0]}var r,s;return e}_insert(t,e,n){const i=n?t:this.toBBox(t),r=[],s=this._chooseSubtree(i,this.data,e,r);for(s.children.push(t),ko(s,i);e>=0&&r[e].children.length>this._maxEntries;)this._split(r,e),e--;this._adjustParentBBoxes(i,r,e)}_split(t,e){const n=t[e],i=n.children.length,r=this._minEntries;this._chooseSplitAxis(n,r,i);const s=this._chooseSplitIndex(n,r,i),o=No(n.children.splice(s,n.children.length-s));o.height=n.height,o.leaf=n.leaf,xo(n,this.toBBox),xo(o,this.toBBox),e?t[e-1].children.push(o):this._splitRoot(n,o)}_splitRoot(t,e){this.data=No([t,e]),this.data.height=t.height+1,this.data.leaf=!1,xo(this.data,this.toBBox)}_chooseSplitIndex(t,e,n){let i,r=1/0,s=1/0;for(let o=e;o<=n-e;o++){const e=wo(t,0,o,this.toBBox),a=wo(t,o,n,this.toBBox),l=Io(e,a),u=bo(e)+bo(a);l<r?(r=l,i=o,s=u<s?u:s):l===r&&u<s&&(s=u,i=o)}return i||n-e}_chooseSplitAxis(t,e,n){const i=t.leaf?this.compareMinX:Eo,r=t.leaf?this.compareMinY:So;this._allDistMargin(t,e,n,i)<this._allDistMargin(t,e,n,r)&&t.children.sort(i)}_allDistMargin(t,e,n,i){t.children.sort(i);const r=this.toBBox,s=wo(t,0,e,r),o=wo(t,n-e,n,r);let a=Co(s)+Co(o);for(let l=e;l<n-e;l++){const e=t.children[l];ko(s,t.leaf?r(e):e),a+=Co(s)}for(let l=n-e-1;l>=e;l--){const e=t.children[l];ko(o,t.leaf?r(e):e),a+=Co(o)}return a}_adjustParentBBoxes(t,e,n){for(let i=n;i>=0;i--)ko(e[i],t)}_condense(t){for(let e,n=t.length-1;n>=0;n--)0===t[n].children.length?n>0?(e=t[n-1].children,e.splice(e.indexOf(t[n]),1)):this.clear():xo(t[n],this.toBBox)}}function vo(t,e,n){if(!n)return e.indexOf(t);for(let i=0;i<e.length;i++)if(n(t,e[i]))return i;return-1}function xo(t,e){wo(t,0,t.children.length,e,t)}function wo(t,e,n,i,r){r||(r=No(null)),r.minX=1/0,r.minY=1/0,r.maxX=-1/0,r.maxY=-1/0;for(let s=e;s<n;s++){const e=t.children[s];ko(r,t.leaf?i(e):e)}return r}function ko(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function Eo(t,e){return t.minX-e.minX}function So(t,e){return t.minY-e.minY}function bo(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function Co(t){return t.maxX-t.minX+(t.maxY-t.minY)}function Io(t,e){const n=Math.max(t.minX,e.minX),i=Math.max(t.minY,e.minY),r=Math.min(t.maxX,e.maxX),s=Math.min(t.maxY,e.maxY);return Math.max(0,r-n)*Math.max(0,s-i)}function To(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function Ro(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function No(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function Lo(t,e,n,i,r){const s=[e,n];for(;s.length;){if((n=s.pop())-(e=s.pop())<=i)continue;const o=e+Math.ceil((n-e)/i/2)*i;po(t,o,e,n,r),s.push(e,o,o,n)}}const Mo=0,Po=1,Oo=2,Ao=3;function Fo(t){return t[0]>0&&t[1]>0}function Do(t,e){return Array.isArray(t)?t:(void 0===e?e=[t,t]:(e[0]=t,e[1]=t),e)}class zo{constructor(t){this.opacity_=t.opacity,this.rotateWithView_=t.rotateWithView,this.rotation_=t.rotation,this.scale_=t.scale,this.scaleArray_=Do(t.scale),this.displacement_=t.displacement,this.declutterMode_=t.declutterMode}clone(){const t=this.getScale();return new zo({opacity:this.getOpacity(),scale:Array.isArray(t)?t.slice():t,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getOpacity(){return this.opacity_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getDisplacement(){return this.displacement_}getDeclutterMode(){return this.declutterMode_}getAnchor(){return Mn()}getImage(t){return Mn()}getHitDetectionImage(){return Mn()}getPixelRatio(t){return 1}getImageState(){return Mn()}getImageSize(){return Mn()}getOrigin(){return Mn()}getSize(){return Mn()}setDisplacement(t){this.displacement_=t}setOpacity(t){this.opacity_=t}setRotateWithView(t){this.rotateWithView_=t}setRotation(t){this.rotation_=t}setScale(t){this.scale_=t,this.scaleArray_=Do(t)}listenImageChange(t){Mn()}load(){Mn()}unlistenImageChange(t){Mn()}ready(){return Promise.resolve()}}const Go=zo,jo={name:"rgb",min:[0,0,0],max:[255,255,255],channel:["red","green","blue"],alias:["RGB"]};var Yo={name:"xyz",min:[0,0,0],channel:["X","Y","Z"],alias:["XYZ","ciexyz","cie1931"],whitepoint:{2:{A:[109.85,100,35.585],C:[98.074,100,118.232],D50:[96.422,100,82.521],D55:[95.682,100,92.149],D65:[95.045592705167,100,108.9057750759878],D75:[94.972,100,122.638],F2:[99.187,100,67.395],F7:[95.044,100,108.755],F11:[100.966,100,64.37],E:[100,100,100]},10:{A:[111.144,100,35.2],C:[97.285,100,116.145],D50:[96.72,100,81.427],D55:[95.799,100,90.926],D65:[94.811,100,107.304],D75:[94.416,100,120.641],F2:[103.28,100,69.026],F7:[95.792,100,107.687],F11:[103.866,100,65.627],E:[100,100,100]}}};Yo.max=Yo.whitepoint[2].D65,Yo.rgb=function(t,e){e=e||Yo.whitepoint[2].E;var n,i,r,s=t[0]/e[0],o=t[1]/e[1],a=t[2]/e[2];return i=-.96924363628087*s+1.87596750150772*o+.041555057407175*a,r=.055630079696993*s+-.20397695888897*o+1.056971514242878*a,n=(n=3.240969941904521*s+-1.537383177570093*o+-.498610760293*a)>.0031308?1.055*Math.pow(n,1/2.4)-.055:n*=12.92,i=i>.0031308?1.055*Math.pow(i,1/2.4)-.055:i*=12.92,r=r>.0031308?1.055*Math.pow(r,1/2.4)-.055:r*=12.92,[255*(n=Math.min(Math.max(0,n),1)),255*(i=Math.min(Math.max(0,i),1)),255*(r=Math.min(Math.max(0,r),1))]},jo.xyz=function(t,e){var n=t[0]/255,i=t[1]/255,r=t[2]/255,s=.21263900587151*(n=n>.04045?Math.pow((n+.055)/1.055,2.4):n/12.92)+.71516867876775*(i=i>.04045?Math.pow((i+.055)/1.055,2.4):i/12.92)+.072192315360733*(r=r>.04045?Math.pow((r+.055)/1.055,2.4):r/12.92),o=.019330818715591*n+.11919477979462*i+.95053215224966*r;return[(.41239079926595*n+.35758433938387*i+.18048078840183*r)*(e=e||Yo.whitepoint[2].E)[0],s*e[1],o*e[2]]};const Bo=Yo,Uo={name:"luv",min:[0,-134,-140],max:[100,224,122],channel:["lightness","u","v"],alias:["LUV","cieluv","cie1976"],xyz:function(t,e,n){var i,r,s,o,a,l,u,h,c;if(s=t[0],o=t[1],a=t[2],0===s)return[0,0,0];return e=e||"D65",n=n||2,i=o/(13*s)+4*(u=Bo.whitepoint[n][e][0])/(u+15*(h=Bo.whitepoint[n][e][1])+3*(c=Bo.whitepoint[n][e][2]))||0,r=a/(13*s)+9*h/(u+15*h+3*c)||0,[9*(l=s>8?h*Math.pow((s+16)/116,3):h*s*.0011070564598794539)*i/(4*r)||0,l,l*(12-3*i-20*r)/(4*r)||0]}};Bo.luv=function(t,e,n){var i,r,s,o,a,l,u,h,c,d,f;e=e||"D65",n=n||2,d=4*(u=Bo.whitepoint[n][e][0])/(u+15*(h=Bo.whitepoint[n][e][1])+3*(c=Bo.whitepoint[n][e][2])),f=9*h/(u+15*h+3*c),i=4*(o=t[0])/(o+15*(a=t[1])+3*(l=t[2]))||0,r=9*a/(o+15*a+3*l)||0;var g=a/h;return[s=g<=.008856451679035631?903.2962962962961*g:116*Math.pow(g,1/3)-16,13*s*(i-d),13*s*(r-f)]};var Xo={name:"lchuv",channel:["lightness","chroma","hue"],alias:["LCHuv","cielchuv"],min:[0,0,0],max:[100,100,360],luv:function(t){var e,n=t[0],i=t[1];return e=t[2]/360*2*Math.PI,[n,i*Math.cos(e),i*Math.sin(e)]},xyz:function(t){return Uo.xyz(Xo.luv(t))}};const qo=Xo;Uo.lchuv=function(t){var e=t[0],n=t[1],i=t[2],r=Math.sqrt(n*n+i*i),s=360*Math.atan2(i,n)/2/Math.PI;return s<0&&(s+=360),[e,r,s]},Bo.lchuv=function(t){return Uo.lchuv(Bo.luv(t))};const Wo={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},Vo=function(t){var e,n,i=[],r=1;if("number"===typeof t)return{space:"rgb",values:[t>>>16,(65280&t)>>>8,255&t],alpha:1};if("number"===typeof t)return{space:"rgb",values:[t>>>16,(65280&t)>>>8,255&t],alpha:1};if(t=String(t).toLowerCase(),Wo[t])i=Wo[t].slice(),n="rgb";else if("transparent"===t)r=0,n="rgb",i=[0,0,0];else if("#"===t[0]){var s=t.slice(1),o=s.length;r=1,o<=4?(i=[parseInt(s[0]+s[0],16),parseInt(s[1]+s[1],16),parseInt(s[2]+s[2],16)],4===o&&(r=parseInt(s[3]+s[3],16)/255)):(i=[parseInt(s[0]+s[1],16),parseInt(s[2]+s[3],16),parseInt(s[4]+s[5],16)],8===o&&(r=parseInt(s[6]+s[7],16)/255)),i[0]||(i[0]=0),i[1]||(i[1]=0),i[2]||(i[2]=0),n="rgb"}else if(e=/^((?:rgba?|hs[lvb]a?|hwba?|cmyk?|xy[zy]|gray|lab|lchu?v?|[ly]uv|lms|oklch|oklab|color))\s*\(([^\)]*)\)/.exec(t)){var a=e[1],l="cmyk"===(n=a.replace(/a$/,""))?4:"gray"===n?1:3;i=e[2].trim().split(/\s*[,\/]\s*|\s+/),"color"===n&&(n=i.shift()),r=(i=i.map((function(t,e){if("%"===t[t.length-1])return t=parseFloat(t)/100,3===e?t:"rgb"===n?255*t:"h"===n[0]?100*t:"l"!==n[0]||e?"lab"===n?125*t:"lch"===n?e<2?150*t:360*t:"o"!==n[0]||e?"oklab"===n?.4*t:"oklch"===n?e<2?.4*t:360*t:t:t:100*t;if("h"===n[e]||2===e&&"h"===n[n.length-1]){if(void 0!==Ho[t])return Ho[t];if(t.endsWith("deg"))return parseFloat(t);if(t.endsWith("turn"))return 360*parseFloat(t);if(t.endsWith("grad"))return 360*parseFloat(t)/400;if(t.endsWith("rad"))return 180*parseFloat(t)/Math.PI}return"none"===t?0:parseFloat(t)}))).length>l?i.pop():1}else/[0-9](?:\s|\/|,)/.test(t)&&(i=t.match(/([0-9]+)/g).map((function(t){return parseFloat(t)})),n=t.match(/([a-z])/gi)?.join("")?.toLowerCase()||"rgb");return{space:n,values:i,alpha:r}};var Ho={red:0,orange:60,yellow:120,green:180,blue:240,purple:300};const Ko={name:"hsl",min:[0,0,0],max:[360,100,100],channel:["hue","saturation","lightness"],alias:["HSL"],rgb:function(t){var e,n,i,r,s,o=t[0]/360,a=t[1]/100,l=t[2]/100,u=0;if(0===a)return[s=255*l,s,s];for(e=2*l-(n=l<.5?l*(1+a):l+a-l*a),r=[0,0,0];u<3;)(i=o+1/3*-(u-1))<0?i++:i>1&&i--,s=6*i<1?e+6*(n-e)*i:2*i<1?n:3*i<2?e+(n-e)*(2/3-i)*6:e,r[u++]=255*s;return r}};jo.hsl=function(t){var e,n,i=t[0]/255,r=t[1]/255,s=t[2]/255,o=Math.min(i,r,s),a=Math.max(i,r,s),l=a-o;return a===o?e=0:i===a?e=(r-s)/l:r===a?e=2+(s-i)/l:s===a&&(e=4+(i-r)/l),(e=Math.min(60*e,360))<0&&(e+=360),n=(o+a)/2,[e,100*(a===o?0:n<=.5?l/(a+o):l/(2-a-o)),100*n]};const Zo=[NaN,NaN,NaN,0];const $o={};let Jo=0;function Qo(t){if(4===t.length)return t;const e=t.slice();return e[3]=1,e}function ta(t){const e=Bo.lchuv(jo.xyz(t));return e[3]=t[3],e}function ea(t){if("none"===t)return Zo;if($o.hasOwnProperty(t))return $o[t];if(Jo>=1024){let t=0;for(const e in $o)0===(3&t++)&&(delete $o[e],--Jo)}const e=function(t){var e;Array.isArray(t)&&t.raw&&(t=String.raw(...arguments)),t instanceof Number&&(t=+t);var n=Vo(t);if(!n.space)return[];const i="h"===n.space[0]?Ko.min:jo.min,r="h"===n.space[0]?Ko.max:jo.max;return(e=Array(3))[0]=Math.min(Math.max(n.values[0],i[0]),r[0]),e[1]=Math.min(Math.max(n.values[1],i[1]),r[1]),e[2]=Math.min(Math.max(n.values[2],i[2]),r[2]),"h"===n.space[0]&&(e=Ko.rgb(e)),e.push(Math.min(Math.max(n.alpha,0),1)),e}(t);if(4!==e.length)throw new Error('failed to parse "'+t+'" as color');for(const n of e)if(isNaN(n))throw new Error('failed to parse "'+t+'" as color');return ia(e),$o[t]=e,++Jo,e}function na(t){return Array.isArray(t)?t:ea(t)}function ia(t){return t[0]=Qn(t[0]+.5|0,0,255),t[1]=Qn(t[1]+.5|0,0,255),t[2]=Qn(t[2]+.5|0,0,255),t[3]=Qn(t[3],0,1),t}function ra(t){let e=t[0];e!=(0|e)&&(e=e+.5|0);let n=t[1];n!=(0|n)&&(n=n+.5|0);let i=t[2];i!=(0|i)&&(i=i+.5|0);return"rgba("+e+","+n+","+i+","+(void 0===t[3]?1:Math.round(1e3*t[3])/1e3)+")"}const sa="undefined"!==typeof navigator&&"undefined"!==typeof navigator.userAgent?navigator.userAgent.toLowerCase():"",oa=sa.includes("firefox"),aa=(sa.includes("safari")&&!sa.includes("chrom")&&(sa.includes("version/15.4")||/cpu (os|iphone os) 15_4 like mac os x/.test(sa)),sa.includes("webkit")&&!sa.includes("edge")),la=sa.includes("macintosh"),ua="undefined"!==typeof devicePixelRatio?devicePixelRatio:1,ha="undefined"!==typeof WorkerGlobalScope&&"undefined"!==typeof OffscreenCanvas&&self instanceof WorkerGlobalScope,ca="undefined"!==typeof Image&&Image.prototype.decode,da=function(){let t=!1;try{const e=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("_",null,e),window.removeEventListener("_",null,e)}catch(e){}return t}();function fa(t,e,n,i){let r;return r=n&&n.length?n.shift():ha?new OffscreenCanvas(t||300,e||300):document.createElement("canvas"),t&&(r.width=t),e&&(r.height=e),r.getContext("2d",i)}let ga;function pa(){return ga||(ga=fa(1,1)),ga}function ma(t){const e=t.canvas;e.width=1,e.height=1,t.clearRect(0,0,1,1)}function ya(t){let e=t.offsetWidth;const n=getComputedStyle(t);return e+=parseInt(n.marginLeft,10)+parseInt(n.marginRight,10),e}function _a(t){let e=t.offsetHeight;const n=getComputedStyle(t);return e+=parseInt(n.marginTop,10)+parseInt(n.marginBottom,10),e}function va(t,e){const n=e.parentNode;n&&n.replaceChild(t,e)}function xa(t){for(;t.lastChild;)t.lastChild.remove()}function wa(t,e){return e&&(t.src=e),t.src&&ca?new Promise(((e,n)=>t.decode().then((()=>e(t))).catch((i=>t.complete&&t.width?e(t):n(i))))):function(t,e){return new Promise(((n,i)=>{function r(){o(),n(t)}function s(){o(),i(new Error("Image load error"))}function o(){t.removeEventListener("load",r),t.removeEventListener("error",s)}t.addEventListener("load",r),t.addEventListener("error",s),e&&(t.src=e)}))}(t)}class ka{constructor(){this.cache_={},this.patternCache_={},this.cacheSize_=0,this.maxCacheSize_=32}clear(){this.cache_={},this.patternCache_={},this.cacheSize_=0}canExpireCache(){return this.cacheSize_>this.maxCacheSize_}expire(){if(this.canExpireCache()){let t=0;for(const e in this.cache_){const n=this.cache_[e];0!==(3&t++)||n.hasListener()||(delete this.cache_[e],delete this.patternCache_[e],--this.cacheSize_)}}}get(t,e,n){const i=Ea(t,e,n);return i in this.cache_?this.cache_[i]:null}getPattern(t,e,n){const i=Ea(t,e,n);return i in this.patternCache_?this.patternCache_[i]:null}set(t,e,n,i,r){const s=Ea(t,e,n),o=s in this.cache_;this.cache_[s]=i,r&&(i.getImageState()===Mo&&i.load(),i.getImageState()===Po?i.ready().then((()=>{this.patternCache_[s]=pa().createPattern(i.getImage(1),"repeat")})):this.patternCache_[s]=pa().createPattern(i.getImage(1),"repeat")),o||++this.cacheSize_}setSize(t){this.maxCacheSize_=t,this.expire()}}function Ea(t,e,n){return e+":"+t+":"+(n?na(n):"null")}const Sa=new ka;let ba=null;class Ca extends mn{constructor(t,e,n,i,r){super(),this.hitDetectionImage_=null,this.image_=t,this.crossOrigin_=n,this.canvas_={},this.color_=r,this.imageState_=void 0===i?Mo:i,this.size_=t&&t.width&&t.height?[t.width,t.height]:null,this.src_=e,this.tainted_,this.ready_=null}initializeImage_(){this.image_=new Image,null!==this.crossOrigin_&&(this.image_.crossOrigin=this.crossOrigin_)}isTainted_(){if(void 0===this.tainted_&&this.imageState_===Oo){ba||(ba=fa(1,1,void 0,{willReadFrequently:!0})),ba.drawImage(this.image_,0,0);try{ba.getImageData(0,0,1,1),this.tainted_=!1}catch($m){ba=null,this.tainted_=!0}}return!0===this.tainted_}dispatchChangeEvent_(){this.dispatchEvent(yn)}handleImageError_(){this.imageState_=Ao,this.dispatchChangeEvent_()}handleImageLoad_(){this.imageState_=Oo,this.size_=[this.image_.width,this.image_.height],this.dispatchChangeEvent_()}getImage(t){return this.image_||this.initializeImage_(),this.replaceColor_(t),this.canvas_[t]?this.canvas_[t]:this.image_}getPixelRatio(t){return this.replaceColor_(t),this.canvas_[t]?t:1}getImageState(){return this.imageState_}getHitDetectionImage(){if(this.image_||this.initializeImage_(),!this.hitDetectionImage_)if(this.isTainted_()){const t=this.size_[0],e=this.size_[1],n=fa(t,e);n.fillRect(0,0,t,e),this.hitDetectionImage_=n.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_}getSize(){return this.size_}getSrc(){return this.src_}load(){if(this.imageState_===Mo){this.image_||this.initializeImage_(),this.imageState_=Po;try{void 0!==this.src_&&(this.image_.src=this.src_)}catch($m){this.handleImageError_()}this.image_ instanceof HTMLImageElement&&wa(this.image_,this.src_).then((t=>{this.image_=t,this.handleImageLoad_()})).catch(this.handleImageError_.bind(this))}}replaceColor_(t){if(!this.color_||this.canvas_[t]||this.imageState_!==Oo)return;const e=this.image_,n=fa(Math.ceil(e.width*t),Math.ceil(e.height*t)),i=n.canvas;var r;n.scale(t,t),n.drawImage(e,0,0),n.globalCompositeOperation="multiply",n.fillStyle="string"===typeof(r=this.color_)?r:ra(r),n.fillRect(0,0,i.width/t,i.height/t),n.globalCompositeOperation="destination-in",n.drawImage(e,0,0),this.canvas_[t]=i}ready(){return this.ready_||(this.ready_=new Promise((t=>{if(this.imageState_===Oo||this.imageState_===Ao)t();else{const e=()=>{this.imageState_!==Oo&&this.imageState_!==Ao||(this.removeEventListener(yn,e),t())};this.addEventListener(yn,e)}}))),this.ready_}}function Ia(t,e,n,i,r,s){let o=void 0===e?void 0:Sa.get(e,n,r);return o||(o=new Ca(t,t&&"src"in t?t.src||void 0:e,n,i,r),Sa.set(e,n,r,o,s)),s&&o&&!Sa.getPattern(e,n,r)&&Sa.set(e,n,r,o,s),o}function Ta(t){return t?Array.isArray(t)?ra(t):"object"===typeof t&&"src"in t?function(t){if(!t.offset||!t.size)return Sa.getPattern(t.src,"anonymous",t.color);const e=t.src+":"+t.offset,n=Sa.getPattern(e,void 0,t.color);if(n)return n;const i=Sa.get(t.src,"anonymous",null);if(i.getImageState()!==Oo)return null;const r=fa(t.size[0],t.size[1]);return r.drawImage(i.getImage(1),t.offset[0],t.offset[1],t.size[0],t.size[1],0,0,t.size[0],t.size[1]),Ia(r.canvas,e,void 0,Oo,t.color,!0),Sa.getPattern(e,void 0,t.color)}(t):t:null}const Ra="ol-hidden",Na="ol-unselectable",La="ol-control",Ma="ol-collapsed",Pa=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))","?\\s*([-,\\\"\\'\\sa-z]+?)\\s*$"].join(""),"i"),Oa=["style","variant","weight","size","lineHeight","family"],Aa=function(t){const e=t.match(Pa);if(!e)return null;const n={lineHeight:"normal",size:"1.2em",style:"normal",weight:"normal",variant:"normal"};for(let i=0,r=Oa.length;i<r;++i){const t=e[i+1];void 0!==t&&(n[Oa[i]]=t)}return n.families=n.family.split(/,\s?/),n},Fa="10px sans-serif",Da="#000",za="round",Ga=[],ja="round",Ya="#000",Ba="center",Ua="middle",Xa=[0,0,0,0],qa=new Fn;let Wa,Va=null;const Ha={},Ka=function(){const t="32px ",e=["monospace","serif"],n=e.length,i="wmytzilWMYTZIL@#/&?$%10\uf013";let r,s;function o(r,o,a){let l=!0;for(let u=0;u<n;++u){const n=e[u];if(s=Ja(r+" "+o+" "+t+n,i),a!=n){const e=Ja(r+" "+o+" "+t+a+","+n,i);l=l&&e!=s}}return!!l}function a(){let t=!0;const e=qa.getKeys();for(let n=0,i=e.length;n<i;++n){const i=e[n];if(qa.get(i)<100){const[e,n,r]=i.split("\n");o(e,n,r)?(gn(Ha),Va=null,Wa=void 0,qa.set(i,100)):(qa.set(i,qa.get(i)+1,!0),t=!1)}}t&&(clearInterval(r),r=void 0)}return function(t){const e=Aa(t);if(!e)return;const n=e.families;for(let i=0,s=n.length;i<s;++i){const t=n[i],s=e.style+"\n"+e.weight+"\n"+t;void 0===qa.get(s)&&(qa.set(s,100,!0),o(e.style,e.weight,t)||(qa.set(s,0,!0),void 0===r&&(r=setInterval(a,32))))}}}(),Za=function(){let t;return function(e){let n=Ha[e];if(void 0==n){if(ha){const t=Aa(e),i=$a(e,"\u017dg");n=(isNaN(Number(t.lineHeight))?1.2:Number(t.lineHeight))*(i.actualBoundingBoxAscent+i.actualBoundingBoxDescent)}else t||(t=document.createElement("div"),t.innerHTML="M",t.style.minHeight="0",t.style.maxHeight="none",t.style.height="auto",t.style.padding="0",t.style.border="none",t.style.position="absolute",t.style.display="block",t.style.left="-99999px"),t.style.font=e,document.body.appendChild(t),n=t.offsetHeight,document.body.removeChild(t);Ha[e]=n}return n}}();function $a(t,e){return Va||(Va=fa(1,1)),t!=Wa&&(Va.font=t,Wa=Va.font),Va.measureText(e)}function Ja(t,e){return $a(t,e).width}function Qa(t,e,n){if(e in n)return n[e];const i=e.split("\n").reduce(((e,n)=>Math.max(e,Ja(t,n))),0);return n[e]=i,i}function tl(t,e,n,i,r,s,o,a,l,u,h){t.save(),1!==n&&(void 0===t.globalAlpha?t.globalAlpha=t=>t.globalAlpha*=n:t.globalAlpha*=n),e&&t.transform.apply(t,e),i.contextInstructions?(t.translate(l,u),t.scale(h[0],h[1]),function(t,e){const n=t.contextInstructions;for(let i=0,r=n.length;i<r;i+=2)Array.isArray(n[i+1])?e[n[i]].apply(e,n[i+1]):e[n[i]]=n[i+1]}(i,t)):h[0]<0||h[1]<0?(t.translate(l,u),t.scale(h[0],h[1]),t.drawImage(i,r,s,o,a,0,0,o,a)):t.drawImage(i,r,s,o,a,l,u,o*h[0],a*h[1]),t.restore()}class el extends Go{constructor(t){super({opacity:1,rotateWithView:void 0!==t.rotateWithView&&t.rotateWithView,rotation:void 0!==t.rotation?t.rotation:0,scale:void 0!==t.scale?t.scale:1,displacement:void 0!==t.displacement?t.displacement:[0,0],declutterMode:t.declutterMode}),this.canvases_,this.hitDetectionCanvas_=null,this.fill_=void 0!==t.fill?t.fill:null,this.origin_=[0,0],this.points_=t.points,this.radius=t.radius,this.radius2_=t.radius2,this.angle_=void 0!==t.angle?t.angle:0,this.stroke_=void 0!==t.stroke?t.stroke:null,this.size_,this.renderOptions_,this.imageState_=this.fill_&&this.fill_.loading()?Po:Oo,this.imageState_===Po&&this.ready().then((()=>this.imageState_=Oo)),this.render()}clone(){const t=this.getScale(),e=new el({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(t)?t.slice():t,displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return e.setOpacity(this.getOpacity()),e}getAnchor(){const t=this.size_,e=this.getDisplacement(),n=this.getScaleArray();return[t[0]/2-e[0]/n[0],t[1]/2+e[1]/n[1]]}getAngle(){return this.angle_}getFill(){return this.fill_}setFill(t){this.fill_=t,this.render()}getHitDetectionImage(){return this.hitDetectionCanvas_||(this.hitDetectionCanvas_=this.createHitDetectionCanvas_(this.renderOptions_)),this.hitDetectionCanvas_}getImage(t){let e=this.canvases_[t];if(!e){const n=this.renderOptions_,i=fa(n.size*t,n.size*t);this.draw_(n,i,t),e=i.canvas,this.canvases_[t]=e}return e}getPixelRatio(t){return t}getImageSize(){return this.size_}getImageState(){return this.imageState_}getOrigin(){return this.origin_}getPoints(){return this.points_}getRadius(){return this.radius}getRadius2(){return this.radius2_}getSize(){return this.size_}getStroke(){return this.stroke_}setStroke(t){this.stroke_=t,this.render()}listenImageChange(t){}load(){}unlistenImageChange(t){}calculateLineJoinSize_(t,e,n){if(0===e||this.points_===1/0||"bevel"!==t&&"miter"!==t)return e;let i=this.radius,r=void 0===this.radius2_?i:this.radius2_;if(i<r){const t=i;i=r,r=t}const s=void 0===this.radius2_?this.points_:2*this.points_,o=2*Math.PI/s,a=r*Math.sin(o),l=i-Math.sqrt(r*r-a*a),u=Math.sqrt(a*a+l*l),h=u/a;if("miter"===t&&h<=n)return h*e;const c=e/2/h,d=e/2*(l/u),f=Math.sqrt((i+c)*(i+c)+d*d)-i;if(void 0===this.radius2_||"bevel"===t)return 2*f;const g=i*Math.sin(o),p=r-Math.sqrt(i*i-g*g),m=Math.sqrt(g*g+p*p)/g;if(m<=n){const t=m*e/2-r-i;return 2*Math.max(f,t)}return 2*f}createRenderOptions(){let t,e=za,n=ja,i=0,r=null,s=0,o=0;this.stroke_&&(t=Ta(this.stroke_.getColor()??Ya),o=this.stroke_.getWidth()??1,r=this.stroke_.getLineDash(),s=this.stroke_.getLineDashOffset()??0,n=this.stroke_.getLineJoin()??ja,e=this.stroke_.getLineCap()??za,i=this.stroke_.getMiterLimit()??10);const a=this.calculateLineJoinSize_(n,o,i),l=Math.max(this.radius,this.radius2_||0);return{strokeStyle:t,strokeWidth:o,size:Math.ceil(2*l+a),lineCap:e,lineDash:r,lineDashOffset:s,lineJoin:n,miterLimit:i}}render(){this.renderOptions_=this.createRenderOptions();const t=this.renderOptions_.size;this.canvases_={},this.hitDetectionCanvas_=null,this.size_=[t,t]}draw_(t,e,n){if(e.scale(n,n),e.translate(t.size/2,t.size/2),this.createPath_(e),this.fill_){let t=this.fill_.getColor();null===t&&(t=Da),e.fillStyle=Ta(t),e.fill()}t.strokeStyle&&(e.strokeStyle=t.strokeStyle,e.lineWidth=t.strokeWidth,t.lineDash&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.lineCap=t.lineCap,e.lineJoin=t.lineJoin,e.miterLimit=t.miterLimit,e.stroke())}createHitDetectionCanvas_(t){let e;if(this.fill_){let n=this.fill_.getColor(),i=0;"string"===typeof n&&(n=na(n)),null===n?i=1:Array.isArray(n)&&(i=4===n.length?n[3]:1),0===i&&(e=fa(t.size,t.size),this.drawHitDetectionCanvas_(t,e))}return e?e.canvas:this.getImage(1)}createPath_(t){let e=this.points_;const n=this.radius;if(e===1/0)t.arc(0,0,n,0,2*Math.PI);else{const i=void 0===this.radius2_?n:this.radius2_;void 0!==this.radius2_&&(e*=2);const r=this.angle_-Math.PI/2,s=2*Math.PI/e;for(let o=0;o<e;o++){const e=r+o*s,a=o%2===0?n:i;t.lineTo(a*Math.cos(e),a*Math.sin(e))}t.closePath()}}drawHitDetectionCanvas_(t,e){e.translate(t.size/2,t.size/2),this.createPath_(e),e.fillStyle=Da,e.fill(),t.strokeStyle&&(e.strokeStyle=t.strokeStyle,e.lineWidth=t.strokeWidth,t.lineDash&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.lineJoin=t.lineJoin,e.miterLimit=t.miterLimit,e.stroke())}ready(){return this.fill_?this.fill_.ready():Promise.resolve()}}const nl=el;class il extends nl{constructor(t){super({points:1/0,fill:(t=t||{radius:5}).fill,radius:t.radius,stroke:t.stroke,scale:void 0!==t.scale?t.scale:1,rotation:void 0!==t.rotation?t.rotation:0,rotateWithView:void 0!==t.rotateWithView&&t.rotateWithView,displacement:void 0!==t.displacement?t.displacement:[0,0],declutterMode:t.declutterMode})}clone(){const t=this.getScale(),e=new il({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(t)?t.slice():t,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return e.setOpacity(this.getOpacity()),e}setRadius(t){this.radius=t,this.render()}}const rl=il;class sl{constructor(t){t=t||{},this.patternImage_=null,this.color_=null,void 0!==t.color&&this.setColor(t.color)}clone(){const t=this.getColor();return new sl({color:Array.isArray(t)?t.slice():t||void 0})}getColor(){return this.color_}setColor(t){if(null!==t&&"object"===typeof t&&"src"in t){const e=Ia(null,t.src,"anonymous",void 0,t.offset?null:t.color?t.color:null,!(t.offset&&t.size));e.ready().then((()=>{this.patternImage_=null})),e.getImageState()===Mo&&e.load(),e.getImageState()===Po&&(this.patternImage_=e)}this.color_=t}loading(){return!!this.patternImage_}ready(){return this.patternImage_?this.patternImage_.ready():Promise.resolve()}}const ol=sl;class al{constructor(t){t=t||{},this.color_=void 0!==t.color?t.color:null,this.lineCap_=t.lineCap,this.lineDash_=void 0!==t.lineDash?t.lineDash:null,this.lineDashOffset_=t.lineDashOffset,this.lineJoin_=t.lineJoin,this.miterLimit_=t.miterLimit,this.width_=t.width}clone(){const t=this.getColor();return new al({color:Array.isArray(t)?t.slice():t||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})}getColor(){return this.color_}getLineCap(){return this.lineCap_}getLineDash(){return this.lineDash_}getLineDashOffset(){return this.lineDashOffset_}getLineJoin(){return this.lineJoin_}getMiterLimit(){return this.miterLimit_}getWidth(){return this.width_}setColor(t){this.color_=t}setLineCap(t){this.lineCap_=t}setLineDash(t){this.lineDash_=t}setLineDashOffset(t){this.lineDashOffset_=t}setLineJoin(t){this.lineJoin_=t}setMiterLimit(t){this.miterLimit_=t}setWidth(t){this.width_=t}}const ll=al;class ul{constructor(t){t=t||{},this.geometry_=null,this.geometryFunction_=dl,void 0!==t.geometry&&this.setGeometry(t.geometry),this.fill_=void 0!==t.fill?t.fill:null,this.image_=void 0!==t.image?t.image:null,this.renderer_=void 0!==t.renderer?t.renderer:null,this.hitDetectionRenderer_=void 0!==t.hitDetectionRenderer?t.hitDetectionRenderer:null,this.stroke_=void 0!==t.stroke?t.stroke:null,this.text_=void 0!==t.text?t.text:null,this.zIndex_=t.zIndex}clone(){let t=this.getGeometry();return t&&"object"===typeof t&&(t=t.clone()),new ul({geometry:t??void 0,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:this.getRenderer()??void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})}getRenderer(){return this.renderer_}setRenderer(t){this.renderer_=t}setHitDetectionRenderer(t){this.hitDetectionRenderer_=t}getHitDetectionRenderer(){return this.hitDetectionRenderer_}getGeometry(){return this.geometry_}getGeometryFunction(){return this.geometryFunction_}getFill(){return this.fill_}setFill(t){this.fill_=t}getImage(){return this.image_}setImage(t){this.image_=t}getStroke(){return this.stroke_}setStroke(t){this.stroke_=t}getText(){return this.text_}setText(t){this.text_=t}getZIndex(){return this.zIndex_}setGeometry(t){"function"===typeof t?this.geometryFunction_=t:"string"===typeof t?this.geometryFunction_=function(e){return e.get(t)}:t?void 0!==t&&(this.geometryFunction_=function(){return t}):this.geometryFunction_=dl,this.geometry_=t}setZIndex(t){this.zIndex_=t}}let hl=null;function cl(t,e){if(!hl){const t=new ol({color:"rgba(255,255,255,0.4)"}),e=new ll({color:"#3399CC",width:1.25});hl=[new ul({image:new rl({fill:t,stroke:e,radius:5}),fill:t,stroke:e})]}return hl}function dl(t){return t.getGeometry()}const fl=ul;function gl(t,e,n,i){return void 0!==n&&void 0!==i?[n/t,i/e]:void 0!==n?n/t:void 0!==i?i/e:1}class pl extends Go{constructor(t){const e=void 0!==(t=t||{}).opacity?t.opacity:1,n=void 0!==t.rotation?t.rotation:0,i=void 0!==t.scale?t.scale:1,r=void 0!==t.rotateWithView&&t.rotateWithView;super({opacity:e,rotation:n,scale:i,displacement:void 0!==t.displacement?t.displacement:[0,0],rotateWithView:r,declutterMode:t.declutterMode}),this.anchor_=void 0!==t.anchor?t.anchor:[.5,.5],this.normalizedAnchor_=null,this.anchorOrigin_=void 0!==t.anchorOrigin?t.anchorOrigin:"top-left",this.anchorXUnits_=void 0!==t.anchorXUnits?t.anchorXUnits:"fraction",this.anchorYUnits_=void 0!==t.anchorYUnits?t.anchorYUnits:"fraction",this.crossOrigin_=void 0!==t.crossOrigin?t.crossOrigin:null;const s=void 0!==t.img?t.img:null;let o,a=t.src;if(Jn(!(void 0!==a&&s),"`image` and `src` cannot be provided at the same time"),void 0!==a&&0!==a.length||!s||(a=s.src||On(s)),Jn(void 0!==a&&a.length>0,"A defined and non-empty `src` or `image` must be provided"),Jn(!((void 0!==t.width||void 0!==t.height)&&void 0!==t.scale),"`width` or `height` cannot be provided together with `scale`"),void 0!==t.src?o=Mo:void 0!==s&&(o="complete"in s?s.complete?s.src?Oo:Mo:Po:Oo),this.color_=void 0!==t.color?na(t.color):null,this.iconImage_=Ia(s,a,this.crossOrigin_,o,this.color_),this.offset_=void 0!==t.offset?t.offset:[0,0],this.offsetOrigin_=void 0!==t.offsetOrigin?t.offsetOrigin:"top-left",this.origin_=null,this.size_=void 0!==t.size?t.size:null,this.initialOptions_,void 0!==t.width||void 0!==t.height){let e,n;if(t.size)[e,n]=t.size;else{const i=this.getImage(1);if(i.width&&i.height)e=i.width,n=i.height;else if(i instanceof HTMLImageElement){this.initialOptions_=t;const e=()=>{if(this.unlistenImageChange(e),!this.initialOptions_)return;const n=this.iconImage_.getSize();this.setScale(gl(n[0],n[1],t.width,t.height))};return void this.listenImageChange(e)}}void 0!==e&&this.setScale(gl(e,n,t.width,t.height))}}clone(){let t,e,n;return this.initialOptions_?(e=this.initialOptions_.width,n=this.initialOptions_.height):(t=this.getScale(),t=Array.isArray(t)?t.slice():t),new pl({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,crossOrigin:this.crossOrigin_,offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,opacity:this.getOpacity(),rotateWithView:this.getRotateWithView(),rotation:this.getRotation(),scale:t,width:e,height:n,size:null!==this.size_?this.size_.slice():void 0,src:this.getSrc(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getAnchor(){let t=this.normalizedAnchor_;if(!t){t=this.anchor_;const e=this.getSize();if("fraction"==this.anchorXUnits_||"fraction"==this.anchorYUnits_){if(!e)return null;t=this.anchor_.slice(),"fraction"==this.anchorXUnits_&&(t[0]*=e[0]),"fraction"==this.anchorYUnits_&&(t[1]*=e[1])}if("top-left"!=this.anchorOrigin_){if(!e)return null;t===this.anchor_&&(t=this.anchor_.slice()),"top-right"!=this.anchorOrigin_&&"bottom-right"!=this.anchorOrigin_||(t[0]=-t[0]+e[0]),"bottom-left"!=this.anchorOrigin_&&"bottom-right"!=this.anchorOrigin_||(t[1]=-t[1]+e[1])}this.normalizedAnchor_=t}const e=this.getDisplacement(),n=this.getScaleArray();return[t[0]-e[0]/n[0],t[1]+e[1]/n[1]]}setAnchor(t){this.anchor_=t,this.normalizedAnchor_=null}getColor(){return this.color_}getImage(t){return this.iconImage_.getImage(t)}getPixelRatio(t){return this.iconImage_.getPixelRatio(t)}getImageSize(){return this.iconImage_.getSize()}getImageState(){return this.iconImage_.getImageState()}getHitDetectionImage(){return this.iconImage_.getHitDetectionImage()}getOrigin(){if(this.origin_)return this.origin_;let t=this.offset_;if("top-left"!=this.offsetOrigin_){const e=this.getSize(),n=this.iconImage_.getSize();if(!e||!n)return null;t=t.slice(),"top-right"!=this.offsetOrigin_&&"bottom-right"!=this.offsetOrigin_||(t[0]=n[0]-e[0]-t[0]),"bottom-left"!=this.offsetOrigin_&&"bottom-right"!=this.offsetOrigin_||(t[1]=n[1]-e[1]-t[1])}return this.origin_=t,this.origin_}getSrc(){return this.iconImage_.getSrc()}getSize(){return this.size_?this.size_:this.iconImage_.getSize()}getWidth(){const t=this.getScaleArray();return this.size_?this.size_[0]*t[0]:this.iconImage_.getImageState()==Oo?this.iconImage_.getSize()[0]*t[0]:void 0}getHeight(){const t=this.getScaleArray();return this.size_?this.size_[1]*t[1]:this.iconImage_.getImageState()==Oo?this.iconImage_.getSize()[1]*t[1]:void 0}setScale(t){delete this.initialOptions_,super.setScale(t)}listenImageChange(t){this.iconImage_.addEventListener(yn,t)}load(){this.iconImage_.load()}unlistenImageChange(t){this.iconImage_.removeEventListener(yn,t)}ready(){return this.iconImage_.ready()}}const ml=pl;class yl{constructor(t){t=t||{},this.font_=t.font,this.rotation_=t.rotation,this.rotateWithView_=t.rotateWithView,this.scale_=t.scale,this.scaleArray_=Do(void 0!==t.scale?t.scale:1),this.text_=t.text,this.textAlign_=t.textAlign,this.justify_=t.justify,this.repeat_=t.repeat,this.textBaseline_=t.textBaseline,this.fill_=void 0!==t.fill?t.fill:new ol({color:"#333"}),this.maxAngle_=void 0!==t.maxAngle?t.maxAngle:Math.PI/4,this.placement_=void 0!==t.placement?t.placement:"point",this.overflow_=!!t.overflow,this.stroke_=void 0!==t.stroke?t.stroke:null,this.offsetX_=void 0!==t.offsetX?t.offsetX:0,this.offsetY_=void 0!==t.offsetY?t.offsetY:0,this.backgroundFill_=t.backgroundFill?t.backgroundFill:null,this.backgroundStroke_=t.backgroundStroke?t.backgroundStroke:null,this.padding_=void 0===t.padding?null:t.padding,this.declutterMode_=t.declutterMode}clone(){const t=this.getScale();return new yl({font:this.getFont(),placement:this.getPlacement(),repeat:this.getRepeat(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(t)?t.slice():t,text:this.getText(),textAlign:this.getTextAlign(),justify:this.getJustify(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()||void 0,declutterMode:this.getDeclutterMode()})}getOverflow(){return this.overflow_}getFont(){return this.font_}getMaxAngle(){return this.maxAngle_}getPlacement(){return this.placement_}getRepeat(){return this.repeat_}getOffsetX(){return this.offsetX_}getOffsetY(){return this.offsetY_}getFill(){return this.fill_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getStroke(){return this.stroke_}getText(){return this.text_}getTextAlign(){return this.textAlign_}getJustify(){return this.justify_}getTextBaseline(){return this.textBaseline_}getBackgroundFill(){return this.backgroundFill_}getBackgroundStroke(){return this.backgroundStroke_}getPadding(){return this.padding_}getDeclutterMode(){return this.declutterMode_}setOverflow(t){this.overflow_=t}setFont(t){this.font_=t}setMaxAngle(t){this.maxAngle_=t}setOffsetX(t){this.offsetX_=t}setOffsetY(t){this.offsetY_=t}setPlacement(t){this.placement_=t}setRepeat(t){this.repeat_=t}setRotateWithView(t){this.rotateWithView_=t}setFill(t){this.fill_=t}setRotation(t){this.rotation_=t}setScale(t){this.scale_=t,this.scaleArray_=Do(void 0!==t?t:1)}setStroke(t){this.stroke_=t}setText(t){this.text_=t}setTextAlign(t){this.textAlign_=t}setJustify(t){this.justify_=t}setTextBaseline(t){this.textBaseline_=t}setBackgroundFill(t){this.backgroundFill_=t}setBackgroundStroke(t){this.backgroundStroke_=t}setPadding(t){this.padding_=t}}const _l=yl;let vl=0;const xl=1<<vl++,wl=1<<vl++,kl=1<<vl++,El=1<<vl++,Sl=1<<vl++,bl=1<<vl++,Cl=Math.pow(2,6)-1,Il={[xl]:"boolean",[wl]:"number",[kl]:"string",[El]:"color",[Sl]:"number[]",[bl]:"size"},Tl=Object.keys(Il).map(Number).sort(rn);function Rl(t){const e=[];for(const n of Tl)Nl(t,n)&&e.push(Il[n]);return 0===e.length?"untyped":e.length<3?e.join(" or "):e.slice(0,-1).join(", ")+", or "+e[e.length-1]}function Nl(t,e){return(t&e)===e}function Ll(t,e){return t===e}class Ml{constructor(t,e){if(!function(t){return t in Il}(t))throw new Error(`literal expressions must have a specific type, got ${Rl(t)}`);this.type=t,this.value=e}}class Pl{constructor(t,e){this.type=t,this.operator=e;for(var n=arguments.length,i=new Array(n>2?n-2:0),r=2;r<n;r++)i[r-2]=arguments[r];this.args=i}}function Ol(){return{variables:new Set,properties:new Set,featureId:!1,geometryType:!1}}function Al(t,e,n){switch(typeof t){case"boolean":if(Ll(e,kl))return new Ml(kl,t?"true":"false");if(!Nl(e,xl))throw new Error(`got a boolean, but expected ${Rl(e)}`);return new Ml(xl,t);case"number":if(Ll(e,bl))return new Ml(bl,Do(t));if(Ll(e,xl))return new Ml(xl,!!t);if(Ll(e,kl))return new Ml(kl,t.toString());if(!Nl(e,wl))throw new Error(`got a number, but expected ${Rl(e)}`);return new Ml(wl,t);case"string":if(Ll(e,El))return new Ml(El,ea(t));if(Ll(e,xl))return new Ml(xl,!!t);if(!Nl(e,kl))throw new Error(`got a string, but expected ${Rl(e)}`);return new Ml(kl,t)}if(!Array.isArray(t))throw new Error("expression must be an array or a primitive value");if(0===t.length)throw new Error("empty expression");if("string"===typeof t[0])return function(t,e,n){const i=t[0],r=Ru[i];if(!r)throw new Error(`unknown operator: ${i}`);return r(t,e,n)}(t,e,n);for(const i of t)if("number"!==typeof i)throw new Error("expected an array of numbers");if(Ll(e,bl)){if(2!==t.length)throw new Error(`expected an array of two values for a size, got ${t.length}`);return new Ml(bl,t)}if(Ll(e,El)){if(3===t.length)return new Ml(El,[...t,1]);if(4===t.length)return new Ml(El,t);throw new Error(`expected an array of 3 or 4 values for a color, got ${t.length}`)}if(!Nl(e,Sl))throw new Error(`got an array of numbers, but expected ${Rl(e)}`);return new Ml(Sl,t)}const Fl="get",Dl="var",zl="concat",Gl="geometry-type",jl="line-metric",Yl="any",Bl="all",Ul="!",Xl="resolution",ql="zoom",Wl="time",Vl="==",Hl="!=",Kl=">",Zl=">=",$l="<",Jl="<=",Ql="*",tu="/",eu="+",nu="-",iu="clamp",ru="%",su="^",ou="abs",au="floor",lu="ceil",uu="round",hu="sin",cu="cos",du="atan",fu="sqrt",gu="match",pu="between",mu="interpolate",yu="coalesce",_u="case",vu="in",xu="number",wu="string",ku="array",Eu="color",Su="id",bu="band",Cu="palette",Iu="to-string",Tu="has",Ru={[Fl]:Fu(Mu(1,1/0),Nu),[Dl]:Fu(Mu(1,1),(function(t,e,n){const i=t[1];if("string"!==typeof i)throw new Error("expected a string argument for var operation");return n.variables.add(i),[new Ml(kl,i)]})),[Tu]:Fu(Mu(1,1/0),Nu),[Su]:Fu((function(t,e,n){n.featureId=!0}),Lu),[zl]:Fu(Mu(2,1/0),Ou(kl)),[Gl]:Fu((function(t,e,n){n.geometryType=!0}),Lu),[jl]:Fu(Lu),[Xl]:Fu(Lu),[ql]:Fu(Lu),[Wl]:Fu(Lu),[Yl]:Fu(Mu(2,1/0),Ou(xl)),[Bl]:Fu(Mu(2,1/0),Ou(xl)),[Ul]:Fu(Mu(1,1),Ou(xl)),[Vl]:Fu(Mu(2,2),Ou(Cl)),[Hl]:Fu(Mu(2,2),Ou(Cl)),[Kl]:Fu(Mu(2,2),Ou(wl)),[Zl]:Fu(Mu(2,2),Ou(wl)),[$l]:Fu(Mu(2,2),Ou(wl)),[Jl]:Fu(Mu(2,2),Ou(wl)),[Ql]:Fu(Mu(2,1/0),Pu),[yu]:Fu(Mu(2,1/0),Pu),[tu]:Fu(Mu(2,2),Ou(wl)),[eu]:Fu(Mu(2,1/0),Ou(wl)),[nu]:Fu(Mu(2,2),Ou(wl)),[iu]:Fu(Mu(3,3),Ou(wl)),[ru]:Fu(Mu(2,2),Ou(wl)),[su]:Fu(Mu(2,2),Ou(wl)),[ou]:Fu(Mu(1,1),Ou(wl)),[au]:Fu(Mu(1,1),Ou(wl)),[lu]:Fu(Mu(1,1),Ou(wl)),[uu]:Fu(Mu(1,1),Ou(wl)),[hu]:Fu(Mu(1,1),Ou(wl)),[cu]:Fu(Mu(1,1),Ou(wl)),[du]:Fu(Mu(1,2),Ou(wl)),[fu]:Fu(Mu(1,1),Ou(wl)),[gu]:Fu(Mu(4,1/0),Au,(function(t,e,n){const i=t.length-1,r=kl|wl|xl,s=Al(t[1],r,n),o=Al(t[t.length-1],e,n),a=new Array(i-2);for(let u=0;u<i-2;u+=2){try{const e=Al(t[u+2],s.type,n);a[u]=e}catch(l){throw new Error(`failed to parse argument ${u+1} of match expression: ${l.message}`)}try{const e=Al(t[u+3],o.type,n);a[u+1]=e}catch(l){throw new Error(`failed to parse argument ${u+2} of match expression: ${l.message}`)}}return[s,...a,o]})),[pu]:Fu(Mu(3,3),Ou(wl)),[mu]:Fu(Mu(6,1/0),Au,(function(t,e,n){const i=t[1];let r;switch(i[0]){case"linear":r=1;break;case"exponential":const t=i[1];if("number"!==typeof t||t<=0)throw new Error(`expected a number base for exponential interpolation, got ${JSON.stringify(t)} instead`);r=t;break;default:throw new Error(`invalid interpolation type: ${JSON.stringify(i)}`)}const s=new Ml(wl,r);let o;try{o=Al(t[2],wl,n)}catch(l){throw new Error(`failed to parse argument 1 in interpolate expression: ${l.message}`)}const a=new Array(t.length-3);for(let u=0;u<a.length;u+=2){try{const e=Al(t[u+3],wl,n);a[u]=e}catch(l){throw new Error(`failed to parse argument ${u+2} for interpolate expression: ${l.message}`)}try{const i=Al(t[u+4],e,n);a[u+1]=i}catch(l){throw new Error(`failed to parse argument ${u+3} for interpolate expression: ${l.message}`)}}return[s,o,...a]})),[_u]:Fu(Mu(3,1/0),(function(t,e,n){const i=t[0],r=t.length-1;if(r%2===0)throw new Error(`expected an odd number of arguments for ${i}, got ${r} instead`)}),(function(t,e,n){const i=Al(t[t.length-1],e,n),r=new Array(t.length-1);for(let o=0;o<r.length-1;o+=2){try{const e=Al(t[o+1],xl,n);r[o]=e}catch(s){throw new Error(`failed to parse argument ${o} of case expression: ${s.message}`)}try{const e=Al(t[o+2],i.type,n);r[o+1]=e}catch(s){throw new Error(`failed to parse argument ${o+1} of case expression: ${s.message}`)}}return r[r.length-1]=i,r})),[vu]:Fu(Mu(2,2),(function(t,e,n){let i,r=t[2];if(!Array.isArray(r))throw new Error('the second argument for the "in" operator must be an array');if("string"===typeof r[0]){if("literal"!==r[0])throw new Error('for the "in" operator, a string array should be wrapped in a "literal" operator to disambiguate from expressions');if(!Array.isArray(r[1]))throw new Error('failed to parse "in" expression: the literal operator must be followed by an array');r=r[1],i=kl}else i=wl;const s=new Array(r.length);for(let a=0;a<s.length;a++)try{const t=Al(r[a],i,n);s[a]=t}catch(o){throw new Error(`failed to parse haystack item ${a} for "in" expression: ${o.message}`)}return[Al(t[1],i,n),...s]})),[xu]:Fu(Mu(1,1/0),Ou(Cl)),[wu]:Fu(Mu(1,1/0),Ou(Cl)),[ku]:Fu(Mu(1,1/0),Ou(wl)),[Eu]:Fu(Mu(1,4),Ou(wl)),[bu]:Fu(Mu(1,3),Ou(wl)),[Cu]:Fu(Mu(2,2),(function(t,e,n){let i;try{i=Al(t[1],wl,n)}catch(o){throw new Error(`failed to parse first argument in palette expression: ${o.message}`)}const r=t[2];if(!Array.isArray(r))throw new Error("the second argument of palette must be an array");const s=new Array(r.length);for(let a=0;a<s.length;a++){let t;try{t=Al(r[a],El,n)}catch(o){throw new Error(`failed to parse color at index ${a} in palette expression: ${o.message}`)}if(!(t instanceof Ml))throw new Error(`the palette color at index ${a} must be a literal value`);s[a]=t}return[i,...s]})),[Iu]:Fu(Mu(1,1),Ou(xl|wl|kl|El))};function Nu(t,e,n){const i=t.length-1,r=new Array(i);for(let s=0;s<i;++s){const e=t[s+1];switch(typeof e){case"number":r[s]=new Ml(wl,e);break;case"string":r[s]=new Ml(kl,e);break;default:throw new Error(`expected a string key or numeric array index for a get operation, got ${e}`)}0===s&&n.properties.add(String(e))}return r}function Lu(t,e,n){const i=t[0];if(1!==t.length)throw new Error(`expected no arguments for ${i} operation`);return[]}function Mu(t,e){return function(n,i,r){const s=n[0],o=n.length-1;if(t===e){if(o!==t){throw new Error(`expected ${t} argument${1===t?"":"s"} for ${s}, got ${o}`)}}else if(o<t||o>e){throw new Error(`expected ${e===1/0?`${t} or more`:`${t} to ${e}`} arguments for ${s}, got ${o}`)}}}function Pu(t,e,n){const i=t.length-1,r=new Array(i);for(let s=0;s<i;++s){const i=Al(t[s+1],e,n);r[s]=i}return r}function Ou(t){return function(e,n,i){const r=e.length-1,s=new Array(r);for(let o=0;o<r;++o){const n=Al(e[o+1],t,i);s[o]=n}return s}}function Au(t,e,n){const i=t[0],r=t.length-1;if(r%2===1)throw new Error(`expected an even number of arguments for operation ${i}, got ${r} instead`)}function Fu(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(t,n,i){const r=t[0];let s;for(let o=0;o<e.length;o++){const r=e[o](t,n,i);if(o==e.length-1){if(!r)throw new Error("expected last argument validator to return the parsed args");s=r}}return new Pl(n,r,...s)}}function Du(t){if(!t)return"";const e=t.getType();switch(e){case"Point":case"LineString":case"Polygon":return e;case"MultiPoint":case"MultiLineString":case"MultiPolygon":return e.substring(5);case"Circle":return"Polygon";case"GeometryCollection":return Du(t.getGeometries()[0]);default:return""}}function zu(t,e,n){return Gu(Al(t,e,n),n)}function Gu(t,e){if(t instanceof Ml){if(t.type===El&&"string"===typeof t.value){const e=ea(t.value);return function(){return e}}return function(){return t.value}}const n=t.operator;switch(n){case xu:case wu:case yu:return function(t,e){const n=t.operator,i=t.args.length,r=new Array(i);for(let s=0;s<i;++s)r[s]=Gu(t.args[s],e);switch(n){case yu:return t=>{for(let e=0;e<i;++e){const n=r[e](t);if("undefined"!==typeof n&&null!==n)return n}throw new Error("Expected one of the values to be non-null")};case xu:case wu:return t=>{for(let e=0;e<i;++e){const i=r[e](t);if(typeof i===n)return i}throw new Error(`Expected one of the values to be a ${n}`)};default:throw new Error(`Unsupported assertion operator ${n}`)}}(t,e);case Fl:case Dl:case Tu:return function(t){const e=t.args[0],n=e.value;switch(t.operator){case Fl:return e=>{const i=t.args;let r=e.properties[n];for(let t=1,n=i.length;t<n;++t){r=r[i[t].value]}return r};case Dl:return t=>t.variables[n];case Tu:return e=>{const i=t.args;if(!(n in e.properties))return!1;let r=e.properties[n];for(let t=1,n=i.length;t<n;++t){const e=i[t].value;if(!r||!Object.hasOwn(r,e))return!1;r=r[e]}return!0};default:throw new Error(`Unsupported accessor operator ${t.operator}`)}}(t);case Su:return t=>t.featureId;case Gl:return t=>t.geometryType;case zl:{const n=t.args.map((t=>Gu(t,e)));return t=>"".concat(...n.map((e=>e(t).toString())))}case Xl:return t=>t.resolution;case Yl:case Bl:case pu:case vu:case Ul:return function(t,e){const n=t.operator,i=t.args.length,r=new Array(i);for(let s=0;s<i;++s)r[s]=Gu(t.args[s],e);switch(n){case Yl:return t=>{for(let e=0;e<i;++e)if(r[e](t))return!0;return!1};case Bl:return t=>{for(let e=0;e<i;++e)if(!r[e](t))return!1;return!0};case pu:return t=>{const e=r[0](t),n=r[1](t),i=r[2](t);return e>=n&&e<=i};case vu:return t=>{const e=r[0](t);for(let n=1;n<i;++n)if(e===r[n](t))return!0;return!1};case Ul:return t=>!r[0](t);default:throw new Error(`Unsupported logical operator ${n}`)}}(t,e);case Vl:case Hl:case $l:case Jl:case Kl:case Zl:return function(t,e){const n=t.operator,i=Gu(t.args[0],e),r=Gu(t.args[1],e);switch(n){case Vl:return t=>i(t)===r(t);case Hl:return t=>i(t)!==r(t);case $l:return t=>i(t)<r(t);case Jl:return t=>i(t)<=r(t);case Kl:return t=>i(t)>r(t);case Zl:return t=>i(t)>=r(t);default:throw new Error(`Unsupported comparison operator ${n}`)}}(t,e);case Ql:case tu:case eu:case nu:case iu:case ru:case su:case ou:case au:case lu:case uu:case hu:case cu:case du:case fu:return function(t,e){const n=t.operator,i=t.args.length,r=new Array(i);for(let s=0;s<i;++s)r[s]=Gu(t.args[s],e);switch(n){case Ql:return t=>{let e=1;for(let n=0;n<i;++n)e*=r[n](t);return e};case tu:return t=>r[0](t)/r[1](t);case eu:return t=>{let e=0;for(let n=0;n<i;++n)e+=r[n](t);return e};case nu:return t=>r[0](t)-r[1](t);case iu:return t=>{const e=r[0](t),n=r[1](t);if(e<n)return n;const i=r[2](t);return e>i?i:e};case ru:return t=>r[0](t)%r[1](t);case su:return t=>Math.pow(r[0](t),r[1](t));case ou:return t=>Math.abs(r[0](t));case au:return t=>Math.floor(r[0](t));case lu:return t=>Math.ceil(r[0](t));case uu:return t=>Math.round(r[0](t));case hu:return t=>Math.sin(r[0](t));case cu:return t=>Math.cos(r[0](t));case du:return 2===i?t=>Math.atan2(r[0](t),r[1](t)):t=>Math.atan(r[0](t));case fu:return t=>Math.sqrt(r[0](t));default:throw new Error(`Unsupported numeric operator ${n}`)}}(t,e);case _u:return function(t,e){const n=t.args.length,i=new Array(n);for(let r=0;r<n;++r)i[r]=Gu(t.args[r],e);return t=>{for(let e=0;e<n-1;e+=2){if(i[e](t))return i[e+1](t)}return i[n-1](t)}}(t,e);case gu:return function(t,e){const n=t.args.length,i=new Array(n);for(let r=0;r<n;++r)i[r]=Gu(t.args[r],e);return t=>{const e=i[0](t);for(let r=1;r<n;r+=2)if(e===i[r](t))return i[r+1](t);return i[n-1](t)}}(t,e);case mu:return function(t,e){const n=t.args.length,i=new Array(n);for(let r=0;r<n;++r)i[r]=Gu(t.args[r],e);return t=>{const e=i[0](t),r=i[1](t);let s,o;for(let a=2;a<n;a+=2){const n=i[a](t);let l=i[a+1](t);const u=Array.isArray(l);if(u&&(l=Qo(l)),n>=r)return 2===a?l:u?Yu(e,r,s,o,n,l):ju(e,r,s,o,n,l);s=n,o=l}return o}}(t,e);case Iu:return function(t,e){const n=t.operator,i=t.args.length,r=new Array(i);for(let s=0;s<i;++s)r[s]=Gu(t.args[s],e);if(n===Iu)return e=>{const n=r[0](e);return t.args[0].type===El?ra(n):n.toString()};throw new Error(`Unsupported convert operator ${n}`)}(t,e);default:throw new Error(`Unsupported operator ${n}`)}}function ju(t,e,n,i,r,s){const o=r-n;if(0===o)return i;const a=e-n;return i+(1===t?a/o:(Math.pow(t,a)-1)/(Math.pow(t,o)-1))*(s-i)}function Yu(t,e,n,i,r,s){if(0===r-n)return i;const o=ta(i),a=ta(s);let l=a[2]-o[2];l>180?l-=360:l<-180&&(l+=360);return ia(function(t){const e=Bo.rgb(qo.xyz(t));return e[3]=t[3],e}([ju(t,e,n,o[0],r,a[0]),ju(t,e,n,o[1],r,a[1]),o[2]+ju(t,e,n,0,r,l),ju(t,e,n,i[3],r,s[3])]))}function Bu(t){return!0}function Uu(t){const e=Ol(),n=function(t,e){const n=t.length,i=new Array(n);for(let r=0;r<n;++r){const n=t[r],s="filter"in n?zu(n.filter,xl,e):Bu;let o;if(Array.isArray(n.style)){const t=n.style.length;o=new Array(t);for(let i=0;i<t;++i)o[i]=qu(n.style[i],e)}else o=[qu(n.style,e)];i[r]={filter:s,styles:o}}return function(e){const r=[];let s=!1;for(let o=0;o<n;++o){if((0,i[o].filter)(e)&&(!t[o].else||!s)){s=!0;for(const t of i[o].styles){const n=t(e);n&&r.push(n)}}}return r}}(t,e),i={variables:{},properties:{},resolution:NaN,featureId:null,geometryType:""};return function(t,r){if(i.properties=t.getPropertiesInternal(),i.resolution=r,e.featureId){const e=t.getId();i.featureId=void 0!==e?e:null}return e.geometryType&&(i.geometryType=Du(t.getGeometry())),n(i)}}function Xu(t){const e=Ol(),n=t.length,i=new Array(n);for(let o=0;o<n;++o)i[o]=qu(t[o],e);const r={variables:{},properties:{},resolution:NaN,featureId:null,geometryType:""},s=new Array(n);return function(t,o){if(r.properties=t.getPropertiesInternal(),r.resolution=o,e.featureId){const e=t.getId();r.featureId=void 0!==e?e:null}let a=0;for(let e=0;e<n;++e){const t=i[e](r);t&&(s[a]=t,a+=1)}return s.length=a,s}}function qu(t,e){const n=Wu(t,"",e),i=Vu(t,"",e),r=function(t,e){const n="text-",i=Ku(t,n+"value",e);if(!i)return null;const r=Wu(t,n,e),s=Wu(t,n+"background-",e),o=Vu(t,n,e),a=Vu(t,n+"background-",e),l=Ku(t,n+"font",e),u=Hu(t,n+"max-angle",e),h=Hu(t,n+"offset-x",e),c=Hu(t,n+"offset-y",e),d=Zu(t,n+"overflow",e),f=Ku(t,n+"placement",e),g=Hu(t,n+"repeat",e),p=eh(t,n+"scale",e),m=Zu(t,n+"rotate-with-view",e),y=Hu(t,n+"rotation",e),_=Ku(t,n+"align",e),v=Ku(t,n+"justify",e),x=Ku(t,n+"baseline",e),w=Ju(t,n+"padding",e),k=sh(t,n+"declutter-mode"),E=new _l({declutterMode:k});return function(t){if(E.setText(i(t)),r&&E.setFill(r(t)),s&&E.setBackgroundFill(s(t)),o&&E.setStroke(o(t)),a&&E.setBackgroundStroke(a(t)),l&&E.setFont(l(t)),u&&E.setMaxAngle(u(t)),h&&E.setOffsetX(h(t)),c&&E.setOffsetY(c(t)),d&&E.setOverflow(d(t)),f){const e=f(t);if("point"!==e&&"line"!==e)throw new Error("Expected point or line for text-placement");E.setPlacement(e)}if(g&&E.setRepeat(g(t)),p&&E.setScale(p(t)),m&&E.setRotateWithView(m(t)),y&&E.setRotation(y(t)),_){const e=_(t);if("left"!==e&&"center"!==e&&"right"!==e&&"end"!==e&&"start"!==e)throw new Error("Expected left, right, center, start, or end for text-align");E.setTextAlign(e)}if(v){const e=v(t);if("left"!==e&&"right"!==e&&"center"!==e)throw new Error("Expected left, right, or center for text-justify");E.setJustify(e)}if(x){const e=x(t);if("bottom"!==e&&"top"!==e&&"middle"!==e&&"alphabetic"!==e&&"hanging"!==e)throw new Error("Expected bottom, top, middle, alphabetic, or hanging for text-baseline");E.setTextBaseline(e)}return w&&E.setPadding(w(t)),E}}(t,e),s=function(t,e){if("icon-src"in t)return function(t,e){const n="icon-",i=n+"src",r=ah(t[i],i),s=Qu(t,n+"anchor",e),o=eh(t,n+"scale",e),a=Hu(t,n+"opacity",e),l=Qu(t,n+"displacement",e),u=Hu(t,n+"rotation",e),h=Zu(t,n+"rotate-with-view",e),c=ih(t,n+"anchor-origin"),d=rh(t,n+"anchor-x-units"),f=rh(t,n+"anchor-y-units"),g=function(t,e){const n=t[e];if(void 0===n)return;return uh(n,e)}(t,n+"color"),p=function(t,e){const n=t[e];if(void 0===n)return;if("string"!==typeof n)throw new Error(`Expected a string for ${e}`);return n}(t,n+"cross-origin"),m=function(t,e){const n=t[e];if(void 0===n)return;return oh(n,e)}(t,n+"offset"),y=ih(t,n+"offset-origin"),_=nh(t,n+"width"),v=nh(t,n+"height"),x=function(t,e){const n=t[e];if(void 0===n)return;if("number"===typeof n)return Do(n);if(!Array.isArray(n))throw new Error(`Expected a number or size array for ${e}`);if(2!==n.length||"number"!==typeof n[0]||"number"!==typeof n[1])throw new Error(`Expected a number or size array for ${e}`);return n}(t,n+"size"),w=sh(t,n+"declutter-mode"),k=new ml({src:r,anchorOrigin:c,anchorXUnits:d,anchorYUnits:f,color:g,crossOrigin:p,offset:m,offsetOrigin:y,height:v,width:_,size:x,declutterMode:w});return function(t){return a&&k.setOpacity(a(t)),l&&k.setDisplacement(l(t)),u&&k.setRotation(u(t)),h&&k.setRotateWithView(h(t)),o&&k.setScale(o(t)),s&&k.setAnchor(s(t)),k}}(t,e);if("shape-points"in t)return function(t,e){const n="shape-",i=n+"points",r=n+"radius",s=lh(t[i],i),o=lh(t[r],r),a=Wu(t,n,e),l=Vu(t,n,e),u=eh(t,n+"scale",e),h=Qu(t,n+"displacement",e),c=Hu(t,n+"rotation",e),d=Zu(t,n+"rotate-with-view",e),f=nh(t,n+"radius2"),g=nh(t,n+"angle"),p=sh(t,n+"declutter-mode"),m=new nl({points:s,radius:o,radius2:f,angle:g,declutterMode:p});return function(t){return a&&m.setFill(a(t)),l&&m.setStroke(l(t)),h&&m.setDisplacement(h(t)),c&&m.setRotation(c(t)),d&&m.setRotateWithView(d(t)),u&&m.setScale(u(t)),m}}(t,e);if("circle-radius"in t)return function(t,e){const n="circle-",i=Wu(t,n,e),r=Vu(t,n,e),s=Hu(t,n+"radius",e),o=eh(t,n+"scale",e),a=Qu(t,n+"displacement",e),l=Hu(t,n+"rotation",e),u=Zu(t,n+"rotate-with-view",e),h=sh(t,n+"declutter-mode"),c=new rl({radius:5,declutterMode:h});return function(t){return s&&c.setRadius(s(t)),i&&c.setFill(i(t)),r&&c.setStroke(r(t)),a&&c.setDisplacement(a(t)),l&&c.setRotation(l(t)),u&&c.setRotateWithView(u(t)),o&&c.setScale(o(t)),c}}(t,e);return null}(t,e),o=Hu(t,"z-index",e);if(!n&&!i&&!r&&!s&&!pn(t))throw new Error("No fill, stroke, point, or text symbolizer properties in style: "+JSON.stringify(t));const a=new fl;return function(t){let e=!0;if(n){const i=n(t);i&&(e=!1),a.setFill(i)}if(i){const n=i(t);n&&(e=!1),a.setStroke(n)}if(r){const n=r(t);n&&(e=!1),a.setText(n)}if(s){const n=s(t);n&&(e=!1),a.setImage(n)}return o&&a.setZIndex(o(t)),e?null:a}}function Wu(t,e,n){let i;if(e+"fill-pattern-src"in t)i=function(t,e,n){const i=Ku(t,e+"pattern-src",n),r=th(t,e+"pattern-offset",n),s=th(t,e+"pattern-size",n),o=$u(t,e+"color",n);return function(t){return{src:i(t),offset:r&&r(t),size:s&&s(t),color:o&&o(t)}}}(t,e+"fill-",n);else{if("none"===t[e+"fill-color"])return t=>null;i=$u(t,e+"fill-color",n)}if(!i)return null;const r=new ol;return function(t){const e=i(t);return e===Zo?null:(r.setColor(e),r)}}function Vu(t,e,n){const i=Hu(t,e+"stroke-width",n),r=$u(t,e+"stroke-color",n);if(!i&&!r)return null;const s=Ku(t,e+"stroke-line-cap",n),o=Ku(t,e+"stroke-line-join",n),a=Ju(t,e+"stroke-line-dash",n),l=Hu(t,e+"stroke-line-dash-offset",n),u=Hu(t,e+"stroke-miter-limit",n),h=new ll;return function(t){if(r){const e=r(t);if(e===Zo)return null;h.setColor(e)}if(i&&h.setWidth(i(t)),s){const e=s(t);if("butt"!==e&&"round"!==e&&"square"!==e)throw new Error("Expected butt, round, or square line cap");h.setLineCap(e)}if(o){const e=o(t);if("bevel"!==e&&"round"!==e&&"miter"!==e)throw new Error("Expected bevel, round, or miter line join");h.setLineJoin(e)}return a&&h.setLineDash(a(t)),l&&h.setLineDashOffset(l(t)),u&&h.setMiterLimit(u(t)),h}}function Hu(t,e,n){if(!(e in t))return;const i=zu(t[e],wl,n);return function(t){return lh(i(t),e)}}function Ku(t,e,n){if(!(e in t))return null;const i=zu(t[e],kl,n);return function(t){return ah(i(t),e)}}function Zu(t,e,n){if(!(e in t))return null;const i=zu(t[e],xl,n);return function(t){const n=i(t);if("boolean"!==typeof n)throw new Error(`Expected a boolean for ${e}`);return n}}function $u(t,e,n){if(!(e in t))return null;const i=zu(t[e],El,n);return function(t){return uh(i(t),e)}}function Ju(t,e,n){if(!(e in t))return null;const i=zu(t[e],Sl,n);return function(t){return oh(i(t),e)}}function Qu(t,e,n){if(!(e in t))return null;const i=zu(t[e],Sl,n);return function(t){const n=oh(i(t),e);if(2!==n.length)throw new Error(`Expected two numbers for ${e}`);return n}}function th(t,e,n){if(!(e in t))return null;const i=zu(t[e],Sl,n);return function(t){return hh(i(t),e)}}function eh(t,e,n){if(!(e in t))return null;const i=zu(t[e],Sl|wl,n);return function(t){return function(t,e){if("number"===typeof t)return t;return hh(t,e)}(i(t),e)}}function nh(t,e){const n=t[e];if(void 0!==n){if("number"!==typeof n)throw new Error(`Expected a number for ${e}`);return n}}function ih(t,e){const n=t[e];if(void 0!==n){if("bottom-left"!==n&&"bottom-right"!==n&&"top-left"!==n&&"top-right"!==n)throw new Error(`Expected bottom-left, bottom-right, top-left, or top-right for ${e}`);return n}}function rh(t,e){const n=t[e];if(void 0!==n){if("pixels"!==n&&"fraction"!==n)throw new Error(`Expected pixels or fraction for ${e}`);return n}}function sh(t,e){const n=t[e];if(void 0!==n){if("string"!==typeof n)throw new Error(`Expected a string for ${e}`);if("declutter"!==n&&"obstacle"!==n&&"none"!==n)throw new Error(`Expected declutter, obstacle, or none for ${e}`);return n}}function oh(t,e){if(!Array.isArray(t))throw new Error(`Expected an array for ${e}`);const n=t.length;for(let i=0;i<n;++i)if("number"!==typeof t[i])throw new Error(`Expected an array of numbers for ${e}`);return t}function ah(t,e){if("string"!==typeof t)throw new Error(`Expected a string for ${e}`);return t}function lh(t,e){if("number"!==typeof t)throw new Error(`Expected a number for ${e}`);return t}function uh(t,e){if("string"===typeof t)return t;const n=oh(t,e),i=n.length;if(i<3||i>4)throw new Error(`Expected a color with 3 or 4 values for ${e}`);return n}function hh(t,e){const n=oh(t,e);if(2!==n.length)throw new Error(`Expected an array of two numbers for ${e}`);return n}const ch="renderOrder";const dh=class extends go{constructor(t){t=t||{};const e=Object.assign({},t);delete e.style,delete e.renderBuffer,delete e.updateWhileAnimating,delete e.updateWhileInteracting,super(e),this.declutter_=t.declutter?String(t.declutter):void 0,this.renderBuffer_=void 0!==t.renderBuffer?t.renderBuffer:100,this.style_=null,this.styleFunction_=void 0,this.setStyle(t.style),this.updateWhileAnimating_=void 0!==t.updateWhileAnimating&&t.updateWhileAnimating,this.updateWhileInteracting_=void 0!==t.updateWhileInteracting&&t.updateWhileInteracting}getDeclutter(){return this.declutter_}getFeatures(t){return super.getFeatures(t)}getRenderBuffer(){return this.renderBuffer_}getRenderOrder(){return this.get(ch)}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}getUpdateWhileAnimating(){return this.updateWhileAnimating_}getUpdateWhileInteracting(){return this.updateWhileInteracting_}renderDeclutter(t,e){const n=this.getDeclutter();n in t.declutter===!1&&(t.declutter[n]=new _o(9)),this.getRenderer().renderDeclutter(t,e)}setRenderOrder(t){this.set(ch,t)}setStyle(t){this.style_=void 0===t?cl:t;const e=function(t){if(void 0===t)return cl;if(!t)return null;if("function"===typeof t)return t;if(t instanceof fl)return t;if(!Array.isArray(t))return Xu([t]);if(0===t.length)return[];const e=t.length,n=t[0];if(n instanceof fl){const n=new Array(e);for(let i=0;i<e;++i){const e=t[i];if(!(e instanceof fl))throw new Error("Expected a list of style instances");n[i]=e}return n}if("style"in n){const n=new Array(e);for(let i=0;i<e;++i){const e=t[i];if(!("style"in e))throw new Error("Expected a list of rules with a style property");n[i]=e}return Uu(n)}const i=t;return Xu(i)}(t);this.styleFunction_=null===t?void 0:function(t){let e;if("function"===typeof t)e=t;else{let n;Array.isArray(t)?n=t:(Jn("function"===typeof t.getZIndex,"Expected an `Style` or an array of `Style`"),n=[t]),e=function(){return n}}return e}(e),this.changed()}};function fh(t,e){Sa.expire()}const gh=class extends nn{constructor(t){super(),this.map_=t}dispatchRenderEvent(t,e){Mn()}calculateMatrices2D(t){const e=t.viewState,n=t.coordinateToPixelTransform,i=t.pixelToCoordinateTransform;cs(n,t.size[0]/2,t.size[1]/2,1/e.resolution,-1/e.resolution,-e.rotation,-e.center[0],-e.center[1]),ds(i,n)}forEachFeatureAtCoordinate(t,e,n,i,r,s,o,a){let l;const u=e.viewState;function h(t,e,n,i){return r.call(s,e,t?n:null,i)}const c=u.projection,d=br(t.slice(),c),f=[[0,0]];if(c.canWrapX()&&i){const t=yr(c.getExtent());f.push([-t,0],[t,0])}const g=e.layerStatesArray,p=g.length,m=[],y=[];for(let v=0;v<f.length;v++)for(let i=p-1;i>=0;--i){const r=g[i],s=r.layer;if(s.hasRenderer()&&fo(r,u)&&o.call(a,s)){const i=s.getRenderer(),o=s.getSource();if(i&&o){const s=o.getWrapX()?d:t,a=h.bind(null,r.managed);y[0]=s[0]+f[v][0],y[1]=s[1]+f[v][1],l=i.forEachFeatureAtCoordinate(y,e,n,a,m)}if(l)return l}}if(0===m.length)return;const _=1/m.length;return m.forEach(((t,e)=>t.distanceSq+=e*_)),m.sort(((t,e)=>t.distanceSq-e.distanceSq)),m.some((t=>l=t.callback(t.feature,t.layer,t.geometry))),l}hasFeatureAtCoordinate(t,e,n,i,r,s){return void 0!==this.forEachFeatureAtCoordinate(t,e,n,i,un,this,r,s)}getMap(){return this.map_}renderFrame(t){Mn()}scheduleExpireIconCache(t){Sa.canExpireCache()&&t.postRenderFunctions.push(fh)}};const ph=class extends tn{constructor(t,e,n,i){super(t),this.inversePixelTransform=e,this.frameState=n,this.context=i}};const mh=class extends gh{constructor(t){super(t),this.fontChangeListenerKey_=In(qa,en,t.redrawText,t),this.element_=document.createElement("div");const e=this.element_.style;e.position="absolute",e.width="100%",e.height="100%",e.zIndex="0",this.element_.className=Na+" ol-layers";const n=t.getViewport();n.insertBefore(this.element_,n.firstChild||null),this.children_=[],this.renderedVisible_=!0}dispatchRenderEvent(t,e){const n=this.getMap();if(n.hasListener(t)){const i=new ph(t,void 0,e);n.dispatchEvent(i)}}disposeInternal(){Rn(this.fontChangeListenerKey_),this.element_.remove(),super.disposeInternal()}renderFrame(t){if(!t)return void(this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1));this.calculateMatrices2D(t),this.dispatchRenderEvent(ci,t);const e=t.layerStatesArray.sort(((t,e)=>t.zIndex-e.zIndex));e.some((t=>t.layer instanceof dh&&t.layer.getDeclutter()))&&(t.declutter={});const n=t.viewState;this.children_.length=0;const i=[];let r=null;for(let s=0,o=e.length;s<o;++s){const o=e[s];t.layerIndex=s;const a=o.layer,l=a.getSourceState();if(!fo(o,n)||"ready"!=l&&"undefined"!=l){a.unrender();continue}const u=a.render(t,r);u&&(u!==r&&(this.children_.push(u),r=u),i.push(o))}this.declutter(t,i),function(t,e){const n=t.childNodes;for(let i=0;;++i){const r=n[i],s=e[i];if(!r&&!s)break;r!==s&&(r?s?t.insertBefore(s,r):(t.removeChild(r),--i):t.appendChild(s))}}(this.element_,this.children_),this.dispatchRenderEvent(di,t),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(t)}declutter(t,e){if(t.declutter){for(let n=e.length-1;n>=0;--n){const i=e[n],r=i.layer;r.getDeclutter()&&r.renderDeclutter(t,i)}e.forEach((e=>e.layer.renderDeferred(t)))}}};class yh extends tn{constructor(t,e){super(t),this.layer=e}}const _h="layers";class vh extends li{constructor(t){t=t||{};const e=Object.assign({},t);delete e.layers;let n=t.layers;super(e),this.on,this.once,this.un,this.layersListenerKeys_=[],this.listenerKeys_={},this.addChangeListener(_h,this.handleLayersChanged_),n?Array.isArray(n)?n=new Yn(n.slice(),{unique:!0}):Jn("function"===typeof n.getArray,"Expected `layers` to be an array or a `Collection`"):n=new Yn(void 0,{unique:!0}),this.setLayers(n)}handleLayerChange_(){this.changed()}handleLayersChanged_(){this.layersListenerKeys_.forEach(Rn),this.layersListenerKeys_.length=0;const t=this.getLayers();this.layersListenerKeys_.push(In(t,Dn,this.handleLayersAdd_,this),In(t,zn,this.handleLayersRemove_,this));for(const n in this.listenerKeys_)this.listenerKeys_[n].forEach(Rn);gn(this.listenerKeys_);const e=t.getArray();for(let n=0,i=e.length;n<i;n++){const t=e[n];this.registerLayerListeners_(t),this.dispatchEvent(new yh("addlayer",t))}this.changed()}registerLayerListeners_(t){const e=[In(t,en,this.handleLayerChange_,this),In(t,yn,this.handleLayerChange_,this)];t instanceof vh&&e.push(In(t,"addlayer",this.handleLayerGroupAdd_,this),In(t,"removelayer",this.handleLayerGroupRemove_,this)),this.listenerKeys_[On(t)]=e}handleLayerGroupAdd_(t){this.dispatchEvent(new yh("addlayer",t.layer))}handleLayerGroupRemove_(t){this.dispatchEvent(new yh("removelayer",t.layer))}handleLayersAdd_(t){const e=t.element;this.registerLayerListeners_(e),this.dispatchEvent(new yh("addlayer",e)),this.changed()}handleLayersRemove_(t){const e=t.element,n=On(e);this.listenerKeys_[n].forEach(Rn),delete this.listenerKeys_[n],this.dispatchEvent(new yh("removelayer",e)),this.changed()}getLayers(){return this.get(_h)}setLayers(t){const e=this.getLayers();if(e){const t=e.getArray();for(let e=0,n=t.length;e<n;++e)this.dispatchEvent(new yh("removelayer",t[e]))}this.set(_h,t)}getLayersArray(t){return t=void 0!==t?t:[],this.getLayers().forEach((function(e){e.getLayersArray(t)})),t}getLayerStatesArray(t){const e=void 0!==t?t:[],n=e.length;this.getLayers().forEach((function(t){t.getLayerStatesArray(e)}));const i=this.getLayerState();let r=i.zIndex;t||void 0!==i.zIndex||(r=0);for(let s=n,o=e.length;s<o;s++){const t=e[s];t.opacity*=i.opacity,t.visible=t.visible&&i.visible,t.maxResolution=Math.min(t.maxResolution,i.maxResolution),t.minResolution=Math.max(t.minResolution,i.minResolution),t.minZoom=Math.max(t.minZoom,i.minZoom),t.maxZoom=Math.min(t.maxZoom,i.maxZoom),void 0!==i.extent&&(void 0!==t.extent?t.extent=gr(t.extent,i.extent):t.extent=i.extent),void 0===t.zIndex&&(t.zIndex=r)}return e}getSourceState(){return"ready"}}const xh=vh;const wh=class extends tn{constructor(t,e,n){super(t),this.map=e,this.frameState=void 0!==n?n:null}};const kh=class extends wh{constructor(t,e,n,i,r,s){super(t,e,r),this.originalEvent=n,this.pixel_=null,this.coordinate_=null,this.dragging=void 0!==i&&i,this.activePointers=s}get pixel(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_}set pixel(t){this.pixel_=t}get coordinate(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_}set coordinate(t){this.coordinate_=t}preventDefault(){super.preventDefault(),"preventDefault"in this.originalEvent&&this.originalEvent.preventDefault()}stopPropagation(){super.stopPropagation(),"stopPropagation"in this.originalEvent&&this.originalEvent.stopPropagation()}},Eh={SINGLECLICK:"singleclick",CLICK:xn,DBLCLICK:wn,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"},Sh="pointermove",bh="pointerdown";const Ch=class extends mn{constructor(t,e){super(t),this.map_=t,this.clickTimeoutId_,this.emulateClicks_=!1,this.dragging_=!1,this.dragListenerKeys_=[],this.moveTolerance_=void 0===e?1:e,this.down_=null;const n=this.map_.getViewport();this.activePointers_=[],this.trackedTouches_={},this.element_=n,this.pointerdownListenerKey_=In(n,bh,this.handlePointerDown_,this),this.originalPointerMoveEvent_,this.relayedListenerKey_=In(n,Sh,this.relayMoveEvent_,this),this.boundHandleTouchMove_=this.handleTouchMove_.bind(this),this.element_.addEventListener(bn,this.boundHandleTouchMove_,!!da&&{passive:!1})}emulateClick_(t){let e=new kh(Eh.CLICK,this.map_,t);this.dispatchEvent(e),void 0!==this.clickTimeoutId_?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,e=new kh(Eh.DBLCLICK,this.map_,t),this.dispatchEvent(e)):this.clickTimeoutId_=setTimeout((()=>{this.clickTimeoutId_=void 0;const e=new kh(Eh.SINGLECLICK,this.map_,t);this.dispatchEvent(e)}),250)}updateActivePointers_(t){const e=t,n=e.pointerId;if(e.type==Eh.POINTERUP||e.type==Eh.POINTERCANCEL){delete this.trackedTouches_[n];for(const t in this.trackedTouches_)if(this.trackedTouches_[t].target!==e.target){delete this.trackedTouches_[t];break}}else e.type!=Eh.POINTERDOWN&&e.type!=Eh.POINTERMOVE||(this.trackedTouches_[n]=e);this.activePointers_=Object.values(this.trackedTouches_)}handlePointerUp_(t){this.updateActivePointers_(t);const e=new kh(Eh.POINTERUP,this.map_,t,void 0,void 0,this.activePointers_);this.dispatchEvent(e),this.emulateClicks_&&!e.defaultPrevented&&!this.dragging_&&this.isMouseActionButton_(t)&&this.emulateClick_(this.down_),0===this.activePointers_.length&&(this.dragListenerKeys_.forEach(Rn),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)}isMouseActionButton_(t){return 0===t.button}handlePointerDown_(t){this.emulateClicks_=0===this.activePointers_.length,this.updateActivePointers_(t);const e=new kh(Eh.POINTERDOWN,this.map_,t,void 0,void 0,this.activePointers_);if(this.dispatchEvent(e),this.down_=new PointerEvent(t.type,t),Object.defineProperty(this.down_,"target",{writable:!1,value:t.target}),0===this.dragListenerKeys_.length){const t=this.map_.getOwnerDocument();this.dragListenerKeys_.push(In(t,Eh.POINTERMOVE,this.handlePointerMove_,this),In(t,Eh.POINTERUP,this.handlePointerUp_,this),In(this.element_,Eh.POINTERCANCEL,this.handlePointerUp_,this)),this.element_.getRootNode&&this.element_.getRootNode()!==t&&this.dragListenerKeys_.push(In(this.element_.getRootNode(),Eh.POINTERUP,this.handlePointerUp_,this))}}handlePointerMove_(t){if(this.isMoving_(t)){this.updateActivePointers_(t),this.dragging_=!0;const e=new kh(Eh.POINTERDRAG,this.map_,t,this.dragging_,void 0,this.activePointers_);this.dispatchEvent(e)}}relayMoveEvent_(t){this.originalPointerMoveEvent_=t;const e=!(!this.down_||!this.isMoving_(t));this.dispatchEvent(new kh(Eh.POINTERMOVE,this.map_,t,e))}handleTouchMove_(t){const e=this.originalPointerMoveEvent_;e&&!e.defaultPrevented||"boolean"===typeof t.cancelable&&!0!==t.cancelable||t.preventDefault()}isMoving_(t){return this.dragging_||Math.abs(t.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(t.clientY-this.down_.clientY)>this.moveTolerance_}disposeInternal(){this.relayedListenerKey_&&(Rn(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener(bn,this.boundHandleTouchMove_),this.pointerdownListenerKey_&&(Rn(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(Rn),this.dragListenerKeys_.length=0,this.element_=null,super.disposeInternal()}},Ih="postrender",Th="movestart",Rh="moveend",Nh="loadstart",Lh="loadend",Mh="layergroup",Ph="size",Oh="target",Ah="view",Fh=1/0;const Dh=class{constructor(t,e){this.priorityFunction_=t,this.keyFunction_=e,this.elements_=[],this.priorities_=[],this.queuedElements_={}}clear(){this.elements_.length=0,this.priorities_.length=0,gn(this.queuedElements_)}dequeue(){const t=this.elements_,e=this.priorities_,n=t[0];1==t.length?(t.length=0,e.length=0):(t[0]=t.pop(),e[0]=e.pop(),this.siftUp_(0));const i=this.keyFunction_(n);return delete this.queuedElements_[i],n}enqueue(t){Jn(!(this.keyFunction_(t)in this.queuedElements_),"Tried to enqueue an `element` that was already added to the queue");const e=this.priorityFunction_(t);return e!=Fh&&(this.elements_.push(t),this.priorities_.push(e),this.queuedElements_[this.keyFunction_(t)]=!0,this.siftDown_(0,this.elements_.length-1),!0)}getCount(){return this.elements_.length}getLeftChildIndex_(t){return 2*t+1}getRightChildIndex_(t){return 2*t+2}getParentIndex_(t){return t-1>>1}heapify_(){let t;for(t=(this.elements_.length>>1)-1;t>=0;t--)this.siftUp_(t)}isEmpty(){return 0===this.elements_.length}isKeyQueued(t){return t in this.queuedElements_}isQueued(t){return this.isKeyQueued(this.keyFunction_(t))}siftUp_(t){const e=this.elements_,n=this.priorities_,i=e.length,r=e[t],s=n[t],o=t;for(;t<i>>1;){const r=this.getLeftChildIndex_(t),s=this.getRightChildIndex_(t),o=s<i&&n[s]<n[r]?s:r;e[t]=e[o],n[t]=n[o],t=o}e[t]=r,n[t]=s,this.siftDown_(o,t)}siftDown_(t,e){const n=this.elements_,i=this.priorities_,r=n[e],s=i[e];for(;e>t;){const t=this.getParentIndex_(e);if(!(i[t]>s))break;n[e]=n[t],i[e]=i[t],e=t}n[e]=r,i[e]=s}reprioritize(){const t=this.priorityFunction_,e=this.elements_,n=this.priorities_;let i=0;const r=e.length;let s,o,a;for(o=0;o<r;++o)s=e[o],a=t(s),a==Fh?delete this.queuedElements_[this.keyFunction_(s)]:(n[i]=a,e[i++]=s);e.length=i,n.length=i,this.heapify_()}},zh=0,Gh=1,jh=2,Yh=3,Bh=4;const Uh=class extends Dh{constructor(t,e){super((function(e){return t.apply(null,e)}),(function(t){return t[0].getKey()})),this.boundHandleTileChange_=this.handleTileChange.bind(this),this.tileChangeCallback_=e,this.tilesLoading_=0,this.tilesLoadingKeys_={}}enqueue(t){const e=super.enqueue(t);if(e){t[0].addEventListener(yn,this.boundHandleTileChange_)}return e}getTilesLoading(){return this.tilesLoading_}handleTileChange(t){const e=t.target,n=e.getState();if(n===jh||n===Yh||n===Bh){n!==Yh&&e.removeEventListener(yn,this.boundHandleTileChange_);const t=e.getKey();t in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[t],--this.tilesLoading_),this.tileChangeCallback_()}}loadMoreTiles(t,e){let n=0;for(;this.tilesLoading_<t&&n<e&&this.getCount()>0;){const t=this.dequeue()[0],e=t.getKey();t.getState()!==zh||e in this.tilesLoadingKeys_||(this.tilesLoadingKeys_[e]=!0,++this.tilesLoading_,++n,t.load())}}};const Xh=class extends Fn{constructor(t){super();const e=t.element;!e||t.target||e.style.pointerEvents||(e.style.pointerEvents="auto"),this.element=e||null,this.target_=null,this.map_=null,this.listenerKeys=[],t.render&&(this.render=t.render),t.target&&this.setTarget(t.target)}disposeInternal(){this.element?.remove(),super.disposeInternal()}getMap(){return this.map_}setMap(t){this.map_&&this.element?.remove();for(let e=0,n=this.listenerKeys.length;e<n;++e)Rn(this.listenerKeys[e]);if(this.listenerKeys.length=0,this.map_=t,t){(this.target_??t.getOverlayContainerStopEvent()).appendChild(this.element),this.render!==cn&&this.listenerKeys.push(In(t,Ih,this.render,this)),t.render()}}render(t){}setTarget(t){this.target_="string"===typeof t?document.getElementById(t):t}};const qh=class extends Xh{constructor(t){t=t||{},super({element:document.createElement("div"),render:t.render,target:t.target}),this.ulElement_=document.createElement("ul"),this.collapsed_=void 0===t.collapsed||t.collapsed,this.userCollapsed_=this.collapsed_,this.overrideCollapsible_=void 0!==t.collapsible,this.collapsible_=void 0===t.collapsible||t.collapsible,this.collapsible_||(this.collapsed_=!1),this.attributions_=t.attributions;const e=void 0!==t.className?t.className:"ol-attribution",n=void 0!==t.tipLabel?t.tipLabel:"Attributions",i=void 0!==t.expandClassName?t.expandClassName:e+"-expand",r=void 0!==t.collapseLabel?t.collapseLabel:"\u203a",s=void 0!==t.collapseClassName?t.collapseClassName:e+"-collapse";"string"===typeof r?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=r,this.collapseLabel_.className=s):this.collapseLabel_=r;const o=void 0!==t.label?t.label:"i";"string"===typeof o?(this.label_=document.createElement("span"),this.label_.textContent=o,this.label_.className=i):this.label_=o;const a=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_;this.toggleButton_=document.createElement("button"),this.toggleButton_.setAttribute("type","button"),this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_)),this.toggleButton_.title=n,this.toggleButton_.appendChild(a),this.toggleButton_.addEventListener(xn,this.handleClick_.bind(this),!1);const l=e+" "+Na+" "+La+(this.collapsed_&&this.collapsible_?" "+Ma:"")+(this.collapsible_?"":" ol-uncollapsible"),u=this.element;u.className=l,u.appendChild(this.toggleButton_),u.appendChild(this.ulElement_),this.renderedAttributions_=[],this.renderedVisible_=!0}collectSourceAttributions_(t){const e=this.getMap().getAllLayers(),n=new Set(e.flatMap((e=>e.getAttributions(t))));if(void 0!==this.attributions_&&(Array.isArray(this.attributions_)?this.attributions_.forEach((t=>n.add(t))):n.add(this.attributions_)),!this.overrideCollapsible_){const t=!e.some((t=>!1===t.getSource()?.getAttributionsCollapsible()));this.setCollapsible(t)}return Array.from(n)}async updateElement_(t){if(!t)return void(this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1));const e=await Promise.all(this.collectSourceAttributions_(t).map((t=>fn((()=>t))))),n=e.length>0;if(this.renderedVisible_!=n&&(this.element.style.display=n?"":"none",this.renderedVisible_=n),!ln(e,this.renderedAttributions_)){xa(this.ulElement_);for(let t=0,n=e.length;t<n;++t){const n=document.createElement("li");n.innerHTML=e[t],this.ulElement_.appendChild(n)}this.renderedAttributions_=e}}handleClick_(t){t.preventDefault(),this.handleToggle_(),this.userCollapsed_=this.collapsed_}handleToggle_(){this.element.classList.toggle(Ma),this.collapsed_?va(this.collapseLabel_,this.label_):va(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_,this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_))}getCollapsible(){return this.collapsible_}setCollapsible(t){this.collapsible_!==t&&(this.collapsible_=t,this.element.classList.toggle("ol-uncollapsible"),this.userCollapsed_&&this.handleToggle_())}setCollapsed(t){this.userCollapsed_=t,this.collapsible_&&this.collapsed_!==t&&this.handleToggle_()}getCollapsed(){return this.collapsed_}render(t){this.updateElement_(t.frameState)}};const Wh=class extends Xh{constructor(t){t=t||{},super({element:document.createElement("div"),render:t.render,target:t.target});const e=void 0!==t.className?t.className:"ol-rotate",n=void 0!==t.label?t.label:"\u21e7",i=void 0!==t.compassClassName?t.compassClassName:"ol-compass";this.label_=null,"string"===typeof n?(this.label_=document.createElement("span"),this.label_.className=i,this.label_.textContent=n):(this.label_=n,this.label_.classList.add(i));const r=t.tipLabel?t.tipLabel:"Reset rotation",s=document.createElement("button");s.className=e+"-reset",s.setAttribute("type","button"),s.title=r,s.appendChild(this.label_),s.addEventListener(xn,this.handleClick_.bind(this),!1);const o=e+" "+Na+" "+La,a=this.element;a.className=o,a.appendChild(s),this.callResetNorth_=t.resetNorth?t.resetNorth:void 0,this.duration_=void 0!==t.duration?t.duration:250,this.autoHide_=void 0===t.autoHide||t.autoHide,this.rotation_=void 0,this.autoHide_&&this.element.classList.add(Ra)}handleClick_(t){t.preventDefault(),void 0!==this.callResetNorth_?this.callResetNorth_():this.resetNorth_()}resetNorth_(){const t=this.getMap().getView();if(!t)return;const e=t.getRotation();void 0!==e&&(this.duration_>0&&e%(2*Math.PI)!==0?t.animate({rotation:0,duration:this.duration_,easing:as}):t.setRotation(0))}render(t){const e=t.frameState;if(!e)return;const n=e.viewState.rotation;if(n!=this.rotation_){const t="rotate("+n+"rad)";if(this.autoHide_){const t=this.element.classList.contains(Ra);t||0!==n?t&&0!==n&&this.element.classList.remove(Ra):this.element.classList.add(Ra)}this.label_.style.transform=t}this.rotation_=n}};const Vh=class extends Xh{constructor(t){t=t||{},super({element:document.createElement("div"),target:t.target});const e=void 0!==t.className?t.className:"ol-zoom",n=void 0!==t.delta?t.delta:1,i=void 0!==t.zoomInClassName?t.zoomInClassName:e+"-in",r=void 0!==t.zoomOutClassName?t.zoomOutClassName:e+"-out",s=void 0!==t.zoomInLabel?t.zoomInLabel:"+",o=void 0!==t.zoomOutLabel?t.zoomOutLabel:"\u2013",a=void 0!==t.zoomInTipLabel?t.zoomInTipLabel:"Zoom in",l=void 0!==t.zoomOutTipLabel?t.zoomOutTipLabel:"Zoom out",u=document.createElement("button");u.className=i,u.setAttribute("type","button"),u.title=a,u.appendChild("string"===typeof s?document.createTextNode(s):s),u.addEventListener(xn,this.handleClick_.bind(this,n),!1);const h=document.createElement("button");h.className=r,h.setAttribute("type","button"),h.title=l,h.appendChild("string"===typeof o?document.createTextNode(o):o),h.addEventListener(xn,this.handleClick_.bind(this,-n),!1);const c=e+" "+Na+" "+La,d=this.element;d.className=c,d.appendChild(u),d.appendChild(h),this.duration_=void 0!==t.duration?t.duration:250}handleClick_(t,e){e.preventDefault(),this.zoomByDelta_(t)}zoomByDelta_(t){const e=this.getMap().getView();if(!e)return;const n=e.getZoom();if(void 0!==n){const i=e.getConstrainedZoom(n+t);this.duration_>0?(e.getAnimating()&&e.cancelAnimations(),e.animate({zoom:i,duration:this.duration_,easing:as})):e.setZoom(i)}}};const Hh="active";function Kh(t,e,n,i){const r=t.getZoom();if(void 0===r)return;const s=t.getConstrainedZoom(r+e),o=t.getResolutionForZoom(s);t.getAnimating()&&t.cancelAnimations(),t.animate({resolution:o,anchor:n,duration:void 0!==i?i:250,easing:as})}const Zh=class extends Fn{constructor(t){super(),this.on,this.once,this.un,t&&t.handleEvent&&(this.handleEvent=t.handleEvent),this.map_=null,this.setActive(!0)}getActive(){return this.get(Hh)}getMap(){return this.map_}handleEvent(t){return!0}setActive(t){this.set(Hh,t)}setMap(t){this.map_=t}};const $h=class extends Zh{constructor(t){super(),t=t||{},this.delta_=t.delta?t.delta:1,this.duration_=void 0!==t.duration?t.duration:250}handleEvent(t){let e=!1;if(t.type==Eh.DBLCLICK){const n=t.originalEvent,i=t.map,r=t.coordinate,s=n.shiftKey?-this.delta_:this.delta_;Kh(i.getView(),s,r,this.duration_),n.preventDefault(),e=!0}return!e}};function Jh(t){const e=t.length;let n=0,i=0;for(let r=0;r<e;r++)n+=t[r].clientX,i+=t[r].clientY;return{clientX:n/e,clientY:i/e}}const Qh=class extends Zh{constructor(t){super(t=t||{}),t.handleDownEvent&&(this.handleDownEvent=t.handleDownEvent),t.handleDragEvent&&(this.handleDragEvent=t.handleDragEvent),t.handleMoveEvent&&(this.handleMoveEvent=t.handleMoveEvent),t.handleUpEvent&&(this.handleUpEvent=t.handleUpEvent),t.stopDown&&(this.stopDown=t.stopDown),this.handlingDownUpSequence=!1,this.targetPointers=[]}getPointerCount(){return this.targetPointers.length}handleDownEvent(t){return!1}handleDragEvent(t){}handleEvent(t){if(!t.originalEvent)return!0;let e=!1;if(this.updateTrackedPointers_(t),this.handlingDownUpSequence){if(t.type==Eh.POINTERDRAG)this.handleDragEvent(t),t.originalEvent.preventDefault();else if(t.type==Eh.POINTERUP){const e=this.handleUpEvent(t);this.handlingDownUpSequence=e&&this.targetPointers.length>0}}else if(t.type==Eh.POINTERDOWN){const n=this.handleDownEvent(t);this.handlingDownUpSequence=n,e=this.stopDown(n)}else t.type==Eh.POINTERMOVE&&this.handleMoveEvent(t);return!e}handleMoveEvent(t){}handleUpEvent(t){return!1}stopDown(t){return t}updateTrackedPointers_(t){t.activePointers&&(this.targetPointers=t.activePointers)}};function tc(t){const e=arguments;return function(t){let n=!0;for(let i=0,r=e.length;i<r&&(n=n&&e[i](t),n);++i);return n}}const ec=function(t){const e=t.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},nc=function(t){const e=t.map.getTargetElement(),n=e.getRootNode();return!(n instanceof ShadowRoot?n.host:e).hasAttribute("tabindex")||function(t){const e=t.map.getTargetElement(),n=e.getRootNode(),i=t.map.getOwnerDocument().activeElement;return n instanceof ShadowRoot?n.host.contains(i):e.contains(i)}(t)},ic=un,rc=function(t){return t.type==Eh.CLICK},sc=function(t){const e=t.originalEvent;return 0==e.button&&!(aa&&la&&e.ctrlKey)},oc=hn,ac=function(t){return t.type==Eh.SINGLECLICK},lc=function(t){const e=t.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey},uc=function(t){const e=t.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},hc=function(t){const e=t.originalEvent,n=e.target.tagName;return"INPUT"!==n&&"SELECT"!==n&&"TEXTAREA"!==n&&!e.target.isContentEditable},cc=function(t){const e=t.originalEvent;return Jn(void 0!==e,"mapBrowserEvent must originate from a pointer event"),"mouse"==e.pointerType},dc=function(t){const e=t.originalEvent;return Jn(void 0!==e,"mapBrowserEvent must originate from a pointer event"),e.isPrimary&&0===e.button};const fc=class extends Qh{constructor(t){super({stopDown:hn}),t=t||{},this.kinetic_=t.kinetic,this.lastCentroid=null,this.lastPointersCount_,this.panning_=!1;const e=t.condition?t.condition:tc(lc,dc);this.condition_=t.onFocusOnly?tc(nc,e):e,this.noKinetic_=!1}handleDragEvent(t){const e=t.map;this.panning_||(this.panning_=!0,e.getView().beginInteraction());const n=this.targetPointers,i=e.getEventPixel(Jh(n));if(n.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(i[0],i[1]),this.lastCentroid){const e=[this.lastCentroid[0]-i[0],i[1]-this.lastCentroid[1]],n=t.map.getView();!function(t,e){t[0]*=e,t[1]*=e}(e,n.getResolution()),Sr(e,n.getRotation()),n.adjustCenterInternal(e)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=i,this.lastPointersCount_=n.length,t.originalEvent.preventDefault()}handleUpEvent(t){const e=t.map,n=e.getView();if(0===this.targetPointers.length){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){const t=this.kinetic_.getDistance(),i=this.kinetic_.getAngle(),r=n.getCenterInternal(),s=e.getPixelFromCoordinateInternal(r),o=e.getCoordinateFromPixelInternal([s[0]-t*Math.cos(i),s[1]-t*Math.sin(i)]);n.animateInternal({center:n.getConstrainedCenter(o),duration:500,easing:as})}return this.panning_&&(this.panning_=!1,n.endInteraction()),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0}handleDownEvent(t){if(this.targetPointers.length>0&&this.condition_(t)){const e=t.map.getView();return this.lastCentroid=null,e.getAnimating()&&e.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1}};const gc=class extends Qh{constructor(t){t=t||{},super({stopDown:hn}),this.condition_=t.condition?t.condition:ec,this.lastAngle_=void 0,this.duration_=void 0!==t.duration?t.duration:250}handleDragEvent(t){if(!cc(t))return;const e=t.map,n=e.getView();if(n.getConstraints().rotation===rs)return;const i=e.getSize(),r=t.pixel,s=Math.atan2(i[1]/2-r[1],r[0]-i[0]/2);if(void 0!==this.lastAngle_){const t=s-this.lastAngle_;n.adjustRotationInternal(-t)}this.lastAngle_=s}handleUpEvent(t){if(!cc(t))return!0;return t.map.getView().endInteraction(this.duration_),!1}handleDownEvent(t){if(!cc(t))return!1;if(sc(t)&&this.condition_(t)){return t.map.getView().beginInteraction(),this.lastAngle_=void 0,!0}return!1}};const pc=class extends nn{constructor(t){super(),this.geometry_=null,this.element_=document.createElement("div"),this.element_.style.position="absolute",this.element_.style.pointerEvents="auto",this.element_.className="ol-box "+t,this.map_=null,this.startPixel_=null,this.endPixel_=null}disposeInternal(){this.setMap(null)}render_(){const t=this.startPixel_,e=this.endPixel_,n="px",i=this.element_.style;i.left=Math.min(t[0],e[0])+n,i.top=Math.min(t[1],e[1])+n,i.width=Math.abs(e[0]-t[0])+n,i.height=Math.abs(e[1]-t[1])+n}setMap(t){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);const t=this.element_.style;t.left="inherit",t.top="inherit",t.width="inherit",t.height="inherit"}this.map_=t,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)}setPixels(t,e){this.startPixel_=t,this.endPixel_=e,this.createOrUpdateGeometry(),this.render_()}createOrUpdateGeometry(){if(!this.map_)return;const t=this.startPixel_,e=this.endPixel_,n=[t,[t[0],e[1]],e,[e[0],t[1]]].map(this.map_.getCoordinateFromPixelInternal,this.map_);n[4]=n[0].slice(),this.geometry_?this.geometry_.setCoordinates([n]):this.geometry_=new oo([n])}getGeometry(){return this.geometry_}},mc="boxstart",yc="boxdrag",_c="boxend",vc="boxcancel";class xc extends tn{constructor(t,e,n){super(t),this.coordinate=e,this.mapBrowserEvent=n}}const wc=class extends Qh{constructor(t){super(),this.on,this.once,this.un,t=t??{},this.box_=new pc(t.className||"ol-dragbox"),this.minArea_=t.minArea??64,t.onBoxEnd&&(this.onBoxEnd=t.onBoxEnd),this.startPixel_=null,this.condition_=t.condition??sc,this.boxEndCondition_=t.boxEndCondition??this.defaultBoxEndCondition}defaultBoxEndCondition(t,e,n){const i=n[0]-e[0],r=n[1]-e[1];return i*i+r*r>=this.minArea_}getGeometry(){return this.box_.getGeometry()}handleDragEvent(t){this.startPixel_&&(this.box_.setPixels(this.startPixel_,t.pixel),this.dispatchEvent(new xc(yc,t.coordinate,t)))}handleUpEvent(t){if(!this.startPixel_)return!1;const e=this.boxEndCondition_(t,this.startPixel_,t.pixel);return e&&this.onBoxEnd(t),this.dispatchEvent(new xc(e?_c:vc,t.coordinate,t)),this.box_.setMap(null),this.startPixel_=null,!1}handleDownEvent(t){return!!this.condition_(t)&&(this.startPixel_=t.pixel,this.box_.setMap(t.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new xc(mc,t.coordinate,t)),!0)}onBoxEnd(t){}setActive(t){t||(this.box_.setMap(null),this.startPixel_&&(this.dispatchEvent(new xc(vc,this.startPixel_,null)),this.startPixel_=null)),super.setActive(t)}setMap(t){this.getMap()&&(this.box_.setMap(null),this.startPixel_&&(this.dispatchEvent(new xc(vc,this.startPixel_,null)),this.startPixel_=null)),super.setMap(t)}};const kc=class extends wc{constructor(t){super({condition:(t=t||{}).condition?t.condition:uc,className:t.className||"ol-dragzoom",minArea:t.minArea}),this.duration_=void 0!==t.duration?t.duration:200,this.out_=void 0!==t.out&&t.out}onBoxEnd(t){const e=this.getMap().getView();let n=this.getGeometry();if(this.out_){const t=e.rotatedExtentForGeometry(n),i=e.getResolutionForExtentInternal(t),r=e.getResolution()/i;n=n.clone(),n.scale(r*r)}e.fitInternal(n,{duration:this.duration_,easing:as})}},Ec="ArrowLeft",Sc="ArrowUp",bc="ArrowRight",Cc="ArrowDown";const Ic=class extends Zh{constructor(t){super(),t=t||{},this.defaultCondition_=function(t){return lc(t)&&hc(t)},this.condition_=void 0!==t.condition?t.condition:this.defaultCondition_,this.duration_=void 0!==t.duration?t.duration:100,this.pixelDelta_=void 0!==t.pixelDelta?t.pixelDelta:128}handleEvent(t){let e=!1;if(t.type==kn){const n=t.originalEvent,i=n.key;if(this.condition_(t)&&(i==Cc||i==Ec||i==bc||i==Sc)){const r=t.map.getView(),s=r.getResolution()*this.pixelDelta_;let o=0,a=0;i==Cc?a=-s:i==Ec?o=-s:i==bc?o=s:a=s;const l=[o,a];Sr(l,r.getRotation()),function(t,e,n){const i=t.getCenterInternal();if(i){const r=[i[0]+e[0],i[1]+e[1]];t.animateInternal({duration:void 0!==n?n:250,easing:us,center:t.getConstrainedCenter(r)})}}(r,l,this.duration_),n.preventDefault(),e=!0}}return!e}};const Tc=class extends Zh{constructor(t){super(),t=t||{},this.condition_=t.condition?t.condition:function(t){return!function(t){const e=t.originalEvent;return la?e.metaKey:e.ctrlKey}(t)&&hc(t)},this.delta_=t.delta?t.delta:1,this.duration_=void 0!==t.duration?t.duration:100}handleEvent(t){let e=!1;if(t.type==kn||t.type==En){const n=t.originalEvent,i=n.key;if(this.condition_(t)&&("+"===i||"-"===i)){const r=t.map,s="+"===i?this.delta_:-this.delta_;Kh(r.getView(),s,void 0,this.duration_),n.preventDefault(),e=!0}}return!e}};const Rc=class{constructor(t,e,n){this.decay_=t,this.minVelocity_=e,this.delay_=n,this.points_=[],this.angle_=0,this.initialVelocity_=0}begin(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0}update(t,e){this.points_.push(t,e,Date.now())}end(){if(this.points_.length<6)return!1;const t=Date.now()-this.delay_,e=this.points_.length-3;if(this.points_[e+2]<t)return!1;let n=e-3;for(;n>0&&this.points_[n+2]>t;)n-=3;const i=this.points_[e+2]-this.points_[n+2];if(i<1e3/60)return!1;const r=this.points_[e]-this.points_[n],s=this.points_[e+1]-this.points_[n+1];return this.angle_=Math.atan2(s,r),this.initialVelocity_=Math.sqrt(r*r+s*s)/i,this.initialVelocity_>this.minVelocity_}getDistance(){return(this.minVelocity_-this.initialVelocity_)/this.decay_}getAngle(){return this.angle_}};const Nc=class extends Zh{constructor(t){super(t=t||{}),this.totalDelta_=0,this.lastDelta_=0,this.maxDelta_=void 0!==t.maxDelta?t.maxDelta:1,this.duration_=void 0!==t.duration?t.duration:250,this.timeout_=void 0!==t.timeout?t.timeout:80,this.useAnchor_=void 0===t.useAnchor||t.useAnchor,this.constrainResolution_=void 0!==t.constrainResolution&&t.constrainResolution;const e=t.condition?t.condition:ic;this.condition_=t.onFocusOnly?tc(nc,e):e,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_,this.mode_=void 0,this.trackpadEventGap_=400,this.trackpadTimeoutId_,this.deltaPerZoom_=300}endInteraction_(){this.trackpadTimeoutId_=void 0;const t=this.getMap();if(!t)return;t.getView().endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_?t.getCoordinateFromPixel(this.lastAnchor_):null)}handleEvent(t){if(!this.condition_(t))return!0;if(t.type!==Cn)return!0;const e=t.map,n=t.originalEvent;let i;if(n.preventDefault(),this.useAnchor_&&(this.lastAnchor_=t.pixel),t.type==Cn&&(i=n.deltaY,oa&&n.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(i/=ua),n.deltaMode===WheelEvent.DOM_DELTA_LINE&&(i*=40)),0===i)return!1;this.lastDelta_=i;const r=Date.now();void 0===this.startTime_&&(this.startTime_=r),(!this.mode_||r-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(i)<4?"trackpad":"wheel");const s=e.getView();if("trackpad"===this.mode_&&!s.getConstrainResolution()&&!this.constrainResolution_)return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(s.getAnimating()&&s.cancelAnimations(),s.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),s.adjustZoom(-i/this.deltaPerZoom_,this.lastAnchor_?e.getCoordinateFromPixel(this.lastAnchor_):null),this.startTime_=r,!1;this.totalDelta_+=i;const o=Math.max(this.timeout_-(r-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,e),o),!1}handleWheelZoom_(t){const e=t.getView();e.getAnimating()&&e.cancelAnimations();let n=-Qn(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;(e.getConstrainResolution()||this.constrainResolution_)&&(n=n?n>0?1:-1:0),Kh(e,n,this.lastAnchor_?t.getCoordinateFromPixel(this.lastAnchor_):null,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0}setMouseAnchor(t){this.useAnchor_=t,t||(this.lastAnchor_=null)}};const Lc=class extends Qh{constructor(t){const e=t=t||{};e.stopDown||(e.stopDown=hn),super(e),this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.threshold_=void 0!==t.threshold?t.threshold:.3,this.duration_=void 0!==t.duration?t.duration:250}handleDragEvent(t){let e=0;const n=this.targetPointers[0],i=this.targetPointers[1],r=Math.atan2(i.clientY-n.clientY,i.clientX-n.clientX);if(void 0!==this.lastAngle_){const t=r-this.lastAngle_;this.rotationDelta_+=t,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),e=t}this.lastAngle_=r;const s=t.map,o=s.getView();o.getConstraints().rotation!==rs&&(this.anchor_=s.getCoordinateFromPixelInternal(s.getEventPixel(Jh(this.targetPointers))),this.rotating_&&(s.render(),o.adjustRotationInternal(e,this.anchor_)))}handleUpEvent(t){if(this.targetPointers.length<2){return t.map.getView().endInteraction(this.duration_),!1}return!0}handleDownEvent(t){if(this.targetPointers.length>=2){const e=t.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||e.getView().beginInteraction(),!0}return!1}};const Mc=class extends Qh{constructor(t){const e=t=t||{};e.stopDown||(e.stopDown=hn),super(e),this.anchor_=null,this.duration_=void 0!==t.duration?t.duration:400,this.lastDistance_=void 0,this.lastScaleDelta_=1}handleDragEvent(t){let e=1;const n=this.targetPointers[0],i=this.targetPointers[1],r=n.clientX-i.clientX,s=n.clientY-i.clientY,o=Math.sqrt(r*r+s*s);void 0!==this.lastDistance_&&(e=this.lastDistance_/o),this.lastDistance_=o;const a=t.map,l=a.getView();1!=e&&(this.lastScaleDelta_=e),this.anchor_=a.getCoordinateFromPixelInternal(a.getEventPixel(Jh(this.targetPointers))),a.render(),l.adjustResolutionInternal(e,this.anchor_)}handleUpEvent(t){if(this.targetPointers.length<2){const e=t.map.getView(),n=this.lastScaleDelta_>1?1:-1;return e.endInteraction(this.duration_,n),!1}return!0}handleDownEvent(t){if(this.targetPointers.length>=2){const e=t.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||e.getView().beginInteraction(),!0}return!1}};function Pc(t){t instanceof go?t.setMapInternal(null):t instanceof xh&&t.getLayers().forEach(Pc)}function Oc(t,e){if(t instanceof go)t.setMapInternal(e);else if(t instanceof xh){const n=t.getLayers().getArray();for(let t=0,i=n.length;t<i;++t)Oc(n[t],e)}}const Ac=class extends Fn{constructor(t){super(),t=t||{},this.on,this.once,this.un;const e=function(t){let e=null;void 0!==t.keyboardEventTarget&&(e="string"===typeof t.keyboardEventTarget?document.getElementById(t.keyboardEventTarget):t.keyboardEventTarget);const n={},i=t.layers&&"function"===typeof t.layers.getLayers?t.layers:new xh({layers:t.layers});let r,s,o;n[Mh]=i,n[Oh]=t.target,n[Ah]=t.view instanceof co?t.view:new co,void 0!==t.controls&&(Array.isArray(t.controls)?r=new Yn(t.controls.slice()):(Jn("function"===typeof t.controls.getArray,"Expected `controls` to be an array or an `ol/Collection.js`"),r=t.controls));void 0!==t.interactions&&(Array.isArray(t.interactions)?s=new Yn(t.interactions.slice()):(Jn("function"===typeof t.interactions.getArray,"Expected `interactions` to be an array or an `ol/Collection.js`"),s=t.interactions));void 0!==t.overlays?Array.isArray(t.overlays)?o=new Yn(t.overlays.slice()):(Jn("function"===typeof t.overlays.getArray,"Expected `overlays` to be an array or an `ol/Collection.js`"),o=t.overlays):o=new Yn;return{controls:r,interactions:s,keyboardEventTarget:e,overlays:o,values:n}}(t);this.renderComplete_=!1,this.loaded_=!0,this.boundHandleBrowserEvent_=this.handleBrowserEvent.bind(this),this.maxTilesLoading_=void 0!==t.maxTilesLoading?t.maxTilesLoading:16,this.pixelRatio_=void 0!==t.pixelRatio?t.pixelRatio:ua,this.postRenderTimeoutHandle_,this.animationDelayKey_,this.animationDelay_=this.animationDelay_.bind(this),this.coordinateToPixelTransform_=[1,0,0,1,0,0],this.pixelToCoordinateTransform_=[1,0,0,1,0,0],this.frameIndex_=0,this.frameState_=null,this.previousExtent_=null,this.viewPropertyListenerKey_=null,this.viewChangeListenerKey_=null,this.layerGroupPropertyListenerKeys_=null,this.viewport_=document.createElement("div"),this.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),this.viewport_.style.position="relative",this.viewport_.style.overflow="hidden",this.viewport_.style.width="100%",this.viewport_.style.height="100%",this.overlayContainer_=document.createElement("div"),this.overlayContainer_.style.position="absolute",this.overlayContainer_.style.zIndex="0",this.overlayContainer_.style.width="100%",this.overlayContainer_.style.height="100%",this.overlayContainer_.style.pointerEvents="none",this.overlayContainer_.className="ol-overlaycontainer",this.viewport_.appendChild(this.overlayContainer_),this.overlayContainerStopEvent_=document.createElement("div"),this.overlayContainerStopEvent_.style.position="absolute",this.overlayContainerStopEvent_.style.zIndex="0",this.overlayContainerStopEvent_.style.width="100%",this.overlayContainerStopEvent_.style.height="100%",this.overlayContainerStopEvent_.style.pointerEvents="none",this.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",this.viewport_.appendChild(this.overlayContainerStopEvent_),this.mapBrowserEventHandler_=null,this.moveTolerance_=t.moveTolerance,this.keyboardEventTarget_=e.keyboardEventTarget,this.targetChangeHandlerKeys_=null,this.targetElement_=null,this.resizeObserver_=new ResizeObserver((()=>this.updateSize())),this.controls=e.controls||function(t){t=t||{};const e=new Yn;return(void 0===t.zoom||t.zoom)&&e.push(new Vh(t.zoomOptions)),(void 0===t.rotate||t.rotate)&&e.push(new Wh(t.rotateOptions)),(void 0===t.attribution||t.attribution)&&e.push(new qh(t.attributionOptions)),e}(),this.interactions=e.interactions||function(t){t=t||{};const e=new Yn,n=new Rc(-.005,.05,100);return(void 0===t.altShiftDragRotate||t.altShiftDragRotate)&&e.push(new gc),(void 0===t.doubleClickZoom||t.doubleClickZoom)&&e.push(new $h({delta:t.zoomDelta,duration:t.zoomDuration})),(void 0===t.dragPan||t.dragPan)&&e.push(new fc({onFocusOnly:t.onFocusOnly,kinetic:n})),(void 0===t.pinchRotate||t.pinchRotate)&&e.push(new Lc),(void 0===t.pinchZoom||t.pinchZoom)&&e.push(new Mc({duration:t.zoomDuration})),(void 0===t.keyboard||t.keyboard)&&(e.push(new Ic),e.push(new Tc({delta:t.zoomDelta,duration:t.zoomDuration}))),(void 0===t.mouseWheelZoom||t.mouseWheelZoom)&&e.push(new Nc({onFocusOnly:t.onFocusOnly,duration:t.zoomDuration})),(void 0===t.shiftDragZoom||t.shiftDragZoom)&&e.push(new kc({duration:t.zoomDuration})),e}({onFocusOnly:!0}),this.overlays_=e.overlays,this.overlayIdIndex_={},this.renderer_=null,this.postRenderFunctions_=[],this.tileQueue_=new Uh(this.getTilePriority.bind(this),this.handleTileChange_.bind(this)),this.addChangeListener(Mh,this.handleLayerGroupChanged_),this.addChangeListener(Ah,this.handleViewChanged_),this.addChangeListener(Ph,this.handleSizeChanged_),this.addChangeListener(Oh,this.handleTargetChanged_),this.setProperties(e.values);const n=this;!t.view||t.view instanceof co||t.view.then((function(t){n.setView(new co(t))})),this.controls.addEventListener(Dn,(t=>{t.element.setMap(this)})),this.controls.addEventListener(zn,(t=>{t.element.setMap(null)})),this.interactions.addEventListener(Dn,(t=>{t.element.setMap(this)})),this.interactions.addEventListener(zn,(t=>{t.element.setMap(null)})),this.overlays_.addEventListener(Dn,(t=>{this.addOverlayInternal_(t.element)})),this.overlays_.addEventListener(zn,(t=>{const e=t.element.getId();void 0!==e&&delete this.overlayIdIndex_[e.toString()],t.element.setMap(null)})),this.controls.forEach((t=>{t.setMap(this)})),this.interactions.forEach((t=>{t.setMap(this)})),this.overlays_.forEach(this.addOverlayInternal_.bind(this))}addControl(t){this.getControls().push(t)}addInteraction(t){this.getInteractions().push(t)}addLayer(t){this.getLayerGroup().getLayers().push(t)}handleLayerAdd_(t){Oc(t.layer,this)}addOverlay(t){this.getOverlays().push(t)}addOverlayInternal_(t){const e=t.getId();void 0!==e&&(this.overlayIdIndex_[e.toString()]=t),t.setMap(this)}disposeInternal(){this.controls.clear(),this.interactions.clear(),this.overlays_.clear(),this.resizeObserver_.disconnect(),this.setTarget(null),super.disposeInternal()}forEachFeatureAtPixel(t,e,n){if(!this.frameState_||!this.renderer_)return;const i=this.getCoordinateFromPixelInternal(t),r=void 0!==(n=void 0!==n?n:{}).hitTolerance?n.hitTolerance:0,s=void 0!==n.layerFilter?n.layerFilter:un,o=!1!==n.checkWrapped;return this.renderer_.forEachFeatureAtCoordinate(i,this.frameState_,r,o,e,null,s,null)}getFeaturesAtPixel(t,e){const n=[];return this.forEachFeatureAtPixel(t,(function(t){n.push(t)}),e),n}getAllLayers(){const t=[];return function e(n){n.forEach((function(n){n instanceof xh?e(n.getLayers()):t.push(n)}))}(this.getLayers()),t}hasFeatureAtPixel(t,e){if(!this.frameState_||!this.renderer_)return!1;const n=this.getCoordinateFromPixelInternal(t),i=void 0!==(e=void 0!==e?e:{}).layerFilter?e.layerFilter:un,r=void 0!==e.hitTolerance?e.hitTolerance:0,s=!1!==e.checkWrapped;return this.renderer_.hasFeatureAtCoordinate(n,this.frameState_,r,s,i,null)}getEventCoordinate(t){return this.getCoordinateFromPixel(this.getEventPixel(t))}getEventCoordinateInternal(t){return this.getCoordinateFromPixelInternal(this.getEventPixel(t))}getEventPixel(t){const e=this.viewport_.getBoundingClientRect(),n=this.getSize(),i=e.width/n[0],r=e.height/n[1],s="changedTouches"in t?t.changedTouches[0]:t;return[(s.clientX-e.left)/i,(s.clientY-e.top)/r]}getTarget(){return this.get(Oh)}getTargetElement(){return this.targetElement_}getCoordinateFromPixel(t){return Hr(this.getCoordinateFromPixelInternal(t),this.getView().getProjection())}getCoordinateFromPixelInternal(t){const e=this.frameState_;return e?hs(e.pixelToCoordinateTransform,t.slice()):null}getControls(){return this.controls}getOverlays(){return this.overlays_}getOverlayById(t){const e=this.overlayIdIndex_[t.toString()];return void 0!==e?e:null}getInteractions(){return this.interactions}getLayerGroup(){return this.get(Mh)}setLayers(t){const e=this.getLayerGroup();if(t instanceof Yn)return void e.setLayers(t);const n=e.getLayers();n.clear(),n.extend(t)}getLayers(){return this.getLayerGroup().getLayers()}getLoadingOrNotReady(){const t=this.getLayerGroup().getLayerStatesArray();for(let e=0,n=t.length;e<n;++e){const n=t[e];if(!n.visible)continue;const i=n.layer.getRenderer();if(i&&!i.ready)return!0;const r=n.layer.getSource();if(r&&r.loading)return!0}return!1}getPixelFromCoordinate(t){const e=Kr(t,this.getView().getProjection());return this.getPixelFromCoordinateInternal(e)}getPixelFromCoordinateInternal(t){const e=this.frameState_;return e?hs(e.coordinateToPixelTransform,t.slice(0,2)):null}getRenderer(){return this.renderer_}getSize(){return this.get(Ph)}getView(){return this.get(Ah)}getViewport(){return this.viewport_}getOverlayContainer(){return this.overlayContainer_}getOverlayContainerStopEvent(){return this.overlayContainerStopEvent_}getOwnerDocument(){const t=this.getTargetElement();return t?t.ownerDocument:document}getTilePriority(t,e,n,i){return function(t,e,n,i,r){if(!t||!(n in t.wantedTiles))return Fh;if(!t.wantedTiles[n][e.getKey()])return Fh;const s=t.viewState.center,o=i[0]-s[0],a=i[1]-s[1];return 65536*Math.log(r)+Math.sqrt(o*o+a*a)/r}(this.frameState_,t,e,n,i)}handleBrowserEvent(t,e){e=e||t.type;const n=new kh(e,this,t);this.handleMapBrowserEvent(n)}handleMapBrowserEvent(t){if(!this.frameState_)return;const e=t.originalEvent,n=e.type;if(n===bh||n===Cn||n===kn){const t=this.getOwnerDocument(),n=this.viewport_.getRootNode?this.viewport_.getRootNode():t,i=e.target,r=n instanceof ShadowRoot?n.host===i?n.host.ownerDocument:n:n===t?t.documentElement:n;if(this.overlayContainerStopEvent_.contains(i)||!r.contains(i))return}if(t.frameState=this.frameState_,!1!==this.dispatchEvent(t)){const e=this.getInteractions().getArray().slice();for(let n=e.length-1;n>=0;n--){const i=e[n];if(i.getMap()!==this||!i.getActive()||!this.getTargetElement())continue;if(!i.handleEvent(t)||t.propagationStopped)break}}}handlePostRender(){const t=this.frameState_,e=this.tileQueue_;if(!e.isEmpty()){let n=this.maxTilesLoading_,i=n;if(t){const e=t.viewHints;if(e[gi]||e[pi]){const e=Date.now()-t.time>8;n=e?0:8,i=e?0:2}}e.getTilesLoading()<n&&(e.reprioritize(),e.loadMoreTiles(n,i))}t&&this.renderer_&&!t.animate&&(this.renderComplete_?(this.hasListener(fi)&&this.renderer_.dispatchRenderEvent(fi,t),!1===this.loaded_&&(this.loaded_=!0,this.dispatchEvent(new wh(Lh,this,t)))):!0===this.loaded_&&(this.loaded_=!1,this.dispatchEvent(new wh(Nh,this,t))));const n=this.postRenderFunctions_;for(let i=0,r=n.length;i<r;++i)n[i](this,t);n.length=0}handleSizeChanged_(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()}handleTargetChanged_(){if(this.mapBrowserEventHandler_){for(let t=0,e=this.targetChangeHandlerKeys_.length;t<e;++t)Rn(this.targetChangeHandlerKeys_[t]);this.targetChangeHandlerKeys_=null,this.viewport_.removeEventListener(vn,this.boundHandleBrowserEvent_),this.viewport_.removeEventListener(Cn,this.boundHandleBrowserEvent_),this.mapBrowserEventHandler_.dispose(),this.mapBrowserEventHandler_=null,this.viewport_.remove()}if(this.targetElement_){this.resizeObserver_.unobserve(this.targetElement_);const t=this.targetElement_.getRootNode();t instanceof ShadowRoot&&this.resizeObserver_.unobserve(t.host),this.setSize(void 0)}const t=this.getTarget(),e="string"===typeof t?document.getElementById(t):t;if(this.targetElement_=e,e){e.appendChild(this.viewport_),this.renderer_||(this.renderer_=new mh(this)),this.mapBrowserEventHandler_=new Ch(this,this.moveTolerance_);for(const e in Eh)this.mapBrowserEventHandler_.addEventListener(Eh[e],this.handleMapBrowserEvent.bind(this));let t;if(this.viewport_.addEventListener(vn,this.boundHandleBrowserEvent_,!1),this.viewport_.addEventListener(Cn,this.boundHandleBrowserEvent_,!!da&&{passive:!1}),this.keyboardEventTarget_)t=this.keyboardEventTarget_;else{const n=e.getRootNode();t=n instanceof ShadowRoot?n.host:e}this.targetChangeHandlerKeys_=[In(t,kn,this.handleBrowserEvent,this),In(t,En,this.handleBrowserEvent,this)];const n=e.getRootNode();n instanceof ShadowRoot&&this.resizeObserver_.observe(n.host),this.resizeObserver_.observe(e)}else this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderTimeoutHandle_=void 0,this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0);this.updateSize()}handleTileChange_(){this.render()}handleViewPropertyChanged_(){this.render()}handleViewChanged_(){this.viewPropertyListenerKey_&&(Rn(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&(Rn(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);const t=this.getView();t&&(this.updateViewportSize_(this.getSize()),this.viewPropertyListenerKey_=In(t,en,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=In(t,yn,this.handleViewPropertyChanged_,this),t.resolveConstraints(0)),this.render()}handleLayerGroupChanged_(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(Rn),this.layerGroupPropertyListenerKeys_=null);const t=this.getLayerGroup();t&&(this.handleLayerAdd_(new yh("addlayer",t)),this.layerGroupPropertyListenerKeys_=[In(t,en,this.render,this),In(t,yn,this.render,this),In(t,"addlayer",this.handleLayerAdd_,this),In(t,"removelayer",this.handleLayerRemove_,this)]),this.render()}isRendered(){return!!this.frameState_}animationDelay_(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}renderSync(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()}redrawText(){const t=this.getLayerGroup().getLayerStatesArray();for(let e=0,n=t.length;e<n;++e){const n=t[e].layer;n.hasRenderer()&&n.getRenderer().handleFontsChanged()}}render(){this.renderer_&&void 0===this.animationDelayKey_&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))}removeControl(t){return this.getControls().remove(t)}removeInteraction(t){return this.getInteractions().remove(t)}removeLayer(t){return this.getLayerGroup().getLayers().remove(t)}handleLayerRemove_(t){Pc(t.layer)}removeOverlay(t){return this.getOverlays().remove(t)}renderFrame_(t){const e=this.getSize(),n=this.getView(),i=this.frameState_;let r=null;if(void 0!==e&&Fo(e)&&n&&n.isDef()){const i=n.getHints(this.frameState_?this.frameState_.viewHints:void 0),s=n.getState();if(r={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutter:null,extent:dr(s.center,s.resolution,s.rotation,e),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:e,tileQueue:this.tileQueue_,time:t,usedTiles:{},viewState:s,viewHints:i,wantedTiles:{},mapId:On(this),renderTargets:{}},s.nextCenter&&s.nextResolution){const t=isNaN(s.nextRotation)?s.rotation:s.nextRotation;r.nextExtent=dr(s.nextCenter,s.nextResolution,t,e)}}if(this.frameState_=r,this.renderer_.renderFrame(r),r){if(r.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,r.postRenderFunctions),i){(!this.previousExtent_||!vr(this.previousExtent_)&&!er(r.extent,this.previousExtent_))&&(this.dispatchEvent(new wh(Th,this,i)),this.previousExtent_=Ji(this.previousExtent_))}this.previousExtent_&&!r.viewHints[gi]&&!r.viewHints[pi]&&!er(r.extent,this.previousExtent_)&&(this.dispatchEvent(new wh(Rh,this,r)),Xi(r.extent,this.previousExtent_))}this.dispatchEvent(new wh(Ih,this,r)),this.renderComplete_=(this.hasListener(Nh)||this.hasListener(Lh)||this.hasListener(fi))&&!this.tileQueue_.getTilesLoading()&&!this.tileQueue_.getCount()&&!this.getLoadingOrNotReady(),this.postRenderTimeoutHandle_||(this.postRenderTimeoutHandle_=setTimeout((()=>{this.postRenderTimeoutHandle_=void 0,this.handlePostRender()}),0))}setLayerGroup(t){const e=this.getLayerGroup();e&&this.handleLayerRemove_(new yh("removelayer",e)),this.set(Mh,t)}setSize(t){this.set(Ph,t)}setTarget(t){this.set(Oh,t)}setView(t){if(!t||t instanceof co)return void this.set(Ah,t);this.set(Ah,new co);const e=this;t.then((function(t){e.setView(new co(t))}))}updateSize(){const t=this.getTargetElement();let e;if(t){const n=getComputedStyle(t),i=t.offsetWidth-parseFloat(n.borderLeftWidth)-parseFloat(n.paddingLeft)-parseFloat(n.paddingRight)-parseFloat(n.borderRightWidth),r=t.offsetHeight-parseFloat(n.borderTopWidth)-parseFloat(n.paddingTop)-parseFloat(n.paddingBottom)-parseFloat(n.borderBottomWidth);isNaN(i)||isNaN(r)||(e=[Math.max(0,i),Math.max(0,r)],!Fo(e)&&(t.offsetWidth||t.offsetHeight||t.getClientRects().length)&&Nr("No map visible because the map container's width or height are 0."))}const n=this.getSize();!e||n&&ln(e,n)||(this.setSize(e),this.updateViewportSize_(e))}updateViewportSize_(t){const e=this.getView();e&&e.setViewportSize(t)}},Fc="preload",Dc="useInterimTilesOnError";const zc=class extends go{constructor(t){t=t||{};const e=Object.assign({},t),n=t.cacheSize;delete t.cacheSize,delete e.preload,delete e.useInterimTilesOnError,super(e),this.on,this.once,this.un,this.cacheSize_=n,this.setPreload(void 0!==t.preload?t.preload:0),this.setUseInterimTilesOnError(void 0===t.useInterimTilesOnError||t.useInterimTilesOnError)}getCacheSize(){return this.cacheSize_}getPreload(){return this.get(Fc)}setPreload(t){this.set(Fc,t)}getUseInterimTilesOnError(){return this.get(Dc)}setUseInterimTilesOnError(t){this.set(Dc,t)}getData(t){return super.getData(t)}};const Gc=class extends Ln{constructor(t){super(),this.ready=!0,this.boundHandleImageChange_=this.handleImageChange_.bind(this),this.layer_=t,this.staleKeys_=new Array,this.maxStaleKeys=5}getStaleKeys(){return this.staleKeys_}prependStaleKey(t){this.staleKeys_.unshift(t),this.staleKeys_.length>this.maxStaleKeys&&(this.staleKeys_.length=this.maxStaleKeys)}getFeatures(t){return Mn()}getData(t){return null}prepareFrame(t){return Mn()}renderFrame(t,e){return Mn()}forEachFeatureAtCoordinate(t,e,n,i,r){}getLayer(){return this.layer_}handleFontsChanged(){}handleImageChange_(t){const e=t.target;e.getState()!==Oo&&e.getState()!==Ao||this.renderIfReadyAndVisible()}loadImage(t){let e=t.getState();return e!=Oo&&e!=Ao&&t.addEventListener(yn,this.boundHandleImageChange_),e==Mo&&(t.load(),e=t.getState()),e==Oo}renderIfReadyAndVisible(){const t=this.getLayer();t&&t.getVisible()&&"ready"===t.getSourceState()&&t.changed()}renderDeferred(t){}disposeInternal(){delete this.layer_,super.disposeInternal()}};const jc=class{constructor(){this.instructions_=[],this.zIndex=0,this.offset_=0,this.context_=new Proxy(pa(),{get:(t,e)=>{if("function"===typeof pa()[e])return this.instructions_[this.zIndex+this.offset_]||(this.instructions_[this.zIndex+this.offset_]=[]),this.instructions_[this.zIndex+this.offset_].push(e),this.pushMethodArgs_},set:(t,e,n)=>(this.instructions_[this.zIndex+this.offset_]||(this.instructions_[this.zIndex+this.offset_]=[]),this.instructions_[this.zIndex+this.offset_].push(e,n),!0)})}pushMethodArgs_=(()=>{var t=this;return function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return t.instructions_[t.zIndex+t.offset_].push(n),t}})();pushFunction(t){this.instructions_[this.zIndex+this.offset_].push(t)}getContext(){return this.context_}draw(t){this.instructions_.forEach((e=>{for(let n=0,i=e.length;n<i;++n){const i=e[n];if("function"===typeof i){i(t);continue}const r=e[++n];if("function"===typeof t[i])t[i](...r);else{if("function"===typeof r){t[i]=r(t);continue}t[i]=r}}}))}clear(){this.instructions_.length=0,this.zIndex=0,this.offset_=0}offset(){this.offset_=this.instructions_.length,this.zIndex=0}},Yc=[];let Bc=null;const Uc=class extends Gc{constructor(t){super(t),this.container=null,this.renderedResolution,this.tempTransform=[1,0,0,1,0,0],this.pixelTransform=[1,0,0,1,0,0],this.inversePixelTransform=[1,0,0,1,0,0],this.context=null,this.deferredContext_=null,this.containerReused=!1,this.frameState=null}getImageData(t,e,n){let i;Bc||(Bc=fa(1,1,void 0,{willReadFrequently:!0})),Bc.clearRect(0,0,1,1);try{Bc.drawImage(t,e,n,1,1,0,0,1,1),i=Bc.getImageData(0,0,1,1).data}catch(r){return Bc=null,null}return i}getBackground(t){let e=this.getLayer().getBackground();return"function"===typeof e&&(e=e(t.viewState.resolution)),e||void 0}useContainer(t,e,n){const i=this.getLayer().getClassName();let r,s;if(t&&t.className===i&&(!n||t&&t.style.backgroundColor&&ln(na(t.style.backgroundColor),na(n)))){const e=t.firstElementChild;e instanceof HTMLCanvasElement&&(s=e.getContext("2d"))}if(s&&s.canvas.style.transform===e?(this.container=t,this.context=s,this.containerReused=!0):this.containerReused?(this.container=null,this.context=null,this.containerReused=!1):this.container&&(this.container.style.backgroundColor=null),!this.container){r=document.createElement("div"),r.className=i;let t=r.style;t.position="absolute",t.width="100%",t.height="100%",s=fa();const e=s.canvas;r.appendChild(e),t=e.style,t.position="absolute",t.left="0",t.transformOrigin="top left",this.container=r,this.context=s}this.containerReused||!n||this.container.style.backgroundColor||(this.container.style.backgroundColor=n)}clipUnrotated(t,e,n){const i=pr(n),r=mr(n),s=ur(n),o=lr(n);hs(e.coordinateToPixelTransform,i),hs(e.coordinateToPixelTransform,r),hs(e.coordinateToPixelTransform,s),hs(e.coordinateToPixelTransform,o);const a=this.inversePixelTransform;hs(a,i),hs(a,r),hs(a,s),hs(a,o),t.save(),t.beginPath(),t.moveTo(Math.round(i[0]),Math.round(i[1])),t.lineTo(Math.round(r[0]),Math.round(r[1])),t.lineTo(Math.round(s[0]),Math.round(s[1])),t.lineTo(Math.round(o[0]),Math.round(o[1])),t.clip()}prepareContainer(t,e){const n=t.extent,i=t.viewState.resolution,r=t.viewState.rotation,s=t.pixelRatio,o=Math.round(yr(n)/i*s),a=Math.round(fr(n)/i*s);cs(this.pixelTransform,t.size[0]/2,t.size[1]/2,1/s,1/s,r,-o/2,-a/2),ds(this.inversePixelTransform,this.pixelTransform);const l=gs(this.pixelTransform);if(this.useContainer(e,l,this.getBackground(t)),!this.containerReused){const t=this.context.canvas;t.width!=o||t.height!=a?(t.width=o,t.height=a):this.context.clearRect(0,0,o,a),l!==t.style.transform&&(t.style.transform=l)}}dispatchRenderEvent_(t,e,n){const i=this.getLayer();if(i.hasListener(t)){const r=new ph(t,this.inversePixelTransform,n,e);i.dispatchEvent(r)}}preRender(t,e){this.frameState=e,e.declutter||this.dispatchRenderEvent_(ui,t,e)}postRender(t,e){e.declutter||this.dispatchRenderEvent_(hi,t,e)}renderDeferredInternal(t){}getRenderContext(t){return t.declutter&&!this.deferredContext_&&(this.deferredContext_=new jc),t.declutter?this.deferredContext_.getContext():this.context}renderDeferred(t){t.declutter&&(this.dispatchRenderEvent_(ui,this.context,t),t.declutter&&this.deferredContext_&&(this.deferredContext_.draw(this.context),this.deferredContext_.clear()),this.renderDeferredInternal(t),this.dispatchRenderEvent_(hi,this.context,t))}getRenderTransform(t,e,n,i,r,s,o){const a=r/2,l=s/2,u=i/e,h=-u,c=-t[0]+o,d=-t[1];return cs(this.tempTransform,a,l,u,h,-n,c,d)}disposeInternal(){delete this.frameState,super.disposeInternal()}};const Xc=class extends mn{constructor(t,e,n){super(),n=n||{},this.tileCoord=t,this.state=e,this.key="",this.transition_=void 0===n.transition?250:n.transition,this.transitionStarts_={},this.interpolate=!!n.interpolate}changed(){this.dispatchEvent(yn)}release(){this.state===Yh&&this.setState(Bh)}getKey(){return this.key+"/"+this.tileCoord}getTileCoord(){return this.tileCoord}getState(){return this.state}setState(t){if(this.state!==Yh&&this.state>t)throw new Error("Tile load sequence violation");this.state=t,this.changed()}load(){Mn()}getAlpha(t,e){if(!this.transition_)return 1;let n=this.transitionStarts_[t];if(n){if(-1===n)return 1}else n=e,this.transitionStarts_[t]=n;const i=e-n+1e3/60;return i>=this.transition_?1:os(i/this.transition_)}inTransition(t){return!!this.transition_&&-1!==this.transitionStarts_[t]}endTransition(t){this.transition_&&(this.transitionStarts_[t]=-1)}disposeInternal(){this.release(),super.disposeInternal()}};function qc(t){return t instanceof Image||t instanceof HTMLCanvasElement||t instanceof HTMLVideoElement||t instanceof ImageBitmap?t:null}const Wc=new Error("disposed");let Vc=null;const Hc=[256,256];const Kc=class extends Xc{constructor(t){const e=zh;super(t.tileCoord,e,{transition:t.transition,interpolate:t.interpolate}),this.loader_=t.loader,this.data_=null,this.error_=null,this.size_=t.size||null,this.controller_=t.controller||null}getSize(){if(this.size_)return this.size_;const t=qc(this.data_);return t?[t.width,t.height]:Hc}getData(){return this.data_}getError(){return this.error_}load(){if(this.state!==zh&&this.state!==Yh)return;this.state=Gh,this.changed();const t=this;this.loader_().then((function(e){t.data_=e,t.state=jh,t.changed()})).catch((function(e){t.error_=e,t.state=Yh,t.changed()}))}disposeInternal(){this.controller_&&(this.controller_.abort(Wc),this.controller_=null),super.disposeInternal()}};const Zc=class extends Xc{constructor(t,e,n,i,r,s){super(t,e,s),this.crossOrigin_=i,this.src_=n,this.key=n,this.image_=new Image,null!==i&&(this.image_.crossOrigin=i),this.unlisten_=null,this.tileLoadFunction_=r}getImage(){return this.image_}setImage(t){this.image_=t,this.state=jh,this.unlistenImage_(),this.changed()}handleImageError_(){this.state=Yh,this.unlistenImage_(),this.image_=function(){const t=fa(1,1);return t.fillStyle="rgba(0,0,0,0)",t.fillRect(0,0,1,1),t.canvas}(),this.changed()}handleImageLoad_(){const t=this.image_;t.naturalWidth&&t.naturalHeight?this.state=jh:this.state=Bh,this.unlistenImage_(),this.changed()}load(){this.state==Yh&&(this.state=zh,this.image_=new Image,null!==this.crossOrigin_&&(this.image_.crossOrigin=this.crossOrigin_)),this.state==zh&&(this.state=Gh,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=function(t,e,n){const i=t;let r=!0,s=!1,o=!1;const a=[Tn(i,Sn,(function(){o=!0,s||e()}))];return i.src&&ca?(s=!0,i.decode().then((function(){r&&e()})).catch((function(t){r&&(o?e():n())}))):a.push(Tn(i,_n,n)),function(){r=!1,a.forEach(Rn)}}(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}disposeInternal(){this.unlistenImage_(),this.image_=null,super.disposeInternal()}};const $c=class{constructor(t){this.highWaterMark=void 0!==t?t:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}canExpireCache(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark}expireCache(t){for(;this.canExpireCache();){const t=this.pop();t instanceof nn&&t.dispose()}}clear(){this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}containsKey(t){return this.entries_.hasOwnProperty(t)}forEach(t){let e=this.oldest_;for(;e;)t(e.value_,e.key_,this),e=e.newer}get(t,e){const n=this.entries_[t];return Jn(void 0!==n,"Tried to get a value for a key that does not exist in the cache"),n===this.newest_||(n===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(n.newer.older=n.older,n.older.newer=n.newer),n.newer=null,n.older=this.newest_,this.newest_.newer=n,this.newest_=n),n.value_}remove(t){const e=this.entries_[t];return Jn(void 0!==e,"Tried to get a value for a key that does not exist in the cache"),e===this.newest_?(this.newest_=e.older,this.newest_&&(this.newest_.newer=null)):e===this.oldest_?(this.oldest_=e.newer,this.oldest_&&(this.oldest_.older=null)):(e.newer.older=e.older,e.older.newer=e.newer),delete this.entries_[t],--this.count_,e.value_}getCount(){return this.count_}getKeys(){const t=new Array(this.count_);let e,n=0;for(e=this.newest_;e;e=e.older)t[n++]=e.key_;return t}getValues(){const t=new Array(this.count_);let e,n=0;for(e=this.newest_;e;e=e.older)t[n++]=e.value_;return t}peekLast(){return this.oldest_.value_}peekLastKey(){return this.oldest_.key_}peekFirstKey(){return this.newest_.key_}peek(t){return this.entries_[t]?.value_}pop(){const t=this.oldest_;return delete this.entries_[t.key_],t.newer&&(t.newer.older=null),this.oldest_=t.newer,this.oldest_||(this.newest_=null),--this.count_,t.value_}replace(t,e){this.get(t),this.entries_[t].value_=e}set(t,e){Jn(!(t in this.entries_),"Tried to set a value for a key that is used already");const n={key_:t,newer:null,older:this.newest_,value_:e};this.newest_?this.newest_.newer=n:this.oldest_=n,this.newest_=n,this.entries_[t]=n,++this.count_}setSize(t){this.highWaterMark=t}};const Jc=class{constructor(t,e,n,i,r,s){this.sourceProj_=t,this.targetProj_=e;let o={};const a=Ur(this.targetProj_,this.sourceProj_);this.transformInv_=function(t){const e=t[0]+"/"+t[1];return o[e]||(o[e]=a(t)),o[e]},this.maxSourceExtent_=i,this.errorThresholdSquared_=r*r,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!i&&!!this.sourceProj_.getExtent()&&yr(i)>=yr(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?yr(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?yr(this.targetProj_.getExtent()):null;const l=pr(n),u=mr(n),h=ur(n),c=lr(n),d=this.transformInv_(l),f=this.transformInv_(u),g=this.transformInv_(h),p=this.transformInv_(c),m=10+(s?Math.max(0,Math.ceil(Math.log2(ar(n)/(s*s*256*256)))):0);if(this.addQuad_(l,u,h,c,d,f,g,p,m),this.wrapsXInSource_){let t=1/0;this.triangles_.forEach((function(e,n,i){t=Math.min(t,e.source[0][0],e.source[1][0],e.source[2][0])})),this.triangles_.forEach((e=>{if(Math.max(e.source[0][0],e.source[1][0],e.source[2][0])-t>this.sourceWorldWidth_/2){const n=[[e.source[0][0],e.source[0][1]],[e.source[1][0],e.source[1][1]],[e.source[2][0],e.source[2][1]]];n[0][0]-t>this.sourceWorldWidth_/2&&(n[0][0]-=this.sourceWorldWidth_),n[1][0]-t>this.sourceWorldWidth_/2&&(n[1][0]-=this.sourceWorldWidth_),n[2][0]-t>this.sourceWorldWidth_/2&&(n[2][0]-=this.sourceWorldWidth_);const i=Math.min(n[0][0],n[1][0],n[2][0]);Math.max(n[0][0],n[1][0],n[2][0])-i<this.sourceWorldWidth_/2&&(e.source=n)}}))}o={}}addTriangle_(t,e,n,i,r,s){this.triangles_.push({source:[i,r,s],target:[t,e,n]})}addQuad_(t,e,n,i,r,s,o,a,l){const u=Bi([r,s,o,a]),h=this.sourceWorldWidth_?yr(u)/this.sourceWorldWidth_:null,c=this.sourceWorldWidth_,d=this.sourceProj_.canWrapX()&&h>.5&&h<1;let f=!1;if(l>0){if(this.targetProj_.isGlobal()&&this.targetWorldWidth_){f=yr(Bi([t,e,n,i]))/this.targetWorldWidth_>.25||f}!d&&this.sourceProj_.isGlobal()&&h&&(f=h>.25||f)}if(!f&&this.maxSourceExtent_&&isFinite(u[0])&&isFinite(u[1])&&isFinite(u[2])&&isFinite(u[3])&&!_r(u,this.maxSourceExtent_))return;let g=0;if(!f&&(!isFinite(r[0])||!isFinite(r[1])||!isFinite(s[0])||!isFinite(s[1])||!isFinite(o[0])||!isFinite(o[1])||!isFinite(a[0])||!isFinite(a[1])))if(l>0)f=!0;else if(g=(isFinite(r[0])&&isFinite(r[1])?0:8)+(isFinite(s[0])&&isFinite(s[1])?0:4)+(isFinite(o[0])&&isFinite(o[1])?0:2)+(isFinite(a[0])&&isFinite(a[1])?0:1),1!=g&&2!=g&&4!=g&&8!=g)return;if(l>0){if(!f){const e=[(t[0]+n[0])/2,(t[1]+n[1])/2],i=this.transformInv_(e);let s;if(d){s=(ii(r[0],c)+ii(o[0],c))/2-ii(i[0],c)}else s=(r[0]+o[0])/2-i[0];const a=(r[1]+o[1])/2-i[1];f=s*s+a*a>this.errorThresholdSquared_}if(f){if(Math.abs(t[0]-n[0])<=Math.abs(t[1]-n[1])){const u=[(e[0]+n[0])/2,(e[1]+n[1])/2],h=this.transformInv_(u),c=[(i[0]+t[0])/2,(i[1]+t[1])/2],d=this.transformInv_(c);this.addQuad_(t,e,u,c,r,s,h,d,l-1),this.addQuad_(c,u,n,i,d,h,o,a,l-1)}else{const u=[(t[0]+e[0])/2,(t[1]+e[1])/2],h=this.transformInv_(u),c=[(n[0]+i[0])/2,(n[1]+i[1])/2],d=this.transformInv_(c);this.addQuad_(t,u,c,i,r,h,d,a,l-1),this.addQuad_(u,e,n,c,h,s,o,d,l-1)}return}}if(d){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}0==(11&g)&&this.addTriangle_(t,n,i,r,o,a),0==(14&g)&&this.addTriangle_(t,n,e,r,o,s),g&&(0==(13&g)&&this.addTriangle_(e,i,t,s,a,r),0==(7&g)&&this.addTriangle_(e,i,n,s,a,o))}calculateSourceExtent(){const t=[1/0,1/0,-1/0,-1/0];return this.triangles_.forEach((function(e,n,i){const r=e.source;ir(t,r[0]),ir(t,r[1]),ir(t,r[2])})),t}getTriangles(){return this.triangles_}};let Qc;const td=[];function ed(t,e,n,i,r){t.beginPath(),t.moveTo(0,0),t.lineTo(e,n),t.lineTo(i,r),t.closePath(),t.save(),t.clip(),t.fillRect(0,0,Math.max(e,i)+1,Math.max(n,r)),t.restore()}function nd(t,e){return Math.abs(t[4*e]-210)>2||Math.abs(t[4*e+3]-191.25)>2}function id(t,e,n,i){const r=Xr(n,e,t);let s=Dr(e,i,n);const o=e.getMetersPerUnit();void 0!==o&&(s*=o);const a=t.getMetersPerUnit();void 0!==a&&(s/=a);const l=t.getExtent();if(!l||Wi(l,r)){const e=Dr(t,s,r)/s;isFinite(e)&&e>0&&(s/=e)}return s}function rd(t,e,n,i){const r=hr(n);let s=id(t,e,r,i);return(!isFinite(s)||s<=0)&&or(n,(function(n){return s=id(t,e,n,i),isFinite(s)&&s>0})),s}function sd(t,e,n,i,r,s,o,a,l,u,h,c,d,f){const g=fa(Math.round(n*t),Math.round(n*e),td);if(c||(g.imageSmoothingEnabled=!1),0===l.length)return g.canvas;function p(t){return Math.round(t*n)/n}g.scale(n,n),g.globalCompositeOperation="lighter";const m=[1/0,1/0,-1/0,-1/0];let y;l.forEach((function(t,e,n){nr(m,t.extent)}));const _=n/i,v=(c?1:1+Math.pow(2,-24))/_;if(!d||1!==l.length||0!==u){if(y=fa(Math.round(yr(m)*_),Math.round(fr(m)*_),td),c||(y.imageSmoothingEnabled=!1),r&&f){const t=(r[0]-m[0])*_,e=-(r[3]-m[3])*_,n=yr(r)*_,i=fr(r)*_;y.rect(t,e,n,i),y.clip()}l.forEach((function(t,e,n){if(t.image.width>0&&t.image.height>0){if(t.clipExtent){y.save();const e=(t.clipExtent[0]-m[0])*_,n=-(t.clipExtent[3]-m[3])*_,i=yr(t.clipExtent)*_,r=fr(t.clipExtent)*_;y.rect(c?e:Math.round(e),c?n:Math.round(n),c?i:Math.round(e+i)-Math.round(e),c?r:Math.round(n+r)-Math.round(n)),y.clip()}const e=(t.extent[0]-m[0])*_,n=-(t.extent[3]-m[3])*_,i=yr(t.extent)*_,r=fr(t.extent)*_;y.drawImage(t.image,u,u,t.image.width-2*u,t.image.height-2*u,c?e:Math.round(e),c?n:Math.round(n),c?i:Math.round(e+i)-Math.round(e),c?r:Math.round(n+r)-Math.round(n)),t.clipExtent&&y.restore()}}))}const x=pr(o);return a.getTriangles().forEach((function(t,e,n){const i=t.source,r=t.target;let o=i[0][0],a=i[0][1],u=i[1][0],h=i[1][1],d=i[2][0],f=i[2][1];const _=p((r[0][0]-x[0])/s),w=p(-(r[0][1]-x[1])/s),k=p((r[1][0]-x[0])/s),E=p(-(r[1][1]-x[1])/s),S=p((r[2][0]-x[0])/s),b=p(-(r[2][1]-x[1])/s),C=o,I=a;o=0,a=0,u-=C,h-=I,d-=C,f-=I;const T=function(t){const e=t.length;for(let i=0;i<e;i++){let n=i,r=Math.abs(t[i][i]);for(let o=i+1;o<e;o++){const e=Math.abs(t[o][i]);e>r&&(r=e,n=o)}if(0===r)return null;const s=t[n];t[n]=t[i],t[i]=s;for(let o=i+1;o<e;o++){const n=-t[o][i]/t[i][i];for(let r=i;r<e+1;r++)i==r?t[o][r]=0:t[o][r]+=n*t[i][r]}}const n=new Array(e);for(let i=e-1;i>=0;i--){n[i]=t[i][e]/t[i][i];for(let r=i-1;r>=0;r--)t[r][e]-=t[r][i]*n[i]}return n}([[u,h,0,0,k-_],[d,f,0,0,S-_],[0,0,u,h,E-w],[0,0,d,f,b-w]]);if(!T)return;if(g.save(),g.beginPath(),function(){if(void 0===Qc){const t=fa(6,6,td);t.globalCompositeOperation="lighter",t.fillStyle="rgba(210, 0, 0, 0.75)",ed(t,4,5,4,0),ed(t,4,5,0,5);const e=t.getImageData(0,0,3,3).data;Qc=nd(e,0)||nd(e,4)||nd(e,8),ma(t),td.push(t.canvas)}return Qc}()||!c){g.moveTo(k,E);const t=4,e=_-k,n=w-E;for(let i=0;i<t;i++)g.lineTo(k+p((i+1)*e/t),E+p(i*n/(t-1))),i!=t-1&&g.lineTo(k+p((i+1)*e/t),E+p((i+1)*n/(t-1)));g.lineTo(S,b)}else g.moveTo(k,E),g.lineTo(_,w),g.lineTo(S,b);let R;if(g.clip(),g.transform(T[0],T[2],T[1],T[3],_,w),g.translate(m[0]-C,m[3]-I),y)R=y.canvas,g.scale(v,-v);else{const t=l[0],e=t.extent;R=t.image,g.scale(yr(e)/R.width,-fr(e)/R.height)}g.drawImage(R,0,0),g.restore()})),y&&(ma(y),td.push(y.canvas)),h&&(g.save(),g.globalCompositeOperation="source-over",g.strokeStyle="black",g.lineWidth=1,a.getTriangles().forEach((function(t,e,n){const i=t.target,r=(i[0][0]-x[0])/s,o=-(i[0][1]-x[1])/s,a=(i[1][0]-x[0])/s,l=-(i[1][1]-x[1])/s,u=(i[2][0]-x[0])/s,h=-(i[2][1]-x[1])/s;g.beginPath(),g.moveTo(a,l),g.lineTo(r,o),g.lineTo(u,h),g.closePath(),g.stroke()})),g.restore()),g.canvas}const od=class extends Kc{constructor(t){super({tileCoord:t.tileCoord,loader:()=>Promise.resolve(new Uint8ClampedArray(4)),interpolate:t.interpolate,transition:t.transition}),this.pixelRatio_=t.pixelRatio,this.gutter_=t.gutter,this.reprojData_=null,this.reprojError_=null,this.reprojSize_=void 0,this.sourceTileGrid_=t.sourceTileGrid,this.targetTileGrid_=t.targetTileGrid,this.wrappedTileCoord_=t.wrappedTileCoord||t.tileCoord,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0;const e=t.sourceProj,n=e.getExtent(),i=t.sourceTileGrid.getExtent();this.clipExtent_=e.canWrapX()?i?gr(n,i):n:i;const r=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_),s=this.targetTileGrid_.getExtent();let o=this.sourceTileGrid_.getExtent();const a=s?gr(r,s):r;if(0===ar(a))return void(this.state=Bh);n&&(o=o?gr(o,n):n);const l=this.targetTileGrid_.getResolution(this.wrappedTileCoord_[0]),u=t.targetProj,h=rd(e,u,a,l);if(!isFinite(h)||h<=0)return void(this.state=Bh);const c=void 0!==t.errorThreshold?t.errorThreshold:.5;if(this.triangulation_=new Jc(e,u,a,o,h*c,l),0===this.triangulation_.getTriangles().length)return void(this.state=Bh);this.sourceZ_=this.sourceTileGrid_.getZForResolution(h);let d=this.triangulation_.calculateSourceExtent();if(o&&(e.canWrapX()?(d[1]=Qn(d[1],o[1],o[3]),d[3]=Qn(d[3],o[1],o[3])):d=gr(d,o)),ar(d)){let i=0,r=0;e.canWrapX()&&(i=yr(n),r=Math.floor((d[0]-n[0])/i));kr(d.slice(),e,!0).forEach((e=>{const n=this.sourceTileGrid_.getTileRangeForExtentAndZ(e,this.sourceZ_),s=t.getTileFunction;for(let t=n.minX;t<=n.maxX;t++)for(let e=n.minY;e<=n.maxY;e++){const n=s(this.sourceZ_,t,e,this.pixelRatio_);if(n){const t=r*i;this.sourceTiles_.push({tile:n,offset:t})}}++r})),0===this.sourceTiles_.length&&(this.state=Bh)}else this.state=Bh}getSize(){return this.reprojSize_}getData(){return this.reprojData_}getError(){return this.reprojError_}reproject_(){const t=[];let e=!1;if(this.sourceTiles_.forEach((n=>{const i=n.tile;if(!i||i.getState()!==jh)return;const r=i.getSize(),s=this.gutter_;let o;const a=function(t){return t instanceof Uint8Array||t instanceof Uint8ClampedArray||t instanceof Float32Array||t instanceof DataView?t:null}(i.getData());a?o=a:(e=!0,o=function(t){Vc||(Vc=fa(t.width,t.height,void 0,{willReadFrequently:!0}));const e=Vc.canvas,n=t.width;e.width!==n&&(e.width=n);const i=t.height;return e.height!==i&&(e.height=i),Vc.clearRect(0,0,n,i),Vc.drawImage(t,0,0),Vc.getImageData(0,0,n,i).data}(qc(i.getData())));const l=[r[0]+2*s,r[1]+2*s],u=o instanceof Float32Array,h=l[0]*l[1],c=u?Float32Array:Uint8ClampedArray,d=new c(o.buffer),f=c.BYTES_PER_ELEMENT,g=f*d.length/h,p=d.byteLength/l[1],m=Math.floor(p/f/l[0]),y=h*m;let _=d;if(d.length!==y){_=new c(y);let t=0,e=0;const n=l[0]*m;for(let i=0;i<l[1];++i){for(let i=0;i<n;++i)_[t++]=d[e+i];e+=p/f}}const v=this.sourceTileGrid_.getTileCoordExtent(i.tileCoord);v[0]+=n.offset,v[2]+=n.offset;const x=this.clipExtent_?.slice();x&&(x[0]+=n.offset,x[2]+=n.offset),t.push({extent:v,clipExtent:x,data:new Uint8ClampedArray(_.buffer),dataType:c,bytesPerPixel:g,pixelSize:l})})),this.sourceTiles_.length=0,0===t.length)return this.state=Yh,void this.changed();const n=this.wrappedTileCoord_[0],i=this.targetTileGrid_.getTileSize(n),r="number"===typeof i?i:i[0],s="number"===typeof i?i:i[1],o=this.targetTileGrid_.getResolution(n),a=this.sourceTileGrid_.getResolution(this.sourceZ_),l=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);let u,h;const c=t[0].bytesPerPixel;for(let d=Math.ceil(c/3)-1;d>=0;--d){const e=[];for(let r=0,s=t.length;r<s;++r){const n=t[r],i=n.data,s=n.pixelSize,o=s[0],a=s[1],l=fa(o,a,td),u=l.createImageData(o,a),h=u.data;let f=3*d;for(let t=0,e=h.length;t<e;t+=4)h[t]=i[f],h[t+1]=i[f+1],h[t+2]=i[f+2],h[t+3]=255,f+=c;l.putImageData(u,0,0),e.push({extent:n.extent,clipExtent:n.clipExtent,image:l.canvas})}const n=sd(r,s,this.pixelRatio_,a,this.sourceTileGrid_.getExtent(),o,l,this.triangulation_,e,this.gutter_,!1,!1,!1);for(let t=0,r=e.length;t<r;++t){const n=e[t].image.getContext("2d");ma(n),td.push(n.canvas)}const i=n.getContext("2d"),f=i.getImageData(0,0,n.width,n.height);ma(i),td.push(n),u||(h=new Uint8ClampedArray(c*f.width*f.height),u=new t[0].dataType(h.buffer));const g=f.data;let p=3*d;for(let t=0,r=g.length;t<r;t+=4)255===g[t+3]?(h[p]=g[t],h[p+1]=g[t+1],h[p+2]=g[t+2]):(h[p]=0,h[p+1]=0,h[p+2]=0),p+=c}if(e){const t=fa(r,s),e=new ImageData(u,r);t.putImageData(e,0,0),this.reprojData_=t.canvas}else this.reprojData_=u;this.reprojSize_=[Math.round(r*this.pixelRatio_),Math.round(s*this.pixelRatio_)],this.state=jh,this.changed()}load(){if(this.state!==zh&&this.state!==Yh)return;this.state=Gh,this.changed();let t=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach((e=>{let{tile:n}=e;const i=n.getState();if(i!==zh&&i!==Gh)return;t++;const r=In(n,yn,(()=>{const e=n.getState();e!=jh&&e!=Yh&&e!=Bh||(Rn(r),t--,0===t&&(this.unlistenSources_(),this.reproject_()))}));this.sourcesListenerKeys_.push(r)})),0===t?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach((function(t){let{tile:e}=t;e.getState()==zh&&e.load()}))}unlistenSources_(){this.sourcesListenerKeys_.forEach(Rn),this.sourcesListenerKeys_=null}};const ad=class extends Xc{constructor(t,e,n,i,r,s,o,a,l,u,h,c){super(r,zh,c),this.renderEdges_=void 0!==h&&h,this.pixelRatio_=o,this.gutter_=a,this.canvas_=null,this.sourceTileGrid_=e,this.targetTileGrid_=i,this.wrappedTileCoord_=s||r,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0,this.clipExtent_=t.canWrapX()?t.getExtent():void 0;const d=i.getTileCoordExtent(this.wrappedTileCoord_),f=this.targetTileGrid_.getExtent();let g=this.sourceTileGrid_.getExtent();const p=f?gr(d,f):d;if(0===ar(p))return void(this.state=Bh);const m=t.getExtent();m&&(g=g?gr(g,m):m);const y=i.getResolution(this.wrappedTileCoord_[0]),_=rd(t,n,p,y);if(!isFinite(_)||_<=0)return void(this.state=Bh);const v=void 0!==u?u:.5;if(this.triangulation_=new Jc(t,n,p,g,_*v,y),0===this.triangulation_.getTriangles().length)return void(this.state=Bh);this.sourceZ_=e.getZForResolution(_);let x=this.triangulation_.calculateSourceExtent();if(g&&(t.canWrapX()?(x[1]=Qn(x[1],g[1],g[3]),x[3]=Qn(x[3],g[1],g[3])):x=gr(x,g)),ar(x)){let n=0,i=0;t.canWrapX()&&(n=yr(m),i=Math.floor((x[0]-m[0])/n));kr(x.slice(),t,!0).forEach((t=>{const r=e.getTileRangeForExtentAndZ(t,this.sourceZ_);for(let e=r.minX;e<=r.maxX;e++)for(let t=r.minY;t<=r.maxY;t++){const r=l(this.sourceZ_,e,t,o);if(r){const t=i*n;this.sourceTiles_.push({tile:r,offset:t})}}++i})),0===this.sourceTiles_.length&&(this.state=Bh)}else this.state=Bh}getImage(){return this.canvas_}reproject_(){const t=[];if(this.sourceTiles_.forEach((e=>{const n=e.tile;if(n&&n.getState()==jh){const i=this.sourceTileGrid_.getTileCoordExtent(n.tileCoord);i[0]+=e.offset,i[2]+=e.offset;const r=this.clipExtent_?.slice();r&&(r[0]+=e.offset,r[2]+=e.offset),t.push({extent:i,clipExtent:r,image:n.getImage()})}})),this.sourceTiles_.length=0,0===t.length)this.state=Yh;else{const e=this.wrappedTileCoord_[0],n=this.targetTileGrid_.getTileSize(e),i="number"===typeof n?n:n[0],r="number"===typeof n?n:n[1],s=this.targetTileGrid_.getResolution(e),o=this.sourceTileGrid_.getResolution(this.sourceZ_),a=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=sd(i,r,this.pixelRatio_,o,this.sourceTileGrid_.getExtent(),s,a,this.triangulation_,t,this.gutter_,this.renderEdges_,this.interpolate),this.state=jh}this.changed()}load(){if(this.state==zh){this.state=Gh,this.changed();let t=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach((e=>{let{tile:n}=e;const i=n.getState();if(i==zh||i==Gh){t++;const e=In(n,yn,(i=>{const r=n.getState();r!=jh&&r!=Yh&&r!=Bh||(Rn(e),t--,0===t&&(this.unlistenSources_(),this.reproject_()))}));this.sourcesListenerKeys_.push(e)}})),0===t?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach((function(t,e,n){let{tile:i}=t;i.getState()==zh&&i.load()}))}}unlistenSources_(){this.sourcesListenerKeys_.forEach(Rn),this.sourcesListenerKeys_=null}release(){this.canvas_&&(ma(this.canvas_.getContext("2d")),td.push(this.canvas_),this.canvas_=null),super.release()}};class ld{constructor(t,e,n,i){this.minX=t,this.maxX=e,this.minY=n,this.maxY=i}contains(t){return this.containsXY(t[1],t[2])}containsTileRange(t){return this.minX<=t.minX&&t.maxX<=this.maxX&&this.minY<=t.minY&&t.maxY<=this.maxY}containsXY(t,e){return this.minX<=t&&t<=this.maxX&&this.minY<=e&&e<=this.maxY}equals(t){return this.minX==t.minX&&this.minY==t.minY&&this.maxX==t.maxX&&this.maxY==t.maxY}extend(t){t.minX<this.minX&&(this.minX=t.minX),t.maxX>this.maxX&&(this.maxX=t.maxX),t.minY<this.minY&&(this.minY=t.minY),t.maxY>this.maxY&&(this.maxY=t.maxY)}getHeight(){return this.maxY-this.minY+1}getSize(){return[this.getWidth(),this.getHeight()]}getWidth(){return this.maxX-this.minX+1}intersects(t){return this.minX<=t.maxX&&this.maxX>=t.minX&&this.minY<=t.maxY&&this.maxY>=t.minY}}function ud(t,e,n,i,r){return void 0!==r?(r.minX=t,r.maxX=e,r.minY=n,r.maxY=i,r):new ld(t,e,n,i)}const hd=ld;function cd(t,e,n,i){return void 0!==i?(i[0]=t,i[1]=e,i[2]=n,i):[t,e,n]}function dd(t,e,n){return t+"/"+e+"/"+n}function fd(t,e,n,i){return`${t},${dd(e,n,i)}`}function gd(t,e,n){if(!(n in t))return t[n]=new Set([e]),!0;const i=t[n],r=i.has(e);return r||i.add(e),!r}function pd(t,e,n){const i=t[n];return!!i&&i.delete(e)}function md(t,e){const n=t.layerStatesArray[t.layerIndex];n.extent&&(e=gr(e,$r(n.extent,t.viewState.projection)));const i=n.layer.getRenderSource();if(!i.getWrapX()){const n=i.getTileGridForProjection(t.viewState.projection).getExtent();n&&(e=gr(e,n))}return e}const yd=class extends Uc{constructor(t,e){super(t),e=e||{},this.extentChanged=!0,this.renderComplete=!1,this.renderedExtent_=null,this.renderedPixelRatio,this.renderedProjection=null,this.renderedRevision,this.renderedTiles=[],this.renderedSourceKey_,this.renderedSourceRevision_,this.tempExtent=[1/0,1/0,-1/0,-1/0],this.tempTileRange_=new hd(0,0,0,0),this.tempTileCoord_=cd(0,0,0);const n=void 0!==e.cacheSize?e.cacheSize:512;this.tileCache_=new $c(n),this.renderedProjection_=void 0,this.maxStaleKeys=.5*n}getTileCache(){return this.tileCache_}getOrCreateTile(t,e,n,i){const r=this.tileCache_,s=this.getLayer().getSource(),o=fd(s.getKey(),t,e,n);let a;if(r.containsKey(o))a=r.get(o);else{if(a=s.getTile(t,e,n,i.pixelRatio,i.viewState.projection),!a)return null;r.set(o,a)}return a}getTile(t,e,n,i){const r=this.getOrCreateTile(t,e,n,i);return r||null}getData(t){const e=this.frameState;if(!e)return null;const n=this.getLayer(),i=hs(e.pixelToCoordinateTransform,t.slice()),r=n.getExtent();if(r&&!Wi(r,i))return null;const s=e.viewState,o=n.getRenderSource(),a=o.getTileGridForProjection(s.projection),l=o.getTilePixelRatio(e.pixelRatio);for(let u=a.getZForResolution(s.resolution);u>=a.getMinZoom();--u){const t=a.getTileCoordForCoordAndZ(i,u),n=this.getTile(u,t[1],t[2],e);if(!n||n.getState()!==jh)continue;const r=a.getOrigin(u),h=Do(a.getTileSize(u)),c=a.getResolution(u);let d;if(n instanceof Zc||n instanceof ad)d=n.getImage();else{if(!(n instanceof Kc))continue;if(d=qc(n.getData()),!d)continue}const f=Math.floor(l*((i[0]-r[0])/c-t[1]*h[0])),g=Math.floor(l*((r[1]-i[1])/c-t[2]*h[1])),p=Math.round(l*o.getGutterForProjection(s.projection));return this.getImageData(d,f+p,g+p)}return null}prepareFrame(t){this.renderedProjection_?t.viewState.projection!==this.renderedProjection_&&(this.tileCache_.clear(),this.renderedProjection_=t.viewState.projection):this.renderedProjection_=t.viewState.projection;const e=this.getLayer().getSource();if(!e)return!1;const n=e.getRevision();return this.renderedRevision_?this.renderedRevision_!==n&&(this.renderedRevision_=n,this.renderedSourceKey_===e.getKey()&&this.tileCache_.clear()):this.renderedRevision_=n,!0}enqueueTiles(t,e,n,i,r){const s=t.viewState,o=this.getLayer(),a=o.getRenderSource(),l=a.getTileGridForProjection(s.projection),u=On(a);u in t.wantedTiles||(t.wantedTiles[u]={});const h=t.wantedTiles[u],c=o.getMapInternal(),d=Math.max(n-r,l.getMinZoom(),l.getZForResolution(Math.min(o.getMaxResolution(),c?c.getView().getResolutionForZoom(Math.max(o.getMinZoom(),0)):l.getResolution(0)),a.zDirection));for(let f=n;f>=d;--f){const n=l.getTileRangeForExtentAndZ(e,f,this.tempTileRange_),r=l.getResolution(f);for(let e=n.minX;e<=n.maxX;++e)for(let s=n.minY;s<=n.maxY;++s){const n=this.getTile(f,e,s,t);if(!n)continue;if(!gd(i,n,f))continue;const o=n.getKey();if(h[o]=!0,n.getState()===zh&&!t.tileQueue.isKeyQueued(o)){const i=cd(f,e,s,this.tempTileCoord_);t.tileQueue.enqueue([n,u,l.getTileCoordCenter(i),r])}}}}findStaleTile_(t,e){const n=this.tileCache_,i=t[0],r=t[1],s=t[2],o=this.getStaleKeys();for(let a=0;a<o.length;++a){const t=fd(o[a],i,r,s);if(n.containsKey(t)){const r=n.get(t);if(r.getState()===jh)return r.endTransition(On(this)),gd(e,r,i),!0}}return!1}findAltTiles_(t,e,n,i){const r=t.getTileRangeForTileCoordAndZ(e,n,this.tempTileRange_);if(!r)return!1;let s=!0;const o=this.tileCache_,a=this.getLayer().getRenderSource().getKey();for(let l=r.minX;l<=r.maxX;++l)for(let t=r.minY;t<=r.maxY;++t){const e=fd(a,n,l,t);let r=!1;if(o.containsKey(e)){const t=o.get(e);t.getState()===jh&&(gd(i,t,n),r=!0)}r||(s=!1)}return s}renderFrame(t,e){this.renderComplete=!0;const n=t.layerStatesArray[t.layerIndex],i=t.viewState,r=i.projection,s=i.resolution,o=i.center,a=t.pixelRatio,l=this.getLayer(),u=l.getSource(),h=u.getRevision(),c=u.getTileGridForProjection(r),d=c.getZForResolution(s,u.zDirection),f=c.getResolution(d),g=u.getKey();this.renderedSourceKey_?this.renderedSourceKey_!==g&&(this.prependStaleKey(this.renderedSourceKey_),this.renderedSourceKey_=g):this.renderedSourceKey_=g;let p=t.extent;const m=u.getTilePixelRatio(a);this.prepareContainer(t,e);const y=this.context.canvas.width,_=this.context.canvas.height,v=n.extent&&$r(n.extent,r);v&&(p=gr(p,$r(n.extent,r)));const x=f*y/2/m,w=f*_/2/m,k=[o[0]-x,o[1]-w,o[0]+x,o[1]+w],E={};this.renderedTiles.length=0;const S=l.getPreload();if(t.nextExtent){const e=c.getZForResolution(i.nextResolution,u.zDirection),n=md(t,t.nextExtent);this.enqueueTiles(t,n,e,E,S)}const b=md(t,p);if(this.enqueueTiles(t,b,d,E,0),S>0&&setTimeout((()=>{this.enqueueTiles(t,b,d-1,E,S-1)}),0),!(d in E))return this.container;const C=On(this),I=t.time;for(const O of E[d]){const e=O.getState();if((O instanceof ad||O instanceof od)&&e===Bh)continue;const n=O.tileCoord;if(e===jh){if(1===O.getAlpha(C,I)){O.endTransition(C);continue}}this.renderComplete=!1;if(this.findStaleTile_(n,E)){pd(E,O,d),t.animate=!0;continue}if(this.findAltTiles_(c,n,d+1,E))continue;const i=c.getMinZoom();for(let t=d-1;t>=i;--t){if(this.findAltTiles_(c,n,t,E))break}}const T=f/s*a/m,R=this.getRenderContext(t);cs(this.tempTransform,y/2,_/2,T,T,0,-y/2,-_/2),n.extent&&this.clipUnrotated(R,t,v),u.getInterpolate()||(R.imageSmoothingEnabled=!1),this.preRender(R,t);const N=Object.keys(E).map(Number);let L;N.sort(rn);const M=[],P=[];for(let O=N.length-1;O>=0;--O){const e=N[O],n=u.getTilePixelSize(e,a,r),i=c.getResolution(e)/f,s=n[0]*i*T,o=n[1]*i*T,l=c.getTileCoordForCoordAndZ(pr(k),e),h=c.getTileCoordExtent(l),d=hs(this.tempTransform,[m*(h[0]-k[0])/f,m*(k[3]-h[3])/f]),g=m*u.getGutterForProjection(r);for(const r of E[e]){if(r.getState()!==jh)continue;const n=r.tileCoord,i=l[1]-n[1],a=Math.round(d[0]-(i-1)*s),h=l[2]-n[2],c=Math.round(d[1]-(h-1)*o),f=Math.round(d[0]-i*s),p=Math.round(d[1]-h*o),m=a-f,y=c-p,_=1===N.length;let v=!1;L=[f,p,f+m,p,f+m,p+y,f,p+y];for(let t=0,r=M.length;t<r;++t)if(!_&&e<P[t]){const e=M[t];_r([f,p,f+m,p+y],[e[0],e[3],e[4],e[7]])&&(v||(R.save(),v=!0),R.beginPath(),R.moveTo(L[0],L[1]),R.lineTo(L[2],L[3]),R.lineTo(L[4],L[5]),R.lineTo(L[6],L[7]),R.moveTo(e[6],e[7]),R.lineTo(e[4],e[5]),R.lineTo(e[2],e[3]),R.lineTo(e[0],e[1]),R.clip())}M.push(L),P.push(e),this.drawTile(r,t,f,p,m,y,g,_),v&&R.restore(),this.renderedTiles.unshift(r),this.updateUsedTiles(t.usedTiles,u,r)}}this.renderedRevision=h,this.renderedResolution=f,this.extentChanged=!this.renderedExtent_||!er(this.renderedExtent_,k),this.renderedExtent_=k,this.renderedPixelRatio=a,this.renderedProjection=r,this.postRender(this.context,t),n.extent&&R.restore(),R.imageSmoothingEnabled=!0;return t.postRenderFunctions.push(((t,e)=>{const n=On(u),i=e.wantedTiles[n],r=i?Object.keys(i).length:0;this.updateCacheSize(r),this.tileCache_.expireCache()})),this.container}updateCacheSize(t){this.tileCache_.highWaterMark=Math.max(this.tileCache_.highWaterMark,2*t)}drawTile(t,e,n,i,r,s,o,a){let l;if(t instanceof Kc){if(l=qc(t.getData()),!l)throw new Error("Rendering array data is not yet supported")}else l=this.getTileImage(t);if(!l)return;const u=this.getRenderContext(e),h=On(this),c=e.layerStatesArray[e.layerIndex],d=c.opacity*(a?t.getAlpha(h,e.time):1),f=d!==u.globalAlpha;f&&(u.save(),u.globalAlpha=d),u.drawImage(l,o,o,l.width-2*o,l.height-2*o,n,i,r,s),f&&u.restore(),d!==c.opacity?e.animate=!0:a&&t.endTransition(h)}getImage(){const t=this.context;return t?t.canvas:null}getTileImage(t){return t.getImage()}updateUsedTiles(t,e,n){const i=On(e);i in t||(t[i]={}),t[i][n.getKey()]=!0}};const _d=class extends zc{constructor(t){super(t)}createRenderer(){return new yd(this,{cacheSize:this.getCacheSize()})}},vd="tileloadstart",xd="tileloadend",wd="tileloaderror";function kd(t){return t?"function"===typeof t?t:(Array.isArray(t)||(t=[t]),e=>t):null}const Ed=class extends Fn{constructor(t){super(),this.projection=Fr(t.projection),this.attributions_=kd(t.attributions),this.attributionsCollapsible_=t.attributionsCollapsible??!0,this.loading=!1,this.state_=void 0!==t.state?t.state:"ready",this.wrapX_=void 0!==t.wrapX&&t.wrapX,this.interpolate_=!!t.interpolate,this.viewResolver=null,this.viewRejector=null;const e=this;this.viewPromise_=new Promise((function(t,n){e.viewResolver=t,e.viewRejector=n}))}getAttributions(){return this.attributions_}getAttributionsCollapsible(){return this.attributionsCollapsible_}getProjection(){return this.projection}getResolutions(t){return null}getView(){return this.viewPromise_}getState(){return this.state_}getWrapX(){return this.wrapX_}getInterpolate(){return this.interpolate_}refresh(){this.changed()}setAttributions(t){this.attributions_=kd(t),this.changed()}setState(t){this.state_=t,this.changed()}},Sd=[0,0,0];const bd=class{constructor(t){let e;if(this.minZoom=void 0!==t.minZoom?t.minZoom:0,this.resolutions_=t.resolutions,Jn(function(t,e,n){const i=e||rn;return t.every((function(e,r){if(0===r)return!0;const s=i(t[r-1],e);return!(s>0||n&&0===s)}))}(this.resolutions_,((t,e)=>e-t),!0),"`resolutions` must be sorted in descending order"),!t.origins)for(let i=0,r=this.resolutions_.length-1;i<r;++i)if(e){if(this.resolutions_[i]/this.resolutions_[i+1]!==e){e=void 0;break}}else e=this.resolutions_[i]/this.resolutions_[i+1];this.zoomFactor_=e,this.maxZoom=this.resolutions_.length-1,this.origin_=void 0!==t.origin?t.origin:null,this.origins_=null,void 0!==t.origins&&(this.origins_=t.origins,Jn(this.origins_.length==this.resolutions_.length,"Number of `origins` and `resolutions` must be equal"));const n=t.extent;void 0===n||this.origin_||this.origins_||(this.origin_=pr(n)),Jn(!this.origin_&&this.origins_||this.origin_&&!this.origins_,"Either `origin` or `origins` must be configured, never both"),this.tileSizes_=null,void 0!==t.tileSizes&&(this.tileSizes_=t.tileSizes,Jn(this.tileSizes_.length==this.resolutions_.length,"Number of `tileSizes` and `resolutions` must be equal")),this.tileSize_=void 0!==t.tileSize?t.tileSize:this.tileSizes_?null:yi,Jn(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,"Either `tileSize` or `tileSizes` must be configured, never both"),this.extent_=void 0!==n?n:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],this.tmpExtent_=[0,0,0,0],void 0!==t.sizes?this.fullTileRanges_=t.sizes.map(((t,e)=>{const i=new hd(Math.min(0,t[0]),Math.max(t[0]-1,-1),Math.min(0,t[1]),Math.max(t[1]-1,-1));if(n){const t=this.getTileRangeForExtentAndZ(n,e);i.minX=Math.max(t.minX,i.minX),i.maxX=Math.min(t.maxX,i.maxX),i.minY=Math.max(t.minY,i.minY),i.maxY=Math.min(t.maxY,i.maxY)}return i})):n&&this.calculateTileRanges_(n)}forEachTileCoord(t,e,n){const i=this.getTileRangeForExtentAndZ(t,e);for(let r=i.minX,s=i.maxX;r<=s;++r)for(let t=i.minY,o=i.maxY;t<=o;++t)n([e,r,t])}forEachTileCoordParentTileRange(t,e,n,i){let r,s,o,a=null,l=t[0]-1;for(2===this.zoomFactor_?(s=t[1],o=t[2]):a=this.getTileCoordExtent(t,i);l>=this.minZoom;){if(void 0!==s&&void 0!==o?(s=Math.floor(s/2),o=Math.floor(o/2),r=ud(s,s,o,o,n)):r=this.getTileRangeForExtentAndZ(a,l,n),e(l,r))return!0;--l}return!1}getExtent(){return this.extent_}getMaxZoom(){return this.maxZoom}getMinZoom(){return this.minZoom}getOrigin(t){return this.origin_?this.origin_:this.origins_[t]}getResolution(t){return this.resolutions_[t]}getResolutions(){return this.resolutions_}getTileCoordChildTileRange(t,e,n){if(t[0]<this.maxZoom){if(2===this.zoomFactor_){const n=2*t[1],i=2*t[2];return ud(n,n+1,i,i+1,e)}const i=this.getTileCoordExtent(t,n||this.tmpExtent_);return this.getTileRangeForExtentAndZ(i,t[0]+1,e)}return null}getTileRangeForTileCoordAndZ(t,e,n){if(e>this.maxZoom||e<this.minZoom)return null;const i=t[0],r=t[1],s=t[2];if(e===i)return ud(r,s,r,s,n);if(this.zoomFactor_){const t=Math.pow(this.zoomFactor_,e-i),o=Math.floor(r*t),a=Math.floor(s*t);if(e<i)return ud(o,o,a,a,n);return ud(o,Math.floor(t*(r+1))-1,a,Math.floor(t*(s+1))-1,n)}const o=this.getTileCoordExtent(t,this.tmpExtent_);return this.getTileRangeForExtentAndZ(o,e,n)}getTileRangeForExtentAndZ(t,e,n){this.getTileCoordForXYAndZ_(t[0],t[3],e,!1,Sd);const i=Sd[1],r=Sd[2];this.getTileCoordForXYAndZ_(t[2],t[1],e,!0,Sd);return ud(i,Sd[1],r,Sd[2],n)}getTileCoordCenter(t){const e=this.getOrigin(t[0]),n=this.getResolution(t[0]),i=Do(this.getTileSize(t[0]),this.tmpSize_);return[e[0]+(t[1]+.5)*i[0]*n,e[1]-(t[2]+.5)*i[1]*n]}getTileCoordExtent(t,e){const n=this.getOrigin(t[0]),i=this.getResolution(t[0]),r=Do(this.getTileSize(t[0]),this.tmpSize_),s=n[0]+t[1]*r[0]*i,o=n[1]-(t[2]+1)*r[1]*i;return $i(s,o,s+r[0]*i,o+r[1]*i,e)}getTileCoordForCoordAndResolution(t,e,n){return this.getTileCoordForXYAndResolution_(t[0],t[1],e,!1,n)}getTileCoordForXYAndResolution_(t,e,n,i,r){const s=this.getZForResolution(n),o=n/this.getResolution(s),a=this.getOrigin(s),l=Do(this.getTileSize(s),this.tmpSize_);let u=o*(t-a[0])/n/l[0],h=o*(a[1]-e)/n/l[1];return i?(u=ai(u,5)-1,h=ai(h,5)-1):(u=oi(u,5),h=oi(h,5)),cd(s,u,h,r)}getTileCoordForXYAndZ_(t,e,n,i,r){const s=this.getOrigin(n),o=this.getResolution(n),a=Do(this.getTileSize(n),this.tmpSize_);let l=(t-s[0])/o/a[0],u=(s[1]-e)/o/a[1];return i?(l=ai(l,5)-1,u=ai(u,5)-1):(l=oi(l,5),u=oi(u,5)),cd(n,l,u,r)}getTileCoordForCoordAndZ(t,e,n){return this.getTileCoordForXYAndZ_(t[0],t[1],e,!1,n)}getTileCoordResolution(t){return this.resolutions_[t[0]]}getTileSize(t){return this.tileSize_?this.tileSize_:this.tileSizes_[t]}getFullTileRange(t){return this.fullTileRanges_?this.fullTileRanges_[t]:this.extent_?this.getTileRangeForExtentAndZ(this.extent_,t):null}getZForResolution(t,e){return Qn(sn(this.resolutions_,t,e||0),this.minZoom,this.maxZoom)}tileCoordIntersectsViewport(t,e){return $s(e,0,e.length,2,this.getTileCoordExtent(t))}calculateTileRanges_(t){const e=this.resolutions_.length,n=new Array(e);for(let i=this.minZoom;i<e;++i)n[i]=this.getTileRangeForExtentAndZ(t,i);this.fullTileRanges_=n}};function Cd(t){let e=t.getDefaultTileGrid();return e||(e=function(t,e,n,i){const r=Td(t);return function(t,e,n,i){i=void 0!==i?i:"top-left";const r=Id(t,e,n);return new bd({extent:t,origin:cr(t,i),resolutions:r,tileSize:n})}(r,e,n,i)}(t),t.setDefaultTileGrid(e)),e}function Id(t,e,n,i){e=void 0!==e?e:42,n=Do(void 0!==n?n:yi);const r=fr(t),s=yr(t);i=i>0?i:Math.max(s/n[0],r/n[1]);const o=e+1,a=new Array(o);for(let l=0;l<o;++l)a[l]=i/Math.pow(2,l);return a}function Td(t){let e=(t=Fr(t)).getExtent();if(!e){const n=180*_i.degrees/t.getMetersPerUnit();e=$i(-n,-n,n,n)}return e}class Rd extends tn{constructor(t,e){super(t),this.tile=e}}const Nd=class extends Ed{constructor(t){super({attributions:t.attributions,attributionsCollapsible:t.attributionsCollapsible,projection:t.projection,state:t.state,wrapX:t.wrapX,interpolate:t.interpolate}),this.on,this.once,this.un,this.tilePixelRatio_=void 0!==t.tilePixelRatio?t.tilePixelRatio:1,this.tileGrid=void 0!==t.tileGrid?t.tileGrid:null;const e=[256,256];this.tileGrid&&Do(this.tileGrid.getTileSize(this.tileGrid.getMinZoom()),e),this.tmpSize=[0,0],this.key_=t.key||On(this),this.tileOptions={transition:t.transition,interpolate:t.interpolate},this.zDirection=t.zDirection?t.zDirection:0}getGutterForProjection(t){return 0}getKey(){return this.key_}setKey(t){this.key_!==t&&(this.key_=t,this.changed())}getResolutions(t){const e=t?this.getTileGridForProjection(t):this.tileGrid;return e?e.getResolutions():null}getTile(t,e,n,i,r){return Mn()}getTileGrid(){return this.tileGrid}getTileGridForProjection(t){return this.tileGrid?this.tileGrid:Cd(t)}getTilePixelRatio(t){return this.tilePixelRatio_}getTilePixelSize(t,e,n){const i=this.getTileGridForProjection(n),r=this.getTilePixelRatio(e),s=Do(i.getTileSize(t),this.tmpSize);return 1==r?s:(o=s,a=r,void 0===(l=this.tmpSize)&&(l=[0,0]),l[0]=o[0]*a+.5|0,l[1]=o[1]*a+.5|0,l);var o,a,l}getTileCoordForTileUrlFunction(t,e){e=void 0!==e?e:this.getProjection();const n=this.getTileGridForProjection(e);return this.getWrapX()&&e.isGlobal()&&(t=function(t,e,n){const i=e[0],r=t.getTileCoordCenter(e),s=Td(n);if(!Wi(s,r)){const e=yr(s),n=Math.ceil((s[0]-r[0])/e);return r[0]+=e*n,t.getTileCoordForCoordAndZ(r,i)}return e}(n,t,e)),function(t,e){const n=t[0],i=t[1],r=t[2];if(e.getMinZoom()>n||n>e.getMaxZoom())return!1;const s=e.getFullTileRange(n);return!s||s.containsXY(i,r)}(t,n)?t:null}clear(){}refresh(){this.clear(),super.refresh()}};const Ld=/\{z\}/g,Md=/\{x\}/g,Pd=/\{y\}/g,Od=/\{-y\}/g;function Ad(t,e){return function(n,i,r){if(!n)return;let s;const o=n[0];if(e){const t=e.getFullTileRange(o);t&&(s=t.getHeight()-1)}return function(t,e,n,i,r){return t.replace(Ld,e.toString()).replace(Md,n.toString()).replace(Pd,i.toString()).replace(Od,(function(){if(void 0===r)throw new Error("If the URL template has a {-y} placeholder, the grid extent must be known");return(r-i).toString()}))}(t,o,n[1],n[2],s)}}function Fd(t,e){const n=t.length,i=new Array(n);for(let r=0;r<n;++r)i[r]=Ad(t[r],e);return function(t){if(1===t.length)return t[0];return function(e,n,i){if(!e)return;const r=function(t){return e=t[0],n=t[1],i=t[2],(n<<e)+i;var e,n,i}(e),s=ii(r,t.length);return t[s](e,n,i)}}(i)}class Dd extends Nd{constructor(t){super({attributions:t.attributions,cacheSize:t.cacheSize,projection:t.projection,state:t.state,tileGrid:t.tileGrid,tilePixelRatio:t.tilePixelRatio,wrapX:t.wrapX,transition:t.transition,interpolate:t.interpolate,key:t.key,attributionsCollapsible:t.attributionsCollapsible,zDirection:t.zDirection}),this.generateTileUrlFunction_=this.tileUrlFunction===Dd.prototype.tileUrlFunction,this.tileLoadFunction=t.tileLoadFunction,t.tileUrlFunction&&(this.tileUrlFunction=t.tileUrlFunction),this.urls=null,t.urls?this.setUrls(t.urls):t.url&&this.setUrl(t.url),this.tileLoadingKeys_={}}getTileLoadFunction(){return this.tileLoadFunction}getTileUrlFunction(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction}getUrls(){return this.urls}handleTileChange(t){const e=t.target,n=On(e),i=e.getState();let r;i==Gh?(this.tileLoadingKeys_[n]=!0,r=vd):n in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[n],r=i==Yh?wd:i==jh?xd:void 0),void 0!=r&&this.dispatchEvent(new Rd(r,e))}setTileLoadFunction(t){this.tileLoadFunction=t,this.changed()}setTileUrlFunction(t,e){this.tileUrlFunction=t,"undefined"!==typeof e?this.setKey(e):this.changed()}setUrl(t){const e=function(t){const e=[];let n=/\{([a-z])-([a-z])\}/.exec(t);if(n){const i=n[1].charCodeAt(0),r=n[2].charCodeAt(0);let s;for(s=i;s<=r;++s)e.push(t.replace(n[0],String.fromCharCode(s)));return e}if(n=/\{(\d+)-(\d+)\}/.exec(t),n){const i=parseInt(n[2],10);for(let r=parseInt(n[1],10);r<=i;r++)e.push(t.replace(n[0],r.toString()));return e}return e.push(t),e}(t);this.urls=e,this.setUrls(e)}setUrls(t){this.urls=t;const e=t.join("\n");this.generateTileUrlFunction_?this.setTileUrlFunction(Fd(t,this.tileGrid),e):this.setKey(e)}tileUrlFunction(t,e,n){}}const zd=Dd;function Gd(t,e){t.getImage().src=e}const jd=class extends zd{constructor(t){super({attributions:t.attributions,cacheSize:t.cacheSize,projection:t.projection,state:t.state,tileGrid:t.tileGrid,tileLoadFunction:t.tileLoadFunction?t.tileLoadFunction:Gd,tilePixelRatio:t.tilePixelRatio,tileUrlFunction:t.tileUrlFunction,url:t.url,urls:t.urls,wrapX:t.wrapX,transition:t.transition,interpolate:void 0===t.interpolate||t.interpolate,key:t.key,attributionsCollapsible:t.attributionsCollapsible,zDirection:t.zDirection}),this.crossOrigin=void 0!==t.crossOrigin?t.crossOrigin:null,this.tileClass=void 0!==t.tileClass?t.tileClass:Zc,this.tileGridForProjection={},this.reprojectionErrorThreshold_=t.reprojectionErrorThreshold,this.renderReprojectionEdges_=!1}getGutterForProjection(t){return this.getProjection()&&t&&!Yr(this.getProjection(),t)?0:this.getGutter()}getGutter(){return 0}getKey(){let t=super.getKey();return this.getInterpolate()||(t+=":disable-interpolation"),t}getTileGridForProjection(t){const e=this.getProjection();if(this.tileGrid&&(!e||Yr(e,t)))return this.tileGrid;const n=On(t);return n in this.tileGridForProjection||(this.tileGridForProjection[n]=Cd(t)),this.tileGridForProjection[n]}createTile_(t,e,n,i,r,s){const o=[t,e,n],a=this.getTileCoordForTileUrlFunction(o,r),l=a?this.tileUrlFunction(a,i,r):void 0,u=new this.tileClass(o,void 0!==l?zh:Bh,void 0!==l?l:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return u.key=s,u.addEventListener(yn,this.handleTileChange.bind(this)),u}getTile(t,e,n,i,r){const s=this.getProjection();if(!s||!r||Yr(s,r))return this.getTileInternal(t,e,n,i,s||r);const o=[t,e,n],a=this.getKey(),l=this.getTileGridForProjection(s),u=this.getTileGridForProjection(r),h=this.getTileCoordForTileUrlFunction(o,r),c=new ad(s,l,r,u,o,h,this.getTilePixelRatio(i),this.getGutter(),((t,e,n,i)=>this.getTileInternal(t,e,n,i,s)),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_,this.tileOptions);return c.key=a,c}getTileInternal(t,e,n,i,r){const s=this.getKey();return this.createTile_(t,e,n,i,r,s)}setRenderReprojectionEdges(t){this.renderReprojectionEdges_!=t&&(this.renderReprojectionEdges_=t,this.changed())}setTileGridForProjection(t,e){const n=Fr(t);if(n){const t=On(n);t in this.tileGridForProjection||(this.tileGridForProjection[t]=e)}}};const Yd=class extends jd{constructor(t){const e=void 0!==(t=t||{}).projection?t.projection:"EPSG:3857",n=void 0!==t.tileGrid?t.tileGrid:function(t){const e=t||{},n=e.extent||Fr("EPSG:3857").getExtent(),i={extent:n,minZoom:e.minZoom,tileSize:e.tileSize,resolutions:Id(n,e.maxZoom,e.tileSize,e.maxResolution)};return new bd(i)}({extent:Td(e),maxResolution:t.maxResolution,maxZoom:t.maxZoom,minZoom:t.minZoom,tileSize:t.tileSize});super({attributions:t.attributions,cacheSize:t.cacheSize,crossOrigin:t.crossOrigin,interpolate:t.interpolate,projection:e,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileGrid:n,tileLoadFunction:t.tileLoadFunction,tilePixelRatio:t.tilePixelRatio,tileUrlFunction:t.tileUrlFunction,url:t.url,urls:t.urls,wrapX:void 0===t.wrapX||t.wrapX,transition:t.transition,attributionsCollapsible:t.attributionsCollapsible,zDirection:t.zDirection}),this.gutter_=void 0!==t.gutter?t.gutter:0}getGutter(){return this.gutter_}};const Bd=class extends Yd{constructor(t){let e;e=void 0!==(t=t||{}).attributions?t.attributions:['&#169; <a href="https://www.openstreetmap.org/copyright" target="_blank">OpenStreetMap</a> contributors.'];const n=void 0!==t.crossOrigin?t.crossOrigin:"anonymous",i=void 0!==t.url?t.url:"https://tile.openstreetmap.org/{z}/{x}/{y}.png";super({attributions:e,attributionsCollapsible:!1,cacheSize:t.cacheSize,crossOrigin:n,interpolate:t.interpolate,maxZoom:void 0!==t.maxZoom?t.maxZoom:19,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileLoadFunction:t.tileLoadFunction,transition:t.transition,url:i,wrapX:t.wrapX,zDirection:t.zDirection})}},Ud={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},Xd=[Ud.FILL],qd=[Ud.STROKE],Wd=[Ud.BEGIN_PATH],Vd=[Ud.CLOSE_PATH],Hd=Ud;const Kd=class{drawCustom(t,e,n,i,r){}drawGeometry(t){}setStyle(t){}drawCircle(t,e,n){}drawFeature(t,e,n){}drawGeometryCollection(t,e,n){}drawLineString(t,e,n){}drawMultiLineString(t,e,n){}drawMultiPoint(t,e,n){}drawMultiPolygon(t,e,n){}drawPoint(t,e,n){}drawPolygon(t,e,n){}drawText(t,e,n){}setFillStrokeStyle(t,e){}setImageStyle(t,e){}setTextStyle(t,e){}};const Zd=class extends Kd{constructor(t,e,n,i){super(),this.tolerance=t,this.maxExtent=e,this.pixelRatio=i,this.maxLineWidth=0,this.resolution=n,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_=null,this.bufferedMaxExtent_=null,this.instructions=[],this.coordinates=[],this.tmpCoordinate_=[],this.hitDetectionInstructions=[],this.state={}}applyPixelRatio(t){const e=this.pixelRatio;return 1==e?t:t.map((function(t){return t*e}))}appendFlatPointCoordinates(t,e){const n=this.getBufferedMaxExtent(),i=this.tmpCoordinate_,r=this.coordinates;let s=r.length;for(let o=0,a=t.length;o<a;o+=e)i[0]=t[o],i[1]=t[o+1],Wi(n,i)&&(r[s++]=i[0],r[s++]=i[1]);return s}appendFlatLineCoordinates(t,e,n,i,r,s){const o=this.coordinates;let a=o.length;const l=this.getBufferedMaxExtent();s&&(e+=i);let u=t[e],h=t[e+1];const c=this.tmpCoordinate_;let d,f,g,p=!0;for(d=e+i;d<n;d+=i)c[0]=t[d],c[1]=t[d+1],g=Ki(l,c),g!==f?(p&&(o[a++]=u,o[a++]=h,p=!1),o[a++]=c[0],o[a++]=c[1]):g===Di?(o[a++]=c[0],o[a++]=c[1],p=!1):p=!0,u=c[0],h=c[1],f=g;return(r&&p||d===e+i)&&(o[a++]=u,o[a++]=h),a}drawCustomCoordinates_(t,e,n,i,r){for(let s=0,o=n.length;s<o;++s){const o=n[s],a=this.appendFlatLineCoordinates(t,e,o,i,!1,!1);r.push(a),e=o}return e}drawCustom(t,e,n,i,r){this.beginGeometry(t,e,r);const s=t.getType(),o=t.getStride(),a=this.coordinates.length;let l,u,h,c,d;switch(s){case"MultiPolygon":l=t.getOrientedFlatCoordinates(),c=[];const e=t.getEndss();d=0;for(let t=0,n=e.length;t<n;++t){const n=[];d=this.drawCustomCoordinates_(l,d,e[t],o,n),c.push(n)}this.instructions.push([Hd.CUSTOM,a,c,t,n,Ds,r]),this.hitDetectionInstructions.push([Hd.CUSTOM,a,c,t,i||n,Ds,r]);break;case"Polygon":case"MultiLineString":h=[],l="Polygon"==s?t.getOrientedFlatCoordinates():t.getFlatCoordinates(),d=this.drawCustomCoordinates_(l,0,t.getEnds(),o,h),this.instructions.push([Hd.CUSTOM,a,h,t,n,Fs,r]),this.hitDetectionInstructions.push([Hd.CUSTOM,a,h,t,i||n,Fs,r]);break;case"LineString":case"Circle":l=t.getFlatCoordinates(),u=this.appendFlatLineCoordinates(l,0,l.length,o,!1,!1),this.instructions.push([Hd.CUSTOM,a,u,t,n,As,r]),this.hitDetectionInstructions.push([Hd.CUSTOM,a,u,t,i||n,As,r]);break;case"MultiPoint":l=t.getFlatCoordinates(),u=this.appendFlatPointCoordinates(l,o),u>a&&(this.instructions.push([Hd.CUSTOM,a,u,t,n,As,r]),this.hitDetectionInstructions.push([Hd.CUSTOM,a,u,t,i||n,As,r]));break;case"Point":l=t.getFlatCoordinates(),this.coordinates.push(l[0],l[1]),u=this.coordinates.length,this.instructions.push([Hd.CUSTOM,a,u,t,n,void 0,r]),this.hitDetectionInstructions.push([Hd.CUSTOM,a,u,t,i||n,void 0,r])}this.endGeometry(e)}beginGeometry(t,e,n){this.beginGeometryInstruction1_=[Hd.BEGIN_GEOMETRY,e,0,t,n],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[Hd.BEGIN_GEOMETRY,e,0,t,n],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)}finish(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}}reverseHitDetectionInstructions(){const t=this.hitDetectionInstructions;let e;t.reverse();const n=t.length;let i,r,s=-1;for(e=0;e<n;++e)i=t[e],r=i[0],r==Hd.END_GEOMETRY?s=e:r==Hd.BEGIN_GEOMETRY&&(i[2]=e,on(this.hitDetectionInstructions,s,e),s=-1)}setFillStrokeStyle(t,e){const n=this.state;if(t){const e=t.getColor();n.fillPatternScale=e&&"object"===typeof e&&"src"in e?this.pixelRatio:1,n.fillStyle=Ta(e||Da)}else n.fillStyle=void 0;if(e){const t=e.getColor();n.strokeStyle=Ta(t||Ya);const i=e.getLineCap();n.lineCap=void 0!==i?i:za;const r=e.getLineDash();n.lineDash=r?r.slice():Ga;const s=e.getLineDashOffset();n.lineDashOffset=s||0;const o=e.getLineJoin();n.lineJoin=void 0!==o?o:ja;const a=e.getWidth();n.lineWidth=void 0!==a?a:1;const l=e.getMiterLimit();n.miterLimit=void 0!==l?l:10,n.lineWidth>this.maxLineWidth&&(this.maxLineWidth=n.lineWidth,this.bufferedMaxExtent_=null)}else n.strokeStyle=void 0,n.lineCap=void 0,n.lineDash=null,n.lineDashOffset=void 0,n.lineJoin=void 0,n.lineWidth=void 0,n.miterLimit=void 0}createFill(t){const e=t.fillStyle,n=[Hd.SET_FILL_STYLE,e];return"string"!==typeof e&&n.push(t.fillPatternScale),n}applyStroke(t){this.instructions.push(this.createStroke(t))}createStroke(t){return[Hd.SET_STROKE_STYLE,t.strokeStyle,t.lineWidth*this.pixelRatio,t.lineCap,t.lineJoin,t.miterLimit,this.applyPixelRatio(t.lineDash),t.lineDashOffset*this.pixelRatio]}updateFillStyle(t,e){const n=t.fillStyle;"string"===typeof n&&t.currentFillStyle==n||(void 0!==n&&this.instructions.push(e.call(this,t)),t.currentFillStyle=n)}updateStrokeStyle(t,e){const n=t.strokeStyle,i=t.lineCap,r=t.lineDash,s=t.lineDashOffset,o=t.lineJoin,a=t.lineWidth,l=t.miterLimit;(t.currentStrokeStyle!=n||t.currentLineCap!=i||r!=t.currentLineDash&&!ln(t.currentLineDash,r)||t.currentLineDashOffset!=s||t.currentLineJoin!=o||t.currentLineWidth!=a||t.currentMiterLimit!=l)&&(void 0!==n&&e.call(this,t),t.currentStrokeStyle=n,t.currentLineCap=i,t.currentLineDash=r,t.currentLineDashOffset=s,t.currentLineJoin=o,t.currentLineWidth=a,t.currentMiterLimit=l)}endGeometry(t){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;const e=[Hd.END_GEOMETRY,t];this.instructions.push(e),this.hitDetectionInstructions.push(e)}getBufferedMaxExtent(){if(!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=Xi(this.maxExtent),this.maxLineWidth>0)){const t=this.resolution*(this.maxLineWidth+1)/2;Ui(this.bufferedMaxExtent_,t,this.bufferedMaxExtent_)}return this.bufferedMaxExtent_}};const $d=class extends Zd{constructor(t,e,n,i){super(t,e,n,i),this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.anchorX_=void 0,this.anchorY_=void 0,this.height_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.scale_=void 0,this.width_=void 0,this.declutterMode_=void 0,this.declutterImageWithText_=void 0}drawPoint(t,e,n){if(!this.image_||this.maxExtent&&!Wi(this.maxExtent,t.getFlatCoordinates()))return;this.beginGeometry(t,e,n);const i=t.getFlatCoordinates(),r=t.getStride(),s=this.coordinates.length,o=this.appendFlatPointCoordinates(i,r);this.instructions.push([Hd.DRAW_IMAGE,s,o,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([Hd.DRAW_IMAGE,s,o,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(e)}drawMultiPoint(t,e,n){if(!this.image_)return;this.beginGeometry(t,e,n);const i=t.getFlatCoordinates(),r=[];for(let a=0,l=i.length;a<l;a+=t.getStride())this.maxExtent&&!Wi(this.maxExtent,i.slice(a,a+2))||r.push(i[a],i[a+1]);const s=this.coordinates.length,o=this.appendFlatPointCoordinates(r,2);this.instructions.push([Hd.DRAW_IMAGE,s,o,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([Hd.DRAW_IMAGE,s,o,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(e)}finish(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,super.finish()}setImageStyle(t,e){const n=t.getAnchor(),i=t.getSize(),r=t.getOrigin();this.imagePixelRatio_=t.getPixelRatio(this.pixelRatio),this.anchorX_=n[0],this.anchorY_=n[1],this.hitDetectionImage_=t.getHitDetectionImage(),this.image_=t.getImage(this.pixelRatio),this.height_=i[1],this.opacity_=t.getOpacity(),this.originX_=r[0],this.originY_=r[1],this.rotateWithView_=t.getRotateWithView(),this.rotation_=t.getRotation(),this.scale_=t.getScaleArray(),this.width_=i[0],this.declutterMode_=t.getDeclutterMode(),this.declutterImageWithText_=e}};const Jd=class extends Zd{constructor(t,e,n,i){super(t,e,n,i)}drawFlatCoordinates_(t,e,n,i){const r=this.coordinates.length,s=this.appendFlatLineCoordinates(t,e,n,i,!1,!1),o=[Hd.MOVE_TO_LINE_TO,r,s];return this.instructions.push(o),this.hitDetectionInstructions.push(o),n}drawLineString(t,e,n){const i=this.state,r=i.strokeStyle,s=i.lineWidth;if(void 0===r||void 0===s)return;this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(t,e,n),this.hitDetectionInstructions.push([Hd.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,Ga,0],Wd);const o=t.getFlatCoordinates(),a=t.getStride();this.drawFlatCoordinates_(o,0,o.length,a),this.hitDetectionInstructions.push(qd),this.endGeometry(e)}drawMultiLineString(t,e,n){const i=this.state,r=i.strokeStyle,s=i.lineWidth;if(void 0===r||void 0===s)return;this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(t,e,n),this.hitDetectionInstructions.push([Hd.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,Ga,0],Wd);const o=t.getEnds(),a=t.getFlatCoordinates(),l=t.getStride();let u=0;for(let h=0,c=o.length;h<c;++h)u=this.drawFlatCoordinates_(a,u,o[h],l);this.hitDetectionInstructions.push(qd),this.endGeometry(e)}finish(){const t=this.state;return void 0!=t.lastStroke&&t.lastStroke!=this.coordinates.length&&this.instructions.push(qd),this.reverseHitDetectionInstructions(),this.state=null,super.finish()}applyStroke(t){void 0!=t.lastStroke&&t.lastStroke!=this.coordinates.length&&(this.instructions.push(qd),t.lastStroke=this.coordinates.length),t.lastStroke=0,super.applyStroke(t),this.instructions.push(Wd)}};const Qd=class extends Zd{constructor(t,e,n,i){super(t,e,n,i)}drawFlatCoordinatess_(t,e,n,i){const r=this.state,s=void 0!==r.fillStyle,o=void 0!==r.strokeStyle,a=n.length;this.instructions.push(Wd),this.hitDetectionInstructions.push(Wd);for(let l=0;l<a;++l){const r=n[l],s=this.coordinates.length,a=this.appendFlatLineCoordinates(t,e,r,i,!0,!o),u=[Hd.MOVE_TO_LINE_TO,s,a];this.instructions.push(u),this.hitDetectionInstructions.push(u),o&&(this.instructions.push(Vd),this.hitDetectionInstructions.push(Vd)),e=r}return s&&(this.instructions.push(Xd),this.hitDetectionInstructions.push(Xd)),o&&(this.instructions.push(qd),this.hitDetectionInstructions.push(qd)),e}drawCircle(t,e,n){const i=this.state,r=i.fillStyle,s=i.strokeStyle;if(void 0===r&&void 0===s)return;this.setFillStrokeStyles_(),this.beginGeometry(t,e,n),void 0!==i.fillStyle&&this.hitDetectionInstructions.push([Hd.SET_FILL_STYLE,Da]),void 0!==i.strokeStyle&&this.hitDetectionInstructions.push([Hd.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,Ga,0]);const o=t.getFlatCoordinates(),a=t.getStride(),l=this.coordinates.length;this.appendFlatLineCoordinates(o,0,o.length,a,!1,!1);const u=[Hd.CIRCLE,l];this.instructions.push(Wd,u),this.hitDetectionInstructions.push(Wd,u),void 0!==i.fillStyle&&(this.instructions.push(Xd),this.hitDetectionInstructions.push(Xd)),void 0!==i.strokeStyle&&(this.instructions.push(qd),this.hitDetectionInstructions.push(qd)),this.endGeometry(e)}drawPolygon(t,e,n){const i=this.state,r=i.fillStyle,s=i.strokeStyle;if(void 0===r&&void 0===s)return;this.setFillStrokeStyles_(),this.beginGeometry(t,e,n),void 0!==i.fillStyle&&this.hitDetectionInstructions.push([Hd.SET_FILL_STYLE,Da]),void 0!==i.strokeStyle&&this.hitDetectionInstructions.push([Hd.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,Ga,0]);const o=t.getEnds(),a=t.getOrientedFlatCoordinates(),l=t.getStride();this.drawFlatCoordinatess_(a,0,o,l),this.endGeometry(e)}drawMultiPolygon(t,e,n){const i=this.state,r=i.fillStyle,s=i.strokeStyle;if(void 0===r&&void 0===s)return;this.setFillStrokeStyles_(),this.beginGeometry(t,e,n),void 0!==i.fillStyle&&this.hitDetectionInstructions.push([Hd.SET_FILL_STYLE,Da]),void 0!==i.strokeStyle&&this.hitDetectionInstructions.push([Hd.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,Ga,0]);const o=t.getEndss(),a=t.getOrientedFlatCoordinates(),l=t.getStride();let u=0;for(let h=0,c=o.length;h<c;++h)u=this.drawFlatCoordinatess_(a,u,o[h],l);this.endGeometry(e)}finish(){this.reverseHitDetectionInstructions(),this.state=null;const t=this.tolerance;if(0!==t){const e=this.coordinates;for(let n=0,i=e.length;n<i;++n)e[n]=Ms(e[n],t)}return super.finish()}setFillStrokeStyles_(){const t=this.state;void 0!==t.fillStyle&&this.updateFillStyle(t,this.createFill),void 0!==t.strokeStyle&&this.updateStrokeStyle(t,this.applyStroke)}};function tf(t,e,n,i,r){const s=[];let o=n,a=0,l=e.slice(n,2);for(;a<t&&o+r<i;){const[n,i]=l.slice(-2),u=e[o+r],h=e[o+r+1],c=Math.sqrt((u-n)*(u-n)+(h-i)*(h-i));if(a+=c,a>=t){const e=(t-a+c)/c,d=ri(n,u,e),f=ri(i,h,e);l.push(d,f),s.push(l),l=[d,f],a==t&&(o+=r),a=0}else if(a<t)l.push(e[o+r],e[o+r+1]),o+=r;else{const t=c-a,e=ri(n,u,t/c),d=ri(i,h,t/c);l.push(e,d),s.push(l),l=[e,d],a=0,o+=r}}return a>0&&s.push(l),s}function ef(t,e,n,i,r){let s,o,a,l,u,h,c,d,f,g,p=n,m=n,y=0,_=0,v=n;for(o=n;o<i;o+=r){const n=e[o],i=e[o+1];void 0!==u&&(f=n-u,g=i-h,l=Math.sqrt(f*f+g*g),void 0!==c&&(_+=a,s=Math.acos((c*f+d*g)/(a*l)),s>t&&(_>y&&(y=_,p=v,m=o),_=0,v=o-r)),a=l,c=f,d=g),u=n,h=i}return _+=l,_>y?[v,o]:[p,m]}const nf={left:0,center:.5,right:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1};const rf=class extends Zd{constructor(t,e,n,i){super(t,e,n,i),this.labels_=null,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=void 0,this.textRotation_=0,this.textFillState_=null,this.fillStates={},this.fillStates[Da]={fillStyle:Da},this.textStrokeState_=null,this.strokeStates={},this.textState_={},this.textStates={},this.textKey_="",this.fillKey_="",this.strokeKey_="",this.declutterMode_=void 0,this.declutterImageWithText_=void 0}finish(){const t=super.finish();return t.textStates=this.textStates,t.fillStates=this.fillStates,t.strokeStates=this.strokeStates,t}drawText(t,e,n){const i=this.textFillState_,r=this.textStrokeState_,s=this.textState_;if(""===this.text_||!s||!i&&!r)return;const o=this.coordinates;let a=o.length;const l=t.getType();let u=null,h=t.getStride();if("line"!==s.placement||"LineString"!=l&&"MultiLineString"!=l&&"Polygon"!=l&&"MultiPolygon"!=l){let i=s.overflow?null:[];switch(l){case"Point":case"MultiPoint":u=t.getFlatCoordinates();break;case"LineString":u=t.getFlatMidpoint();break;case"Circle":u=t.getCenter();break;case"MultiLineString":u=t.getFlatMidpoints(),h=2;break;case"Polygon":u=t.getFlatInteriorPoint(),s.overflow||i.push(u[2]/this.resolution),h=3;break;case"MultiPolygon":const e=t.getFlatInteriorPoints();u=[];for(let t=0,n=e.length;t<n;t+=3)s.overflow||i.push(e[t+2]/this.resolution),u.push(e[t],e[t+1]);if(0===u.length)return;h=2}const r=this.appendFlatPointCoordinates(u,h);if(r===a)return;if(i&&(r-a)/2!==u.length/h){let t=a/2;i=i.filter(((e,n)=>{const i=o[2*(t+n)]===u[n*h]&&o[2*(t+n)+1]===u[n*h+1];return i||--t,i}))}this.saveTextStates_(),(s.backgroundFill||s.backgroundStroke)&&(this.setFillStrokeStyle(s.backgroundFill,s.backgroundStroke),s.backgroundFill&&this.updateFillStyle(this.state,this.createFill),s.backgroundStroke&&(this.updateStrokeStyle(this.state,this.applyStroke),this.hitDetectionInstructions.push(this.createStroke(this.state)))),this.beginGeometry(t,e,n);let c=s.padding;if(c!=Xa&&(s.scale[0]<0||s.scale[1]<0)){let t=s.padding[0],e=s.padding[1],n=s.padding[2],i=s.padding[3];s.scale[0]<0&&(e=-e,i=-i),s.scale[1]<0&&(t=-t,n=-n),c=[t,e,n,i]}const d=this.pixelRatio;this.instructions.push([Hd.DRAW_IMAGE,a,r,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[1,1],NaN,this.declutterMode_,this.declutterImageWithText_,c==Xa?Xa:c.map((function(t){return t*d})),!!s.backgroundFill,!!s.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,i]);const f=1/d,g=this.state.fillStyle;s.backgroundFill&&(this.state.fillStyle=Da,this.hitDetectionInstructions.push(this.createFill(this.state))),this.hitDetectionInstructions.push([Hd.DRAW_IMAGE,a,r,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[f,f],NaN,this.declutterMode_,this.declutterImageWithText_,c,!!s.backgroundFill,!!s.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_?Da:this.fillKey_,this.textOffsetX_,this.textOffsetY_,i]),s.backgroundFill&&(this.state.fillStyle=g,this.hitDetectionInstructions.push(this.createFill(this.state))),this.endGeometry(e)}else{if(!_r(this.maxExtent,t.getExtent()))return;let i;if(u=t.getFlatCoordinates(),"LineString"==l)i=[u.length];else if("MultiLineString"==l)i=t.getEnds();else if("Polygon"==l)i=t.getEnds().slice(0,1);else if("MultiPolygon"==l){const e=t.getEndss();i=[];for(let t=0,n=e.length;t<n;++t)i.push(e[t][0])}this.beginGeometry(t,e,n);const r=s.repeat,c=r?void 0:s.textAlign;let d=0;for(let t=0,e=i.length;t<e;++t){let e;e=r?tf(r*this.resolution,u,d,i[t],h):[u.slice(d,i[t])];for(let n=0,r=e.length;n<r;++n){const r=e[n];let l=0,u=r.length;if(void 0==c){const t=ef(s.maxAngle,r,0,r.length,2);l=t[0],u=t[1]}for(let t=l;t<u;t+=h)o.push(r[t],r[t+1]);const f=o.length;d=i[t],this.drawChars_(a,f),a=f}}this.endGeometry(e)}}saveTextStates_(){const t=this.textStrokeState_,e=this.textState_,n=this.textFillState_,i=this.strokeKey_;t&&(i in this.strokeStates||(this.strokeStates[i]={strokeStyle:t.strokeStyle,lineCap:t.lineCap,lineDashOffset:t.lineDashOffset,lineWidth:t.lineWidth,lineJoin:t.lineJoin,miterLimit:t.miterLimit,lineDash:t.lineDash}));const r=this.textKey_;r in this.textStates||(this.textStates[r]={font:e.font,textAlign:e.textAlign||Ba,justify:e.justify,textBaseline:e.textBaseline||Ua,scale:e.scale});const s=this.fillKey_;n&&(s in this.fillStates||(this.fillStates[s]={fillStyle:n.fillStyle}))}drawChars_(t,e){const n=this.textStrokeState_,i=this.textState_,r=this.strokeKey_,s=this.textKey_,o=this.fillKey_;this.saveTextStates_();const a=this.pixelRatio,l=nf[i.textBaseline],u=this.textOffsetY_*a,h=this.text_,c=n?n.lineWidth*Math.abs(i.scale[0])/2:0;this.instructions.push([Hd.DRAW_CHARS,t,e,l,i.overflow,o,i.maxAngle,a,u,r,c*a,h,s,1,this.declutterMode_]),this.hitDetectionInstructions.push([Hd.DRAW_CHARS,t,e,l,i.overflow,o?Da:o,i.maxAngle,a,u,r,c*a,h,s,1/a,this.declutterMode_])}setTextStyle(t,e){let n,i,r;if(t){const e=t.getFill();e?(i=this.textFillState_,i||(i={},this.textFillState_=i),i.fillStyle=Ta(e.getColor()||Da)):(i=null,this.textFillState_=i);const s=t.getStroke();if(s){r=this.textStrokeState_,r||(r={},this.textStrokeState_=r);const t=s.getLineDash(),e=s.getLineDashOffset(),n=s.getWidth(),i=s.getMiterLimit();r.lineCap=s.getLineCap()||za,r.lineDash=t?t.slice():Ga,r.lineDashOffset=void 0===e?0:e,r.lineJoin=s.getLineJoin()||ja,r.lineWidth=void 0===n?1:n,r.miterLimit=void 0===i?10:i,r.strokeStyle=Ta(s.getColor()||Ya)}else r=null,this.textStrokeState_=r;n=this.textState_;const o=t.getFont()||Fa;Ka(o);const a=t.getScaleArray();n.overflow=t.getOverflow(),n.font=o,n.maxAngle=t.getMaxAngle(),n.placement=t.getPlacement(),n.textAlign=t.getTextAlign(),n.repeat=t.getRepeat(),n.justify=t.getJustify(),n.textBaseline=t.getTextBaseline()||Ua,n.backgroundFill=t.getBackgroundFill(),n.backgroundStroke=t.getBackgroundStroke(),n.padding=t.getPadding()||Xa,n.scale=void 0===a?[1,1]:a;const l=t.getOffsetX(),u=t.getOffsetY(),h=t.getRotateWithView(),c=t.getRotation();this.text_=t.getText()||"",this.textOffsetX_=void 0===l?0:l,this.textOffsetY_=void 0===u?0:u,this.textRotateWithView_=void 0!==h&&h,this.textRotation_=void 0===c?0:c,this.strokeKey_=r?("string"==typeof r.strokeStyle?r.strokeStyle:On(r.strokeStyle))+r.lineCap+r.lineDashOffset+"|"+r.lineWidth+r.lineJoin+r.miterLimit+"["+r.lineDash.join()+"]":"",this.textKey_=n.font+n.scale+(n.textAlign||"?")+(n.repeat||"?")+(n.justify||"?")+(n.textBaseline||"?"),this.fillKey_=i&&i.fillStyle?"string"==typeof i.fillStyle?i.fillStyle:"|"+On(i.fillStyle):""}else this.text_="";this.declutterMode_=t.getDeclutterMode(),this.declutterImageWithText_=e}},sf={Circle:Qd,Default:Zd,Image:$d,LineString:Jd,Polygon:Qd,Text:rf};const of=class{constructor(t,e,n,i){this.tolerance_=t,this.maxExtent_=e,this.pixelRatio_=i,this.resolution_=n,this.buildersByZIndex_={}}finish(){const t={};for(const e in this.buildersByZIndex_){t[e]=t[e]||{};const n=this.buildersByZIndex_[e];for(const i in n){const r=n[i].finish();t[e][i]=r}}return t}getBuilder(t,e){const n=void 0!==t?t.toString():"0";let i=this.buildersByZIndex_[n];void 0===i&&(i={},this.buildersByZIndex_[n]=i);let r=i[e];if(void 0===r){r=new(0,sf[e])(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),i[e]=r}return r}};function af(t,e,n,i,r,s,o,a,l,u,h,c){let d=t[e],f=t[e+1],g=0,p=0,m=0,y=0;function _(){g=d,p=f,d=t[e+=i],f=t[e+1],y+=m,m=Math.sqrt((d-g)*(d-g)+(f-p)*(f-p))}do{_()}while(e<n-i&&y+m<s);let v=0===m?0:(s-y)/m;const x=ri(g,d,v),w=ri(p,f,v),k=e-i,E=y,S=s+a*l(u,r,h);for(;e<n-i&&y+m<S;)_();v=0===m?0:(S-y)/m;const b=ri(g,d,v),C=ri(p,f,v);let I;if(c){const t=[x,w,b,C];ms(t,0,4,2,c,t,t),I=t[0]>t[2]}else I=x>b;const T=Math.PI,R=[],N=k+i===e;let L;if(m=0,y=E,d=t[e=k],f=t[e+1],N){_(),L=Math.atan2(f-p,d-g),I&&(L+=L>0?-T:T);const t=(b+x)/2,e=(C+w)/2;return R[0]=[t,e,(S-s)/2,L,r],R}for(let M=0,P=(r=r.replace(/\n/g," ")).length;M<P;){_();let t=Math.atan2(f-p,d-g);if(I&&(t+=t>0?-T:T),void 0!==L){let e=t-L;if(e+=e>T?-2*T:e<-T?2*T:0,Math.abs(e)>o)return null}L=t;const c=M;let x=0;for(;M<P;++M){const t=a*l(u,r[I?P-M-1:M],h);if(e+i<n&&y+m<s+x+t/2)break;x+=t}if(M===c)continue;const w=I?r.substring(P-c,P-M):r.substring(c,M);v=0===m?0:(s+x/2-y)/m;const k=ri(g,d,v),E=ri(p,f,v);R.push([k,E,x/2,t,w]),s+=x}return R}function lf(t,e,n,i){let r=t[e],s=t[e+1],o=0;for(let a=e+i;a<n;a+=i){const e=t[a],n=t[a+1];o+=Math.sqrt((e-r)*(e-r)+(n-s)*(n-s)),r=e,s=n}return o}const uf=[1/0,1/0,-1/0,-1/0],hf=[],cf=[],df=[],ff=[];function gf(t){return t[3].declutterBox}const pf=new RegExp("["+String.fromCharCode(1425)+"-"+String.fromCharCode(2303)+String.fromCharCode(64285)+"-"+String.fromCharCode(65023)+String.fromCharCode(65136)+"-"+String.fromCharCode(65276)+String.fromCharCode(67584)+"-"+String.fromCharCode(69631)+String.fromCharCode(124928)+"-"+String.fromCharCode(126975)+"]");function mf(t,e){return"start"===e?e=pf.test(t)?"right":"left":"end"===e&&(e=pf.test(t)?"left":"right"),nf[e]}function yf(t,e,n){return n>0&&t.push("\n",""),t.push(e,""),t}const _f=class{constructor(t,e,n,i,r){this.overlaps=n,this.pixelRatio=e,this.resolution=t,this.alignAndScaleFill_,this.instructions=i.instructions,this.coordinates=i.coordinates,this.coordinateCache_={},this.renderedTransform_=[1,0,0,1,0,0],this.hitDetectionInstructions=i.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=i.fillStates||{},this.strokeStates=i.strokeStates||{},this.textStates=i.textStates||{},this.widths_={},this.labels_={},this.zIndexContext_=r?new jc:null}getZIndexContext(){return this.zIndexContext_}createLabel(t,e,n,i){const r=t+e+n+i;if(this.labels_[r])return this.labels_[r];const s=i?this.strokeStates[i]:null,o=n?this.fillStates[n]:null,a=this.textStates[e],l=this.pixelRatio,u=[a.scale[0]*l,a.scale[1]*l],h=a.justify?nf[a.justify]:mf(Array.isArray(t)?t[0]:t,a.textAlign||Ba),c=i&&s.lineWidth?s.lineWidth:0,d=Array.isArray(t)?t:String(t).split("\n").reduce(yf,[]),{width:f,height:g,widths:p,heights:m,lineWidths:y}=function(t,e){const n=[],i=[],r=[];let s=0,o=0,a=0,l=0;for(let u=0,h=e.length;u<=h;u+=2){const c=e[u];if("\n"===c||u===h){s=Math.max(s,o),r.push(o),o=0,a+=l,l=0;continue}const d=e[u+1]||t.font,f=Ja(d,c);n.push(f),o+=f;const g=Za(d);i.push(g),l=Math.max(l,g)}return{width:s,height:a,widths:n,heights:i,lineWidths:r}}(a,d),_=f+c,v=[],x=(_+2)*u[0],w=(g+c)*u[1],k={width:x<0?Math.floor(x):Math.ceil(x),height:w<0?Math.floor(w):Math.ceil(w),contextInstructions:v};1==u[0]&&1==u[1]||v.push("scale",u),i&&(v.push("strokeStyle",s.strokeStyle),v.push("lineWidth",c),v.push("lineCap",s.lineCap),v.push("lineJoin",s.lineJoin),v.push("miterLimit",s.miterLimit),v.push("setLineDash",[s.lineDash]),v.push("lineDashOffset",s.lineDashOffset)),n&&v.push("fillStyle",o.fillStyle),v.push("textBaseline","middle"),v.push("textAlign","center");const E=.5-h;let S=h*_+E*c;const b=[],C=[];let I,T=0,R=0,N=0,L=0;for(let M=0,P=d.length;M<P;M+=2){const t=d[M];if("\n"===t){R+=T,T=0,S=h*_+E*c,++L;continue}const e=d[M+1]||a.font;e!==I&&(i&&b.push("font",e),n&&C.push("font",e),I=e),T=Math.max(T,m[N]);const r=[t,S+E*p[N]+h*(p[N]-y[L]),.5*(c+T)+R];S+=p[N],i&&b.push("strokeText",r),n&&C.push("fillText",r),++N}return Array.prototype.push.apply(v,b),Array.prototype.push.apply(v,C),this.labels_[r]=k,k}replayTextBackground_(t,e,n,i,r,s,o){t.beginPath(),t.moveTo.apply(t,e),t.lineTo.apply(t,n),t.lineTo.apply(t,i),t.lineTo.apply(t,r),t.lineTo.apply(t,e),s&&(this.alignAndScaleFill_=s[2],this.fill_(t)),o&&(this.setStrokeStyle_(t,o),t.stroke())}calculateImageOrLabelDimensions_(t,e,n,i,r,s,o,a,l,u,h,c,d,f,g,p){let m=n-(o*=c[0]),y=i-(a*=c[1]);const _=r+l>t?t-l:r,v=s+u>e?e-u:s,x=f[3]+_*c[0]+f[1],w=f[0]+v*c[1]+f[2],k=m-f[3],E=y-f[0];let S;return(g||0!==h)&&(hf[0]=k,ff[0]=k,hf[1]=E,cf[1]=E,cf[0]=k+x,df[0]=cf[0],df[1]=E+w,ff[1]=df[1]),0!==h?(S=cs([1,0,0,1,0,0],n,i,1,1,h,-n,-i),hs(S,hf),hs(S,cf),hs(S,df),hs(S,ff),$i(Math.min(hf[0],cf[0],df[0],ff[0]),Math.min(hf[1],cf[1],df[1],ff[1]),Math.max(hf[0],cf[0],df[0],ff[0]),Math.max(hf[1],cf[1],df[1],ff[1]),uf)):$i(Math.min(k,k+x),Math.min(E,E+w),Math.max(k,k+x),Math.max(E,E+w),uf),d&&(m=Math.round(m),y=Math.round(y)),{drawImageX:m,drawImageY:y,drawImageW:_,drawImageH:v,originX:l,originY:u,declutterBox:{minX:uf[0],minY:uf[1],maxX:uf[2],maxY:uf[3],value:p},canvasTransform:S,scale:c}}replayImageOrLabel_(t,e,n,i,r,s,o){const a=!(!s&&!o),l=i.declutterBox,u=o?o[2]*i.scale[0]/2:0;return l.minX-u<=e[0]&&l.maxX+u>=0&&l.minY-u<=e[1]&&l.maxY+u>=0&&(a&&this.replayTextBackground_(t,hf,cf,df,ff,s,o),tl(t,i.canvasTransform,r,n,i.originX,i.originY,i.drawImageW,i.drawImageH,i.drawImageX,i.drawImageY,i.scale)),!0}fill_(t){const e=this.alignAndScaleFill_;if(e){const n=hs(this.renderedTransform_,[0,0]),i=512*this.pixelRatio;t.save(),t.translate(n[0]%i,n[1]%i),1!==e&&t.scale(e,e),t.rotate(this.viewRotation_)}t.fill(),e&&t.restore()}setStrokeStyle_(t,e){t.strokeStyle=e[1],t.lineWidth=e[2],t.lineCap=e[3],t.lineJoin=e[4],t.miterLimit=e[5],t.lineDashOffset=e[7],t.setLineDash(e[6])}drawLabelWithPointPlacement_(t,e,n,i){const r=this.textStates[e],s=this.createLabel(t,e,i,n),o=this.strokeStates[n],a=this.pixelRatio,l=mf(Array.isArray(t)?t[0]:t,r.textAlign||Ba),u=nf[r.textBaseline||Ua],h=o&&o.lineWidth?o.lineWidth:0;return{label:s,anchorX:l*(s.width/a-2*r.scale[0])+2*(.5-l)*h,anchorY:u*s.height/a+2*(.5-u)*h}}execute_(t,e,n,i,r,s,o,a){const l=this.zIndexContext_;let u;var h,c;this.pixelCoordinates_&&ln(n,this.renderedTransform_)?u=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),u=ps(this.coordinates,0,this.coordinates.length,2,n,this.pixelCoordinates_),h=this.renderedTransform_,c=n,h[0]=c[0],h[1]=c[1],h[2]=c[2],h[3]=c[3],h[4]=c[4],h[5]=c[5]);let d=0;const f=i.length;let g,p,m,y,_,v,x,w,k,E,S,b,C,I=0,T=0,R=0,N=null,L=null;const M=this.coordinateCache_,P=this.viewRotation_,O=Math.round(1e12*Math.atan2(-n[1],n[0]))/1e12,A={context:t,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:P},F=this.instructions!=i||this.overlaps?0:200;let D,z,G,j;for(;d<f;){const n=i[d];switch(n[0]){case Hd.BEGIN_GEOMETRY:D=n[1],j=n[3],D.getGeometry()?void 0===o||_r(o,j.getExtent())?++d:d=n[2]+1:d=n[2],l&&(l.zIndex=n[4]);break;case Hd.BEGIN_PATH:T>F&&(this.fill_(t),T=0),R>F&&(t.stroke(),R=0),T||R||(t.beginPath(),_=NaN,v=NaN),++d;break;case Hd.CIRCLE:I=n[1];const i=u[I],h=u[I+1],c=u[I+2]-i,f=u[I+3]-h,Y=Math.sqrt(c*c+f*f);t.moveTo(i+Y,h),t.arc(i,h,Y,0,2*Math.PI,!0),++d;break;case Hd.CLOSE_PATH:t.closePath(),++d;break;case Hd.CUSTOM:I=n[1],g=n[2];const B=n[3],U=n[4],X=n[5];A.geometry=B,A.feature=D,d in M||(M[d]=[]);const q=M[d];X?X(u,I,g,2,q):(q[0]=u[I],q[1]=u[I+1],q.length=2),l&&(l.zIndex=n[6]),U(q,A),++d;break;case Hd.DRAW_IMAGE:I=n[1],g=n[2],k=n[3],p=n[4],m=n[5];let W=n[6];const V=n[7],H=n[8],K=n[9],Z=n[10];let $=n[11];const J=n[12];let Q=n[13];y=n[14]||"declutter";const tt=n[15];if(!k&&n.length>=20){E=n[19],S=n[20],b=n[21],C=n[22];const t=this.drawLabelWithPointPlacement_(E,S,b,C);k=t.label,n[3]=k;const e=n[23];p=(t.anchorX-e)*this.pixelRatio,n[4]=p;const i=n[24];m=(t.anchorY-i)*this.pixelRatio,n[5]=m,W=k.height,n[6]=W,Q=k.width,n[13]=Q}let et,nt,it,rt;n.length>25&&(et=n[25]),n.length>17?(nt=n[16],it=n[17],rt=n[18]):(nt=Xa,it=!1,rt=!1),Z&&O?$+=P:Z||O||($-=P);let st=0;for(;I<g;I+=2){if(et&&et[st++]<Q/this.pixelRatio)continue;const n=this.calculateImageOrLabelDimensions_(k.width,k.height,u[I],u[I+1],Q,W,p,m,H,K,$,J,r,nt,it||rt,D),i=[t,e,k,n,V,it?N:null,rt?L:null];if(a){let t,e,r,s,o;if(tt){const n=g-I;if(!tt[n]){tt[n]={args:i,declutterMode:y};continue}const s=tt[n];t=s.args,e=s.declutterMode,delete tt[n],r=gf(t)}if(!t||"declutter"===e&&a.collides(r)||(s=!0),"declutter"===y&&a.collides(n.declutterBox)||(o=!0),"declutter"===e&&"declutter"===y){const t=s&&o;s=t,o=t}s&&("none"!==e&&a.insert(r),this.replayImageOrLabel_.apply(this,t)),o&&("none"!==y&&a.insert(n.declutterBox),this.replayImageOrLabel_.apply(this,i))}else this.replayImageOrLabel_.apply(this,i)}++d;break;case Hd.DRAW_CHARS:const ot=n[1],at=n[2],lt=n[3],ut=n[4];C=n[5];const ht=n[6],ct=n[7],dt=n[8];b=n[9];const ft=n[10];E=n[11],S=n[12];const gt=[n[13],n[13]];y=n[14]||"declutter";const pt=this.textStates[S],mt=pt.font,yt=[pt.scale[0]*ct,pt.scale[1]*ct];let _t;mt in this.widths_?_t=this.widths_[mt]:(_t={},this.widths_[mt]=_t);const vt=lf(u,ot,at,2),xt=Math.abs(yt[0])*Qa(mt,E,_t);if(ut||xt<=vt){const n=af(u,ot,at,2,E,(vt-xt)*mf(E,this.textStates[S].textAlign),ht,Math.abs(yt[0]),Qa,mt,_t,O?0:this.viewRotation_);t:if(n){const i=[];let r,s,o,l,u;if(b)for(r=0,s=n.length;r<s;++r){u=n[r],o=u[4],l=this.createLabel(o,S,"",b),p=u[2]+(yt[0]<0?-ft:ft),m=lt*l.height+2*(.5-lt)*ft*yt[1]/yt[0]-dt;const s=this.calculateImageOrLabelDimensions_(l.width,l.height,u[0],u[1],l.width,l.height,p,m,0,0,u[3],gt,!1,Xa,!1,D);if(a&&"declutter"===y&&a.collides(s.declutterBox))break t;i.push([t,e,l,s,1,null,null])}if(C)for(r=0,s=n.length;r<s;++r){u=n[r],o=u[4],l=this.createLabel(o,S,C,""),p=u[2],m=lt*l.height-dt;const s=this.calculateImageOrLabelDimensions_(l.width,l.height,u[0],u[1],l.width,l.height,p,m,0,0,u[3],gt,!1,Xa,!1,D);if(a&&"declutter"===y&&a.collides(s.declutterBox))break t;i.push([t,e,l,s,1,null,null])}a&&"none"!==y&&a.load(i.map(gf));for(let t=0,e=i.length;t<e;++t)this.replayImageOrLabel_.apply(this,i[t])}}++d;break;case Hd.END_GEOMETRY:if(void 0!==s){D=n[1];const t=s(D,j,y);if(t)return t}++d;break;case Hd.FILL:F?T++:this.fill_(t),++d;break;case Hd.MOVE_TO_LINE_TO:for(I=n[1],g=n[2],z=u[I],G=u[I+1],t.moveTo(z,G),_=z+.5|0,v=G+.5|0,I+=2;I<g;I+=2)z=u[I],G=u[I+1],x=z+.5|0,w=G+.5|0,I!=g-2&&x===_&&w===v||(t.lineTo(z,G),_=x,v=w);++d;break;case Hd.SET_FILL_STYLE:N=n,this.alignAndScaleFill_=n[2],T&&(this.fill_(t),T=0,R&&(t.stroke(),R=0)),t.fillStyle=n[1],++d;break;case Hd.SET_STROKE_STYLE:L=n,R&&(t.stroke(),R=0),this.setStrokeStyle_(t,n),++d;break;case Hd.STROKE:F?R++:t.stroke(),++d;break;default:++d}}T&&this.fill_(t),R&&t.stroke()}execute(t,e,n,i,r,s){this.viewRotation_=i,this.execute_(t,e,n,this.instructions,r,void 0,void 0,s)}executeHitDetection(t,e,n,i,r){return this.viewRotation_=n,this.execute_(t,[t.canvas.width,t.canvas.height],e,this.hitDetectionInstructions,!0,i,r)}},vf=["Polygon","Circle","LineString","Image","Text","Default"],xf=["Image","Text"],wf=vf.filter((t=>!xf.includes(t)));const kf={};const Ef=class{constructor(t,e,n,i,r,s,o){this.maxExtent_=t,this.overlaps_=i,this.pixelRatio_=n,this.resolution_=e,this.renderBuffer_=s,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=[1,0,0,1,0,0],this.renderedContext_=null,this.deferredZIndexContexts_={},this.createExecutors_(r,o)}clip(t,e){const n=this.getClipCoords(e);t.beginPath(),t.moveTo(n[0],n[1]),t.lineTo(n[2],n[3]),t.lineTo(n[4],n[5]),t.lineTo(n[6],n[7]),t.clip()}createExecutors_(t,e){for(const n in t){let i=this.executorsByZIndex_[n];void 0===i&&(i={},this.executorsByZIndex_[n]=i);const r=t[n];for(const t in r){const n=r[t];i[t]=new _f(this.resolution_,this.pixelRatio_,this.overlaps_,n,e)}}}hasExecutors(t){for(const e in this.executorsByZIndex_){const n=this.executorsByZIndex_[e];for(let e=0,i=t.length;e<i;++e)if(t[e]in n)return!0}return!1}forEachFeatureAtCoordinate(t,e,n,i,r,s){const o=2*(i=Math.round(i))+1,a=cs(this.hitDetectionTransform_,i+.5,i+.5,1/e,-1/e,-n,-t[0],-t[1]),l=!this.hitDetectionContext_;l&&(this.hitDetectionContext_=fa(o,o,void 0,{willReadFrequently:!0}));const u=this.hitDetectionContext_;let h;u.canvas.width!==o||u.canvas.height!==o?(u.canvas.width=o,u.canvas.height=o):l||u.clearRect(0,0,o,o),void 0!==this.renderBuffer_&&(h=[1/0,1/0,-1/0,-1/0],ir(h,t),Ui(h,e*(this.renderBuffer_+i),h));const c=function(t){if(void 0!==kf[t])return kf[t];const e=2*t+1,n=t*t,i=new Array(n+1);for(let s=0;s<=t;++s)for(let r=0;r<=t;++r){const o=s*s+r*r;if(o>n)break;let a=i[o];a||(a=[],i[o]=a),a.push(4*((t+s)*e+(t+r))+3),s>0&&a.push(4*((t-s)*e+(t+r))+3),r>0&&(a.push(4*((t+s)*e+(t-r))+3),s>0&&a.push(4*((t-s)*e+(t-r))+3))}const r=[];for(let s=0,o=i.length;s<o;++s)i[s]&&r.push(...i[s]);return kf[t]=r,r}(i);let d;function f(t,e,n){const a=u.getImageData(0,0,o,o).data;for(let l=0,h=c.length;l<h;l++)if(a[c[l]]>0){if(!s||"none"===n||"Image"!==d&&"Text"!==d||s.includes(t)){const n=(c[l]-3)/4,s=i-n%o,a=i-(n/o|0),u=r(t,e,s*s+a*a);if(u)return u}u.clearRect(0,0,o,o);break}}const g=Object.keys(this.executorsByZIndex_).map(Number);let p,m,y,_,v;for(g.sort(rn),p=g.length-1;p>=0;--p){const t=g[p].toString();for(y=this.executorsByZIndex_[t],m=vf.length-1;m>=0;--m)if(d=vf[m],_=y[d],void 0!==_&&(v=_.executeHitDetection(u,a,n,f,h),v))return v}}getClipCoords(t){const e=this.maxExtent_;if(!e)return null;const n=e[0],i=e[1],r=e[2],s=e[3],o=[n,i,n,s,r,s,r,i];return ps(o,0,8,2,t,o),o}isEmpty(){return pn(this.executorsByZIndex_)}execute(t,e,n,i,r,s,o){const a=Object.keys(this.executorsByZIndex_).map(Number);a.sort(rn),s=s||vf;const l=vf.length;let u,h,c,d,f;for(o&&a.reverse(),u=0,h=a.length;u<h;++u){const h=a[u].toString();for(f=this.executorsByZIndex_[h],c=0,d=s.length;c<d;++c){const h=s[c],d=f[h];if(void 0!==d){const s=null===o?void 0:d.getZIndexContext(),f=s?s.getContext():t,g=this.maxExtent_&&"Image"!==h&&"Text"!==h;if(g&&(f.save(),this.clip(f,n)),s&&"Text"!==h&&"Image"!==h?s.pushFunction((t=>d.execute(t,e,n,i,r,o))):d.execute(f,e,n,i,r,o),g&&f.restore(),s){s.offset();const t=a[u]*l+c;this.deferredZIndexContexts_[t]||(this.deferredZIndexContexts_[t]=[]),this.deferredZIndexContexts_[t].push(s)}}}}this.renderedContext_=t}getDeferredZIndexContexts(){return this.deferredZIndexContexts_}getRenderedContext(){return this.renderedContext_}renderDeferred(){const t=this.deferredZIndexContexts_,e=Object.keys(t).map(Number).sort(rn);for(let n=0,i=e.length;n<i;++n)t[e[n]].forEach((t=>{t.draw(this.renderedContext_),t.clear()})),t[e[n]].length=0}};const Sf=class extends Kd{constructor(t,e,n,i,r,s,o){super(),this.context_=t,this.pixelRatio_=e,this.extent_=n,this.transform_=i,this.transformRotation_=i?si(Math.atan2(i[1],i[0]),10):0,this.viewRotation_=r,this.squaredTolerance_=s,this.userTransform_=o,this.contextFillState_=null,this.contextStrokeState_=null,this.contextTextState_=null,this.fillState_=null,this.strokeState_=null,this.image_=null,this.imageAnchorX_=0,this.imageAnchorY_=0,this.imageHeight_=0,this.imageOpacity_=0,this.imageOriginX_=0,this.imageOriginY_=0,this.imageRotateWithView_=!1,this.imageRotation_=0,this.imageScale_=[0,0],this.imageWidth_=0,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=!1,this.textRotation_=0,this.textScale_=[0,0],this.textFillState_=null,this.textStrokeState_=null,this.textState_=null,this.pixelCoordinates_=[],this.tmpLocalTransform_=[1,0,0,1,0,0]}drawImages_(t,e,n,i){if(!this.image_)return;const r=ps(t,e,n,i,this.transform_,this.pixelCoordinates_),s=this.context_,o=this.tmpLocalTransform_,a=s.globalAlpha;1!=this.imageOpacity_&&(s.globalAlpha=a*this.imageOpacity_);let l=this.imageRotation_;0===this.transformRotation_&&(l-=this.viewRotation_),this.imageRotateWithView_&&(l+=this.viewRotation_);for(let u=0,h=r.length;u<h;u+=2){const t=r[u]-this.imageAnchorX_,e=r[u+1]-this.imageAnchorY_;if(0!==l||1!=this.imageScale_[0]||1!=this.imageScale_[1]){const n=t+this.imageAnchorX_,i=e+this.imageAnchorY_;cs(o,n,i,1,1,l,-n,-i),s.save(),s.transform.apply(s,o),s.translate(n,i),s.scale(this.imageScale_[0],this.imageScale_[1]),s.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,-this.imageAnchorX_,-this.imageAnchorY_,this.imageWidth_,this.imageHeight_),s.restore()}else s.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,t,e,this.imageWidth_,this.imageHeight_)}1!=this.imageOpacity_&&(s.globalAlpha=a)}drawText_(t,e,n,i){if(!this.textState_||""===this.text_)return;this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);const r=ps(t,e,n,i,this.transform_,this.pixelCoordinates_),s=this.context_;let o=this.textRotation_;for(0===this.transformRotation_&&(o-=this.viewRotation_),this.textRotateWithView_&&(o+=this.viewRotation_);e<n;e+=i){const t=r[e]+this.textOffsetX_,n=r[e+1]+this.textOffsetY_;0!==o||1!=this.textScale_[0]||1!=this.textScale_[1]?(s.save(),s.translate(t-this.textOffsetX_,n-this.textOffsetY_),s.rotate(o),s.translate(this.textOffsetX_,this.textOffsetY_),s.scale(this.textScale_[0],this.textScale_[1]),this.textStrokeState_&&s.strokeText(this.text_,0,0),this.textFillState_&&s.fillText(this.text_,0,0),s.restore()):(this.textStrokeState_&&s.strokeText(this.text_,t,n),this.textFillState_&&s.fillText(this.text_,t,n))}}moveToLineTo_(t,e,n,i,r){const s=this.context_,o=ps(t,e,n,i,this.transform_,this.pixelCoordinates_);s.moveTo(o[0],o[1]);let a=o.length;r&&(a-=2);for(let l=2;l<a;l+=2)s.lineTo(o[l],o[l+1]);return r&&s.closePath(),n}drawRings_(t,e,n,i){for(let r=0,s=n.length;r<s;++r)e=this.moveToLineTo_(t,e,n[r],i,!0);return e}drawCircle(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),_r(this.extent_,t.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const e=function(t,e,n){const i=t.getFlatCoordinates();if(!i)return null;const r=t.getStride();return ps(i,0,i.length,r,e,n)}(t,this.transform_,this.pixelCoordinates_),n=e[2]-e[0],i=e[3]-e[1],r=Math.sqrt(n*n+i*i),s=this.context_;s.beginPath(),s.arc(e[0],e[1],r,0,2*Math.PI),this.fillState_&&s.fill(),this.strokeState_&&s.stroke()}""!==this.text_&&this.drawText_(t.getCenter(),0,2,2)}}setStyle(t){this.setFillStrokeStyle(t.getFill(),t.getStroke()),this.setImageStyle(t.getImage()),this.setTextStyle(t.getText())}setTransform(t){this.transform_=t}drawGeometry(t){switch(t.getType()){case"Point":this.drawPoint(t);break;case"LineString":this.drawLineString(t);break;case"Polygon":this.drawPolygon(t);break;case"MultiPoint":this.drawMultiPoint(t);break;case"MultiLineString":this.drawMultiLineString(t);break;case"MultiPolygon":this.drawMultiPolygon(t);break;case"GeometryCollection":this.drawGeometryCollection(t);break;case"Circle":this.drawCircle(t)}}drawFeature(t,e){const n=e.getGeometryFunction()(t);n&&(this.setStyle(e),this.drawGeometry(n))}drawGeometryCollection(t){const e=t.getGeometriesArray();for(let n=0,i=e.length;n<i;++n)this.drawGeometry(e[n])}drawPoint(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const e=t.getFlatCoordinates(),n=t.getStride();this.image_&&this.drawImages_(e,0,e.length,n),""!==this.text_&&this.drawText_(e,0,e.length,n)}drawMultiPoint(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const e=t.getFlatCoordinates(),n=t.getStride();this.image_&&this.drawImages_(e,0,e.length,n),""!==this.text_&&this.drawText_(e,0,e.length,n)}drawLineString(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),_r(this.extent_,t.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const e=this.context_,n=t.getFlatCoordinates();e.beginPath(),this.moveToLineTo_(n,0,n.length,t.getStride(),!1),e.stroke()}if(""!==this.text_){const e=t.getFlatMidpoint();this.drawText_(e,0,2,2)}}}drawMultiLineString(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const e=t.getExtent();if(_r(this.extent_,e)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const e=this.context_,n=t.getFlatCoordinates();let i=0;const r=t.getEnds(),s=t.getStride();e.beginPath();for(let t=0,o=r.length;t<o;++t)i=this.moveToLineTo_(n,i,r[t],s,!1);e.stroke()}if(""!==this.text_){const e=t.getFlatMidpoints();this.drawText_(e,0,e.length,2)}}}drawPolygon(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),_r(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const e=this.context_;e.beginPath(),this.drawRings_(t.getOrientedFlatCoordinates(),0,t.getEnds(),t.getStride()),this.fillState_&&e.fill(),this.strokeState_&&e.stroke()}if(""!==this.text_){const e=t.getFlatInteriorPoint();this.drawText_(e,0,2,2)}}}drawMultiPolygon(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),_r(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const e=this.context_,n=t.getOrientedFlatCoordinates();let i=0;const r=t.getEndss(),s=t.getStride();e.beginPath();for(let t=0,o=r.length;t<o;++t){const e=r[t];i=this.drawRings_(n,i,e,s)}this.fillState_&&e.fill(),this.strokeState_&&e.stroke()}if(""!==this.text_){const e=t.getFlatInteriorPoints();this.drawText_(e,0,e.length,2)}}}setContextFillState_(t){const e=this.context_,n=this.contextFillState_;n?n.fillStyle!=t.fillStyle&&(n.fillStyle=t.fillStyle,e.fillStyle=t.fillStyle):(e.fillStyle=t.fillStyle,this.contextFillState_={fillStyle:t.fillStyle})}setContextStrokeState_(t){const e=this.context_,n=this.contextStrokeState_;n?(n.lineCap!=t.lineCap&&(n.lineCap=t.lineCap,e.lineCap=t.lineCap),ln(n.lineDash,t.lineDash)||e.setLineDash(n.lineDash=t.lineDash),n.lineDashOffset!=t.lineDashOffset&&(n.lineDashOffset=t.lineDashOffset,e.lineDashOffset=t.lineDashOffset),n.lineJoin!=t.lineJoin&&(n.lineJoin=t.lineJoin,e.lineJoin=t.lineJoin),n.lineWidth!=t.lineWidth&&(n.lineWidth=t.lineWidth,e.lineWidth=t.lineWidth),n.miterLimit!=t.miterLimit&&(n.miterLimit=t.miterLimit,e.miterLimit=t.miterLimit),n.strokeStyle!=t.strokeStyle&&(n.strokeStyle=t.strokeStyle,e.strokeStyle=t.strokeStyle)):(e.lineCap=t.lineCap,e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset,e.lineJoin=t.lineJoin,e.lineWidth=t.lineWidth,e.miterLimit=t.miterLimit,e.strokeStyle=t.strokeStyle,this.contextStrokeState_={lineCap:t.lineCap,lineDash:t.lineDash,lineDashOffset:t.lineDashOffset,lineJoin:t.lineJoin,lineWidth:t.lineWidth,miterLimit:t.miterLimit,strokeStyle:t.strokeStyle})}setContextTextState_(t){const e=this.context_,n=this.contextTextState_,i=t.textAlign?t.textAlign:Ba;n?(n.font!=t.font&&(n.font=t.font,e.font=t.font),n.textAlign!=i&&(n.textAlign=i,e.textAlign=i),n.textBaseline!=t.textBaseline&&(n.textBaseline=t.textBaseline,e.textBaseline=t.textBaseline)):(e.font=t.font,e.textAlign=i,e.textBaseline=t.textBaseline,this.contextTextState_={font:t.font,textAlign:i,textBaseline:t.textBaseline})}setFillStrokeStyle(t,e){if(t){const e=t.getColor();this.fillState_={fillStyle:Ta(e||Da)}}else this.fillState_=null;if(e){const t=e.getColor(),n=e.getLineCap(),i=e.getLineDash(),r=e.getLineDashOffset(),s=e.getLineJoin(),o=e.getWidth(),a=e.getMiterLimit(),l=i||Ga;this.strokeState_={lineCap:void 0!==n?n:za,lineDash:1===this.pixelRatio_?l:l.map((t=>t*this.pixelRatio_)),lineDashOffset:(r||0)*this.pixelRatio_,lineJoin:void 0!==s?s:ja,lineWidth:(void 0!==o?o:1)*this.pixelRatio_,miterLimit:void 0!==a?a:10,strokeStyle:Ta(t||Ya)}}else this.strokeState_=null}setImageStyle(t){let e;if(!t||!(e=t.getSize()))return void(this.image_=null);const n=t.getPixelRatio(this.pixelRatio_),i=t.getAnchor(),r=t.getOrigin();this.image_=t.getImage(this.pixelRatio_),this.imageAnchorX_=i[0]*n,this.imageAnchorY_=i[1]*n,this.imageHeight_=e[1]*n,this.imageOpacity_=t.getOpacity(),this.imageOriginX_=r[0],this.imageOriginY_=r[1],this.imageRotateWithView_=t.getRotateWithView(),this.imageRotation_=t.getRotation();const s=t.getScaleArray();this.imageScale_=[s[0]*this.pixelRatio_/n,s[1]*this.pixelRatio_/n],this.imageWidth_=e[0]*n}setTextStyle(t){if(t){const e=t.getFill();if(e){const t=e.getColor();this.textFillState_={fillStyle:Ta(t||Da)}}else this.textFillState_=null;const n=t.getStroke();if(n){const t=n.getColor(),e=n.getLineCap(),i=n.getLineDash(),r=n.getLineDashOffset(),s=n.getLineJoin(),o=n.getWidth(),a=n.getMiterLimit();this.textStrokeState_={lineCap:void 0!==e?e:za,lineDash:i||Ga,lineDashOffset:r||0,lineJoin:void 0!==s?s:ja,lineWidth:void 0!==o?o:1,miterLimit:void 0!==a?a:10,strokeStyle:Ta(t||Ya)}}else this.textStrokeState_=null;const i=t.getFont(),r=t.getOffsetX(),s=t.getOffsetY(),o=t.getRotateWithView(),a=t.getRotation(),l=t.getScaleArray(),u=t.getText(),h=t.getTextAlign(),c=t.getTextBaseline();this.textState_={font:void 0!==i?i:Fa,textAlign:void 0!==h?h:Ba,textBaseline:void 0!==c?c:Ua},this.text_=void 0!==u?Array.isArray(u)?u.reduce(((t,e,n)=>t+(n%2?" ":e)),""):u:"",this.textOffsetX_=void 0!==r?this.pixelRatio_*r:0,this.textOffsetY_=void 0!==s?this.pixelRatio_*s:0,this.textRotateWithView_=void 0!==o&&o,this.textRotation_=void 0!==a?a:0,this.textScale_=[this.pixelRatio_*l[0],this.pixelRatio_*l[1]]}else this.text_=""}},bf=.5;const Cf={Point:function(t,e,n,i,r,s){const o=n.getImage(),a=n.getText(),l=a&&a.getText(),u=s&&o&&l?{}:void 0;if(o){if(o.getImageState()!=Oo)return;const s=t.getBuilder(n.getZIndex(),"Image");s.setImageStyle(o,u),s.drawPoint(e,i,r)}if(l){const s=t.getBuilder(n.getZIndex(),"Text");s.setTextStyle(a,u),s.drawText(e,i,r)}},LineString:function(t,e,n,i,r){const s=n.getStroke();if(s){const o=t.getBuilder(n.getZIndex(),"LineString");o.setFillStrokeStyle(null,s),o.drawLineString(e,i,r)}const o=n.getText();if(o&&o.getText()){const s=t.getBuilder(n.getZIndex(),"Text");s.setTextStyle(o),s.drawText(e,i,r)}},Polygon:function(t,e,n,i,r){const s=n.getFill(),o=n.getStroke();if(s||o){const a=t.getBuilder(n.getZIndex(),"Polygon");a.setFillStrokeStyle(s,o),a.drawPolygon(e,i,r)}const a=n.getText();if(a&&a.getText()){const s=t.getBuilder(n.getZIndex(),"Text");s.setTextStyle(a),s.drawText(e,i,r)}},MultiPoint:function(t,e,n,i,r,s){const o=n.getImage(),a=o&&0!==o.getOpacity(),l=n.getText(),u=l&&l.getText(),h=s&&a&&u?{}:void 0;if(a){if(o.getImageState()!=Oo)return;const s=t.getBuilder(n.getZIndex(),"Image");s.setImageStyle(o,h),s.drawMultiPoint(e,i,r)}if(u){const s=t.getBuilder(n.getZIndex(),"Text");s.setTextStyle(l,h),s.drawText(e,i,r)}},MultiLineString:function(t,e,n,i,r){const s=n.getStroke();if(s){const o=t.getBuilder(n.getZIndex(),"LineString");o.setFillStrokeStyle(null,s),o.drawMultiLineString(e,i,r)}const o=n.getText();if(o&&o.getText()){const s=t.getBuilder(n.getZIndex(),"Text");s.setTextStyle(o),s.drawText(e,i,r)}},MultiPolygon:function(t,e,n,i,r){const s=n.getFill(),o=n.getStroke();if(o||s){const a=t.getBuilder(n.getZIndex(),"Polygon");a.setFillStrokeStyle(s,o),a.drawMultiPolygon(e,i,r)}const a=n.getText();if(a&&a.getText()){const s=t.getBuilder(n.getZIndex(),"Text");s.setTextStyle(a),s.drawText(e,i,r)}},GeometryCollection:function(t,e,n,i,r,s){const o=e.getGeometriesArray();let a,l;for(a=0,l=o.length;a<l;++a){(0,Cf[o[a].getType()])(t,o[a],n,i,r,s)}},Circle:function(t,e,n,i,r){const s=n.getFill(),o=n.getStroke();if(s||o){const a=t.getBuilder(n.getZIndex(),"Circle");a.setFillStrokeStyle(s,o),a.drawCircle(e,i,r)}const a=n.getText();if(a&&a.getText()){const r=t.getBuilder(n.getZIndex(),"Text");r.setTextStyle(a),r.drawText(e,i)}}};function If(t,e){return parseInt(On(t),10)-parseInt(On(e),10)}function Tf(t,e){const n=Rf(t,e);return n*n}function Rf(t,e){return.5*t/e}function Nf(t,e,n,i,r,s,o,a){const l=[],u=n.getImage();if(u){let t=!0;const e=u.getImageState();e==Oo||e==Ao?t=!1:e==Mo&&u.load(),t&&l.push(u.ready())}const h=n.getFill();h&&h.loading()&&l.push(h.ready());const c=l.length>0;return c&&Promise.all(l).then((()=>r(null))),function(t,e,n,i,r,s,o){const a=n.getGeometryFunction()(e);if(!a)return;const l=a.simplifyTransformed(i,r),u=n.getRenderer();if(u)Lf(t,l,n,e,o);else{(0,Cf[l.getType()])(t,l,n,e,o,s)}}(t,e,n,i,s,o,a),c}function Lf(t,e,n,i,r){if("GeometryCollection"==e.getType()){const s=e.getGeometries();for(let e=0,o=s.length;e<o;++e)Lf(t,s[e],n,i,r);return}t.getBuilder(n.getZIndex(),"Default").drawCustom(e,i,n.getRenderer(),n.getHitDetectionRenderer(),r)}const Mf=class extends Uc{constructor(t){super(t),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.animatingOrInteracting_,this.hitDetectionImageData_=null,this.clipped_=!1,this.renderedFeatures_=null,this.renderedRevision_=-1,this.renderedResolution_=NaN,this.renderedExtent_=[1/0,1/0,-1/0,-1/0],this.wrappedRenderedExtent_=[1/0,1/0,-1/0,-1/0],this.renderedRotation_,this.renderedCenter_=null,this.renderedProjection_=null,this.renderedPixelRatio_=1,this.renderedRenderOrder_=null,this.renderedFrameDeclutter_,this.replayGroup_=null,this.replayGroupChanged=!0,this.clipping=!0,this.targetContext_=null,this.opacity_=1}renderWorlds(t,e,n){const i=e.extent,r=e.viewState,s=r.center,o=r.resolution,a=r.projection,l=r.rotation,u=a.getExtent(),h=this.getLayer().getSource(),c=this.getLayer().getDeclutter(),d=e.pixelRatio,f=e.viewHints,g=!(f[gi]||f[pi]),p=this.context,m=Math.round(yr(i)/o*d),y=Math.round(fr(i)/o*d),_=h.getWrapX()&&a.canWrapX(),v=_?yr(u):null,x=_?Math.ceil((i[2]-u[2])/v)+1:1;let w=_?Math.floor((i[0]-u[0])/v):0;do{let i=this.getRenderTransform(s,o,0,d,m,y,w*v);e.declutter&&(i=i.slice(0)),t.execute(p,[p.canvas.width,p.canvas.height],i,l,g,void 0===n?vf:n?xf:wf,n?c&&e.declutter[c]:void 0)}while(++w<x)}setDrawContext_(){1!==this.opacity_&&(this.targetContext_=this.context,this.context=fa(this.context.canvas.width,this.context.canvas.height,Yc))}resetDrawContext_(){if(1!==this.opacity_){const t=this.targetContext_.globalAlpha;this.targetContext_.globalAlpha=this.opacity_,this.targetContext_.drawImage(this.context.canvas,0,0),this.targetContext_.globalAlpha=t,ma(this.context),Yc.push(this.context.canvas),this.context=this.targetContext_,this.targetContext_=null}}renderDeclutter(t){this.replayGroup_&&this.getLayer().getDeclutter()&&this.renderWorlds(this.replayGroup_,t,!0)}renderDeferredInternal(t){this.replayGroup_&&(this.replayGroup_.renderDeferred(),this.clipped_&&this.context.restore(),this.resetDrawContext_())}renderFrame(t,e){const n=t.layerStatesArray[t.layerIndex];this.opacity_=n.opacity;const i=t.viewState;this.prepareContainer(t,e);const r=this.context,s=this.replayGroup_;let o=s&&!s.isEmpty();if(!o){if(!(this.getLayer().hasListener(ui)||this.getLayer().hasListener(hi)))return null}this.setDrawContext_(),this.preRender(r,t);const a=i.projection;if(this.clipped_=!1,o&&n.extent&&this.clipping){const e=$r(n.extent,a);o=_r(e,t.extent),this.clipped_=o&&!Vi(e,t.extent),this.clipped_&&this.clipUnrotated(r,t,e)}return o&&this.renderWorlds(s,t,!this.getLayer().getDeclutter()&&void 0),!t.declutter&&this.clipped_&&r.restore(),this.postRender(r,t),this.renderedRotation_!==i.rotation&&(this.renderedRotation_=i.rotation,this.hitDetectionImageData_=null),t.declutter||this.resetDrawContext_(),this.container}getFeatures(t){return new Promise((e=>{if(this.frameState&&!this.hitDetectionImageData_&&!this.animatingOrInteracting_){const t=this.frameState.size.slice(),e=this.renderedCenter_,n=this.renderedResolution_,i=this.renderedRotation_,r=this.renderedProjection_,s=this.wrappedRenderedExtent_,o=this.getLayer(),a=[],l=t[0]*bf,u=t[1]*bf;a.push(this.getRenderTransform(e,n,i,bf,l,u,0).slice());const h=o.getSource(),c=r.getExtent();if(h.getWrapX()&&r.canWrapX()&&!Vi(c,s)){let t=s[0];const r=yr(c);let o,h=0;for(;t<c[0];)--h,o=r*h,a.push(this.getRenderTransform(e,n,i,bf,l,u,o).slice()),t+=r;for(h=0,t=s[2];t>c[2];)++h,o=r*h,a.push(this.getRenderTransform(e,n,i,bf,l,u,o).slice()),t-=r}const d=Vr();this.hitDetectionImageData_=function(t,e,n,i,r,s,o,a,l){const u=l?Zr(r,l):r,h=fa(t[0]*bf,t[1]*bf);h.imageSmoothingEnabled=!1;const c=h.canvas,d=new Sf(h,bf,r,null,o,a,l?Br(Vr(),l):null),f=n.length,g=Math.floor(16777215/f),p={};for(let y=1;y<=f;++y){const t=n[y-1],e=t.getStyleFunction()||i;if(!e)continue;let r=e(t,s);if(!r)continue;Array.isArray(r)||(r=[r]);const o=(y*g).toString(16).padStart(7,"#00000");for(let n=0,i=r.length;n<i;++n){const e=r[n],i=e.getGeometryFunction()(t);if(!i||!_r(u,i.getExtent()))continue;const s=e.clone(),a=s.getFill();a&&a.setColor(o);const l=s.getStroke();l&&(l.setColor(o),l.setLineDash(null)),s.setText(void 0);const h=e.getImage();if(h){const t=h.getImageSize();if(!t)continue;const e=fa(t[0],t[1],void 0,{alpha:!1}),n=e.canvas;e.fillStyle=o,e.fillRect(0,0,n.width,n.height),s.setImage(new ml({img:n,anchor:h.getAnchor(),anchorXUnits:"pixels",anchorYUnits:"pixels",offset:h.getOrigin(),opacity:1,size:h.getSize(),scale:h.getScale(),rotation:h.getRotation(),rotateWithView:h.getRotateWithView()}))}const c=s.getZIndex()||0;let d=p[c];d||(d={},p[c]=d,d.Polygon=[],d.Circle=[],d.LineString=[],d.Point=[]);const f=i.getType();if("GeometryCollection"===f){const t=i.getGeometriesArrayRecursive();for(let e=0,n=t.length;e<n;++e){const n=t[e];d[n.getType().replace("Multi","")].push(n,s)}}else d[f.replace("Multi","")].push(i,s)}}const m=Object.keys(p).map(Number).sort(rn);for(let y=0,_=m.length;y<_;++y){const t=p[m[y]];for(const n in t){const i=t[n];for(let t=0,n=i.length;t<n;t+=2){d.setStyle(i[t+1]);for(let n=0,r=e.length;n<r;++n)d.setTransform(e[n]),d.drawGeometry(i[t])}}}return h.getImageData(0,0,c.width,c.height)}(t,a,this.renderedFeatures_,o.getStyleFunction(),s,n,i,Tf(n,this.renderedPixelRatio_),d?r:null)}e(function(t,e,n){const i=[];if(n){const r=Math.floor(Math.round(t[0])*bf),s=Math.floor(Math.round(t[1])*bf),o=4*(Qn(r,0,n.width-1)+Qn(s,0,n.height-1)*n.width),a=n.data[o],l=n.data[o+1],u=n.data[o+2]+256*(l+256*a),h=Math.floor(16777215/e.length);u&&u%h===0&&i.push(e[u/h-1])}return i}(t,this.renderedFeatures_,this.hitDetectionImageData_))}))}forEachFeatureAtCoordinate(t,e,n,i,r){if(!this.replayGroup_)return;const s=e.viewState.resolution,o=e.viewState.rotation,a=this.getLayer(),l={},u=function(t,e,n){const s=On(t),o=l[s];if(o){if(!0!==o&&n<o.distanceSq){if(0===n)return l[s]=!0,r.splice(r.lastIndexOf(o),1),i(t,a,e);o.geometry=e,o.distanceSq=n}}else{if(0===n)return l[s]=!0,i(t,a,e);r.push(l[s]={feature:t,layer:a,geometry:e,distanceSq:n,callback:i})}};let h;const c=[this.replayGroup_],d=this.getLayer().getDeclutter();return c.some((i=>h=i.forEachFeatureAtCoordinate(t,s,o,n,u,d&&e.declutter[d]?e.declutter[d].all().map((t=>t.value)):null))),h}handleFontsChanged(){const t=this.getLayer();t.getVisible()&&this.replayGroup_&&t.changed()}handleStyleImageChange_(t){this.renderIfReadyAndVisible()}prepareFrame(t){const e=this.getLayer(),n=e.getSource();if(!n)return!1;const i=t.viewHints[gi],r=t.viewHints[pi],s=e.getUpdateWhileAnimating(),o=e.getUpdateWhileInteracting();if(this.ready&&!s&&i||!o&&r)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;const a=t.extent,l=t.viewState,u=l.projection,h=l.resolution,c=t.pixelRatio,d=e.getRevision(),f=e.getRenderBuffer();let g=e.getRenderOrder();void 0===g&&(g=If);const p=l.center.slice(),m=Ui(a,f*h),y=m.slice(),_=[m.slice()],v=u.getExtent();if(n.getWrapX()&&u.canWrapX()&&!Vi(v,t.extent)){const t=yr(v),e=Math.max(yr(m)/2,t);m[0]=v[0]-e,m[2]=v[2]+e,br(p,u);const n=wr(_[0],u);n[0]<v[0]&&n[2]<v[2]?_.push([n[0]+t,n[1],n[2]+t,n[3]]):n[0]>v[0]&&n[2]>v[2]&&_.push([n[0]-t,n[1],n[2]-t,n[3]])}if(this.ready&&this.renderedResolution_==h&&this.renderedRevision_==d&&this.renderedRenderOrder_==g&&this.renderedFrameDeclutter_===!!t.declutter&&Vi(this.wrappedRenderedExtent_,m))return ln(this.renderedExtent_,y)||(this.hitDetectionImageData_=null,this.renderedExtent_=y),this.renderedCenter_=p,this.replayGroupChanged=!1,!0;this.replayGroup_=null;const x=new of(Rf(h,c),m,h,c),w=Vr();let k;if(w){for(let t=0,e=_.length;t<e;++t){const e=Zr(_[t],u);n.loadFeatures(e,Jr(h,u),w)}k=Br(w,u)}else for(let N=0,L=_.length;N<L;++N)n.loadFeatures(_[N],h,u);const E=Tf(h,c);let S=!0;const b=(t,n)=>{let i;const r=t.getStyleFunction()||e.getStyleFunction();if(r&&(i=r(t,h)),i){const e=this.renderFeature(t,E,i,x,k,this.getLayer().getDeclutter(),n);S=S&&!e}},C=Zr(m,u),I=n.getFeaturesInExtent(C);g&&I.sort(g);for(let N=0,L=I.length;N<L;++N)b(I[N],N);this.renderedFeatures_=I,this.ready=S;const T=x.finish(),R=new Ef(m,h,c,n.getOverlaps(),T,e.getRenderBuffer(),!!t.declutter);return this.renderedResolution_=h,this.renderedRevision_=d,this.renderedRenderOrder_=g,this.renderedFrameDeclutter_=!!t.declutter,this.renderedExtent_=y,this.wrappedRenderedExtent_=m,this.renderedCenter_=p,this.renderedProjection_=u,this.renderedPixelRatio_=c,this.replayGroup_=R,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0}renderFeature(t,e,n,i,r,s,o){if(!n)return!1;let a=!1;if(Array.isArray(n))for(let l=0,u=n.length;l<u;++l)a=Nf(i,t,n[l],e,this.boundHandleStyleImageChange_,r,s,o)||a;else a=Nf(i,t,n,e,this.boundHandleStyleImageChange_,r,s,o);return a}};const Pf=class extends dh{constructor(t){super(t)}createRenderer(){return new Mf(this)}};const Of=class{constructor(t){this.rbush_=new _o(t),this.items_={}}insert(t,e){const n={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3],value:e};this.rbush_.insert(n),this.items_[On(e)]=n}load(t,e){const n=new Array(e.length);for(let i=0,r=e.length;i<r;i++){const r=t[i],s=e[i],o={minX:r[0],minY:r[1],maxX:r[2],maxY:r[3],value:s};n[i]=o,this.items_[On(s)]=o}this.rbush_.load(n)}remove(t){const e=On(t),n=this.items_[e];return delete this.items_[e],null!==this.rbush_.remove(n)}update(t,e){const n=this.items_[On(e)];er([n.minX,n.minY,n.maxX,n.maxY],t)||(this.remove(e),this.insert(t,e))}getAll(){return this.rbush_.all().map((function(t){return t.value}))}getInExtent(t){const e={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3]};return this.rbush_.search(e).map((function(t){return t.value}))}forEach(t){return this.forEach_(this.getAll(),t)}forEachInExtent(t,e){return this.forEach_(this.getInExtent(t),e)}forEach_(t,e){let n;for(let i=0,r=t.length;i<r;i++)if(n=e(t[i]),n)return n;return n}isEmpty(){return pn(this.items_)}clear(){this.rbush_.clear(),this.items_={}}getExtent(t){const e=this.rbush_.toJSON();return $i(e.minX,e.minY,e.maxX,e.maxY,t)}concat(t){this.rbush_.load(t.rbush_.all());for(const e in t.items_)this.items_[e]=t.items_[e]}};function Af(t,e,n,i,r,s,o){let a,l;const u=(n-e)/i;if(1===u)a=e;else if(2===u)a=e,l=r;else if(0!==u){let s=t[e],o=t[e+1],u=0;const h=[0];for(let r=e+i;r<n;r+=i){const e=t[r],n=t[r+1];u+=Math.sqrt((e-s)*(e-s)+(n-o)*(n-o)),h.push(u),s=e,o=n}const c=r*u,d=function(t,e,n){let i,r;n=n||rn;let s=0,o=t.length,a=!1;for(;s<o;)i=s+(o-s>>1),r=+n(t[i],e),r<0?s=i+1:(o=i,a=!r);return a?s:~s}(h,c);d<0?(l=(c-h[-d-2])/(h[-d-1]-h[-d-2]),a=e+(-d-2)*i):a=e+d*i}o=o>1?o:2,s=s||new Array(o);for(let h=0;h<o;++h)s[h]=void 0===a?NaN:void 0===l?t[a+h]:ri(t[a+h],t[a+i+h],l);return s}function Ff(t,e,n,i,r,s){if(n==e)return null;let o;if(r<t[e+i-1])return s?(o=t.slice(e,e+i),o[i-1]=r,o):null;if(t[n-1]<r)return s?(o=t.slice(n-i,n),o[i-1]=r,o):null;if(r==t[e+i-1])return t.slice(e,e+i);let a=e/i,l=n/i;for(;a<l;){const e=a+l>>1;r<t[(e+1)*i-1]?l=e:a=e+1}const u=t[a*i-1];if(r==u)return t.slice((a-1)*i,(a-1)*i+i);const h=(r-u)/(t[(a+1)*i-1]-u);o=[];for(let c=0;c<i-1;++c)o.push(ri(t[(a-1)*i+c],t[a*i+c],h));return o.push(r),o}function Df(t,e,n,i){const r=[];let s=[1/0,1/0,-1/0,-1/0];for(let o=0,a=n.length;o<a;++o){const a=n[o];s=tr(t,e,a[0],i),r.push((s[0]+s[2])/2,(s[1]+s[3])/2),e=a[a.length-1]}return r}const zf=[1,0,0,1,0,0];class Gf{constructor(t,e,n,i,r,s){this.styleFunction,this.extent_,this.id_=s,this.type_=t,this.flatCoordinates_=e,this.flatInteriorPoints_=null,this.flatMidpoints_=null,this.ends_=n||null,this.properties_=r,this.squaredTolerance_,this.stride_=i,this.simplifiedGeometry_}get(t){return this.properties_[t]}getExtent(){return this.extent_||(this.extent_="Point"===this.type_?Qi(this.flatCoordinates_):tr(this.flatCoordinates_,0,this.flatCoordinates_.length,2)),this.extent_}getFlatInteriorPoint(){if(!this.flatInteriorPoints_){const t=hr(this.getExtent());this.flatInteriorPoints_=Vs(this.flatCoordinates_,0,this.ends_,2,t,0)}return this.flatInteriorPoints_}getFlatInteriorPoints(){if(!this.flatInteriorPoints_){const t=function(t,e){const n=[];let i,r=0,s=0;for(let o=0,a=e.length;o<a;++o){const a=e[o],l=to(t,r,a,2);if(void 0===i&&(i=l),l===i)n.push(e.slice(s,o+1));else{if(0===n.length)continue;n[n.length-1].push(e[s])}s=o+1,r=a}return n}(this.flatCoordinates_,this.ends_),e=Df(this.flatCoordinates_,0,t,2);this.flatInteriorPoints_=Hs(this.flatCoordinates_,0,t,2,e)}return this.flatInteriorPoints_}getFlatMidpoint(){return this.flatMidpoints_||(this.flatMidpoints_=Af(this.flatCoordinates_,0,this.flatCoordinates_.length,2,.5)),this.flatMidpoints_}getFlatMidpoints(){if(!this.flatMidpoints_){this.flatMidpoints_=[];const t=this.flatCoordinates_;let e=0;const n=this.ends_;for(let i=0,r=n.length;i<r;++i){const r=n[i],s=Af(t,e,r,2,.5);an(this.flatMidpoints_,s),e=r}}return this.flatMidpoints_}getId(){return this.id_}getOrientedFlatCoordinates(){return this.flatCoordinates_}getGeometry(){return this}getSimplifiedGeometry(t){return this}simplifyTransformed(t,e){return this}getProperties(){return this.properties_}getPropertiesInternal(){return this.properties_}getStride(){return this.stride_}getStyleFunction(){return this.styleFunction}getType(){return this.type_}transform(t){const e=(t=Fr(t)).getExtent(),n=t.getWorldExtent();if(e&&n){const t=fr(n)/fr(e);cs(zf,n[0],n[3],t,-t,0,0,0),ps(this.flatCoordinates_,0,this.flatCoordinates_.length,2,zf,this.flatCoordinates_)}}applyTransform(t){t(this.flatCoordinates_,this.flatCoordinates_,this.stride_)}clone(){return new Gf(this.type_,this.flatCoordinates_.slice(),this.ends_?.slice(),this.stride_,Object.assign({},this.properties_),this.id_)}getEnds(){return this.ends_}enableSimplifyTransformed(){return this.simplifyTransformed=dn(((t,e)=>{if(t===this.squaredTolerance_)return this.simplifiedGeometry_;this.simplifiedGeometry_=this.clone(),e&&this.simplifiedGeometry_.applyTransform(e);const n=this.simplifiedGeometry_.getFlatCoordinates();let i;switch(this.type_){case"LineString":n.length=Ns(n,0,this.simplifiedGeometry_.flatCoordinates_.length,this.simplifiedGeometry_.stride_,t,n,0),i=[n.length];break;case"MultiLineString":i=[],n.length=Ls(n,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,t,n,0,i);break;case"Polygon":i=[],n.length=Os(n,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,Math.sqrt(t),n,0,i)}return i&&(this.simplifiedGeometry_=new Gf(this.type_,n,i,2,this.properties_,this.id_)),this.squaredTolerance_=t,this.simplifiedGeometry_})),this}}Gf.prototype.getFlatCoordinates=Gf.prototype.getOrientedFlatCoordinates;const jf=Gf,Yf="addfeature",Bf="changefeature",Uf="clear",Xf="removefeature",qf="featuresloadstart",Wf="featuresloadend",Vf="featuresloaderror";function Hf(t,e){return[[-1/0,-1/0,1/0,1/0]]}let Kf=!1;function Zf(t,e){return function(n,i,r,s,o){const a=this;!function(t,e,n,i,r,s,o){const a=new XMLHttpRequest;a.open("GET","function"===typeof t?t(n,i,r):t,!0),"arraybuffer"==e.getType()&&(a.responseType="arraybuffer"),a.withCredentials=Kf,a.onload=function(t){if(!a.status||a.status>=200&&a.status<300){const t=e.getType();try{let i;"text"==t||"json"==t?i=a.responseText:"xml"==t?i=a.responseXML||a.responseText:"arraybuffer"==t&&(i=a.response),i?s(e.readFeatures(i,{extent:n,featureProjection:r}),e.readProjection(i)):o()}catch{o()}}else o()},a.onerror=o,a.send()}(t,e,n,i,r,(function(t,e){a.addFeatures(t),void 0!==s&&s(t)}),o||cn)}}class $f extends tn{constructor(t,e,n){super(t),this.feature=e,this.features=n}}const Jf=class extends Ed{constructor(t){super({attributions:(t=t||{}).attributions,interpolate:!0,projection:void 0,state:"ready",wrapX:void 0===t.wrapX||t.wrapX}),this.on,this.once,this.un,this.loader_=cn,this.format_=t.format||null,this.overlaps_=void 0===t.overlaps||t.overlaps,this.url_=t.url,void 0!==t.loader?this.loader_=t.loader:void 0!==this.url_&&(Jn(this.format_,"`format` must be set when `url` is set"),this.loader_=Zf(this.url_,this.format_)),this.strategy_=void 0!==t.strategy?t.strategy:Hf;const e=void 0===t.useSpatialIndex||t.useSpatialIndex;let n,i;this.featuresRtree_=e?new Of:null,this.loadedExtentsRtree_=new Of,this.loadingExtentsCount_=0,this.nullGeometryFeatures_={},this.idIndex_={},this.uidIndex_={},this.featureChangeKeys_={},this.featuresCollection_=null,Array.isArray(t.features)?i=t.features:t.features&&(n=t.features,i=n.getArray()),e||void 0!==n||(n=new Yn(i)),void 0!==i&&this.addFeaturesInternal(i),void 0!==n&&this.bindFeaturesCollection_(n)}addFeature(t){this.addFeatureInternal(t),this.changed()}addFeatureInternal(t){const e=On(t);if(!this.addToIndex_(e,t))return void(this.featuresCollection_&&this.featuresCollection_.remove(t));this.setupChangeEvents_(e,t);const n=t.getGeometry();if(n){const e=n.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(e,t)}else this.nullGeometryFeatures_[e]=t;this.dispatchEvent(new $f(Yf,t))}setupChangeEvents_(t,e){e instanceof jf||(this.featureChangeKeys_[t]=[In(e,yn,this.handleFeatureChange_,this),In(e,en,this.handleFeatureChange_,this)])}addToIndex_(t,e){let n=!0;if(void 0!==e.getId()){const t=String(e.getId());if(t in this.idIndex_)if(e instanceof jf){const i=this.idIndex_[t];i instanceof jf?Array.isArray(i)?i.push(e):this.idIndex_[t]=[i,e]:n=!1}else n=!1;else this.idIndex_[t]=e}return n&&(Jn(!(t in this.uidIndex_),"The passed `feature` was already added to the source"),this.uidIndex_[t]=e),n}addFeatures(t){this.addFeaturesInternal(t),this.changed()}addFeaturesInternal(t){const e=[],n=[],i=[];for(let r=0,s=t.length;r<s;r++){const e=t[r],i=On(e);this.addToIndex_(i,e)&&n.push(e)}for(let r=0,s=n.length;r<s;r++){const t=n[r],s=On(t);this.setupChangeEvents_(s,t);const o=t.getGeometry();if(o){const n=o.getExtent();e.push(n),i.push(t)}else this.nullGeometryFeatures_[s]=t}if(this.featuresRtree_&&this.featuresRtree_.load(e,i),this.hasListener(Yf))for(let r=0,s=n.length;r<s;r++)this.dispatchEvent(new $f(Yf,n[r]))}bindFeaturesCollection_(t){let e=!1;this.addEventListener(Yf,(function(n){e||(e=!0,t.push(n.feature),e=!1)})),this.addEventListener(Xf,(function(n){e||(e=!0,t.remove(n.feature),e=!1)})),t.addEventListener(Dn,(t=>{e||(e=!0,this.addFeature(t.element),e=!1)})),t.addEventListener(zn,(t=>{e||(e=!0,this.removeFeature(t.element),e=!1)})),this.featuresCollection_=t}clear(t){if(t){for(const t in this.featureChangeKeys_){this.featureChangeKeys_[t].forEach(Rn)}this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_){const t=t=>{this.removeFeatureInternal(t)};this.featuresRtree_.forEach(t);for(const e in this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[e])}this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};const e=new $f(Uf);this.dispatchEvent(e),this.changed()}forEachFeature(t){if(this.featuresRtree_)return this.featuresRtree_.forEach(t);this.featuresCollection_&&this.featuresCollection_.forEach(t)}forEachFeatureAtCoordinateDirect(t,e){const n=[t[0],t[1],t[0],t[1]];return this.forEachFeatureInExtent(n,(function(n){const i=n.getGeometry();if(i instanceof jf||i.intersectsCoordinate(t))return e(n)}))}forEachFeatureInExtent(t,e){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(t,e);this.featuresCollection_&&this.featuresCollection_.forEach(e)}forEachFeatureIntersectingExtent(t,e){return this.forEachFeatureInExtent(t,(function(n){const i=n.getGeometry();if(i instanceof jf||i.intersectsExtent(t)){const t=e(n);if(t)return t}}))}getFeaturesCollection(){return this.featuresCollection_}getFeatures(){let t;return this.featuresCollection_?t=this.featuresCollection_.getArray().slice(0):this.featuresRtree_&&(t=this.featuresRtree_.getAll(),pn(this.nullGeometryFeatures_)||an(t,Object.values(this.nullGeometryFeatures_))),t}getFeaturesAtCoordinate(t){const e=[];return this.forEachFeatureAtCoordinateDirect(t,(function(t){e.push(t)})),e}getFeaturesInExtent(t,e){if(this.featuresRtree_){if(!(e&&e.canWrapX()&&this.getWrapX()))return this.featuresRtree_.getInExtent(t);const n=kr(t,e);return[].concat(...n.map((t=>this.featuresRtree_.getInExtent(t))))}return this.featuresCollection_?this.featuresCollection_.getArray().slice(0):[]}getClosestFeatureToCoordinate(t,e){const n=t[0],i=t[1];let r=null;const s=[NaN,NaN];let o=1/0;const a=[-1/0,-1/0,1/0,1/0];return e=e||un,this.featuresRtree_.forEachInExtent(a,(function(t){if(e(t)){const e=t.getGeometry(),l=o;if(o=e instanceof jf?0:e.closestPointXY(n,i,s,o),o<l){r=t;const e=Math.sqrt(o);a[0]=n-e,a[1]=i-e,a[2]=n+e,a[3]=i+e}}})),r}getExtent(t){return this.featuresRtree_.getExtent(t)}getFeatureById(t){const e=this.idIndex_[t.toString()];return void 0!==e?e:null}getFeatureByUid(t){const e=this.uidIndex_[t];return void 0!==e?e:null}getFormat(){return this.format_}getOverlaps(){return this.overlaps_}getUrl(){return this.url_}handleFeatureChange_(t){const e=t.target,n=On(e),i=e.getGeometry();if(i){const t=i.getExtent();n in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[n],this.featuresRtree_&&this.featuresRtree_.insert(t,e)):this.featuresRtree_&&this.featuresRtree_.update(t,e)}else n in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(e),this.nullGeometryFeatures_[n]=e);const r=e.getId();if(void 0!==r){const t=r.toString();this.idIndex_[t]!==e&&(this.removeFromIdIndex_(e),this.idIndex_[t]=e)}else this.removeFromIdIndex_(e),this.uidIndex_[n]=e;this.changed(),this.dispatchEvent(new $f(Bf,e))}hasFeature(t){const e=t.getId();return void 0!==e?e in this.idIndex_:On(t)in this.uidIndex_}isEmpty(){return this.featuresRtree_?this.featuresRtree_.isEmpty()&&pn(this.nullGeometryFeatures_):!this.featuresCollection_||0===this.featuresCollection_.getLength()}loadFeatures(t,e,n){const i=this.loadedExtentsRtree_,r=this.strategy_(t,e,n);for(let s=0,o=r.length;s<o;++s){const t=r[s],o=i.forEachInExtent(t,(function(e){return Vi(e.extent,t)}));o||(++this.loadingExtentsCount_,this.dispatchEvent(new $f(qf)),this.loader_.call(this,t,e,n,(t=>{--this.loadingExtentsCount_,this.dispatchEvent(new $f(Wf,void 0,t))}),(()=>{--this.loadingExtentsCount_,this.dispatchEvent(new $f(Vf))})),i.insert(t,{extent:t.slice()}))}this.loading=!(this.loader_.length<4)&&this.loadingExtentsCount_>0}refresh(){this.clear(!0),this.loadedExtentsRtree_.clear(),super.refresh()}removeLoadedExtent(t){const e=this.loadedExtentsRtree_;let n;e.forEachInExtent(t,(function(e){if(er(e.extent,t))return n=e,!0})),n&&e.remove(n)}removeFeatures(t){let e=!1;for(let n=0,i=t.length;n<i;++n)e=this.removeFeatureInternal(t[n])||e;e&&this.changed()}removeFeature(t){if(!t)return;this.removeFeatureInternal(t)&&this.changed()}removeFeatureInternal(t){const e=On(t);if(!(e in this.uidIndex_))return!1;e in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[e]:this.featuresRtree_&&this.featuresRtree_.remove(t);const n=this.featureChangeKeys_[e];n?.forEach(Rn),delete this.featureChangeKeys_[e];const i=t.getId();if(void 0!==i){const e=i.toString(),n=this.idIndex_[e];n===t?delete this.idIndex_[e]:Array.isArray(n)&&(n.splice(n.indexOf(t),1),1===n.length&&(this.idIndex_[e]=n[0]))}return delete this.uidIndex_[e],this.hasListener(Xf)&&this.dispatchEvent(new $f(Xf,t)),!0}removeFromIdIndex_(t){for(const e in this.idIndex_)if(this.idIndex_[e]===t){delete this.idIndex_[e];break}}setLoader(t){this.loader_=t}setUrl(t){Jn(this.format_,"`format` must be set when `url` is set"),this.url_=t,this.setLoader(Zf(t,this.format_))}};class Qf extends Fn{constructor(t){if(super(),this.on,this.once,this.un,this.id_=void 0,this.geometryName_="geometry",this.style_=null,this.styleFunction_=void 0,this.geometryChangeKey_=null,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),t)if("function"===typeof t.getSimplifiedGeometry){const e=t;this.setGeometry(e)}else{const e=t;this.setProperties(e)}}clone(){const t=new Qf(this.hasProperties()?this.getProperties():null);t.setGeometryName(this.getGeometryName());const e=this.getGeometry();e&&t.setGeometry(e.clone());const n=this.getStyle();return n&&t.setStyle(n),t}getGeometry(){return this.get(this.geometryName_)}getId(){return this.id_}getGeometryName(){return this.geometryName_}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}handleGeometryChange_(){this.changed()}handleGeometryChanged_(){this.geometryChangeKey_&&(Rn(this.geometryChangeKey_),this.geometryChangeKey_=null);const t=this.getGeometry();t&&(this.geometryChangeKey_=In(t,yn,this.handleGeometryChange_,this)),this.changed()}setGeometry(t){this.set(this.geometryName_,t)}setStyle(t){this.style_=t,this.styleFunction_=t?function(t){if("function"===typeof t)return t;let e;if(Array.isArray(t))e=t;else{Jn("function"===typeof t.getZIndex,"Expected an `ol/style/Style` or an array of `ol/style/Style.js`");e=[t]}return function(){return e}}(t):void 0,this.changed()}setId(t){this.id_=t,this.changed()}setGeometryName(t){this.removeChangeListener(this.geometryName_,this.handleGeometryChanged_),this.geometryName_=t,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),this.handleGeometryChanged_()}}const tg=Qf;class eg extends ws{constructor(t,e){super(),this.flatMidpoint_=null,this.flatMidpointRevision_=-1,this.maxDelta_=-1,this.maxDeltaRevision_=-1,void 0===e||Array.isArray(t[0])?this.setCoordinates(t,e):this.setFlatCoordinates(e,t)}appendCoordinate(t){an(this.flatCoordinates,t),this.changed()}clone(){const t=new eg(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t}closestPointXY(t,e,n,i){return i<qi(this.getExtent(),t,e)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Es(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),bs(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,t,e,n,i))}forEachSegment(t){return Ks(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)}getCoordinateAtM(t,e){return"XYM"!=this.layout&&"XYZM"!=this.layout?null:(e=void 0!==e&&e,Ff(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e))}getCoordinates(){return As(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinateAt(t,e){return Af(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e,this.stride)}getLength(){return lf(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getFlatMidpoint(){return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_??void 0),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_}getSimplifiedGeometryInternal(t){const e=[];return e.length=Ns(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e,0),new eg(e,"XY")}getType(){return"LineString"}intersectsExtent(t){return Zs(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)}setCoordinates(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Is(this.flatCoordinates,0,t,this.stride),this.changed()}}const ng=eg;class ig extends ws{constructor(t,e){super(),e&&!Array.isArray(t[0])?this.setFlatCoordinates(e,t):this.setCoordinates(t,e)}appendPoint(t){an(this.flatCoordinates,t.getFlatCoordinates()),this.changed()}clone(){const t=new ig(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t}closestPointXY(t,e,n,i){if(i<qi(this.getExtent(),t,e))return i;const r=this.flatCoordinates,s=this.stride;for(let o=0,a=r.length;o<a;o+=s){const a=ei(t,e,r[o],r[o+1]);if(a<i){i=a;for(let t=0;t<s;++t)n[t]=r[o+t];n.length=s}}return i}getCoordinates(){return As(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getPoint(t){const e=this.flatCoordinates.length/this.stride;return t<0||e<=t?null:new Us(this.flatCoordinates.slice(t*this.stride,(t+1)*this.stride),this.layout)}getPoints(){const t=this.flatCoordinates,e=this.layout,n=this.stride,i=[];for(let r=0,s=t.length;r<s;r+=n){const s=new Us(t.slice(r,r+n),e);i.push(s)}return i}getType(){return"MultiPoint"}intersectsExtent(t){const e=this.flatCoordinates,n=this.stride;for(let i=0,r=e.length;i<r;i+=n){if(Hi(t,e[i],e[i+1]))return!0}return!1}setCoordinates(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Is(this.flatCoordinates,0,t,this.stride),this.changed()}}const rg=ig;class sg extends ws{constructor(t,e,n){if(super(),this.ends_=[],this.maxDelta_=-1,this.maxDeltaRevision_=-1,Array.isArray(t[0]))this.setCoordinates(t,e);else if(void 0!==e&&n)this.setFlatCoordinates(e,t),this.ends_=n;else{const e=t,n=[],i=[];for(let t=0,s=e.length;t<s;++t){an(n,e[t].getFlatCoordinates()),i.push(n.length)}const r=0===e.length?this.getLayout():e[0].getLayout();this.setFlatCoordinates(r,n),this.ends_=i}}appendLineString(t){an(this.flatCoordinates,t.getFlatCoordinates().slice()),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const t=new sg(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return t.applyProperties(this),t}closestPointXY(t,e,n,i){return i<qi(this.getExtent(),t,e)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Ss(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Cs(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!1,t,e,n,i))}getCoordinateAtM(t,e,n){return"XYM"!=this.layout&&"XYZM"!=this.layout||0===this.flatCoordinates.length?null:(e=void 0!==e&&e,n=void 0!==n&&n,function(t,e,n,i,r,s,o){if(o)return Ff(t,e,n[n.length-1],i,r,s);let a;if(r<t[i-1])return s?(a=t.slice(0,i),a[i-1]=r,a):null;if(t[t.length-1]<r)return s?(a=t.slice(t.length-i),a[i-1]=r,a):null;for(let l=0,u=n.length;l<u;++l){const s=n[l];if(e!=s){if(r<t[e+i-1])return null;if(r<=t[s-1])return Ff(t,e,s,i,r,!1);e=s}}return null}(this.flatCoordinates,0,this.ends_,this.stride,t,e,n))}getCoordinates(){return Fs(this.flatCoordinates,0,this.ends_,this.stride)}getEnds(){return this.ends_}getLineString(t){return t<0||this.ends_.length<=t?null:new ng(this.flatCoordinates.slice(0===t?0:this.ends_[t-1],this.ends_[t]),this.layout)}getLineStrings(){const t=this.flatCoordinates,e=this.ends_,n=this.layout,i=[];let r=0;for(let s=0,o=e.length;s<o;++s){const o=e[s],a=new ng(t.slice(r,o),n);i.push(a),r=o}return i}getFlatMidpoints(){const t=[],e=this.flatCoordinates;let n=0;const i=this.ends_,r=this.stride;for(let s=0,o=i.length;s<o;++s){const o=i[s];an(t,Af(e,n,o,r,.5)),n=o}return t}getSimplifiedGeometryInternal(t){const e=[],n=[];return e.length=Ls(this.flatCoordinates,0,this.ends_,this.stride,t,e,0,n),new sg(e,"XY",n)}getType(){return"MultiLineString"}intersectsExtent(t){return function(t,e,n,i,r){for(let s=0,o=n.length;s<o;++s){if(Zs(t,e,n[s],i,r))return!0;e=n[s]}return!1}(this.flatCoordinates,0,this.ends_,this.stride,t)}setCoordinates(t,e){this.setLayout(e,t,2),this.flatCoordinates||(this.flatCoordinates=[]);const n=Ts(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=0===n.length?0:n[n.length-1],this.changed()}}const og=sg;class ag extends ws{constructor(t,e,n){if(super(),this.endss_=[],this.flatInteriorPointsRevision_=-1,this.flatInteriorPoints_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,!n&&!Array.isArray(t[0])){const i=t,r=[],s=[];for(let t=0,e=i.length;t<e;++t){const e=i[t],n=r.length,o=e.getEnds();for(let t=0,i=o.length;t<i;++t)o[t]+=n;an(r,e.getFlatCoordinates()),s.push(o)}e=0===i.length?this.getLayout():i[0].getLayout(),t=r,n=s}void 0!==e&&n?(this.setFlatCoordinates(e,t),this.endss_=n):this.setCoordinates(t,e)}appendPolygon(t){let e;if(this.flatCoordinates){const n=this.flatCoordinates.length;an(this.flatCoordinates,t.getFlatCoordinates()),e=t.getEnds().slice();for(let t=0,i=e.length;t<i;++t)e[t]+=n}else this.flatCoordinates=t.getFlatCoordinates().slice(),e=t.getEnds().slice(),this.endss_.push();this.endss_.push(e),this.changed()}clone(){const t=this.endss_.length,e=new Array(t);for(let i=0;i<t;++i)e[i]=this.endss_[i].slice();const n=new ag(this.flatCoordinates.slice(),this.layout,e);return n.applyProperties(this),n}closestPointXY(t,e,n,i){return i<qi(this.getExtent(),t,e)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(function(t,e,n,i,r){for(let s=0,o=n.length;s<o;++s){const o=n[s];r=Ss(t,e,o,i,r),e=o[o.length-1]}return r}(this.flatCoordinates,0,this.endss_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),function(t,e,n,i,r,s,o,a,l,u,h){h=h||[NaN,NaN];for(let c=0,d=n.length;c<d;++c){const d=n[c];u=Cs(t,e,d,i,r,s,o,a,l,u,h),e=d[d.length-1]}return u}(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,!0,t,e,n,i))}containsXY(t,e){return function(t,e,n,i,r,s){if(0===n.length)return!1;for(let o=0,a=n.length;o<a;++o){const a=n[o];if(Ws(t,e,a,i,r,s))return!0;e=a[a.length-1]}return!1}(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t,e)}getArea(){return function(t,e,n,i){let r=0;for(let s=0,o=n.length;s<o;++s){const o=n[s];r+=Gs(t,e,o,i),e=o[o.length-1]}return r}(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)}getCoordinates(t){let e;return void 0!==t?(e=this.getOrientedFlatCoordinates().slice(),ro(e,0,this.endss_,this.stride,t)):e=this.flatCoordinates,Ds(e,0,this.endss_,this.stride)}getEndss(){return this.endss_}getFlatInteriorPoints(){if(this.flatInteriorPointsRevision_!=this.getRevision()){const t=Df(this.flatCoordinates,0,this.endss_,this.stride);this.flatInteriorPoints_=Hs(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t),this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_}getInteriorPoints(){return new rg(this.getFlatInteriorPoints().slice(),"XYM")}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const t=this.flatCoordinates;no(t,0,this.endss_,this.stride)?this.orientedFlatCoordinates_=t:(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=ro(this.orientedFlatCoordinates_,0,this.endss_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(t){const e=[],n=[];return e.length=function(t,e,n,i,r,s,o,a){for(let l=0,u=n.length;l<u;++l){const u=n[l],h=[];o=Os(t,e,u,i,r,s,o,h),a.push(h),e=u[u.length-1]}return o}(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(t),e,0,n),new ag(e,"XY",n)}getPolygon(t){if(t<0||this.endss_.length<=t)return null;let e;if(0===t)e=0;else{const n=this.endss_[t-1];e=n[n.length-1]}const n=this.endss_[t].slice(),i=n[n.length-1];if(0!==e)for(let r=0,s=n.length;r<s;++r)n[r]-=e;return new oo(this.flatCoordinates.slice(e,i),this.layout,n)}getPolygons(){const t=this.layout,e=this.flatCoordinates,n=this.endss_,i=[];let r=0;for(let s=0,o=n.length;s<o;++s){const o=n[s].slice(),a=o[o.length-1];if(0!==r)for(let t=0,e=o.length;t<e;++t)o[t]-=r;const l=new oo(e.slice(r,a),t,o);i.push(l),r=a}return i}getType(){return"MultiPolygon"}intersectsExtent(t){return function(t,e,n,i,r){for(let s=0,o=n.length;s<o;++s){const o=n[s];if(Js(t,e,o,i,r))return!0;e=o[o.length-1]}return!1}(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t)}setCoordinates(t,e){this.setLayout(e,t,3),this.flatCoordinates||(this.flatCoordinates=[]);const n=Rs(this.flatCoordinates,0,t,this.stride,this.endss_);if(0===n.length)this.flatCoordinates.length=0;else{const t=n[n.length-1];this.flatCoordinates.length=0===t.length?0:t[t.length-1]}this.changed()}}const lg=ag;class ug extends _s{constructor(t){super(),this.geometries_=t,this.changeEventsKeys_=[],this.listenGeometriesChange_()}unlistenGeometriesChange_(){this.changeEventsKeys_.forEach(Rn),this.changeEventsKeys_.length=0}listenGeometriesChange_(){const t=this.geometries_;for(let e=0,n=t.length;e<n;++e)this.changeEventsKeys_.push(In(t[e],yn,this.changed,this))}clone(){const t=new ug(hg(this.geometries_));return t.applyProperties(this),t}closestPointXY(t,e,n,i){if(i<qi(this.getExtent(),t,e))return i;const r=this.geometries_;for(let s=0,o=r.length;s<o;++s)i=r[s].closestPointXY(t,e,n,i);return i}containsXY(t,e){const n=this.geometries_;for(let i=0,r=n.length;i<r;++i)if(n[i].containsXY(t,e))return!0;return!1}computeExtent(t){Ji(t);const e=this.geometries_;for(let n=0,i=e.length;n<i;++n)nr(t,e[n].getExtent());return t}getGeometries(){return hg(this.geometries_)}getGeometriesArray(){return this.geometries_}getGeometriesArrayRecursive(){let t=[];const e=this.geometries_;for(let n=0,i=e.length;n<i;++n)e[n].getType()===this.getType()?t=t.concat(e[n].getGeometriesArrayRecursive()):t.push(e[n]);return t}getSimplifiedGeometry(t){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&t<this.simplifiedGeometryMaxMinSquaredTolerance)return this;const e=[],n=this.geometries_;let i=!1;for(let r=0,s=n.length;r<s;++r){const s=n[r],o=s.getSimplifiedGeometry(t);e.push(o),o!==s&&(i=!0)}if(i){return new ug(e)}return this.simplifiedGeometryMaxMinSquaredTolerance=t,this}getType(){return"GeometryCollection"}intersectsExtent(t){const e=this.geometries_;for(let n=0,i=e.length;n<i;++n)if(e[n].intersectsExtent(t))return!0;return!1}isEmpty(){return 0===this.geometries_.length}rotate(t,e){const n=this.geometries_;for(let i=0,r=n.length;i<r;++i)n[i].rotate(t,e);this.changed()}scale(t,e,n){n||(n=hr(this.getExtent()));const i=this.geometries_;for(let r=0,s=i.length;r<s;++r)i[r].scale(t,e,n);this.changed()}setGeometries(t){this.setGeometriesArray(hg(t))}setGeometriesArray(t){this.unlistenGeometriesChange_(),this.geometries_=t,this.listenGeometriesChange_(),this.changed()}applyTransform(t){const e=this.geometries_;for(let n=0,i=e.length;n<i;++n)e[n].applyTransform(t);this.changed()}translate(t,e){const n=this.geometries_;for(let i=0,r=n.length;i<r;++i)n[i].translate(t,e);this.changed()}disposeInternal(){this.unlistenGeometriesChange_(),super.disposeInternal()}}function hg(t){return t.map((t=>t.clone()))}const cg=ug;const dg=class{constructor(){this.dataProjection=void 0,this.defaultFeatureProjection=void 0,this.featureClass=tg,this.supportedMediaTypes=null}getReadOptions(t,e){if(e){let n=e.dataProjection?Fr(e.dataProjection):this.readProjection(t);e.extent&&n&&"tile-pixels"===n.getUnits()&&(n=Fr(n),n.setWorldExtent(e.extent)),e={dataProjection:n,featureProjection:e.featureProjection}}return this.adaptOptions(e)}adaptOptions(t){return Object.assign({dataProjection:this.dataProjection,featureProjection:this.defaultFeatureProjection,featureClass:this.featureClass},t)}getType(){return Mn()}readFeature(t,e){return Mn()}readFeatures(t,e){return Mn()}readGeometry(t,e){return Mn()}readProjection(t){return Mn()}writeFeature(t,e){return Mn()}writeFeatures(t,e){return Mn()}writeGeometry(t,e){return Mn()}};function fg(t,e,n){const i=n?Fr(n.featureProjection):null,r=n?Fr(n.dataProjection):null;let s=t;if(i&&r&&!Yr(i,r)){e&&(s=t.clone());const n=e?i:r,o=e?r:i;"tile-pixels"===n.getUnits()?s.transform(n,o):s.applyTransform(Ur(n,o))}if(e&&n&&void 0!==n.decimals){const e=Math.pow(10,n.decimals),i=function(t){for(let n=0,i=t.length;n<i;++n)t[n]=Math.round(t[n]*e)/e;return t};s===t&&(s=t.clone()),s.applyTransform(i)}return s}const gg={Point:Us,LineString:ng,Polygon:oo,MultiPoint:rg,MultiLineString:og,MultiPolygon:lg};function pg(t,e){const n=t.geometry;if(!n)return[];if(Array.isArray(n))return n.map((e=>pg({...t,geometry:e}))).flat();const i="MultiPolygon"===n.type?"Polygon":n.type;if("GeometryCollection"===i||"Circle"===i)throw new Error("Unsupported geometry type: "+i);const r=n.layout.length;return fg(new jf(i,"Polygon"===i?function(t,e,n){return Array.isArray(e[0])?(no(t,0,e,n)||ro(t=t.slice(),0,e,n),t):(eo(t,0,e,n)||io(t=t.slice(),0,e,n),t)}(n.flatCoordinates,n.ends,r):n.flatCoordinates,n.ends?.flat(),r,t.properties||{},t.id).enableSimplifyTransformed(),!1,e)}function mg(t,e){if(!t)return null;if(Array.isArray(t)){const n=t.map((t=>mg(t,e)));return new cg(n)}return fg(new(0,gg[t.type])(t.flatCoordinates,t.layout,t.ends),!1,e)}function yg(t){if("string"===typeof t){const e=JSON.parse(t);return e||null}return null!==t?t:null}const _g=class extends dg{constructor(){super()}getType(){return"json"}readFeature(t,e){return this.readFeatureFromObject(yg(t),this.getReadOptions(t,e))}readFeatures(t,e){return this.readFeaturesFromObject(yg(t),this.getReadOptions(t,e))}readFeatureFromObject(t,e){return Mn()}readFeaturesFromObject(t,e){return Mn()}readGeometry(t,e){return this.readGeometryFromObject(yg(t),this.getReadOptions(t,e))}readGeometryFromObject(t,e){return Mn()}readProjection(t){return this.readProjectionFromObject(yg(t))}readProjectionFromObject(t){return Mn()}writeFeature(t,e){return JSON.stringify(this.writeFeatureObject(t,e))}writeFeatureObject(t,e){return Mn()}writeFeatures(t,e){return JSON.stringify(this.writeFeaturesObject(t,e))}writeFeaturesObject(t,e){return Mn()}writeGeometry(t,e){return JSON.stringify(this.writeGeometryObject(t,e))}writeGeometryObject(t,e){return Mn()}};function vg(t,e){if(!t)return null;let n;switch(t.type){case"Point":n=function(t){const e=t.coordinates;return{type:"Point",flatCoordinates:e,layout:vs(e.length)}}(t);break;case"LineString":n=function(t){const e=t.coordinates,n=e.flat();return{type:"LineString",flatCoordinates:n,ends:[n.length],layout:vs(e[0]?.length||2)}}(t);break;case"Polygon":n=function(t){const e=t.coordinates,n=[],i=e[0]?.[0]?.length,r=Ts(n,0,e,i);return{type:"Polygon",flatCoordinates:n,ends:r,layout:vs(i)}}(t);break;case"MultiPoint":n=function(t){const e=t.coordinates;return{type:"MultiPoint",flatCoordinates:e.flat(),layout:vs(e[0]?.length||2)}}(t);break;case"MultiLineString":n=function(t){const e=t.coordinates,n=e[0]?.[0]?.length||2,i=[],r=Ts(i,0,e,n);return{type:"MultiLineString",flatCoordinates:i,ends:r,layout:vs(n)}}(t);break;case"MultiPolygon":n=function(t){const e=t.coordinates,n=[],i=e[0]?.[0]?.[0].length||2,r=Rs(n,0,e,i);return{type:"MultiPolygon",flatCoordinates:n,ends:r,layout:vs(i)}}(t);break;case"GeometryCollection":n=function(t,e){const n=t.geometries.map((function(t){return vg(t,e)}));return n}(t);break;default:throw new Error("Unsupported GeoJSON type: "+t.type)}return n}function xg(t,e){const n=(t=fg(t,!0,e)).getType();let i;switch(n){case"Point":i=function(t){return{type:"Point",coordinates:t.getCoordinates()}}(t);break;case"LineString":i=function(t){return{type:"LineString",coordinates:t.getCoordinates()}}(t);break;case"Polygon":i=function(t,e){let n;e&&(n=e.rightHanded);return{type:"Polygon",coordinates:t.getCoordinates(n)}}(t,e);break;case"MultiPoint":i=function(t){return{type:"MultiPoint",coordinates:t.getCoordinates()}}(t);break;case"MultiLineString":i=function(t){return{type:"MultiLineString",coordinates:t.getCoordinates()}}(t);break;case"MultiPolygon":i=function(t,e){let n;e&&(n=e.rightHanded);return{type:"MultiPolygon",coordinates:t.getCoordinates(n)}}(t,e);break;case"GeometryCollection":i=function(t,e){e=Object.assign({},e),delete e.featureProjection;const n=t.getGeometriesArray().map((function(t){return xg(t,e)}));return{type:"GeometryCollection",geometries:n}}(t,e);break;case"Circle":i={type:"GeometryCollection",geometries:[]};break;default:throw new Error("Unsupported geometry type: "+n)}return i}const wg=class extends _g{constructor(t){t=t||{},super(),this.dataProjection=Fr(t.dataProjection?t.dataProjection:"EPSG:4326"),t.featureProjection&&(this.defaultFeatureProjection=Fr(t.featureProjection)),t.featureClass&&(this.featureClass=t.featureClass),this.geometryName_=t.geometryName,this.extractGeometryName_=t.extractGeometryName,this.supportedMediaTypes=["application/geo+json","application/vnd.geo+json"]}readFeatureFromObject(t,e){let n=null;n="Feature"===t.type?t:{type:"Feature",geometry:t,properties:null};const i=vg(n.geometry,e);if(this.featureClass===jf)return pg({geometry:i,id:n.id,properties:n.properties},e);const r=new tg;return this.geometryName_?r.setGeometryName(this.geometryName_):this.extractGeometryName_&&n.geometry_name&&r.setGeometryName(n.geometry_name),r.setGeometry(mg(i,e)),"id"in n&&r.setId(n.id),n.properties&&r.setProperties(n.properties,!0),r}readFeaturesFromObject(t,e){let n=null;if("FeatureCollection"===t.type){n=[];const i=t.features;for(let t=0,r=i.length;t<r;++t){const r=this.readFeatureFromObject(i[t],e);r&&n.push(r)}}else n=[this.readFeatureFromObject(t,e)];return n.flat()}readGeometryFromObject(t,e){return function(t,e){const n=vg(t,e);return mg(n,e)}(t,e)}readProjectionFromObject(t){const e=t.crs;let n;if(e)if("name"==e.type)n=Fr(e.properties.name);else{if("EPSG"!==e.type)throw new Error("Unknown SRS type");n=Fr("EPSG:"+e.properties.code)}else n=this.dataProjection;return n}writeFeatureObject(t,e){e=this.adaptOptions(e);const n={type:"Feature",geometry:null,properties:null},i=t.getId();if(void 0!==i&&(n.id=i),!t.hasProperties())return n;const r=t.getProperties(),s=t.getGeometry();return s&&(n.geometry=xg(s,e),delete r[t.getGeometryName()]),pn(r)||(n.properties=r),n}writeFeaturesObject(t,e){e=this.adaptOptions(e);const n=[];for(let i=0,r=t.length;i<r;++i)n.push(this.writeFeatureObject(t[i],e));return{type:"FeatureCollection",features:n}}writeGeometryObject(t,e){return xg(t,this.adaptOptions(e))}},kg="select";class Eg extends tn{constructor(t,e,n,i){super(t),this.selected=e,this.deselected=n,this.mapBrowserEvent=i}}const Sg={};class bg extends Zh{constructor(t){let e;if(super(),this.on,this.once,this.un,t=t||{},this.boundAddFeature_=this.addFeature_.bind(this),this.boundRemoveFeature_=this.removeFeature_.bind(this),this.condition_=t.condition?t.condition:ac,this.addCondition_=t.addCondition?t.addCondition:oc,this.removeCondition_=t.removeCondition?t.removeCondition:oc,this.toggleCondition_=t.toggleCondition?t.toggleCondition:uc,this.multi_=!!t.multi&&t.multi,this.filter_=t.filter?t.filter:un,this.hitTolerance_=t.hitTolerance?t.hitTolerance:0,this.style_=void 0!==t.style?t.style:function(){const t=function(){const t={},e=[255,255,255,1],n=[0,153,255,1];return t.Polygon=[new ul({fill:new ol({color:[255,255,255,.5]})})],t.MultiPolygon=t.Polygon,t.LineString=[new ul({stroke:new ll({color:e,width:5})}),new ul({stroke:new ll({color:n,width:3})})],t.MultiLineString=t.LineString,t.Circle=t.Polygon.concat(t.LineString),t.Point=[new ul({image:new rl({radius:6,fill:new ol({color:n}),stroke:new ll({color:e,width:1.5})}),zIndex:1/0})],t.MultiPoint=t.Point,t.GeometryCollection=t.Polygon.concat(t.LineString,t.Point),t}();return an(t.Polygon,t.LineString),an(t.GeometryCollection,t.LineString),function(e){return e.getGeometry()?t[e.getGeometry().getType()]:null}}(),this.features_=t.features||new Yn,t.layers)if("function"===typeof t.layers)e=t.layers;else{const n=t.layers;e=function(t){return n.includes(t)}}else e=un;this.layerFilter_=e,this.featureLayerAssociation_={}}addFeatureLayerAssociation_(t,e){this.featureLayerAssociation_[On(t)]=e}getFeatures(){return this.features_}getHitTolerance(){return this.hitTolerance_}getLayer(t){return this.featureLayerAssociation_[On(t)]}setHitTolerance(t){this.hitTolerance_=t}setMap(t){this.getMap()&&this.style_&&this.features_.forEach(this.restorePreviousStyle_.bind(this)),super.setMap(t),t?(this.features_.addEventListener(Dn,this.boundAddFeature_),this.features_.addEventListener(zn,this.boundRemoveFeature_),this.style_&&this.features_.forEach(this.applySelectedStyle_.bind(this))):(this.features_.removeEventListener(Dn,this.boundAddFeature_),this.features_.removeEventListener(zn,this.boundRemoveFeature_))}addFeature_(t){const e=t.element;if(this.style_&&this.applySelectedStyle_(e),!this.getLayer(e)){const t=this.getMap().getAllLayers().find((function(t){if(t instanceof Pf&&t.getSource()&&t.getSource().hasFeature(e))return t}));t&&this.addFeatureLayerAssociation_(e,t)}}removeFeature_(t){this.style_&&this.restorePreviousStyle_(t.element)}getStyle(){return this.style_}applySelectedStyle_(t){const e=On(t);e in Sg||(Sg[e]=t.getStyle()),t.setStyle(this.style_)}restorePreviousStyle_(t){const e=this.getMap().getInteractions().getArray();for(let i=e.length-1;i>=0;--i){const n=e[i];if(n!==this&&n instanceof bg&&n.getStyle()&&-1!==n.getFeatures().getArray().lastIndexOf(t))return void t.setStyle(n.getStyle())}const n=On(t);t.setStyle(Sg[n]),delete Sg[n]}removeFeatureLayerAssociation_(t){delete this.featureLayerAssociation_[On(t)]}handleEvent(t){if(!this.condition_(t))return!0;const e=this.addCondition_(t),n=this.removeCondition_(t),i=this.toggleCondition_(t),r=!e&&!n&&!i,s=t.map,o=this.getFeatures(),a=[],l=[];if(r){gn(this.featureLayerAssociation_),s.forEachFeatureAtPixel(t.pixel,((t,e)=>{if(t instanceof tg&&this.filter_(t,e))return this.addFeatureLayerAssociation_(t,e),l.push(t),!this.multi_}),{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_});for(let t=o.getLength()-1;t>=0;--t){const e=o.item(t),n=l.indexOf(e);n>-1?l.splice(n,1):(o.remove(e),a.push(e))}0!==l.length&&o.extend(l)}else{s.forEachFeatureAtPixel(t.pixel,((t,r)=>{if(t instanceof tg&&this.filter_(t,r))return!e&&!i||o.getArray().includes(t)?(n||i)&&o.getArray().includes(t)&&(a.push(t),this.removeFeatureLayerAssociation_(t)):(this.addFeatureLayerAssociation_(t,r),l.push(t)),!this.multi_}),{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_});for(let t=a.length-1;t>=0;--t)o.remove(a[t]);o.extend(l)}return(l.length>0||a.length>0)&&this.dispatchEvent(new Eg(kg,l,a,t)),!0}}const Cg=bg,Ig="element",Tg="map",Rg="offset",Ng="position",Lg="positioning";const Mg=class extends Fn{constructor(t){super(),this.on,this.once,this.un,this.options=t,this.id=t.id,this.insertFirst=void 0===t.insertFirst||t.insertFirst,this.stopEvent=void 0===t.stopEvent||t.stopEvent,this.element=document.createElement("div"),this.element.className=void 0!==t.className?t.className:"ol-overlay-container ol-selectable",this.element.style.position="absolute",this.element.style.pointerEvents="auto",this.autoPan=!0===t.autoPan?{}:t.autoPan||void 0,this.rendered={transform_:"",visible:!0},this.mapPostrenderListenerKey=null,this.addChangeListener(Ig,this.handleElementChanged),this.addChangeListener(Tg,this.handleMapChanged),this.addChangeListener(Rg,this.handleOffsetChanged),this.addChangeListener(Ng,this.handlePositionChanged),this.addChangeListener(Lg,this.handlePositioningChanged),void 0!==t.element&&this.setElement(t.element),this.setOffset(void 0!==t.offset?t.offset:[0,0]),this.setPositioning(t.positioning||"top-left"),void 0!==t.position&&this.setPosition(t.position)}getElement(){return this.get(Ig)}getId(){return this.id}getMap(){return this.get(Tg)||null}getOffset(){return this.get(Rg)}getPosition(){return this.get(Ng)}getPositioning(){return this.get(Lg)}handleElementChanged(){xa(this.element);const t=this.getElement();t&&this.element.appendChild(t)}handleMapChanged(){this.mapPostrenderListenerKey&&(this.element?.remove(),Rn(this.mapPostrenderListenerKey),this.mapPostrenderListenerKey=null);const t=this.getMap();if(t){this.mapPostrenderListenerKey=In(t,Ih,this.render,this),this.updatePixelPosition();const e=this.stopEvent?t.getOverlayContainerStopEvent():t.getOverlayContainer();this.insertFirst?e.insertBefore(this.element,e.childNodes[0]||null):e.appendChild(this.element),this.performAutoPan()}}render(){this.updatePixelPosition()}handleOffsetChanged(){this.updatePixelPosition()}handlePositionChanged(){this.updatePixelPosition(),this.performAutoPan()}handlePositioningChanged(){this.updatePixelPosition()}setElement(t){this.set(Ig,t)}setMap(t){this.set(Tg,t)}setOffset(t){this.set(Rg,t)}setPosition(t){this.set(Ng,t)}performAutoPan(){this.autoPan&&this.panIntoView(this.autoPan)}panIntoView(t){const e=this.getMap();if(!e||!e.getTargetElement()||!this.get(Ng))return;const n=this.getRect(e.getTargetElement(),e.getSize()),i=this.getElement(),r=this.getRect(i,[ya(i),_a(i)]),s=void 0===(t=t||{}).margin?20:t.margin;if(!Vi(n,r)){const i=r[0]-n[0],o=n[2]-r[2],a=r[1]-n[1],l=n[3]-r[3],u=[0,0];if(i<0?u[0]=i-s:o<0&&(u[0]=Math.abs(o)+s),a<0?u[1]=a-s:l<0&&(u[1]=Math.abs(l)+s),0!==u[0]||0!==u[1]){const n=e.getView().getCenterInternal(),i=e.getPixelFromCoordinateInternal(n);if(!i)return;const r=[i[0]+u[0],i[1]+u[1]],s=t.animation||{};e.getView().animateInternal({center:e.getCoordinateFromPixelInternal(r),duration:s.duration,easing:s.easing})}}}getRect(t,e){const n=t.getBoundingClientRect(),i=n.left+window.pageXOffset,r=n.top+window.pageYOffset;return[i,r,i+e[0],r+e[1]]}setPositioning(t){this.set(Lg,t)}setVisible(t){this.rendered.visible!==t&&(this.element.style.display=t?"":"none",this.rendered.visible=t)}updatePixelPosition(){const t=this.getMap(),e=this.getPosition();if(!t||!t.isRendered()||!e)return void this.setVisible(!1);const n=t.getPixelFromCoordinate(e),i=t.getSize();this.updateRenderedPosition(n,i)}updateRenderedPosition(t,e){const n=this.element.style,i=this.getOffset(),r=this.getPositioning();this.setVisible(!0);let s="0%",o="0%";"bottom-right"==r||"center-right"==r||"top-right"==r?s="-100%":"bottom-center"!=r&&"center-center"!=r&&"top-center"!=r||(s="-50%"),"bottom-left"==r||"bottom-center"==r||"bottom-right"==r?o="-100%":"center-left"!=r&&"center-center"!=r&&"center-right"!=r||(o="-50%");const a=`translate(${s}, ${o}) translate(${Math.round(t[0]+i[0])+"px"}, ${Math.round(t[1]+i[1])+"px"})`;this.rendered.transform_!=a&&(this.rendered.transform_=a,n.transform=a)}getOptions(){return this.options}};const Pg=function(e){let{layers:n,map:i}=e;const[r,s]=(0,t.useState)(""),[o,a]=(0,t.useState)(null);return(0,t.useEffect)((()=>{if(!i||!n||0===n.length)return;const t=new Mg({element:document.createElement("div"),positioning:"center-center",stopEvent:!0});i.addOverlay(t);const e=[];n.forEach((t=>{const n=new Jf({url:t.filename,format:new wg}),r=new Pf({source:n,opacity:1,zIndex:t.zIndex?t.zIndex:2,style:t.style});e.push(r),i.addLayer(r)}));let r=null;e.forEach((t=>{const e=t.getSource().getExtent();(null==r||r.getExtent()<e)&&(r=t.getSource())})),r.once("addfeature",(()=>{const t=r.getExtent();i.getView().fit(t,{padding:[100,100,100,100]})}));const o=new Cg({condition:rc,layers:e});return o.on("select",(e=>{const n=e.selected[0];if(n){const e=n.get("Name"),i=n.getGeometry().getCoordinates();s(e),a(jr(i)),t.setPosition(jr(i))}else s(null),a(null),t.setPosition(void 0)})),i.addInteraction(o),()=>{i.removeInteraction(o),n.forEach((t=>i.removeLayer(t))),i.removeOverlay(t)}}),[i,n]),(0,y.jsx)(y.Fragment,{children:r&&o&&(0,y.jsxs)("div",{style:{position:"absolute",top:"40px",right:"40px",background:"rgba(255, 255, 255, 0.8)",padding:"10px",borderRadius:"5px",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.1)",zIndex:1e3,fontSize:"12px",fontWeight:"bold"},children:[(0,y.jsx)("h1",{children:r}),(0,y.jsxs)("p",{children:["Longitude: ",o[0].toFixed(6)]}),(0,y.jsxs)("p",{children:["Latitude: ",o[1].toFixed(6)]})]})})};function Og(e){let{min:n,max:i,step:r,initialValue:s,onChange:o}=e;const[a,l]=(0,t.useState)(s);return(0,y.jsxs)("div",{style:{padding:"10px",textAlign:"center"},children:[(0,y.jsx)("label",{htmlFor:"buffer-slider",children:"Water Level (meters): "}),(0,y.jsx)("input",{id:"buffer-slider",type:"range",min:n,max:i,step:r,value:a,onChange:t=>{l(t.target.value)}}),(0,y.jsxs)("span",{children:[a,"m"]}),(0,y.jsx)("span",{children:"\t"}),(0,y.jsx)("button",{onClick:()=>{o(Number(a)/.17)},children:"Apply Water Level Change"})]})}Og.defaultProps={min:0,max:1e3,step:10,initialValue:10};const Ag=Og;var Fg=6371008.8,Dg={centimeters:637100880,centimetres:637100880,degrees:360/(2*Math.PI),feet:20902260.511392,inches:39.37*Fg,kilometers:6371.0088,kilometres:6371.0088,meters:Fg,metres:Fg,miles:3958.761333810546,millimeters:6371008800,millimetres:6371008800,nauticalmiles:Fg/1852,radians:1,yards:6967335.223679999};function zg(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const i={type:"Feature"};return(0===n.id||n.id)&&(i.id=n.id),n.bbox&&(i.bbox=n.bbox),i.properties=e||{},i.geometry=t,i}function Gg(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");if(t.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!Xg(t[0])||!Xg(t[1]))throw new Error("coordinates must contain numbers");return zg({type:"Point",coordinates:t},e,n)}function jg(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};for(const i of t){if(i.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");if(i[i.length-1].length!==i[0].length)throw new Error("First and last Position are not equivalent.");for(let t=0;t<i[i.length-1].length;t++)if(i[i.length-1][t]!==i[0][t])throw new Error("First and last Position are not equivalent.")}return zg({type:"Polygon",coordinates:t},e,n)}function Yg(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n={type:"FeatureCollection"};return e.id&&(n.id=e.id),e.bbox&&(n.bbox=e.bbox),n.features=t,n}function Bg(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"kilometers";const n=Dg[e];if(!n)throw new Error(e+" units is invalid");return t*n}function Ug(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"kilometers";const n=Dg[e];if(!n)throw new Error(e+" units is invalid");return t/n}function Xg(t){return!isNaN(t)&&null!==t&&!Array.isArray(t)}function qg(t,e,n){if(null!==t)for(var i,r,s,o,a,l,u,h,c=0,d=0,f=t.type,g="FeatureCollection"===f,p="Feature"===f,m=g?t.features.length:1,y=0;y<m;y++){a=(h=!!(u=g?t.features[y].geometry:p?t.geometry:t)&&"GeometryCollection"===u.type)?u.geometries.length:1;for(var _=0;_<a;_++){var v=0,x=0;if(null!==(o=h?u.geometries[_]:u)){l=o.coordinates;var w=o.type;switch(c=!n||"Polygon"!==w&&"MultiPolygon"!==w?0:1,w){case null:break;case"Point":if(!1===e(l,d,y,v,x))return!1;d++,v++;break;case"LineString":case"MultiPoint":for(i=0;i<l.length;i++){if(!1===e(l[i],d,y,v,x))return!1;d++,"MultiPoint"===w&&v++}"LineString"===w&&v++;break;case"Polygon":case"MultiLineString":for(i=0;i<l.length;i++){for(r=0;r<l[i].length-c;r++){if(!1===e(l[i][r],d,y,v,x))return!1;d++}"MultiLineString"===w&&v++,"Polygon"===w&&x++}"Polygon"===w&&v++;break;case"MultiPolygon":for(i=0;i<l.length;i++){for(x=0,r=0;r<l[i].length;r++){for(s=0;s<l[i][r].length-c;s++){if(!1===e(l[i][r][s],d,y,v,x))return!1;d++}x++}v++}break;case"GeometryCollection":for(i=0;i<o.geometries.length;i++)if(!1===qg(o.geometries[i],e,n))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function Wg(t,e){if("Feature"===t.type)e(t,0);else if("FeatureCollection"===t.type)for(var n=0;n<t.features.length&&!1!==e(t.features[n],n);n++);}function Vg(t,e){var n,i,r,s,o,a,l,u,h,c,d=0,f="FeatureCollection"===t.type,g="Feature"===t.type,p=f?t.features.length:1;for(n=0;n<p;n++){for(a=f?t.features[n].geometry:g?t.geometry:t,u=f?t.features[n].properties:g?t.properties:{},h=f?t.features[n].bbox:g?t.bbox:void 0,c=f?t.features[n].id:g?t.id:void 0,o=(l=!!a&&"GeometryCollection"===a.type)?a.geometries.length:1,r=0;r<o;r++)if(null!==(s=l?a.geometries[r]:a))switch(s.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===e(s,d,u,h,c))return!1;break;case"GeometryCollection":for(i=0;i<s.geometries.length;i++)if(!1===e(s.geometries[i],d,u,h,c))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===e(null,d,u,h,c))return!1;d++}}function Hg(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(null!=t.bbox&&!0!==e.recompute)return t.bbox;const n=[1/0,1/0,-1/0,-1/0];return qg(t,(t=>{n[0]>t[0]&&(n[0]=t[0]),n[1]>t[1]&&(n[1]=t[1]),n[2]<t[0]&&(n[2]=t[0]),n[3]<t[1]&&(n[3]=t[1])})),n}function Kg(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=Hg(t);return Gg([(n[0]+n[2])/2,(n[1]+n[3])/2],e.properties,e)}var Zg=n(207);function $g(){return new Jg}function Jg(){this.reset()}Jg.prototype={constructor:Jg,reset:function(){this.s=this.t=0},add:function(t){tp(Qg,t,this.t),tp(this,Qg.s,this.s),this.s?this.t+=Qg.t:this.s=Qg.t},valueOf:function(){return this.s}};var Qg=new Jg;function tp(t,e,n){var i=t.s=e+n,r=i-e,s=i-r;t.t=e-s+(n-r)}var ep=1e-6,np=Math.PI,ip=np/2,rp=np/4,sp=2*np,op=180/np,ap=np/180,lp=Math.abs,up=Math.atan,hp=Math.atan2,cp=Math.cos,dp=(Math.ceil,Math.exp),fp=(Math.floor,Math.log),gp=(Math.pow,Math.sin),pp=(Math.sign,Math.sqrt),mp=Math.tan;function yp(t){return t>1?0:t<-1?np:Math.acos(t)}function _p(t){return t>1?ip:t<-1?-ip:Math.asin(t)}function vp(){}function xp(t,e){t&&kp.hasOwnProperty(t.type)&&kp[t.type](t,e)}var wp={Feature:function(t,e){xp(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,i=-1,r=n.length;++i<r;)xp(n[i].geometry,e)}},kp={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)t=n[i],e.point(t[0],t[1],t[2])},LineString:function(t,e){Ep(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)Ep(n[i],e,0)},Polygon:function(t,e){Sp(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)Sp(n[i],e)},GeometryCollection:function(t,e){for(var n=t.geometries,i=-1,r=n.length;++i<r;)xp(n[i],e)}};function Ep(t,e,n){var i,r=-1,s=t.length-n;for(e.lineStart();++r<s;)i=t[r],e.point(i[0],i[1],i[2]);e.lineEnd()}function Sp(t,e){var n=-1,i=t.length;for(e.polygonStart();++n<i;)Ep(t[n],e,1);e.polygonEnd()}function bp(t,e){t&&wp.hasOwnProperty(t.type)?wp[t.type](t,e):xp(t,e)}$g(),$g();function Cp(t){return[hp(t[1],t[0]),_p(t[2])]}function Ip(t){var e=t[0],n=t[1],i=cp(n);return[i*cp(e),i*gp(e),gp(n)]}function Tp(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function Rp(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function Np(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function Lp(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function Mp(t){var e=pp(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}$g();function Pp(t,e){function n(n,i){return n=t(n,i),e(n[0],n[1])}return t.invert&&e.invert&&(n.invert=function(n,i){return(n=e.invert(n,i))&&t.invert(n[0],n[1])}),n}function Op(t,e){return[t>np?t-sp:t<-np?t+sp:t,e]}function Ap(t,e,n){return(t%=sp)?e||n?Pp(Dp(t),zp(e,n)):Dp(t):e||n?zp(e,n):Op}function Fp(t){return function(e,n){return[(e+=t)>np?e-sp:e<-np?e+sp:e,n]}}function Dp(t){var e=Fp(t);return e.invert=Fp(-t),e}function zp(t,e){var n=cp(t),i=gp(t),r=cp(e),s=gp(e);function o(t,e){var o=cp(e),a=cp(t)*o,l=gp(t)*o,u=gp(e),h=u*n+a*i;return[hp(l*r-h*s,a*n-u*i),_p(h*r+l*s)]}return o.invert=function(t,e){var o=cp(e),a=cp(t)*o,l=gp(t)*o,u=gp(e),h=u*r-l*s;return[hp(l*r+u*s,a*n+h*i),_p(h*n-a*i)]},o}function Gp(t,e,n,i,r,s){if(n){var o=cp(e),a=gp(e),l=i*n;null==r?(r=e+i*sp,s=e-l/2):(r=jp(o,r),s=jp(o,s),(i>0?r<s:r>s)&&(r+=i*sp));for(var u,h=r;i>0?h>s:h<s;h-=l)u=Cp([o,-a*cp(h),-a*gp(h)]),t.point(u[0],u[1])}}function jp(t,e){(e=Ip(e))[0]-=t,Mp(e);var n=yp(-e[1]);return((-e[2]<0?-n:n)+sp-ep)%sp}function Yp(){var t,e=[];return{point:function(e,n){t.push([e,n])},lineStart:function(){e.push(t=[])},lineEnd:vp,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function Bp(t,e){return lp(t[0]-e[0])<ep&&lp(t[1]-e[1])<ep}function Up(t,e,n,i){this.x=t,this.z=e,this.o=n,this.e=i,this.v=!1,this.n=this.p=null}function Xp(t,e,n,i,r){var s,o,a=[],l=[];if(t.forEach((function(t){if(!((e=t.length-1)<=0)){var e,n,i=t[0],o=t[e];if(Bp(i,o)){for(r.lineStart(),s=0;s<e;++s)r.point((i=t[s])[0],i[1]);r.lineEnd()}else a.push(n=new Up(i,t,null,!0)),l.push(n.o=new Up(i,null,n,!1)),a.push(n=new Up(o,t,null,!1)),l.push(n.o=new Up(o,null,n,!0))}})),a.length){for(l.sort(e),qp(a),qp(l),s=0,o=l.length;s<o;++s)l[s].e=n=!n;for(var u,h,c=a[0];;){for(var d=c,f=!0;d.v;)if((d=d.n)===c)return;u=d.z,r.lineStart();do{if(d.v=d.o.v=!0,d.e){if(f)for(s=0,o=u.length;s<o;++s)r.point((h=u[s])[0],h[1]);else i(d.x,d.n.x,1,r);d=d.n}else{if(f)for(u=d.p.z,s=u.length-1;s>=0;--s)r.point((h=u[s])[0],h[1]);else i(d.x,d.p.x,-1,r);d=d.p}u=(d=d.o).z,f=!f}while(!d.v);r.lineEnd()}}}function qp(t){if(e=t.length){for(var e,n,i=0,r=t[0];++i<e;)r.n=n=t[i],n.p=r,r=n;r.n=n=t[0],n.p=r}}function Wp(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}Op.invert=Op;var Vp=function(t){var e;return 1===t.length&&(e=t,t=function(t,n){return Wp(e(t),n)}),{left:function(e,n,i,r){for(null==i&&(i=0),null==r&&(r=e.length);i<r;){var s=i+r>>>1;t(e[s],n)<0?i=s+1:r=s}return i},right:function(e,n,i,r){for(null==i&&(i=0),null==r&&(r=e.length);i<r;){var s=i+r>>>1;t(e[s],n)>0?r=s:i=s+1}return i}}}(Wp);Vp.right,Vp.left;var Hp=Array.prototype;Hp.slice,Hp.map,Math.sqrt(50),Math.sqrt(10),Math.sqrt(2);function Kp(t){for(var e,n,i,r=t.length,s=-1,o=0;++s<r;)o+=t[s].length;for(n=new Array(o);--r>=0;)for(e=(i=t[r]).length;--e>=0;)n[--o]=i[e];return n}var Zp=1e9,$p=-Zp;function Jp(t,e,n,i){function r(r,s){return t<=r&&r<=n&&e<=s&&s<=i}function s(r,s,a,u){var h=0,c=0;if(null==r||(h=o(r,a))!==(c=o(s,a))||l(r,s)<0^a>0)do{u.point(0===h||3===h?t:n,h>1?i:e)}while((h=(h+a+4)%4)!==c);else u.point(s[0],s[1])}function o(i,r){return lp(i[0]-t)<ep?r>0?0:3:lp(i[0]-n)<ep?r>0?2:1:lp(i[1]-e)<ep?r>0?1:0:r>0?3:2}function a(t,e){return l(t.x,e.x)}function l(t,e){var n=o(t,1),i=o(e,1);return n!==i?n-i:0===n?e[1]-t[1]:1===n?t[0]-e[0]:2===n?t[1]-e[1]:e[0]-t[0]}return function(o){var l,u,h,c,d,f,g,p,m,y,_,v=o,x=Yp(),w={point:k,lineStart:function(){w.point=E,u&&u.push(h=[]);y=!0,m=!1,g=p=NaN},lineEnd:function(){l&&(E(c,d),f&&m&&x.rejoin(),l.push(x.result()));w.point=k,m&&v.lineEnd()},polygonStart:function(){v=x,l=[],u=[],_=!0},polygonEnd:function(){var e=function(){for(var e=0,n=0,r=u.length;n<r;++n)for(var s,o,a=u[n],l=1,h=a.length,c=a[0],d=c[0],f=c[1];l<h;++l)s=d,o=f,d=(c=a[l])[0],f=c[1],o<=i?f>i&&(d-s)*(i-o)>(f-o)*(t-s)&&++e:f<=i&&(d-s)*(i-o)<(f-o)*(t-s)&&--e;return e}(),n=_&&e,r=(l=Kp(l)).length;(n||r)&&(o.polygonStart(),n&&(o.lineStart(),s(null,null,1,o),o.lineEnd()),r&&Xp(l,a,e,s,o),o.polygonEnd());v=o,l=u=h=null}};function k(t,e){r(t,e)&&v.point(t,e)}function E(s,o){var a=r(s,o);if(u&&h.push([s,o]),y)c=s,d=o,f=a,y=!1,a&&(v.lineStart(),v.point(s,o));else if(a&&m)v.point(s,o);else{var l=[g=Math.max($p,Math.min(Zp,g)),p=Math.max($p,Math.min(Zp,p))],x=[s=Math.max($p,Math.min(Zp,s)),o=Math.max($p,Math.min(Zp,o))];!function(t,e,n,i,r,s){var o,a=t[0],l=t[1],u=0,h=1,c=e[0]-a,d=e[1]-l;if(o=n-a,c||!(o>0)){if(o/=c,c<0){if(o<u)return;o<h&&(h=o)}else if(c>0){if(o>h)return;o>u&&(u=o)}if(o=r-a,c||!(o<0)){if(o/=c,c<0){if(o>h)return;o>u&&(u=o)}else if(c>0){if(o<u)return;o<h&&(h=o)}if(o=i-l,d||!(o>0)){if(o/=d,d<0){if(o<u)return;o<h&&(h=o)}else if(d>0){if(o>h)return;o>u&&(u=o)}if(o=s-l,d||!(o<0)){if(o/=d,d<0){if(o>h)return;o>u&&(u=o)}else if(d>0){if(o<u)return;o<h&&(h=o)}return u>0&&(t[0]=a+u*c,t[1]=l+u*d),h<1&&(e[0]=a+h*c,e[1]=l+h*d),!0}}}}}(l,x,t,e,n,i)?a&&(v.lineStart(),v.point(s,o),_=!1):(m||(v.lineStart(),v.point(l[0],l[1])),v.point(x[0],x[1]),a||v.lineEnd(),_=!1)}g=s,p=o,m=a}return w}}var Qp=$g();function tm(t,e){var n=e[0],i=e[1],r=[gp(n),-cp(n),0],s=0,o=0;Qp.reset();for(var a=0,l=t.length;a<l;++a)if(h=(u=t[a]).length)for(var u,h,c=u[h-1],d=c[0],f=c[1]/2+rp,g=gp(f),p=cp(f),m=0;m<h;++m,d=_,g=x,p=w,c=y){var y=u[m],_=y[0],v=y[1]/2+rp,x=gp(v),w=cp(v),k=_-d,E=k>=0?1:-1,S=E*k,b=S>np,C=g*x;if(Qp.add(hp(C*E*gp(S),p*w+C*cp(S))),s+=b?k+E*sp:k,b^d>=n^_>=n){var I=Rp(Ip(c),Ip(y));Mp(I);var T=Rp(r,I);Mp(T);var R=(b^k>=0?-1:1)*_p(T[2]);(i>R||i===R&&(I[0]||I[1]))&&(o+=b^k>=0?1:-1)}}return(s<-1e-6||s<ep&&Qp<-1e-6)^1&o}$g();$g(),$g();var em=1/0,nm=em,im=-em,rm=im,sm={point:function(t,e){t<em&&(em=t);t>im&&(im=t);e<nm&&(nm=e);e>rm&&(rm=e)},lineStart:vp,lineEnd:vp,polygonStart:vp,polygonEnd:vp,result:function(){var t=[[em,nm],[im,rm]];return im=rm=-(nm=em=1/0),t}};const om=sm;$g();function am(t){return"m0,"+t+"a"+t+","+t+" 0 1,1 0,"+-2*t+"a"+t+","+t+" 0 1,1 0,"+2*t+"z"}function lm(t,e,n,i){return function(r,s){var o,a,l,u=e(s),h=r.invert(i[0],i[1]),c=Yp(),d=e(c),f=!1,g={point:p,lineStart:y,lineEnd:_,polygonStart:function(){g.point=v,g.lineStart=x,g.lineEnd=w,a=[],o=[]},polygonEnd:function(){g.point=p,g.lineStart=y,g.lineEnd=_,a=Kp(a);var t=tm(o,h);a.length?(f||(s.polygonStart(),f=!0),Xp(a,hm,t,n,s)):t&&(f||(s.polygonStart(),f=!0),s.lineStart(),n(null,null,1,s),s.lineEnd()),f&&(s.polygonEnd(),f=!1),a=o=null},sphere:function(){s.polygonStart(),s.lineStart(),n(null,null,1,s),s.lineEnd(),s.polygonEnd()}};function p(e,n){var i=r(e,n);t(e=i[0],n=i[1])&&s.point(e,n)}function m(t,e){var n=r(t,e);u.point(n[0],n[1])}function y(){g.point=m,u.lineStart()}function _(){g.point=p,u.lineEnd()}function v(t,e){l.push([t,e]);var n=r(t,e);d.point(n[0],n[1])}function x(){d.lineStart(),l=[]}function w(){v(l[0][0],l[0][1]),d.lineEnd();var t,e,n,i,r=d.clean(),u=c.result(),h=u.length;if(l.pop(),o.push(l),l=null,h)if(1&r){if((e=(n=u[0]).length-1)>0){for(f||(s.polygonStart(),f=!0),s.lineStart(),t=0;t<e;++t)s.point((i=n[t])[0],i[1]);s.lineEnd()}}else h>1&&2&r&&u.push(u.pop().concat(u.shift())),a.push(u.filter(um))}return g}}function um(t){return t.length>1}function hm(t,e){return((t=t.x)[0]<0?t[1]-ip-ep:ip-t[1])-((e=e.x)[0]<0?e[1]-ip-ep:ip-e[1])}am(4.5);const cm=lm((function(){return!0}),(function(t){var e,n=NaN,i=NaN,r=NaN;return{lineStart:function(){t.lineStart(),e=1},point:function(s,o){var a=s>0?np:-np,l=lp(s-n);lp(l-np)<ep?(t.point(n,i=(i+o)/2>0?ip:-ip),t.point(r,i),t.lineEnd(),t.lineStart(),t.point(a,i),t.point(s,i),e=0):r!==a&&l>=np&&(lp(n-r)<ep&&(n-=r*ep),lp(s-a)<ep&&(s-=a*ep),i=function(t,e,n,i){var r,s,o=gp(t-n);return lp(o)>ep?up((gp(e)*(s=cp(i))*gp(n)-gp(i)*(r=cp(e))*gp(t))/(r*s*o)):(e+i)/2}(n,i,s,o),t.point(r,i),t.lineEnd(),t.lineStart(),t.point(a,i),e=0),t.point(n=s,i=o),r=a},lineEnd:function(){t.lineEnd(),n=i=NaN},clean:function(){return 2-e}}}),(function(t,e,n,i){var r;if(null==t)r=n*ip,i.point(-np,r),i.point(0,r),i.point(np,r),i.point(np,0),i.point(np,-r),i.point(0,-r),i.point(-np,-r),i.point(-np,0),i.point(-np,r);else if(lp(t[0]-e[0])>ep){var s=t[0]<e[0]?np:-np;r=n*s/2,i.point(-s,r),i.point(0,r),i.point(s,r)}else i.point(e[0],e[1])}),[-np,-ip]);function dm(t){return t}function fm(t){return function(e){var n=new gm;for(var i in t)n[i]=t[i];return n.stream=e,n}}function gm(){}function pm(t,e,n){var i=e[1][0]-e[0][0],r=e[1][1]-e[0][1],s=t.clipExtent&&t.clipExtent();t.scale(150).translate([0,0]),null!=s&&t.clipExtent(null),bp(n,t.stream(om));var o=om.result(),a=Math.min(i/(o[1][0]-o[0][0]),r/(o[1][1]-o[0][1])),l=+e[0][0]+(i-a*(o[1][0]+o[0][0]))/2,u=+e[0][1]+(r-a*(o[1][1]+o[0][1]))/2;return null!=s&&t.clipExtent(s),t.scale(150*a).translate([l,u])}gm.prototype={constructor:gm,point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var mm=cp(30*ap);function ym(t,e){return+e?function(t,e){function n(i,r,s,o,a,l,u,h,c,d,f,g,p,m){var y=u-i,_=h-r,v=y*y+_*_;if(v>4*e&&p--){var x=o+d,w=a+f,k=l+g,E=pp(x*x+w*w+k*k),S=_p(k/=E),b=lp(lp(k)-1)<ep||lp(s-c)<ep?(s+c)/2:hp(w,x),C=t(b,S),I=C[0],T=C[1],R=I-i,N=T-r,L=_*R-y*N;(L*L/v>e||lp((y*R+_*N)/v-.5)>.3||o*d+a*f+l*g<mm)&&(n(i,r,s,o,a,l,I,T,b,x/=E,w/=E,k,p,m),m.point(I,T),n(I,T,b,x,w,k,u,h,c,d,f,g,p,m))}}return function(e){var i,r,s,o,a,l,u,h,c,d,f,g,p={point:m,lineStart:y,lineEnd:v,polygonStart:function(){e.polygonStart(),p.lineStart=x},polygonEnd:function(){e.polygonEnd(),p.lineStart=y}};function m(n,i){n=t(n,i),e.point(n[0],n[1])}function y(){h=NaN,p.point=_,e.lineStart()}function _(i,r){var s=Ip([i,r]),o=t(i,r);n(h,c,u,d,f,g,h=o[0],c=o[1],u=i,d=s[0],f=s[1],g=s[2],16,e),e.point(h,c)}function v(){p.point=m,e.lineEnd()}function x(){y(),p.point=w,p.lineEnd=k}function w(t,e){_(i=t,e),r=h,s=c,o=d,a=f,l=g,p.point=_}function k(){n(h,c,u,d,f,g,r,s,i,o,a,l,16,e),p.lineEnd=v,v()}return p}}(t,e):function(t){return fm({point:function(e,n){e=t(e,n),this.stream.point(e[0],e[1])}})}(t)}var _m=fm({point:function(t,e){this.stream.point(t*ap,e*ap)}});function vm(t){return function(t){var e,n,i,r,s,o,a,l,u,h,c=150,d=480,f=250,g=0,p=0,m=0,y=0,_=0,v=null,x=cm,w=null,k=dm,E=.5,S=ym(I,E);function b(t){return[(t=s(t[0]*ap,t[1]*ap))[0]*c+n,i-t[1]*c]}function C(t){return(t=s.invert((t[0]-n)/c,(i-t[1])/c))&&[t[0]*op,t[1]*op]}function I(t,r){return[(t=e(t,r))[0]*c+n,i-t[1]*c]}function T(){s=Pp(r=Ap(m,y,_),e);var t=e(g,p);return n=d-t[0]*c,i=f+t[1]*c,R()}function R(){return u=h=null,b}return b.stream=function(t){return u&&h===t?u:u=_m(x(r,S(k(h=t))))},b.clipAngle=function(t){return arguments.length?(x=+t?function(t,e){var n=cp(t),i=n>0,r=lp(n)>ep;function s(t,e){return cp(t)*cp(e)>n}function o(t,e,i){var r=[1,0,0],s=Rp(Ip(t),Ip(e)),o=Tp(s,s),a=s[0],l=o-a*a;if(!l)return!i&&t;var u=n*o/l,h=-n*a/l,c=Rp(r,s),d=Lp(r,u);Np(d,Lp(s,h));var f=c,g=Tp(d,f),p=Tp(f,f),m=g*g-p*(Tp(d,d)-1);if(!(m<0)){var y=pp(m),_=Lp(f,(-g-y)/p);if(Np(_,d),_=Cp(_),!i)return _;var v,x=t[0],w=e[0],k=t[1],E=e[1];w<x&&(v=x,x=w,w=v);var S=w-x,b=lp(S-np)<ep;if(!b&&E<k&&(v=k,k=E,E=v),b||S<ep?b?k+E>0^_[1]<(lp(_[0]-x)<ep?k:E):k<=_[1]&&_[1]<=E:S>np^(x<=_[0]&&_[0]<=w)){var C=Lp(f,(-g+y)/p);return Np(C,d),[_,Cp(C)]}}}function a(e,n){var r=i?t:np-t,s=0;return e<-r?s|=1:e>r&&(s|=2),n<-r?s|=4:n>r&&(s|=8),s}return lm(s,(function(t){var e,n,l,u,h;return{lineStart:function(){u=l=!1,h=1},point:function(c,d){var f,g=[c,d],p=s(c,d),m=i?p?0:a(c,d):p?a(c+(c<0?np:-np),d):0;if(!e&&(u=l=p)&&t.lineStart(),p!==l&&(!(f=o(e,g))||Bp(e,f)||Bp(g,f))&&(g[0]+=ep,g[1]+=ep,p=s(g[0],g[1])),p!==l)h=0,p?(t.lineStart(),f=o(g,e),t.point(f[0],f[1])):(f=o(e,g),t.point(f[0],f[1]),t.lineEnd()),e=f;else if(r&&e&&i^p){var y;m&n||!(y=o(g,e,!0))||(h=0,i?(t.lineStart(),t.point(y[0][0],y[0][1]),t.point(y[1][0],y[1][1]),t.lineEnd()):(t.point(y[1][0],y[1][1]),t.lineEnd(),t.lineStart(),t.point(y[0][0],y[0][1])))}!p||e&&Bp(e,g)||t.point(g[0],g[1]),e=g,l=p,n=m},lineEnd:function(){l&&t.lineEnd(),e=null},clean:function(){return h|(u&&l)<<1}}}),(function(n,i,r,s){Gp(s,t,e,r,n,i)}),i?[0,-t]:[-np,t-np])}(v=t*ap,6*ap):(v=null,cm),R()):v*op},b.clipExtent=function(t){return arguments.length?(k=null==t?(w=o=a=l=null,dm):Jp(w=+t[0][0],o=+t[0][1],a=+t[1][0],l=+t[1][1]),R()):null==w?null:[[w,o],[a,l]]},b.scale=function(t){return arguments.length?(c=+t,T()):c},b.translate=function(t){return arguments.length?(d=+t[0],f=+t[1],T()):[d,f]},b.center=function(t){return arguments.length?(g=t[0]%360*ap,p=t[1]%360*ap,T()):[g*op,p*op]},b.rotate=function(t){return arguments.length?(m=t[0]%360*ap,y=t[1]%360*ap,_=t.length>2?t[2]%360*ap:0,T()):[m*op,y*op,_*op]},b.precision=function(t){return arguments.length?(S=ym(I,E=t*t),R()):pp(E)},b.fitExtent=function(t,e){return pm(b,t,e)},b.fitSize=function(t,e){return function(t,e,n){return pm(t,[[0,0],e],n)}(b,t,e)},function(){return e=t.apply(this,arguments),b.invert=e.invert&&C,T()}}((function(){return t}))()}function xm(t){return function(e,n){var i=cp(e),r=cp(n),s=t(i*r);return[s*r*gp(e),s*gp(n)]}}function wm(t){return function(e,n){var i=pp(e*e+n*n),r=t(i),s=gp(r),o=cp(r);return[hp(e*s,i*o),_p(i&&n*s/i)]}}var km=xm((function(t){return pp(2/(1+t))}));km.invert=wm((function(t){return 2*_p(t/2)}));var Em=xm((function(t){return(t=yp(t))&&t/gp(t)}));function Sm(t,e){return[t,fp(mp((ip+e)/2))]}function bm(t,e){return[t,e]}function Cm(t,e){var n=cp(e),i=cp(t)*n;return[n*gp(t)/i,gp(e)/i]}function Im(t,e){var n=e*e,i=n*n;return[t*(.8707-.131979*n+i*(i*(.003971*n-.001529*i)-.013791)),e*(1.007226+n*(.015085+i*(.028874*n-.044475-.005916*i)))]}function Tm(t,e){return[cp(e)*gp(t),gp(e)]}function Rm(t,e){var n=cp(e),i=1+cp(t)*n;return[n*gp(t)/i,gp(e)/i]}function Nm(t,e){return[fp(mp((ip+e)/2)),-t]}Em.invert=wm((function(t){return t})),Sm.invert=function(t,e){return[t,2*up(dp(e))-ip]},bm.invert=bm,Cm.invert=wm(up),Im.invert=function(t,e){var n,i=e,r=25;do{var s=i*i,o=s*s;i-=n=(i*(1.007226+s*(.015085+o*(.028874*s-.044475-.005916*o)))-e)/(1.007226+s*(.045255+o*(.259866*s-.311325-.005916*11*o)))}while(lp(n)>ep&&--r>0);return[t/(.8707+(s=i*i)*(s*(s*s*s*(.003971-.001529*s)-.013791)-.131979)),i]},Tm.invert=wm(_p),Rm.invert=wm((function(t){return 2*up(t)})),Nm.invert=function(t,e){return[-e,2*up(dp(t))-ip]};var{BufferOp:Lm,GeoJSONReader:Mm,GeoJSONWriter:Pm}=Zg;function Om(t,e,n){var i=(n=n||{}).units||"kilometers",r=n.steps||8;if(!t)throw new Error("geojson is required");if("object"!==typeof n)throw new Error("options must be an object");if("number"!==typeof r)throw new Error("steps must be an number");if(void 0===e)throw new Error("radius is required");if(r<=0)throw new Error("steps must be greater than 0");var s=[];switch(t.type){case"GeometryCollection":return Vg(t,(function(t){var n=Am(t,e,i,r);n&&s.push(n)})),Yg(s);case"FeatureCollection":return Wg(t,(function(t){var n=Am(t,e,i,r);n&&Wg(n,(function(t){t&&s.push(t)}))})),Yg(s)}return Am(t,e,i,r)}function Am(t,e,n,i){var r=t.properties||{},s="Feature"===t.type?t.geometry:t;if("GeometryCollection"===s.type){var o=[];return Vg(t,(function(t){var r=Am(t,e,n,i);r&&o.push(r)})),Yg(o)}var a=function(t){var e=Kg(t).geometry.coordinates,n=[-e[0],-e[1]];return vm(Em).scale(79.4188).clipAngle(179.999).rotate(n).scale(Fg)}(s),l={type:s.type,coordinates:Dm(s.coordinates,a)},u=(new Mm).read(l),h=Bg(Ug(e,n),"meters"),c=Lm.bufferOp(u,h,i);if(!Fm((c=(new Pm).write(c)).coordinates))return zg({type:c.type,coordinates:zm(c.coordinates,a)},r)}function Fm(t){return Array.isArray(t[0])?Fm(t[0]):isNaN(t[0])}function Dm(t,e){return"object"!==typeof t[0]?e(t):t.map((function(t){return Dm(t,e)}))}function zm(t,e){return"object"!==typeof t[0]?e.invert(t):t.map((function(t){return zm(t,e)}))}function Gm(e){let{map:n,layer:i,zIndex:r}=e;const[s,o]=(0,t.useState)(null),[a,l]=(0,t.useState)(null);(0,t.useEffect)((()=>{if(!n)return;const t=new Jf({url:i.filename,format:new wg}),e=new Jf,s=new Pf({source:t,opacity:1,zIndex:r,style:i.style});return n.addLayer(s),t.once("change",(()=>{if("ready"===t.getState()){const n=t.getFeatures();e.addFeatures(n),l(e)}})),o(t),()=>{n.removeLayer(s)}}),[n,i,r]);return(0,y.jsx)("div",{style:{position:"absolute",bottom:"10px",left:"10px",background:"rgba(255, 255, 255, 0.8)",padding:"10px",borderRadius:"5px",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.1)",zIndex:1e3},children:(0,y.jsx)(Ag,{min:-.9,max:3.2,initialValue:-.9,step:.1,onChange:t=>{var e,n;if(!s||!a)return;const i=a.getFeatures();if(0===i.length)return;const r=i[0].getGeometry().getCoordinates()[0].map((t=>jr(t)));JSON.stringify(r[0])!==JSON.stringify(r[r.length-1])&&r.push(r[0]);const o=Om(jg([r]),t,{units:"meters",joing:"miter"}),l=null===o||void 0===o||null===(e=o.geometry)||void 0===e?void 0:e.coordinates;l&&(null===(n=l[0])||void 0===n?void 0:n.length)<4&&console.warn("Buffer operation resulted in an invalid polygon.");const u=(new wg).readFeature(o,{dataProjection:"EPSG:4326",featureProjection:"EPSG:3857"});s.clear(),s.addFeature(u)}})})}Gm.defaultProps={zIndex:2};const jm=Gm,Ym={filename:"layers/MadawaskaRiver.geojson",style:new fl({fill:new ol({color:"rgba(42, 183, 255, 0.3)"}),stroke:new ll({color:"rgb(42, 183, 255)",width:2})})},Bm=[{filename:"layers/AccessPoints.geojson",style:new fl({image:new rl({radius:8,fill:new ol({color:"rgba(207, 232, 17, 0.431)"}),stroke:new ll({color:"rgba(250, 249, 14, 0.988)",width:1})})}),zIndex:4},{filename:"layers/Campsites.geojson",style:new fl({image:new nl({fill:new ol({color:"rgba(0, 255, 119, 0.5)"}),stroke:new ll({color:"rgba(6, 140, 69, 0.922)",width:1}),points:3,radius:10,angle:0})}),zIndex:3},{filename:"layers/MadRapids.geojson",style:new fl({stroke:new ll({color:"rgb(255, 82, 84)",width:2})})},{filename:"layers/MadRapidsSpot.geojson",style:new fl({image:new rl({radius:10,fill:new ol({color:"rgba(199, 114, 74, 0.478)"}),stroke:new ll({color:"rgba(232, 74, 34, 0.839)",width:2})})})}];const Um=function(){const[e,n]=(0,t.useState)(null);return(0,t.useEffect)((()=>{const t=new Ac({layers:[new _d({source:new Bd})],view:new co({center:[0,0],zoom:2}),controls:[],target:"map"});return n(t),()=>{t.setTarget(null)}}),[]),(0,y.jsxs)("div",{children:[(0,y.jsx)("div",{id:"map",style:{width:"100vw",height:"100vh"}}),e&&(0,y.jsx)(Pg,{map:e,layers:Bm}),e&&(0,y.jsx)(jm,{map:e,layer:Ym,zIndex:1})]})},Xm=()=>(0,y.jsx)("div",{children:(0,y.jsx)(Um,{})}),qm=window.matchMedia("only screen and (max-device-width: 1024px)").matches;let Wm=0;const Vm=function(t){let e=window.scrollY,n=document.getElementById("icons"),i=document.getElementById("nav"),r=document.getElementById("info"),s=null;if(null!=n&&e/window.screen.height<n.offsetTop/window.screen.height&&(i.style.display="none",qm)){function o(){Wm<=0?clearInterval(s):(Wm--,r.style.top=Wm+"vh")}s=setInterval(o,2)}if((null===n||e/window.screen.height>=n.offsetTop/window.screen.height)&&(i.style.display="flex",qm)){function a(){Wm>=8?clearInterval(s):(Wm++,r.style.top=Wm+"vh")}s=setInterval(a,2)}};const Hm=function(t){let e=document.getElementById("info"),n=document.getElementById("infoDiv"),i=!1;e.addEventListener("mouseleave",(function(t){i=!1,e.classList.remove("infoHover"),n.style.display="none"}),!1),e.addEventListener("mouseover",(function(t){i=!0,e.classList.add("infoHover"),n.style.display="block"}),!1),n.addEventListener("mouseleave",(function(t){i=!1,e.classList.remove("infoHover"),n.style.display="none"}),!1),n.addEventListener("mouseover",(function(t){i=!0,e.classList.add("infoHover"),n.style.display="block"}),!1)};const Km=function(){const e=gt();return(0,t.useEffect)((()=>{Vm()}),[e]),(0,t.useEffect)((()=>{Hm()}),[e]),(0,y.jsxs)("div",{children:[(0,y.jsx)("div",{id:"nav",children:(0,y.jsx)(Ae,{linksList:w.icons,style:{position:"fixed",display:"flex"}})}),(0,y.jsx)("div",{id:"info",className:"infoIcon",children:(0,y.jsx)(g,{size:50})}),(0,y.jsx)("div",{id:"infoDiv",className:"popupDiv",children:(0,y.jsxs)("p",{children:["This website is built from scratch using the React web framework, JavaScript, HTML, and CSS. All the code is available on my ",(0,y.jsx)("a",{href:"https://github.com/ga-holmes/ga-holmes.github.io",children:"github"}),". I'll be putting any interesting things I make or do on here, feel free to explore!"]})}),(0,y.jsxs)(Ot,{children:[(0,y.jsx)(Mt,{path:"/",element:(0,y.jsx)($e,{})}),(0,y.jsx)(Mt,{path:"/*",element:(0,y.jsx)(Qe,{})}),(0,y.jsx)(Mt,{path:"/gallery",element:(0,y.jsx)(Je,{})}),(0,y.jsx)(Mt,{path:"/map",element:(0,y.jsx)(Xm,{})})]})]})},Zm=t=>{t&&t instanceof Function&&n.e(453).then(n.bind(n,453)).then((e=>{let{getCLS:n,getFID:i,getFCP:r,getLCP:s,getTTFB:o}=e;n(t),i(t),r(t),s(t),o(t)}))};e.render((0,y.jsx)(t.StrictMode,{children:(0,y.jsx)(ge,{children:(0,y.jsx)(Km,{})})}),document.getElementById("root"),document.addEventListener("scroll",Vm)),Vm(),Zm()})()})();
//# sourceMappingURL=main.0c990fbe.js.map